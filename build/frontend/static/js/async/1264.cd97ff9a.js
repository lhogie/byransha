"use strict";(self.webpackChunklogin_page=self.webpackChunklogin_page||[]).push([["1264"],{5500:function(e,t,r){r.d(t,{G:()=>et});var a=r(7409),n=r(99282),o=r(85893),l=r(59157),i=r(22992),s=r(22561),c=r(38655),d=r(84786),u=r(99469),x=r(67294),p=r(89425),h=r(55327),m=r(60488),f=r(81035),g=r(15858),b=r(54757),v=r(61215),j=r(63852);let y={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:"800px",maxHeight:"80vh",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,display:"flex",flexDirection:"column",overflow:"hidden"},k={display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},w={overflowY:"auto",maxHeight:"calc(80vh - 100px)",width:"100%",scrollbarWidth:"thin",scrollbarColor:"#888 #f1f1f1","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},Z=e=>{let{dataForModal:t,isModalOpen:r,setIsModalOpen:a}=e,[n,l]=(0,x.useTransition)(),i=(0,x.useCallback)(e=>{e.stopPropagation(),l(()=>{a(!0)})},[a]),s=(0,x.useCallback)(e=>{e.stopPropagation(),l(()=>{a(!1)})},[a]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(m.Z,{title:"Show Raw Backend Response",children:(0,o.jsx)("span",{children:(0,o.jsx)(f.Z,{onClick:i,size:"small",sx:{position:"absolute",top:5,right:5,zIndex:10,width:30,height:30,color:"primary.main"},"aria-label":"Show raw JSON",disabled:null==t,children:(0,o.jsx)(h.Z,{})})})}),(0,o.jsx)(g.Z,{open:r,onClose:s,"aria-labelledby":"raw-json-modal-title","aria-describedby":"raw-json-modal-description",children:(0,o.jsxs)(d.Z,{sx:y,children:[(0,o.jsxs)(d.Z,{sx:k,children:[(0,o.jsx)(b.Z,{id:"raw-json-modal-title",variant:"h6",component:"h2",children:"Raw Backend Response"}),(0,o.jsx)(f.Z,{onClick:s,"aria-label":"close",children:(0,o.jsx)(p.Z,{})})]}),(0,o.jsx)(d.Z,{sx:w,children:t?(0,o.jsx)(x.Suspense,{fallback:(0,o.jsx)(v.Z,{}),children:(0,o.jsx)(j.gc,{data:t})}):(0,o.jsx)(b.Z,{children:"No raw data available to display."})})]})})]})},C=e=>{let{code:t,language:r}=e;return(0,o.jsx)("code",{style:{whiteSpace:"pre-wrap",padding:"10px",borderRadius:"5px"},children:t.trim()})};var S=r(63367),N=r(14868),z=r(7230),M=r(70107);let D=e=>{let{allNodes:t,handleButtonClick:r}=e,a=(0,x.useRef)(null),n=(0,M.MG)({count:t.length,estimateSize:()=>56,getScrollElement:()=>a.current,overscan:10});return(0,o.jsx)(d.Z,{ref:a,sx:{height:400,overflowY:"auto",position:"relative",border:"1px solid #e0e0e0",borderRadius:1,p:1},children:(0,o.jsx)(d.Z,{sx:{height:"".concat(n.getTotalSize(),"px"),position:"relative",width:"100%"},children:n.getVirtualItems().map(e=>{let a=t[e.index];if(!a)return null;let n="in"===a.type;return(0,o.jsx)(d.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start,"px)"),display:"flex",alignItems:"center",px:1},children:(0,o.jsxs)(z.Z,{onClick:e=>r(e,a.id),variant:"contained",sx:{bgcolor:n?"#3949ab":"#00897b",color:"#fff","&:hover":{bgcolor:n?"#5c6bc0":"#26a69a"}},children:[a.key," (",a.id,")"]})},e.key)})})})},E=e=>{let{content:t,jumpToNode:r}=e,a=(0,x.useCallback)((e,t)=>{e.stopPropagation(),e.preventDefault(),r(t)},[r]),n=Object.keys(t.ins||{}),l=Object.keys(t.outs||{}),i=[...n.map(e=>({key:e,id:t.ins[e],type:"in"})),...l.map(e=>({key:e,id:t.outs[e],type:"out"}))];return i.length<=50?(0,o.jsxs)(d.Z,{sx:{p:1},children:[(0,o.jsx)(d.Z,{sx:{mb:2},children:n.map(e=>(0,o.jsxs)(z.Z,{onClick:r=>a(r,t.ins[e]),variant:"contained",sx:{bgcolor:"#3949ab",color:"#fff",mr:1,mb:1,"&:hover":{bgcolor:"#5c6bc0"}},children:[e," (",t.ins[e],")"]},e))}),(0,o.jsx)(d.Z,{sx:{paddingY:"10px"},children:l.map(e=>(0,o.jsxs)(z.Z,{onClick:r=>a(r,t.outs[e]),variant:"contained",sx:{bgcolor:"#00897b",color:"#fff",mr:1,mb:1,"&:hover":{bgcolor:"#26a69a"}},children:[e," (",t.outs[e],")"]},e))})]}):(0,o.jsx)(D,{allNodes:i,handleButtonClick:a})};var R=r(58446),_=r(44867),L=r.n(_),T=r(96685);R.Z.use(L());let O=e=>{let{elements:t,style:r,stylesheet:n,layout:l,onNodeClick:i}=e,s=(0,x.useRef)(null),c=(0,x.useRef)(null),d=(0,x.useCallback)(e=>{let t=e.target;i&&i({id:t.id()},e)},[i]),u=(0,x.useCallback)(e=>{let t=e.target;t.style("label",t.data("label"))},[]),p=(0,x.useCallback)(e=>{e.target.style("label","")},[]);return(0,x.useEffect)(()=>{if(!s.current)return;let e=(0,R.Z)({container:s.current,elements:t,style:n||[{selector:"node",style:{"background-color":"data(color)",width:"data(size)",height:"data(size)","text-valign":"top","text-halign":"center","text-margin-y":-5,"font-size":"12px",color:"#000000","text-outline-width":2,"text-outline-color":"#ffffff","z-index":1,label:""}},{selector:"edge",style:{width:2,"line-color":"#cccccc","target-arrow-color":"#cccccc","target-arrow-shape":"triangle","curve-style":"bezier"}}],layout:l||{name:"fcose",animate:!1,samplingType:!1,animationDuration:1500,fit:!0,padding:30}});return c.current=e,e.on("tap","node",d),e.on("mouseover","node",u),e.on("mouseout","node",p),()=>{c.current&&(c.current.destroy(),c.current=null)}},[t,n,l,d,u,p]),(0,x.useEffect)(()=>{if(c.current&&t){c.current.elements().remove(),c.current.add(t);let e=l||{name:"fcose",animate:!1,samplingType:!1,animationDuration:1500,fit:!0,padding:30};c.current.layout(e).run()}},[t,l]),(0,o.jsx)("div",{ref:s,style:(0,a._)({width:"100%",height:"100%"},r)})};R.Z.use(L());let H=(0,x.memo)(e=>{let{data:t}=e,r=(0,x.useMemo)(()=>({tooltip:{trigger:"axis",confine:!0},color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],legend:{data:t.map(e=>e.id),orient:"vertical",right:10,top:"center"},grid:{left:"5%",right:"15%",bottom:"10%",top:"10%",containLabel:!0},xAxis:{type:"value",name:"X Axis",nameLocation:"middle",nameGap:30},yAxis:{type:"value",name:"Y Axis",min:-1,max:1,nameLocation:"middle",nameGap:50},series:t.map(e=>({name:e.id,type:"line",data:e.data.map(e=>[e.x,e.y]),showSymbol:!1,symbolSize:8,emphasis:{focus:"series"},animationDuration:300}))}),[t]);return(0,o.jsx)(T.Z,{lazyUpdate:!0,option:r,style:{height:"100%",minHeight:"300px",width:"100%"}})}),I=(0,x.memo)(e=>{let{prettyName:t,data:r,keys:a}=e,n=(0,x.useMemo)(()=>({tooltip:{confine:!0,trigger:"axis",axisPointer:{type:"shadow"}},grid:{containLabel:!1},xAxis:{data:a,axisLabel:{rotate:45,formatter:e=>e.length>10?"".concat(e.substring(0,10),"..."):e}},yAxis:{type:"value"},series:{name:t,type:"bar",data:a.map(e=>r[e]),emphasis:{focus:"series",blurScope:"coordinateSystem"},animationDuration:300}}),[r,a,t]);return(0,o.jsx)(T.Z,{lazyUpdate:!0,option:n,style:{height:"100%",minHeight:"300px",width:"100%"}})}),P=(0,x.memo)(e=>{let{data:t,onNodeClick:r}=e,a=(0,x.useMemo)(()=>t,[t]),n=(0,x.useMemo)(()=>[...a.nodes.map(e=>({data:{id:e.id,label:e.label,size:e.size||30,color:e.color||"#1f77b4",x:e.x,y:e.y}})),...a.links.map(e=>({data:{id:"".concat(e.source,"-").concat(e.target),source:e.source,target:e.target}}))],[a]),l=(0,x.useMemo)(()=>[{selector:"node",style:{"background-color":"data(color)",width:"data(size)",height:"data(size)","text-valign":"top","text-halign":"center","text-margin-y":-5,"font-size":"12px",color:"#000000","text-outline-width":2,"text-outline-color":"#ffffff","z-index":1,label:""}},{selector:"edge",style:{width:2,"line-color":"#cccccc","target-arrow-color":"#cccccc","target-arrow-shape":"triangle","curve-style":"bezier"}}],[]);return(0,o.jsx)(d.Z,{sx:{height:"100%",minHeight:"300px",width:"100%"},children:(0,o.jsx)(O,{elements:n,style:{width:"100%",height:"100%"},stylesheet:l,layout:{name:a.nodes.length>1e3?"random":"fcose",animate:!1,samplingType:!1,animationDuration:1500,fit:!0,padding:30},onNodeClick:r})})}),A=e=>{let{viewId:t,content:r,onNodeClick:l,prettyName:i}=e,s=(0,x.useCallback)(e=>{if(!e)return[];let t=[];for(let r of Object.keys(e)){let a=(null==e?void 0:e[r])||{},n={id:r,data:a.map(e=>{let t=Object.keys(e)[0];return{x:parseFloat(t),y:parseFloat(e[t])}})};t.push(n)}return t},[]),c=(0,x.useCallback)(e=>{if(!e)return{};let t={};for(let r of Object.values(e))for(let e of Object.keys(r))t[e]=(null==r?void 0:r[e])||{};return t},[]),d=(0,x.useCallback)(e=>{if(!e||0===Object.values(e).length)return[];let t=new Set;return Object.values(e).forEach(e=>{Object.keys(e).forEach(e=>t.add(e))}),Array.from(t).sort()},[]),u=(0,x.useCallback)(e=>{if(!e||!e.nodes)return{nodes:[],links:[]};let t=new Map;e.nodes.forEach(e=>{let r=e.id||e.label,o=(0,n._)((0,a._)({},e),{id:r,label:e.label||r,size:e.size||30,color:e.color||"#1f77b4"});t.has(o.id)||t.set(o.id,o)});let r=e.links.map(e=>{let t="object"==typeof e.source?e.source.id||e.source.label:e.source,r="object"==typeof e.target?e.target.id||e.target.label:e.target;return(0,n._)((0,a._)({},e),{source:t,target:r})});return{nodes:Array.from(t.values()),links:r}},[]),p=(0,x.useCallback)((e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),(null==e?void 0:e.id)&&l(e.id.includes("@")?e.id.split("@")[1]:e.id)},[l]);if("char_example_xy"===t){let e=s(r);return(0,o.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},onKeyDown:e=>{e.stopPropagation(),e.preventDefault()},children:(0,o.jsx)(x.Suspense,{fallback:(0,o.jsx)(v.Z,{}),children:(0,o.jsx)(H,{data:e})})})}if(t.endsWith("_distribution")){let e=c(r),t=d(r);return(0,o.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},onKeyDown:e=>{e.stopPropagation(),e.preventDefault()},children:(0,o.jsx)(x.Suspense,{fallback:(0,o.jsx)(v.Z,{}),children:(0,o.jsx)(I,{prettyName:i,data:e,keys:t})})})}if(!t.endsWith("nivo_view"))return null;{let e=u(r);return(0,o.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},onKeyDown:e=>{e.stopPropagation(),e.preventDefault()},children:(0,o.jsx)(x.Suspense,{fallback:(0,o.jsx)(v.Z,{}),children:(0,o.jsx)(P,{data:e,onNodeClick:p})})})}};var F=r(32153),W=r(89717),Y=r(15648),G=r(64651);let B=e=>{let{content:t}=e,r=(0,x.useRef)(null),[a,n]=(0,x.useState)(0),l=(0,x.useMemo)(()=>{var e;return(null==t||null==(e=t.attributes)?void 0:e.filter(e=>"graph"!==e.name))||[]},[null==t?void 0:t.attributes]);(0,x.useEffect)(()=>{let e=()=>{r.current&&n(r.current.offsetWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let i=(0,x.useMemo)(()=>0===a?1:a>=600?2:1,[a]),s=(0,x.useMemo)(()=>{let e=[];for(let t=0;t<l.length;t+=i)e.push(l.slice(t,t+i));return e},[l,i]),c=(0,M.MG)({count:s.length,getScrollElement:()=>r.current,estimateSize:(0,x.useCallback)(()=>300,[]),overscan:2}),u=(0,x.useCallback)(e=>{var t;let r=(null==(t=e.mimeType)?void 0:t.startsWith("image/"))&&e.value,a=Object.hasOwn(e,"value")&&null!==e.value&&void 0!==e.value;return(0,o.jsx)(F.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",height:260,maxHeight:260},children:(0,o.jsxs)(W.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,o.jsx)(b.Z,{variant:"h6",component:"div",sx:{wordBreak:"break-word"},children:e.name}),r&&(0,o.jsx)(Y.Z,{component:"img",sx:{maxHeight:200,width:"auto",objectFit:"contain",mt:1,border:"1px solid #eee"},image:"data:".concat(e.mimeType,";base64,").concat(e.value),alt:"Output value for ".concat(e.name)}),!r&&a&&(0,o.jsx)(b.Z,{variant:"body2",component:"pre",sx:{whiteSpace:"pre-wrap",wordBreak:"break-all",mt:1,p:1,backgroundColor:"#f5f5f5",borderRadius:1,overflow:"auto",maxHeight:160},children:"object"==typeof e.value?JSON.stringify(e.value,null,2):String(e.value)}),!a&&!r&&(0,o.jsx)(b.Z,{variant:"body2",sx:{fontStyle:"italic",mt:1,p:1,backgroundColor:"#f5f5f5",borderRadius:1,flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:40},children:"(No displayable value)"})]})})},[]);return Array.isArray(null==t?void 0:t.attributes)?(null==t?void 0:t.attributes.length)===0?(0,o.jsx)(b.Z,{sx:{p:2},children:"No output nodes connected."}):(0,o.jsx)(d.Z,{ref:r,sx:{height:"400px",overflow:"auto",p:1,width:"100%"},children:(0,o.jsx)(d.Z,{sx:{height:"".concat(c.getTotalSize(),"px"),width:"100%",position:"relative"},children:c.getVirtualItems().map(e=>{let t=s[e.index];return t?(0,o.jsx)(d.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start,"px)")},children:(0,o.jsx)(G.Z,{container:!0,spacing:2,sx:{width:"100%"},children:t.map(e=>(0,o.jsx)(G.Z,{size:{xs:12,sm:6},sx:{display:"flex"},children:u(e)},e.id))})},e.key):null})})}):(0,o.jsxs)(b.Z,{sx:{p:2},color:"error",children:["Error: Expected an array for 'class_attribute_field' data, but received type ",typeof(null==t?void 0:t.attributes),"."]})};var V=r(34159),U=r(57966),K=r(77674),X=r(89126),Q=r(70139),J=r(40519);let q=e=>{let{chart:t}=e,r=(0,x.useRef)(null),a=(0,x.useRef)(null),[n,l]=(0,x.useState)(1),[i,s]=(0,x.useState)({x:0,y:0}),[c,u]=(0,x.useState)(!1),[p,h]=(0,x.useState)({x:0,y:0});(0,x.useEffect)(()=>{J.Z.initialize({startOnLoad:!1,theme:"dark",securityLevel:"loose",fontFamily:"Fira Code"})},[]),(0,x.useEffect)(()=>{(async()=>{if(a.current&&t)try{let e="mermaid-".concat(Date.now());a.current.innerHTML="";let{svg:r}=await J.Z.render(e,t);a.current.innerHTML=r,l(1),s({x:0,y:0})}catch(e){console.error("Mermaid rendering error:",e),a.current.innerHTML='<div style="color: red; padding: 20px;">Error rendering diagram: '.concat(e,"</div>")}})()},[t]),(0,x.useEffect)(()=>{let e=r.current;if(!e)return;let t=e=>{e.preventDefault()};return e.addEventListener("wheel",t,{passive:!1}),()=>{e.removeEventListener("wheel",t)}},[]);let g=(0,x.useCallback)(()=>{l(e=>Math.min(1.2*e,3))},[]),v=(0,x.useCallback)(()=>{l(e=>Math.max(e/1.2,.3))},[]),j=(0,x.useCallback)(()=>{l(1),s({x:0,y:0})},[]),y=(0,x.useCallback)(e=>{0===e.button&&(u(!0),h({x:e.clientX-i.x,y:e.clientY-i.y}))},[i]),k=(0,x.useCallback)(e=>{c&&s({x:e.clientX-p.x,y:e.clientY-p.y})},[c,p]),w=(0,x.useCallback)(()=>{u(!1)},[]),Z=(0,x.useCallback)(e=>{if(r.current){let t=r.current.getBoundingClientRect(),a=t.width/2,o=t.height/2,i=e.deltaY>0?.9:1.1,c=Math.max(.3,Math.min(10,n*i)),d=e.clientX-t.left,u=e.clientY-t.top,x=(d-a)*(1-i),p=(u-o)*(1-i);l(c),s(e=>({x:e.x+x,y:e.y+p}))}},[n]);return(0,o.jsxs)(X.Z,{elevation:2,sx:{height:600,width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,o.jsxs)(Q.Z,{variant:"dense",sx:{backgroundColor:"background.paper",borderBottom:1,borderColor:"divider",minHeight:48},children:[(0,o.jsx)(b.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Mermaid Diagram"}),(0,o.jsxs)(d.Z,{sx:{display:"flex",gap:1},children:[(0,o.jsx)(m.Z,{title:"Zoom In",children:(0,o.jsx)(f.Z,{onClick:g,size:"small",children:(0,o.jsx)(V.Z,{})})}),(0,o.jsx)(m.Z,{title:"Zoom Out",children:(0,o.jsx)(f.Z,{onClick:v,size:"small",children:(0,o.jsx)(U.Z,{})})}),(0,o.jsx)(m.Z,{title:"Reset View",children:(0,o.jsx)(f.Z,{onClick:j,size:"small",children:(0,o.jsx)(K.Z,{})})})]})]}),(0,o.jsxs)(d.Z,{ref:r,sx:{flex:1,overflow:"hidden",cursor:c?"grabbing":"grab",backgroundColor:"background.default",position:"relative",userSelect:"none"},onMouseDown:y,onMouseMove:k,onMouseUp:w,onMouseLeave:w,onWheel:Z,children:[(0,o.jsx)(d.Z,{ref:a,sx:{transform:"translate(".concat(i.x,"px, ").concat(i.y,"px) scale(").concat(n,")"),transformOrigin:"center center",transition:c?"none":"transform 0.1s ease-out",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:0,left:0,"& svg":{maxWidth:"none",maxHeight:"none",pointerEvents:"none"}}}),(0,o.jsxs)(d.Z,{sx:{position:"absolute",bottom:16,right:16,backgroundColor:"background.paper",px:1,py:.5,borderRadius:1,fontSize:"0.75rem",opacity:.8},children:[Math.round(100*n),"%"]})]})]})},$=e=>{let{viewId:t,content:r,contentType:a,backgroundColor:n,jumpToNode:l,hexColor:i,onHexColorChange:s,prettyName:c}=e,d=(0,x.useRef)(null),u=(0,x.useCallback)(()=>{"text/dot"===a&&d.current&&(0,S.f)(d.current,{engine:"dot",fit:!0,zoom:!0}).renderDot(r)},[r,a]);if((0,x.useEffect)(()=>{u()},[u]),!r)return(0,o.jsx)("div",{className:"error-message",children:"No content available."});if("application/json"===a)if("class_attribute_field"===t)return(0,o.jsx)(B,{content:r});else if("char_example_xy"===t||t.endsWith("_distribution")||t.endsWith("nivo_view"))return(0,o.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},onKeyDown:e=>{e.stopPropagation(),e.preventDefault()},children:(0,o.jsx)(x.Suspense,{fallback:(0,o.jsx)(v.Z,{}),children:(0,o.jsx)(A,{viewId:t,content:r,onNodeClick:l,prettyName:c})})});else if("bnode_navigator"===t)return(0,o.jsx)(E,{content:r,jumpToNode:l});else return(0,o.jsx)("div",{className:"content-container",style:{background:n},children:(0,o.jsx)(x.Suspense,{fallback:(0,o.jsx)(v.Z,{}),children:(0,o.jsx)(j.gc,{data:r,shouldExpandNode:j.T})})});if("text/dot"===a)return(0,o.jsx)("div",{className:"content-container graphviz-container",style:{background:n},children:(0,o.jsx)("div",{ref:d})});if("text/mermaid"===a)return(0,o.jsx)("div",{className:"mermaid-container",style:{background:n,width:"100%",height:"600px",overflow:"hidden",position:"relative",padding:0,margin:0,borderRadius:"4px"},children:(0,o.jsx)(q,{chart:r})});if("text/html"===a)return(0,o.jsx)("div",{className:"content-container html-content",style:{background:n},children:(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})});if("image/svg"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:"transparent"},children:(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:r},style:{background:"transparent"}})});else if("image/svg+xml"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:"transparent"},children:(0,o.jsx)("img",{src:"data:image/svg+xml;base64,".concat(r),alt:"Graphviz",style:{background:"transparent"}})});else if("image/png"===a||"image/jpeg"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:n},children:(0,o.jsx)("img",{src:"data:".concat(a,";base64,").concat(r),alt:"Content"})});else if("image/jsondot"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:n},children:(0,o.jsx)(x.Suspense,{fallback:(0,o.jsx)(v.Z,{}),children:(0,o.jsx)(j.gc,{data:r})})});else if("text/java"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:n},children:(0,o.jsx)(x.Suspense,{fallback:(0,o.jsx)(v.Z,{}),children:(0,o.jsx)(C,{language:"java",code:r})})});else if("text/hex"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:n},children:(0,o.jsx)(N.AI,{color:i,disableAlpha:!0,onChangeComplete:s})});else return(0,o.jsxs)("div",{className:"error-message",children:["Unsupported content type: ",a]})},ee=e=>{var t,r;let{loading:a,error:n,rawApiData:l,dataContent:i,backgroundColor:s,jumpToNode:c,hexColor:u,onHexColorChange:p,viewId:h}=e,m=(0,x.useMemo)(()=>{var e,t,r;return null==i||null==(r=i.results)||null==(t=r[0])||null==(e=t.result)?void 0:e.data},[i]),f=(0,x.useMemo)(()=>{var e,t,r,a,n;return null==i||null==(n=i.results)||null==(a=n[0])||null==(r=a.result)||null==(t=r.contentType)||null==(e=t.split(";"))?void 0:e[0]},[i]),g=(0,x.useMemo)(()=>{var e,t;return null==i||null==(t=i.results)||null==(e=t[0])?void 0:e.pretty_name},[i]);return a?(0,o.jsx)(d.Z,{className:"view-container",sx:{position:"relative",padding:2,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px"},children:(0,o.jsx)(v.Z,{})}):n?(0,o.jsx)(d.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:(0,o.jsxs)("div",{className:"error-message",style:{marginTop:"40px"},children:["Error fetching data: ",n.message]})}):l?(null==i||null==(r=i.results)||null==(t=r[0])?void 0:t.error)!==void 0?(0,o.jsx)(d.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:(0,o.jsxs)("div",{className:"error-message",style:{marginTop:"40px"},children:["Backend Error: ",i.results[0].error]})}):m&&f?(0,o.jsx)(d.Z,{sx:{position:"relative",padding:2,flex:1,minHeight:"300px",display:"flex",flexDirection:"column",overflow:"hidden"},children:(0,o.jsx)(d.Z,{sx:{mt:4,flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},children:(0,o.jsx)($,{viewId:h,content:m,contentType:f,backgroundColor:s,jumpToNode:c,hexColor:u,onHexColorChange:p,prettyName:g})})}):(0,o.jsx)(d.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:(0,o.jsx)("div",{className:"error-message",style:{marginTop:"40px"},children:"Result data or content type missing in the response."})}):(0,o.jsx)(d.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:(0,o.jsx)("div",{className:"error-message",style:{marginTop:"40px"},children:"No data available."})})},et=(0,x.memo)(e=>{let{viewId:t,sx:r}=e,{data:p,isLoading:h,error:m,refetch:f}=(0,c.m_)(t,{},{staleTime:3e4,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),g=(0,u.NL)(),{isLoading:b,withLoading:v}=(0,i.$C)(),[j,y,k]=(0,s.av)(!1,{transitionUpdates:!0}),[w,C,S]=(0,s.av)("#ffffff",{transitionUpdates:!0,debounceMs:300}),[N,z,M]=(0,s.av)(null,{transitionUpdates:!0}),D=(0,s.pQ)(t),E=(0,s.pQ)(w),[R]=(0,s.m9)(w,500),_=(0,c.uC)("update_colour",{onSuccess:()=>{(0,s.Le)(()=>{g.setQueryData(["apiData",t],e=>{var t;return e?(0,n._)((0,a._)({},e),{data:(0,n._)((0,a._)({},e.data),{results:null==(t=e.data.results)?void 0:t.map(e=>(0,n._)((0,a._)({},e),{color:R}))})}):e}),z(null)})},onError:e=>{console.error("Failed to save color:",e),(0,s.Le)(()=>{z("Failed to save color changes"),C("#ffffff")})}}),L=(0,c.uC)("jump",{onSuccess:async()=>{(0,s.Le)(()=>{g.invalidateQueries({queryKey:["apiData"]}),z(null)})},onError:e=>{console.error("Failed to jump to node:",e),(0,s.Le)(()=>{z("Failed to navigate to node")})}}),T=(0,x.useCallback)(e=>{C(e.hex)},[C]);(0,x.useEffect)(()=>{"#ffffff"!==R&&R!==w&&v(async()=>{try{await _.mutateAsync({view_id:D,value:R})}catch(e){console.error("Color update failed:",e)}})},[R,D,_,v,w]);let O=(0,x.useCallback)(e=>{v(async()=>{try{await L.mutateAsync({node_id:e})}catch(e){console.error("Jump to node failed:",e)}})},[L,v]),H=(0,x.useCallback)(e=>{(0,s.Le)(()=>{y(e)})},[y]),I=(0,x.useCallback)(()=>{v(async()=>{try{await f(),z(null)}catch(e){console.error("Retry failed:",e),z("Retry failed. Please try again.")}})},[f,v,z]),{dataContent:P,exportData:A,backgroundColor:F}=(0,x.useMemo)(()=>{try{var e,t,a,n;let o=null==p?void 0:p.data,l=null==p||null==(n=p.data)||null==(a=n.results)||null==(t=a[0])||null==(e=t.result)?void 0:e.data,i=(null==r?void 0:r.bgcolor)||"transparent";return{dataContent:o,exportData:l,backgroundColor:i}}catch(e){return console.error("Error processing view data:",e),z("Error processing view data"),{dataContent:void 0,exportData:void 0,backgroundColor:(null==r?void 0:r.bgcolor)||"transparent"}}},[p,null==r?void 0:r.bgcolor,z]),W=(0,x.useCallback)(e=>{let{error:r,resetError:a}=e;return(0,o.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"200px",padding:2,border:"1px solid #e0e0e0",borderRadius:1,backgroundColor:"#fafafa"},children:[(0,o.jsxs)(d.Z,{sx:{textAlign:"center",mb:2},children:[(0,o.jsx)(d.Z,{component:"span",sx:{fontSize:"2rem",color:"#f44336"},children:"⚠️"}),(0,o.jsxs)(d.Z,{sx:{mt:1,color:"#666",fontSize:"0.875rem"},children:["Failed to load view: ",t]}),!1,N&&(0,o.jsx)(d.Z,{sx:{mt:1,color:"#f44336",fontSize:"0.75rem"},children:N})]}),(0,o.jsxs)(d.Z,{sx:{display:"flex",gap:1},children:[(0,o.jsx)("button",{type:"button",onClick:()=>{a(),z(null)},style:{padding:"8px 16px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem"},children:"Retry"}),(0,o.jsx)("button",{type:"button",onClick:I,style:{padding:"8px 16px",backgroundColor:"#f57c00",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem"},children:"Refetch Data"})]})]})},[t,N,I,z]),Y=b||k||S||M;return(0,o.jsx)(l.ZP,{fallback:(0,o.jsx)(W,{error:Error("View render error"),resetError:()=>window.location.reload()}),onError:(e,r)=>{console.error("View ".concat(t," error:"),e,r),z("Render error: ".concat(e.message))},resetKeys:[t],children:(0,o.jsxs)(d.Z,{className:"view-container",sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",opacity:Y?.8:1,transition:"opacity 0.2s ease-in-out"},children:[N&&(0,o.jsx)(d.Z,{sx:{position:"absolute",top:8,left:"50%",transform:"translateX(-50%)",zIndex:1e3,bgcolor:"error.main",color:"white",px:2,py:1,borderRadius:1,fontSize:"0.75rem"},children:N}),(0,o.jsx)(l.ZP,{fallback:(0,o.jsx)("div",{children:"Error loading modal"}),onError:e=>{console.error("Modal error:",e),z("Modal failed to load")},children:(0,o.jsx)(x.Suspense,{fallback:null,children:(0,o.jsx)(Z,{dataForModal:A,isModalOpen:j,setIsModalOpen:H})})}),(0,o.jsx)(l.ZP,{fallback:(0,o.jsx)(W,{error:Error("View content error"),resetError:I}),onError:(e,t)=>{console.error("View content error:",e,t),z("Content error: ".concat(e.message))},children:(0,o.jsx)(x.Suspense,{fallback:(0,o.jsx)(i.vj.Component,{message:"Loading ".concat(D,"...")}),children:(0,o.jsx)(ee,{loading:h,error:m,rawApiData:p,dataContent:P,backgroundColor:F,jumpToNode:O,hexColor:E,onHexColorChange:T,viewId:D})})}),Y&&(0,o.jsx)(d.Z,{sx:{position:"absolute",top:8,right:8,zIndex:10},children:(0,o.jsx)(i.vj.Inline,{text:""})})]})})});et.displayName="View"},22826:function(e,t,r){r.d(t,{Z:()=>n});var a=r(67294);let n=e=>{let t="undefined"!=typeof document,r=(0,a.useRef)(t?document.title:null);(0,a.useEffect)(()=>{if(t)return document.title!==e&&(document.title=e),()=>{document.title=r.current}},[t,e])}}}]);
//# sourceMappingURL=1264.cd97ff9a.js.map