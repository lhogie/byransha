{"version":3,"file":"static/js/async/1475.acb67cec.js","sources":["webpack://login_page/./node_modules/mermaid/dist/chunks/mermaid.core/architectureDiagram-KFL7JDKH.mjs","webpack://login_page/./node_modules/mermaid/dist/chunks/mermaid.core/chunk-ANTBXLJU.mjs"],"sourcesContent":["import {\n  createText,\n  getIconSVG,\n  registerIconPacks,\n  unknownIcon\n} from \"./chunk-62K37W7T.mjs\";\nimport {\n  populateCommonDb\n} from \"./chunk-ANTBXLJU.mjs\";\nimport {\n  cleanAndMerge\n} from \"./chunk-U37J5Y7L.mjs\";\nimport {\n  selectSvgElement\n} from \"./chunk-T57MJCP2.mjs\";\nimport {\n  __name,\n  clear,\n  defaultConfig_default,\n  getAccDescription,\n  getAccTitle,\n  getConfig,\n  getConfig2,\n  getDiagramTitle,\n  log,\n  sanitizeText,\n  setAccDescription,\n  setAccTitle,\n  setDiagramTitle,\n  setupGraphViewbox\n} from \"./chunk-VIW5F6AA.mjs\";\n\n// src/diagrams/architecture/architectureParser.ts\nimport { parse } from \"@mermaid-js/parser\";\n\n// src/diagrams/architecture/architectureTypes.ts\nvar ArchitectureDirectionName = {\n  L: \"left\",\n  R: \"right\",\n  T: \"top\",\n  B: \"bottom\"\n};\nvar ArchitectureDirectionArrow = {\n  L: /* @__PURE__ */ __name((scale) => `${scale},${scale / 2} 0,${scale} 0,0`, \"L\"),\n  R: /* @__PURE__ */ __name((scale) => `0,${scale / 2} ${scale},0 ${scale},${scale}`, \"R\"),\n  T: /* @__PURE__ */ __name((scale) => `0,0 ${scale},0 ${scale / 2},${scale}`, \"T\"),\n  B: /* @__PURE__ */ __name((scale) => `${scale / 2},0 ${scale},${scale} 0,${scale}`, \"B\")\n};\nvar ArchitectureDirectionArrowShift = {\n  L: /* @__PURE__ */ __name((orig, arrowSize) => orig - arrowSize + 2, \"L\"),\n  R: /* @__PURE__ */ __name((orig, _arrowSize) => orig - 2, \"R\"),\n  T: /* @__PURE__ */ __name((orig, arrowSize) => orig - arrowSize + 2, \"T\"),\n  B: /* @__PURE__ */ __name((orig, _arrowSize) => orig - 2, \"B\")\n};\nvar getOppositeArchitectureDirection = /* @__PURE__ */ __name(function(x) {\n  if (isArchitectureDirectionX(x)) {\n    return x === \"L\" ? \"R\" : \"L\";\n  } else {\n    return x === \"T\" ? \"B\" : \"T\";\n  }\n}, \"getOppositeArchitectureDirection\");\nvar isArchitectureDirection = /* @__PURE__ */ __name(function(x) {\n  const temp = x;\n  return temp === \"L\" || temp === \"R\" || temp === \"T\" || temp === \"B\";\n}, \"isArchitectureDirection\");\nvar isArchitectureDirectionX = /* @__PURE__ */ __name(function(x) {\n  const temp = x;\n  return temp === \"L\" || temp === \"R\";\n}, \"isArchitectureDirectionX\");\nvar isArchitectureDirectionY = /* @__PURE__ */ __name(function(x) {\n  const temp = x;\n  return temp === \"T\" || temp === \"B\";\n}, \"isArchitectureDirectionY\");\nvar isArchitectureDirectionXY = /* @__PURE__ */ __name(function(a, b) {\n  const aX_bY = isArchitectureDirectionX(a) && isArchitectureDirectionY(b);\n  const aY_bX = isArchitectureDirectionY(a) && isArchitectureDirectionX(b);\n  return aX_bY || aY_bX;\n}, \"isArchitectureDirectionXY\");\nvar isArchitecturePairXY = /* @__PURE__ */ __name(function(pair) {\n  const lhs = pair[0];\n  const rhs = pair[1];\n  const aX_bY = isArchitectureDirectionX(lhs) && isArchitectureDirectionY(rhs);\n  const aY_bX = isArchitectureDirectionY(lhs) && isArchitectureDirectionX(rhs);\n  return aX_bY || aY_bX;\n}, \"isArchitecturePairXY\");\nvar isValidArchitectureDirectionPair = /* @__PURE__ */ __name(function(x) {\n  return x !== \"LL\" && x !== \"RR\" && x !== \"TT\" && x !== \"BB\";\n}, \"isValidArchitectureDirectionPair\");\nvar getArchitectureDirectionPair = /* @__PURE__ */ __name(function(sourceDir, targetDir) {\n  const pair = `${sourceDir}${targetDir}`;\n  return isValidArchitectureDirectionPair(pair) ? pair : void 0;\n}, \"getArchitectureDirectionPair\");\nvar shiftPositionByArchitectureDirectionPair = /* @__PURE__ */ __name(function([x, y], pair) {\n  const lhs = pair[0];\n  const rhs = pair[1];\n  if (isArchitectureDirectionX(lhs)) {\n    if (isArchitectureDirectionY(rhs)) {\n      return [x + (lhs === \"L\" ? -1 : 1), y + (rhs === \"T\" ? 1 : -1)];\n    } else {\n      return [x + (lhs === \"L\" ? -1 : 1), y];\n    }\n  } else {\n    if (isArchitectureDirectionX(rhs)) {\n      return [x + (rhs === \"L\" ? 1 : -1), y + (lhs === \"T\" ? 1 : -1)];\n    } else {\n      return [x, y + (lhs === \"T\" ? 1 : -1)];\n    }\n  }\n}, \"shiftPositionByArchitectureDirectionPair\");\nvar getArchitectureDirectionXYFactors = /* @__PURE__ */ __name(function(pair) {\n  if (pair === \"LT\" || pair === \"TL\") {\n    return [1, 1];\n  } else if (pair === \"BL\" || pair === \"LB\") {\n    return [1, -1];\n  } else if (pair === \"BR\" || pair === \"RB\") {\n    return [-1, -1];\n  } else {\n    return [-1, 1];\n  }\n}, \"getArchitectureDirectionXYFactors\");\nvar getArchitectureDirectionAlignment = /* @__PURE__ */ __name(function(a, b) {\n  if (isArchitectureDirectionXY(a, b)) {\n    return \"bend\";\n  } else if (isArchitectureDirectionX(a)) {\n    return \"horizontal\";\n  }\n  return \"vertical\";\n}, \"getArchitectureDirectionAlignment\");\nvar isArchitectureService = /* @__PURE__ */ __name(function(x) {\n  const temp = x;\n  return temp.type === \"service\";\n}, \"isArchitectureService\");\nvar isArchitectureJunction = /* @__PURE__ */ __name(function(x) {\n  const temp = x;\n  return temp.type === \"junction\";\n}, \"isArchitectureJunction\");\nvar edgeData = /* @__PURE__ */ __name((edge) => {\n  return edge.data();\n}, \"edgeData\");\nvar nodeData = /* @__PURE__ */ __name((node) => {\n  return node.data();\n}, \"nodeData\");\n\n// src/diagrams/architecture/architectureDb.ts\nvar DEFAULT_ARCHITECTURE_CONFIG = defaultConfig_default.architecture;\nvar ArchitectureDB = class {\n  constructor() {\n    this.nodes = {};\n    this.groups = {};\n    this.edges = [];\n    this.registeredIds = {};\n    this.elements = {};\n    this.setAccTitle = setAccTitle;\n    this.getAccTitle = getAccTitle;\n    this.setDiagramTitle = setDiagramTitle;\n    this.getDiagramTitle = getDiagramTitle;\n    this.getAccDescription = getAccDescription;\n    this.setAccDescription = setAccDescription;\n    this.clear();\n  }\n  static {\n    __name(this, \"ArchitectureDB\");\n  }\n  clear() {\n    this.nodes = {};\n    this.groups = {};\n    this.edges = [];\n    this.registeredIds = {};\n    this.dataStructures = void 0;\n    this.elements = {};\n    clear();\n  }\n  addService({\n    id,\n    icon,\n    in: parent,\n    title,\n    iconText\n  }) {\n    if (this.registeredIds[id] !== void 0) {\n      throw new Error(\n        `The service id [${id}] is already in use by another ${this.registeredIds[id]}`\n      );\n    }\n    if (parent !== void 0) {\n      if (id === parent) {\n        throw new Error(`The service [${id}] cannot be placed within itself`);\n      }\n      if (this.registeredIds[parent] === void 0) {\n        throw new Error(\n          `The service [${id}]'s parent does not exist. Please make sure the parent is created before this service`\n        );\n      }\n      if (this.registeredIds[parent] === \"node\") {\n        throw new Error(`The service [${id}]'s parent is not a group`);\n      }\n    }\n    this.registeredIds[id] = \"node\";\n    this.nodes[id] = {\n      id,\n      type: \"service\",\n      icon,\n      iconText,\n      title,\n      edges: [],\n      in: parent\n    };\n  }\n  getServices() {\n    return Object.values(this.nodes).filter(isArchitectureService);\n  }\n  addJunction({ id, in: parent }) {\n    this.registeredIds[id] = \"node\";\n    this.nodes[id] = {\n      id,\n      type: \"junction\",\n      edges: [],\n      in: parent\n    };\n  }\n  getJunctions() {\n    return Object.values(this.nodes).filter(isArchitectureJunction);\n  }\n  getNodes() {\n    return Object.values(this.nodes);\n  }\n  getNode(id) {\n    return this.nodes[id] ?? null;\n  }\n  addGroup({ id, icon, in: parent, title }) {\n    if (this.registeredIds?.[id] !== void 0) {\n      throw new Error(\n        `The group id [${id}] is already in use by another ${this.registeredIds[id]}`\n      );\n    }\n    if (parent !== void 0) {\n      if (id === parent) {\n        throw new Error(`The group [${id}] cannot be placed within itself`);\n      }\n      if (this.registeredIds?.[parent] === void 0) {\n        throw new Error(\n          `The group [${id}]'s parent does not exist. Please make sure the parent is created before this group`\n        );\n      }\n      if (this.registeredIds?.[parent] === \"node\") {\n        throw new Error(`The group [${id}]'s parent is not a group`);\n      }\n    }\n    this.registeredIds[id] = \"group\";\n    this.groups[id] = {\n      id,\n      icon,\n      title,\n      in: parent\n    };\n  }\n  getGroups() {\n    return Object.values(this.groups);\n  }\n  addEdge({\n    lhsId,\n    rhsId,\n    lhsDir,\n    rhsDir,\n    lhsInto,\n    rhsInto,\n    lhsGroup,\n    rhsGroup,\n    title\n  }) {\n    if (!isArchitectureDirection(lhsDir)) {\n      throw new Error(\n        `Invalid direction given for left hand side of edge ${lhsId}--${rhsId}. Expected (L,R,T,B) got ${String(lhsDir)}`\n      );\n    }\n    if (!isArchitectureDirection(rhsDir)) {\n      throw new Error(\n        `Invalid direction given for right hand side of edge ${lhsId}--${rhsId}. Expected (L,R,T,B) got ${String(rhsDir)}`\n      );\n    }\n    if (this.nodes[lhsId] === void 0 && this.groups[lhsId] === void 0) {\n      throw new Error(\n        `The left-hand id [${lhsId}] does not yet exist. Please create the service/group before declaring an edge to it.`\n      );\n    }\n    if (this.nodes[rhsId] === void 0 && this.groups[rhsId] === void 0) {\n      throw new Error(\n        `The right-hand id [${rhsId}] does not yet exist. Please create the service/group before declaring an edge to it.`\n      );\n    }\n    const lhsGroupId = this.nodes[lhsId].in;\n    const rhsGroupId = this.nodes[rhsId].in;\n    if (lhsGroup && lhsGroupId && rhsGroupId && lhsGroupId == rhsGroupId) {\n      throw new Error(\n        `The left-hand id [${lhsId}] is modified to traverse the group boundary, but the edge does not pass through two groups.`\n      );\n    }\n    if (rhsGroup && lhsGroupId && rhsGroupId && lhsGroupId == rhsGroupId) {\n      throw new Error(\n        `The right-hand id [${rhsId}] is modified to traverse the group boundary, but the edge does not pass through two groups.`\n      );\n    }\n    const edge = {\n      lhsId,\n      lhsDir,\n      lhsInto,\n      lhsGroup,\n      rhsId,\n      rhsDir,\n      rhsInto,\n      rhsGroup,\n      title\n    };\n    this.edges.push(edge);\n    if (this.nodes[lhsId] && this.nodes[rhsId]) {\n      this.nodes[lhsId].edges.push(this.edges[this.edges.length - 1]);\n      this.nodes[rhsId].edges.push(this.edges[this.edges.length - 1]);\n    }\n  }\n  getEdges() {\n    return this.edges;\n  }\n  /**\n   * Returns the current diagram's adjacency list, spatial map, & group alignments.\n   * If they have not been created, run the algorithms to generate them.\n   * @returns\n   */\n  getDataStructures() {\n    if (this.dataStructures === void 0) {\n      const groupAlignments = {};\n      const adjList = Object.entries(this.nodes).reduce((prevOuter, [id, service]) => {\n        prevOuter[id] = service.edges.reduce((prevInner, edge) => {\n          const lhsGroupId = this.getNode(edge.lhsId)?.in;\n          const rhsGroupId = this.getNode(edge.rhsId)?.in;\n          if (lhsGroupId && rhsGroupId && lhsGroupId !== rhsGroupId) {\n            const alignment = getArchitectureDirectionAlignment(edge.lhsDir, edge.rhsDir);\n            if (alignment !== \"bend\") {\n              groupAlignments[lhsGroupId] ??= {};\n              groupAlignments[lhsGroupId][rhsGroupId] = alignment;\n              groupAlignments[rhsGroupId] ??= {};\n              groupAlignments[rhsGroupId][lhsGroupId] = alignment;\n            }\n          }\n          if (edge.lhsId === id) {\n            const pair = getArchitectureDirectionPair(edge.lhsDir, edge.rhsDir);\n            if (pair) {\n              prevInner[pair] = edge.rhsId;\n            }\n          } else {\n            const pair = getArchitectureDirectionPair(edge.rhsDir, edge.lhsDir);\n            if (pair) {\n              prevInner[pair] = edge.lhsId;\n            }\n          }\n          return prevInner;\n        }, {});\n        return prevOuter;\n      }, {});\n      const firstId = Object.keys(adjList)[0];\n      const visited = { [firstId]: 1 };\n      const notVisited = Object.keys(adjList).reduce(\n        (prev, id) => id === firstId ? prev : { ...prev, [id]: 1 },\n        {}\n      );\n      const BFS = /* @__PURE__ */ __name((startingId) => {\n        const spatialMap = { [startingId]: [0, 0] };\n        const queue = [startingId];\n        while (queue.length > 0) {\n          const id = queue.shift();\n          if (id) {\n            visited[id] = 1;\n            delete notVisited[id];\n            const adj = adjList[id];\n            const [posX, posY] = spatialMap[id];\n            Object.entries(adj).forEach(([dir, rhsId]) => {\n              if (!visited[rhsId]) {\n                spatialMap[rhsId] = shiftPositionByArchitectureDirectionPair(\n                  [posX, posY],\n                  dir\n                );\n                queue.push(rhsId);\n              }\n            });\n          }\n        }\n        return spatialMap;\n      }, \"BFS\");\n      const spatialMaps = [BFS(firstId)];\n      while (Object.keys(notVisited).length > 0) {\n        spatialMaps.push(BFS(Object.keys(notVisited)[0]));\n      }\n      this.dataStructures = {\n        adjList,\n        spatialMaps,\n        groupAlignments\n      };\n    }\n    return this.dataStructures;\n  }\n  setElementForId(id, element) {\n    this.elements[id] = element;\n  }\n  getElementById(id) {\n    return this.elements[id];\n  }\n  getConfig() {\n    return cleanAndMerge({\n      ...DEFAULT_ARCHITECTURE_CONFIG,\n      ...getConfig().architecture\n    });\n  }\n  getConfigField(field) {\n    return this.getConfig()[field];\n  }\n};\n\n// src/diagrams/architecture/architectureParser.ts\nvar populateDb = /* @__PURE__ */ __name((ast, db) => {\n  populateCommonDb(ast, db);\n  ast.groups.map((group) => db.addGroup(group));\n  ast.services.map((service) => db.addService({ ...service, type: \"service\" }));\n  ast.junctions.map((service) => db.addJunction({ ...service, type: \"junction\" }));\n  ast.edges.map((edge) => db.addEdge(edge));\n}, \"populateDb\");\nvar parser = {\n  parser: {\n    // @ts-expect-error - ArchitectureDB is not assignable to DiagramDB\n    yy: void 0\n  },\n  parse: /* @__PURE__ */ __name(async (input) => {\n    const ast = await parse(\"architecture\", input);\n    log.debug(ast);\n    const db = parser.parser?.yy;\n    if (!(db instanceof ArchitectureDB)) {\n      throw new Error(\n        \"parser.parser?.yy was not a ArchitectureDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.\"\n      );\n    }\n    populateDb(ast, db);\n  }, \"parse\")\n};\n\n// src/diagrams/architecture/architectureStyles.ts\nvar getStyles = /* @__PURE__ */ __name((options) => `\n  .edge {\n    stroke-width: ${options.archEdgeWidth};\n    stroke: ${options.archEdgeColor};\n    fill: none;\n  }\n\n  .arrow {\n    fill: ${options.archEdgeArrowColor};\n  }\n\n  .node-bkg {\n    fill: none;\n    stroke: ${options.archGroupBorderColor};\n    stroke-width: ${options.archGroupBorderWidth};\n    stroke-dasharray: 8;\n  }\n  .node-icon-text {\n    display: flex; \n    align-items: center;\n  }\n  \n  .node-icon-text > div {\n    color: #fff;\n    margin: 1px;\n    height: fit-content;\n    text-align: center;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n  }\n`, \"getStyles\");\nvar architectureStyles_default = getStyles;\n\n// src/diagrams/architecture/architectureRenderer.ts\nimport cytoscape from \"cytoscape\";\nimport fcose from \"cytoscape-fcose\";\nimport { select } from \"d3\";\n\n// src/diagrams/architecture/architectureIcons.ts\nvar wrapIcon = /* @__PURE__ */ __name((icon) => {\n  return `<g><rect width=\"80\" height=\"80\" style=\"fill: #087ebf; stroke-width: 0px;\"/>${icon}</g>`;\n}, \"wrapIcon\");\nvar architectureIcons = {\n  prefix: \"mermaid-architecture\",\n  height: 80,\n  width: 80,\n  icons: {\n    database: {\n      body: wrapIcon(\n        '<path id=\"b\" data-name=\"4\" d=\"m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><path id=\"c\" data-name=\"3\" d=\"m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><path id=\"d\" data-name=\"2\" d=\"m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><ellipse id=\"e\" data-name=\"1\" cx=\"40\" cy=\"22.14\" rx=\"20\" ry=\"7.14\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><line x1=\"20\" y1=\"57.86\" x2=\"20\" y2=\"22.14\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><line x1=\"60\" y1=\"57.86\" x2=\"60\" y2=\"22.14\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/>'\n      )\n    },\n    server: {\n      body: wrapIcon(\n        '<rect x=\"17.5\" y=\"17.5\" width=\"45\" height=\"45\" rx=\"2\" ry=\"2\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><line x1=\"17.5\" y1=\"32.5\" x2=\"62.5\" y2=\"32.5\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><line x1=\"17.5\" y1=\"47.5\" x2=\"62.5\" y2=\"47.5\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><g><path d=\"m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z\" style=\"fill: #fff; stroke-width: 0px;\"/><path d=\"m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10;\"/></g><g><path d=\"m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z\" style=\"fill: #fff; stroke-width: 0px;\"/><path d=\"m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10;\"/></g><g><path d=\"m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z\" style=\"fill: #fff; stroke-width: 0px;\"/><path d=\"m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10;\"/></g><g><circle cx=\"32.5\" cy=\"25\" r=\".75\" style=\"fill: #fff; stroke: #fff; stroke-miterlimit: 10;\"/><circle cx=\"27.5\" cy=\"25\" r=\".75\" style=\"fill: #fff; stroke: #fff; stroke-miterlimit: 10;\"/><circle cx=\"22.5\" cy=\"25\" r=\".75\" style=\"fill: #fff; stroke: #fff; stroke-miterlimit: 10;\"/></g><g><circle cx=\"32.5\" cy=\"40\" r=\".75\" style=\"fill: #fff; stroke: #fff; stroke-miterlimit: 10;\"/><circle cx=\"27.5\" cy=\"40\" r=\".75\" style=\"fill: #fff; stroke: #fff; stroke-miterlimit: 10;\"/><circle cx=\"22.5\" cy=\"40\" r=\".75\" style=\"fill: #fff; stroke: #fff; stroke-miterlimit: 10;\"/></g><g><circle cx=\"32.5\" cy=\"55\" r=\".75\" style=\"fill: #fff; stroke: #fff; stroke-miterlimit: 10;\"/><circle cx=\"27.5\" cy=\"55\" r=\".75\" style=\"fill: #fff; stroke: #fff; stroke-miterlimit: 10;\"/><circle cx=\"22.5\" cy=\"55\" r=\".75\" style=\"fill: #fff; stroke: #fff; stroke-miterlimit: 10;\"/></g>'\n      )\n    },\n    disk: {\n      body: wrapIcon(\n        '<rect x=\"20\" y=\"15\" width=\"40\" height=\"50\" rx=\"1\" ry=\"1\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><ellipse cx=\"24\" cy=\"19.17\" rx=\".8\" ry=\".83\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><ellipse cx=\"56\" cy=\"19.17\" rx=\".8\" ry=\".83\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><ellipse cx=\"24\" cy=\"60.83\" rx=\".8\" ry=\".83\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><ellipse cx=\"56\" cy=\"60.83\" rx=\".8\" ry=\".83\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><ellipse cx=\"40\" cy=\"33.75\" rx=\"14\" ry=\"14.58\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><ellipse cx=\"40\" cy=\"33.75\" rx=\"4\" ry=\"4.17\" style=\"fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><path d=\"m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z\" style=\"fill: #fff; stroke-width: 0px;\"/>'\n      )\n    },\n    internet: {\n      body: wrapIcon(\n        '<circle cx=\"40\" cy=\"40\" r=\"22.5\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><line x1=\"40\" y1=\"17.5\" x2=\"40\" y2=\"62.5\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><line x1=\"17.5\" y1=\"40\" x2=\"62.5\" y2=\"40\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><path d=\"m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><path d=\"m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><line x1=\"19.75\" y1=\"30.1\" x2=\"60.25\" y2=\"30.1\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/><line x1=\"19.75\" y1=\"49.9\" x2=\"60.25\" y2=\"49.9\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/>'\n      )\n    },\n    cloud: {\n      body: wrapIcon(\n        '<path d=\"m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z\" style=\"fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;\"/>'\n      )\n    },\n    unknown: unknownIcon,\n    blank: {\n      body: wrapIcon(\"\")\n    }\n  }\n};\n\n// src/diagrams/architecture/svgDraw.ts\nvar drawEdges = /* @__PURE__ */ __name(async function(edgesEl, cy, db) {\n  const padding = db.getConfigField(\"padding\");\n  const iconSize = db.getConfigField(\"iconSize\");\n  const halfIconSize = iconSize / 2;\n  const arrowSize = iconSize / 6;\n  const halfArrowSize = arrowSize / 2;\n  await Promise.all(\n    cy.edges().map(async (edge) => {\n      const {\n        source,\n        sourceDir,\n        sourceArrow,\n        sourceGroup,\n        target,\n        targetDir,\n        targetArrow,\n        targetGroup,\n        label\n      } = edgeData(edge);\n      let { x: startX, y: startY } = edge[0].sourceEndpoint();\n      const { x: midX, y: midY } = edge[0].midpoint();\n      let { x: endX, y: endY } = edge[0].targetEndpoint();\n      const groupEdgeShift = padding + 4;\n      if (sourceGroup) {\n        if (isArchitectureDirectionX(sourceDir)) {\n          startX += sourceDir === \"L\" ? -groupEdgeShift : groupEdgeShift;\n        } else {\n          startY += sourceDir === \"T\" ? -groupEdgeShift : groupEdgeShift + 18;\n        }\n      }\n      if (targetGroup) {\n        if (isArchitectureDirectionX(targetDir)) {\n          endX += targetDir === \"L\" ? -groupEdgeShift : groupEdgeShift;\n        } else {\n          endY += targetDir === \"T\" ? -groupEdgeShift : groupEdgeShift + 18;\n        }\n      }\n      if (!sourceGroup && db.getNode(source)?.type === \"junction\") {\n        if (isArchitectureDirectionX(sourceDir)) {\n          startX += sourceDir === \"L\" ? halfIconSize : -halfIconSize;\n        } else {\n          startY += sourceDir === \"T\" ? halfIconSize : -halfIconSize;\n        }\n      }\n      if (!targetGroup && db.getNode(target)?.type === \"junction\") {\n        if (isArchitectureDirectionX(targetDir)) {\n          endX += targetDir === \"L\" ? halfIconSize : -halfIconSize;\n        } else {\n          endY += targetDir === \"T\" ? halfIconSize : -halfIconSize;\n        }\n      }\n      if (edge[0]._private.rscratch) {\n        const g = edgesEl.insert(\"g\");\n        g.insert(\"path\").attr(\"d\", `M ${startX},${startY} L ${midX},${midY} L${endX},${endY} `).attr(\"class\", \"edge\");\n        if (sourceArrow) {\n          const xShift = isArchitectureDirectionX(sourceDir) ? ArchitectureDirectionArrowShift[sourceDir](startX, arrowSize) : startX - halfArrowSize;\n          const yShift = isArchitectureDirectionY(sourceDir) ? ArchitectureDirectionArrowShift[sourceDir](startY, arrowSize) : startY - halfArrowSize;\n          g.insert(\"polygon\").attr(\"points\", ArchitectureDirectionArrow[sourceDir](arrowSize)).attr(\"transform\", `translate(${xShift},${yShift})`).attr(\"class\", \"arrow\");\n        }\n        if (targetArrow) {\n          const xShift = isArchitectureDirectionX(targetDir) ? ArchitectureDirectionArrowShift[targetDir](endX, arrowSize) : endX - halfArrowSize;\n          const yShift = isArchitectureDirectionY(targetDir) ? ArchitectureDirectionArrowShift[targetDir](endY, arrowSize) : endY - halfArrowSize;\n          g.insert(\"polygon\").attr(\"points\", ArchitectureDirectionArrow[targetDir](arrowSize)).attr(\"transform\", `translate(${xShift},${yShift})`).attr(\"class\", \"arrow\");\n        }\n        if (label) {\n          const axis = !isArchitectureDirectionXY(sourceDir, targetDir) ? isArchitectureDirectionX(sourceDir) ? \"X\" : \"Y\" : \"XY\";\n          let width = 0;\n          if (axis === \"X\") {\n            width = Math.abs(startX - endX);\n          } else if (axis === \"Y\") {\n            width = Math.abs(startY - endY) / 1.5;\n          } else {\n            width = Math.abs(startX - endX) / 2;\n          }\n          const textElem = g.append(\"g\");\n          await createText(\n            textElem,\n            label,\n            {\n              useHtmlLabels: false,\n              width,\n              classes: \"architecture-service-label\"\n            },\n            getConfig2()\n          );\n          textElem.attr(\"dy\", \"1em\").attr(\"alignment-baseline\", \"middle\").attr(\"dominant-baseline\", \"middle\").attr(\"text-anchor\", \"middle\");\n          if (axis === \"X\") {\n            textElem.attr(\"transform\", \"translate(\" + midX + \", \" + midY + \")\");\n          } else if (axis === \"Y\") {\n            textElem.attr(\"transform\", \"translate(\" + midX + \", \" + midY + \") rotate(-90)\");\n          } else if (axis === \"XY\") {\n            const pair = getArchitectureDirectionPair(sourceDir, targetDir);\n            if (pair && isArchitecturePairXY(pair)) {\n              const bboxOrig = textElem.node().getBoundingClientRect();\n              const [x, y] = getArchitectureDirectionXYFactors(pair);\n              textElem.attr(\"dominant-baseline\", \"auto\").attr(\"transform\", `rotate(${-1 * x * y * 45})`);\n              const bboxNew = textElem.node().getBoundingClientRect();\n              textElem.attr(\n                \"transform\",\n                `\n                translate(${midX}, ${midY - bboxOrig.height / 2})\n                translate(${x * bboxNew.width / 2}, ${y * bboxNew.height / 2})\n                rotate(${-1 * x * y * 45}, 0, ${bboxOrig.height / 2})\n              `\n              );\n            }\n          }\n        }\n      }\n    })\n  );\n}, \"drawEdges\");\nvar drawGroups = /* @__PURE__ */ __name(async function(groupsEl, cy, db) {\n  const padding = db.getConfigField(\"padding\");\n  const groupIconSize = padding * 0.75;\n  const fontSize = db.getConfigField(\"fontSize\");\n  const iconSize = db.getConfigField(\"iconSize\");\n  const halfIconSize = iconSize / 2;\n  await Promise.all(\n    cy.nodes().map(async (node) => {\n      const data = nodeData(node);\n      if (data.type === \"group\") {\n        const { h, w, x1, y1 } = node.boundingBox();\n        groupsEl.append(\"rect\").attr(\"x\", x1 + halfIconSize).attr(\"y\", y1 + halfIconSize).attr(\"width\", w).attr(\"height\", h).attr(\"class\", \"node-bkg\");\n        const groupLabelContainer = groupsEl.append(\"g\");\n        let shiftedX1 = x1;\n        let shiftedY1 = y1;\n        if (data.icon) {\n          const bkgElem = groupLabelContainer.append(\"g\");\n          bkgElem.html(\n            `<g>${await getIconSVG(data.icon, { height: groupIconSize, width: groupIconSize, fallbackPrefix: architectureIcons.prefix })}</g>`\n          );\n          bkgElem.attr(\n            \"transform\",\n            \"translate(\" + (shiftedX1 + halfIconSize + 1) + \", \" + (shiftedY1 + halfIconSize + 1) + \")\"\n          );\n          shiftedX1 += groupIconSize;\n          shiftedY1 += fontSize / 2 - 1 - 2;\n        }\n        if (data.label) {\n          const textElem = groupLabelContainer.append(\"g\");\n          await createText(\n            textElem,\n            data.label,\n            {\n              useHtmlLabels: false,\n              width: w,\n              classes: \"architecture-service-label\"\n            },\n            getConfig2()\n          );\n          textElem.attr(\"dy\", \"1em\").attr(\"alignment-baseline\", \"middle\").attr(\"dominant-baseline\", \"start\").attr(\"text-anchor\", \"start\");\n          textElem.attr(\n            \"transform\",\n            \"translate(\" + (shiftedX1 + halfIconSize + 4) + \", \" + (shiftedY1 + halfIconSize + 2) + \")\"\n          );\n        }\n      }\n    })\n  );\n}, \"drawGroups\");\nvar drawServices = /* @__PURE__ */ __name(async function(db, elem, services) {\n  const config = getConfig2();\n  for (const service of services) {\n    const serviceElem = elem.append(\"g\");\n    const iconSize = db.getConfigField(\"iconSize\");\n    if (service.title) {\n      const textElem = serviceElem.append(\"g\");\n      await createText(\n        textElem,\n        service.title,\n        {\n          useHtmlLabels: false,\n          width: iconSize * 1.5,\n          classes: \"architecture-service-label\"\n        },\n        config\n      );\n      textElem.attr(\"dy\", \"1em\").attr(\"alignment-baseline\", \"middle\").attr(\"dominant-baseline\", \"middle\").attr(\"text-anchor\", \"middle\");\n      textElem.attr(\"transform\", \"translate(\" + iconSize / 2 + \", \" + iconSize + \")\");\n    }\n    const bkgElem = serviceElem.append(\"g\");\n    if (service.icon) {\n      bkgElem.html(\n        `<g>${await getIconSVG(service.icon, { height: iconSize, width: iconSize, fallbackPrefix: architectureIcons.prefix })}</g>`\n      );\n    } else if (service.iconText) {\n      bkgElem.html(\n        `<g>${await getIconSVG(\"blank\", { height: iconSize, width: iconSize, fallbackPrefix: architectureIcons.prefix })}</g>`\n      );\n      const textElemContainer = bkgElem.append(\"g\");\n      const fo = textElemContainer.append(\"foreignObject\").attr(\"width\", iconSize).attr(\"height\", iconSize);\n      const divElem = fo.append(\"div\").attr(\"class\", \"node-icon-text\").attr(\"style\", `height: ${iconSize}px;`).append(\"div\").html(sanitizeText(service.iconText, config));\n      const fontSize = parseInt(\n        window.getComputedStyle(divElem.node(), null).getPropertyValue(\"font-size\").replace(/\\D/g, \"\")\n      ) ?? 16;\n      divElem.attr(\"style\", `-webkit-line-clamp: ${Math.floor((iconSize - 2) / fontSize)};`);\n    } else {\n      bkgElem.append(\"path\").attr(\"class\", \"node-bkg\").attr(\"id\", \"node-\" + service.id).attr(\n        \"d\",\n        `M0 ${iconSize} v${-iconSize} q0,-5 5,-5 h${iconSize} q5,0 5,5 v${iconSize} H0 Z`\n      );\n    }\n    serviceElem.attr(\"class\", \"architecture-service\");\n    const { width, height } = serviceElem._groups[0][0].getBBox();\n    service.width = width;\n    service.height = height;\n    db.setElementForId(service.id, serviceElem);\n  }\n  return 0;\n}, \"drawServices\");\nvar drawJunctions = /* @__PURE__ */ __name(function(db, elem, junctions) {\n  junctions.forEach((junction) => {\n    const junctionElem = elem.append(\"g\");\n    const iconSize = db.getConfigField(\"iconSize\");\n    const bkgElem = junctionElem.append(\"g\");\n    bkgElem.append(\"rect\").attr(\"id\", \"node-\" + junction.id).attr(\"fill-opacity\", \"0\").attr(\"width\", iconSize).attr(\"height\", iconSize);\n    junctionElem.attr(\"class\", \"architecture-junction\");\n    const { width, height } = junctionElem._groups[0][0].getBBox();\n    junctionElem.width = width;\n    junctionElem.height = height;\n    db.setElementForId(junction.id, junctionElem);\n  });\n}, \"drawJunctions\");\n\n// src/diagrams/architecture/architectureRenderer.ts\nregisterIconPacks([\n  {\n    name: architectureIcons.prefix,\n    icons: architectureIcons\n  }\n]);\ncytoscape.use(fcose);\nfunction addServices(services, cy, db) {\n  services.forEach((service) => {\n    cy.add({\n      group: \"nodes\",\n      data: {\n        type: \"service\",\n        id: service.id,\n        icon: service.icon,\n        label: service.title,\n        parent: service.in,\n        width: db.getConfigField(\"iconSize\"),\n        height: db.getConfigField(\"iconSize\")\n      },\n      classes: \"node-service\"\n    });\n  });\n}\n__name(addServices, \"addServices\");\nfunction addJunctions(junctions, cy, db) {\n  junctions.forEach((junction) => {\n    cy.add({\n      group: \"nodes\",\n      data: {\n        type: \"junction\",\n        id: junction.id,\n        parent: junction.in,\n        width: db.getConfigField(\"iconSize\"),\n        height: db.getConfigField(\"iconSize\")\n      },\n      classes: \"node-junction\"\n    });\n  });\n}\n__name(addJunctions, \"addJunctions\");\nfunction positionNodes(db, cy) {\n  cy.nodes().map((node) => {\n    const data = nodeData(node);\n    if (data.type === \"group\") {\n      return;\n    }\n    data.x = node.position().x;\n    data.y = node.position().y;\n    const nodeElem = db.getElementById(data.id);\n    nodeElem.attr(\"transform\", \"translate(\" + (data.x || 0) + \",\" + (data.y || 0) + \")\");\n  });\n}\n__name(positionNodes, \"positionNodes\");\nfunction addGroups(groups, cy) {\n  groups.forEach((group) => {\n    cy.add({\n      group: \"nodes\",\n      data: {\n        type: \"group\",\n        id: group.id,\n        icon: group.icon,\n        label: group.title,\n        parent: group.in\n      },\n      classes: \"node-group\"\n    });\n  });\n}\n__name(addGroups, \"addGroups\");\nfunction addEdges(edges, cy) {\n  edges.forEach((parsedEdge) => {\n    const { lhsId, rhsId, lhsInto, lhsGroup, rhsInto, lhsDir, rhsDir, rhsGroup, title } = parsedEdge;\n    const edgeType = isArchitectureDirectionXY(parsedEdge.lhsDir, parsedEdge.rhsDir) ? \"segments\" : \"straight\";\n    const edge = {\n      id: `${lhsId}-${rhsId}`,\n      label: title,\n      source: lhsId,\n      sourceDir: lhsDir,\n      sourceArrow: lhsInto,\n      sourceGroup: lhsGroup,\n      sourceEndpoint: lhsDir === \"L\" ? \"0 50%\" : lhsDir === \"R\" ? \"100% 50%\" : lhsDir === \"T\" ? \"50% 0\" : \"50% 100%\",\n      target: rhsId,\n      targetDir: rhsDir,\n      targetArrow: rhsInto,\n      targetGroup: rhsGroup,\n      targetEndpoint: rhsDir === \"L\" ? \"0 50%\" : rhsDir === \"R\" ? \"100% 50%\" : rhsDir === \"T\" ? \"50% 0\" : \"50% 100%\"\n    };\n    cy.add({\n      group: \"edges\",\n      data: edge,\n      classes: edgeType\n    });\n  });\n}\n__name(addEdges, \"addEdges\");\nfunction getAlignments(db, spatialMaps, groupAlignments) {\n  const flattenAlignments = /* @__PURE__ */ __name((alignmentObj, alignmentDir) => {\n    return Object.entries(alignmentObj).reduce(\n      (prev, [dir, alignments2]) => {\n        let cnt = 0;\n        const arr = Object.entries(alignments2);\n        if (arr.length === 1) {\n          prev[dir] = arr[0][1];\n          return prev;\n        }\n        for (let i = 0; i < arr.length - 1; i++) {\n          for (let j = i + 1; j < arr.length; j++) {\n            const [aGroupId, aNodeIds] = arr[i];\n            const [bGroupId, bNodeIds] = arr[j];\n            const alignment = groupAlignments[aGroupId]?.[bGroupId];\n            if (alignment === alignmentDir) {\n              prev[dir] ??= [];\n              prev[dir] = [...prev[dir], ...aNodeIds, ...bNodeIds];\n            } else if (aGroupId === \"default\" || bGroupId === \"default\") {\n              prev[dir] ??= [];\n              prev[dir] = [...prev[dir], ...aNodeIds, ...bNodeIds];\n            } else {\n              const keyA = `${dir}-${cnt++}`;\n              prev[keyA] = aNodeIds;\n              const keyB = `${dir}-${cnt++}`;\n              prev[keyB] = bNodeIds;\n            }\n          }\n        }\n        return prev;\n      },\n      {}\n    );\n  }, \"flattenAlignments\");\n  const alignments = spatialMaps.map((spatialMap) => {\n    const horizontalAlignments = {};\n    const verticalAlignments = {};\n    Object.entries(spatialMap).forEach(([id, [x, y]]) => {\n      const nodeGroup = db.getNode(id)?.in ?? \"default\";\n      horizontalAlignments[y] ??= {};\n      horizontalAlignments[y][nodeGroup] ??= [];\n      horizontalAlignments[y][nodeGroup].push(id);\n      verticalAlignments[x] ??= {};\n      verticalAlignments[x][nodeGroup] ??= [];\n      verticalAlignments[x][nodeGroup].push(id);\n    });\n    return {\n      horiz: Object.values(flattenAlignments(horizontalAlignments, \"horizontal\")).filter(\n        (arr) => arr.length > 1\n      ),\n      vert: Object.values(flattenAlignments(verticalAlignments, \"vertical\")).filter(\n        (arr) => arr.length > 1\n      )\n    };\n  });\n  const [horizontal, vertical] = alignments.reduce(\n    ([prevHoriz, prevVert], { horiz, vert }) => {\n      return [\n        [...prevHoriz, ...horiz],\n        [...prevVert, ...vert]\n      ];\n    },\n    [[], []]\n  );\n  return {\n    horizontal,\n    vertical\n  };\n}\n__name(getAlignments, \"getAlignments\");\nfunction getRelativeConstraints(spatialMaps, db) {\n  const relativeConstraints = [];\n  const posToStr = /* @__PURE__ */ __name((pos) => `${pos[0]},${pos[1]}`, \"posToStr\");\n  const strToPos = /* @__PURE__ */ __name((pos) => pos.split(\",\").map((p) => parseInt(p)), \"strToPos\");\n  spatialMaps.forEach((spatialMap) => {\n    const invSpatialMap = Object.fromEntries(\n      Object.entries(spatialMap).map(([id, pos]) => [posToStr(pos), id])\n    );\n    const queue = [posToStr([0, 0])];\n    const visited = {};\n    const directions = {\n      L: [-1, 0],\n      R: [1, 0],\n      T: [0, 1],\n      B: [0, -1]\n    };\n    while (queue.length > 0) {\n      const curr = queue.shift();\n      if (curr) {\n        visited[curr] = 1;\n        const currId = invSpatialMap[curr];\n        if (currId) {\n          const currPos = strToPos(curr);\n          Object.entries(directions).forEach(([dir, shift]) => {\n            const newPos = posToStr([currPos[0] + shift[0], currPos[1] + shift[1]]);\n            const newId = invSpatialMap[newPos];\n            if (newId && !visited[newPos]) {\n              queue.push(newPos);\n              relativeConstraints.push({\n                [ArchitectureDirectionName[dir]]: newId,\n                [ArchitectureDirectionName[getOppositeArchitectureDirection(dir)]]: currId,\n                gap: 1.5 * db.getConfigField(\"iconSize\")\n              });\n            }\n          });\n        }\n      }\n    }\n  });\n  return relativeConstraints;\n}\n__name(getRelativeConstraints, \"getRelativeConstraints\");\nfunction layoutArchitecture(services, junctions, groups, edges, db, { spatialMaps, groupAlignments }) {\n  return new Promise((resolve) => {\n    const renderEl = select(\"body\").append(\"div\").attr(\"id\", \"cy\").attr(\"style\", \"display:none\");\n    const cy = cytoscape({\n      container: document.getElementById(\"cy\"),\n      style: [\n        {\n          selector: \"edge\",\n          style: {\n            \"curve-style\": \"straight\",\n            label: \"data(label)\",\n            \"source-endpoint\": \"data(sourceEndpoint)\",\n            \"target-endpoint\": \"data(targetEndpoint)\"\n          }\n        },\n        {\n          selector: \"edge.segments\",\n          style: {\n            \"curve-style\": \"segments\",\n            \"segment-weights\": \"0\",\n            \"segment-distances\": [0.5],\n            // @ts-ignore Incorrect library types\n            \"edge-distances\": \"endpoints\",\n            \"source-endpoint\": \"data(sourceEndpoint)\",\n            \"target-endpoint\": \"data(targetEndpoint)\"\n          }\n        },\n        {\n          selector: \"node\",\n          style: {\n            // @ts-ignore Incorrect library types\n            \"compound-sizing-wrt-labels\": \"include\"\n          }\n        },\n        {\n          selector: \"node[label]\",\n          style: {\n            \"text-valign\": \"bottom\",\n            \"text-halign\": \"center\",\n            \"font-size\": `${db.getConfigField(\"fontSize\")}px`\n          }\n        },\n        {\n          selector: \".node-service\",\n          style: {\n            label: \"data(label)\",\n            width: \"data(width)\",\n            height: \"data(height)\"\n          }\n        },\n        {\n          selector: \".node-junction\",\n          style: {\n            width: \"data(width)\",\n            height: \"data(height)\"\n          }\n        },\n        {\n          selector: \".node-group\",\n          style: {\n            // @ts-ignore Incorrect library types\n            padding: `${db.getConfigField(\"padding\")}px`\n          }\n        }\n      ],\n      layout: {\n        name: \"grid\",\n        boundingBox: {\n          x1: 0,\n          x2: 100,\n          y1: 0,\n          y2: 100\n        }\n      }\n    });\n    renderEl.remove();\n    addGroups(groups, cy);\n    addServices(services, cy, db);\n    addJunctions(junctions, cy, db);\n    addEdges(edges, cy);\n    const alignmentConstraint = getAlignments(db, spatialMaps, groupAlignments);\n    const relativePlacementConstraint = getRelativeConstraints(spatialMaps, db);\n    const layout = cy.layout({\n      name: \"fcose\",\n      quality: \"proof\",\n      styleEnabled: false,\n      animate: false,\n      nodeDimensionsIncludeLabels: false,\n      // Adjust the edge parameters if it passes through the border of a group\n      // Hacky fix for: https://github.com/iVis-at-Bilkent/cytoscape.js-fcose/issues/67\n      idealEdgeLength(edge) {\n        const [nodeA, nodeB] = edge.connectedNodes();\n        const { parent: parentA } = nodeData(nodeA);\n        const { parent: parentB } = nodeData(nodeB);\n        const elasticity = parentA === parentB ? 1.5 * db.getConfigField(\"iconSize\") : 0.5 * db.getConfigField(\"iconSize\");\n        return elasticity;\n      },\n      edgeElasticity(edge) {\n        const [nodeA, nodeB] = edge.connectedNodes();\n        const { parent: parentA } = nodeData(nodeA);\n        const { parent: parentB } = nodeData(nodeB);\n        const elasticity = parentA === parentB ? 0.45 : 1e-3;\n        return elasticity;\n      },\n      alignmentConstraint,\n      relativePlacementConstraint\n    });\n    layout.one(\"layoutstop\", () => {\n      function getSegmentWeights(source, target, pointX, pointY) {\n        let W, D;\n        const { x: sX, y: sY } = source;\n        const { x: tX, y: tY } = target;\n        D = (pointY - sY + (sX - pointX) * (sY - tY) / (sX - tX)) / Math.sqrt(1 + Math.pow((sY - tY) / (sX - tX), 2));\n        W = Math.sqrt(Math.pow(pointY - sY, 2) + Math.pow(pointX - sX, 2) - Math.pow(D, 2));\n        const distAB = Math.sqrt(Math.pow(tX - sX, 2) + Math.pow(tY - sY, 2));\n        W = W / distAB;\n        let delta1 = (tX - sX) * (pointY - sY) - (tY - sY) * (pointX - sX);\n        switch (true) {\n          case delta1 >= 0:\n            delta1 = 1;\n            break;\n          case delta1 < 0:\n            delta1 = -1;\n            break;\n        }\n        let delta2 = (tX - sX) * (pointX - sX) + (tY - sY) * (pointY - sY);\n        switch (true) {\n          case delta2 >= 0:\n            delta2 = 1;\n            break;\n          case delta2 < 0:\n            delta2 = -1;\n            break;\n        }\n        D = Math.abs(D) * delta1;\n        W = W * delta2;\n        return {\n          distances: D,\n          weights: W\n        };\n      }\n      __name(getSegmentWeights, \"getSegmentWeights\");\n      cy.startBatch();\n      for (const edge of Object.values(cy.edges())) {\n        if (edge.data?.()) {\n          const { x: sX, y: sY } = edge.source().position();\n          const { x: tX, y: tY } = edge.target().position();\n          if (sX !== tX && sY !== tY) {\n            const sEP = edge.sourceEndpoint();\n            const tEP = edge.targetEndpoint();\n            const { sourceDir } = edgeData(edge);\n            const [pointX, pointY] = isArchitectureDirectionY(sourceDir) ? [sEP.x, tEP.y] : [tEP.x, sEP.y];\n            const { weights, distances } = getSegmentWeights(sEP, tEP, pointX, pointY);\n            edge.style(\"segment-distances\", distances);\n            edge.style(\"segment-weights\", weights);\n          }\n        }\n      }\n      cy.endBatch();\n      layout.run();\n    });\n    layout.run();\n    cy.ready((e) => {\n      log.info(\"Ready\", e);\n      resolve(cy);\n    });\n  });\n}\n__name(layoutArchitecture, \"layoutArchitecture\");\nvar draw = /* @__PURE__ */ __name(async (text, id, _version, diagObj) => {\n  const db = diagObj.db;\n  const services = db.getServices();\n  const junctions = db.getJunctions();\n  const groups = db.getGroups();\n  const edges = db.getEdges();\n  const ds = db.getDataStructures();\n  const svg = selectSvgElement(id);\n  const edgesElem = svg.append(\"g\");\n  edgesElem.attr(\"class\", \"architecture-edges\");\n  const servicesElem = svg.append(\"g\");\n  servicesElem.attr(\"class\", \"architecture-services\");\n  const groupElem = svg.append(\"g\");\n  groupElem.attr(\"class\", \"architecture-groups\");\n  await drawServices(db, servicesElem, services);\n  drawJunctions(db, servicesElem, junctions);\n  const cy = await layoutArchitecture(services, junctions, groups, edges, db, ds);\n  await drawEdges(edgesElem, cy, db);\n  await drawGroups(groupElem, cy, db);\n  positionNodes(db, cy);\n  setupGraphViewbox(void 0, svg, db.getConfigField(\"padding\"), db.getConfigField(\"useMaxWidth\"));\n}, \"draw\");\nvar renderer = { draw };\n\n// src/diagrams/architecture/architectureDiagram.ts\nvar diagram = {\n  parser,\n  get db() {\n    return new ArchitectureDB();\n  },\n  renderer,\n  styles: architectureStyles_default\n};\nexport {\n  diagram\n};\n","import {\n  __name\n} from \"./chunk-VIW5F6AA.mjs\";\n\n// src/diagrams/common/populateCommonDb.ts\nfunction populateCommonDb(ast, db) {\n  if (ast.accDescr) {\n    db.setAccDescription?.(ast.accDescr);\n  }\n  if (ast.accTitle) {\n    db.setAccTitle?.(ast.accTitle);\n  }\n  if (ast.title) {\n    db.setDiagramTitle?.(ast.title);\n  }\n}\n__name(populateCommonDb, \"populateCommonDb\");\n\nexport {\n  populateCommonDb\n};\n"],"names":["t","e","Error","Object","r","String","i","Promise","Math","parseInt","window","n","s","c","document"],"mappings":"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"}