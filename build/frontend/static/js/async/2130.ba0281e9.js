"use strict";(self.webpackChunklogin_page=self.webpackChunklogin_page||[]).push([["2130"],{9142:function(e,t,r){r.d(t,{G:()=>G,Z:()=>K});var a=r(7409),n=r(99282),l=r(85893),o=r(59157),i=r(62822),s=r(22561),c=r(38655),d=r(90271),u=r(89126),p=r(33991),x=r(54757),m=r(39467),h=r(77821),g=r(99469),f=r(67294);let b=e=>{let{dataForModal:t,isModalOpen:r,setIsModalOpen:a}=e;return null};var v=r(61215),y=r(16095);let j=e=>{let{code:t,language:r}=e;return(0,l.jsx)("code",{style:{whiteSpace:"pre-wrap",padding:"10px",borderRadius:"5px",fontFamily:"Monaco, 'Courier New', monospace",fontSize:"14px",backgroundColor:"#f5f5f5",display:"block",overflow:"auto"},className:"language-".concat(r),children:t.trim()})};var k=r(63367),w=r(14868),C=r(63852),Z=r(70107);let N=e=>{let{allNodes:t,handleButtonClick:r}=e,a=(0,f.useRef)(null),n=(0,Z.MG)({count:t.length,estimateSize:()=>56,getScrollElement:()=>a.current,overscan:10});return(0,l.jsx)(p.Z,{ref:a,sx:{height:400,overflowY:"auto",position:"relative",border:"1px solid #e0e0e0",borderRadius:1,p:1},children:(0,l.jsx)(p.Z,{sx:{height:"".concat(n.getTotalSize(),"px"),position:"relative",width:"100%"},children:n.getVirtualItems().map(e=>{let a=t[e.index];if(!a)return null;let n="in"===a.type;return(0,l.jsx)(p.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start,"px)"),display:"flex",alignItems:"center",px:1},children:(0,l.jsxs)(h.Z,{onClick:e=>r(e,a.id),variant:"contained",sx:{bgcolor:n?"#3949ab":"#00897b",color:"#fff","&:hover":{bgcolor:n?"#5c6bc0":"#26a69a"}},children:[a.key," (",a.id,")"]})},e.key)})})})},M=e=>{let{content:t,jumpToNode:r}=e,a=(0,f.useCallback)((e,t)=>{e.stopPropagation(),e.preventDefault(),r(t)},[r]),n=Object.keys(t.ins||{}),o=Object.keys(t.outs||{}),i=[...n.map(e=>({key:e,id:t.ins[e],type:"in"})),...o.map(e=>({key:e,id:t.outs[e],type:"out"}))];return i.length<=50?(0,l.jsxs)(p.Z,{sx:{p:1},children:[(0,l.jsx)(p.Z,{sx:{mb:2},children:n.map(e=>(0,l.jsxs)(h.Z,{onClick:r=>a(r,t.ins[e]),variant:"contained",sx:{bgcolor:"#3949ab",color:"#fff",mr:1,mb:1,"&:hover":{bgcolor:"#5c6bc0"}},children:[e," (",t.ins[e],")"]},e))}),(0,l.jsx)(p.Z,{sx:{paddingY:"10px"},children:o.map(e=>(0,l.jsxs)(h.Z,{onClick:r=>a(r,t.outs[e]),variant:"contained",sx:{bgcolor:"#00897b",color:"#fff",mr:1,mb:1,"&:hover":{bgcolor:"#26a69a"}},children:[e," (",t.outs[e],")"]},e))})]}):(0,l.jsx)(N,{allNodes:i,handleButtonClick:a})};var z=r(50382);let D=(0,f.memo)(e=>{let{prettyName:t,data:r,keys:a}=e,n=(0,f.useMemo)(()=>({tooltip:{confine:!0,trigger:"axis",axisPointer:{type:"shadow"}},grid:{containLabel:!1},xAxis:{data:a,axisLabel:{rotate:45,formatter:e=>e.length>10?"".concat(e.substring(0,10),"..."):e}},yAxis:{type:"value"},series:{name:t,type:"bar",data:a.map(e=>r[e]),emphasis:{focus:"series",blurScope:"coordinateSystem"},animationDuration:300}}),[r,a,t]);return(0,l.jsx)(z.Z,{lazyUpdate:!0,option:n,style:{height:"100%",minHeight:"300px",width:"100%"}})});D.displayName="MemoizedBarChart";let _=(0,f.memo)(e=>{let{data:t}=e,r=(0,f.useMemo)(()=>({tooltip:{trigger:"axis",confine:!0},color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],legend:{data:t.map(e=>e.id),orient:"vertical",right:10,top:"center"},grid:{left:"5%",right:"15%",bottom:"10%",top:"10%",containLabel:!0},xAxis:{type:"value",name:"X Axis",nameLocation:"middle",nameGap:30},yAxis:{type:"value",name:"Y Axis",min:-1,max:1,nameLocation:"middle",nameGap:50},series:t.map(e=>({name:e.id,type:"line",data:e.data.map(e=>[e.x,e.y]),showSymbol:!1,symbolSize:8,emphasis:{focus:"series"},animationDuration:300}))}),[t]);return(0,l.jsx)(z.Z,{lazyUpdate:!0,option:r,style:{height:"100%",minHeight:"300px",width:"100%"}})});_.displayName="MemoizedLineChart";var E=r(58446),S=r(44867),L=r.n(S);E.Z.use(L());let R=e=>{let{elements:t,style:r,stylesheet:n,layout:o,onNodeClick:i}=e,s=(0,f.useRef)(null),c=(0,f.useRef)(null),d=(0,f.useCallback)(e=>{let t=e.target;i&&i({id:t.id()},e)},[i]),u=(0,f.useCallback)(e=>{let t=e.target;t.style("label",t.data("label"))},[]),p=(0,f.useCallback)(e=>{e.target.style("label","")},[]);return(0,f.useEffect)(()=>{if(!s.current)return;let e=(0,E.Z)({container:s.current,elements:t,style:n||[{selector:"node",style:{"background-color":"data(color)",width:"data(size)",height:"data(size)","text-valign":"top","text-halign":"center","text-margin-y":-5,"font-size":"12px",color:"#000000","text-outline-width":2,"text-outline-color":"#ffffff","z-index":1,label:""}},{selector:"edge",style:{width:2,"line-color":"#cccccc","target-arrow-color":"#cccccc","target-arrow-shape":"triangle","curve-style":"bezier"}}],layout:o||{name:"fcose",animate:!1,samplingType:!1,animationDuration:1500,fit:!0,padding:30}});return c.current=e,e.on("tap","node",d),e.on("mouseover","node",u),e.on("mouseout","node",p),()=>{c.current&&(c.current.destroy(),c.current=null)}},[t,n,o,d,u,p]),(0,f.useEffect)(()=>{if(c.current&&t){c.current.elements().remove(),c.current.add(t);let e=o||{name:"fcose",animate:!1,samplingType:!1,animationDuration:1500,fit:!0,padding:30};c.current.layout(e).run()}},[t,o]),(0,l.jsx)("div",{ref:s,style:(0,a._)({width:"100%",height:"100%"},r)})},T=(0,f.memo)(e=>{let{data:t,onNodeClick:r}=e,a=(0,f.useMemo)(()=>t,[t]),n=(0,f.useMemo)(()=>[...a.nodes.map(e=>({data:{id:e.id,label:e.label,size:e.size||30,color:e.color||"#1f77b4",x:e.x,y:e.y}})),...a.links.map(e=>({data:{id:"".concat(e.source,"-").concat(e.target),source:e.source,target:e.target}}))],[a]),o=(0,f.useMemo)(()=>[{selector:"node",style:{"background-color":"data(color)",width:"data(size)",height:"data(size)","text-valign":"top","text-halign":"center","text-margin-y":-5,"font-size":"12px",color:"#000000","text-outline-width":2,"text-outline-color":"#ffffff","z-index":1,label:""}},{selector:"edge",style:{width:2,"line-color":"#cccccc","target-arrow-color":"#cccccc","target-arrow-shape":"triangle","curve-style":"bezier"}}],[]);return(0,l.jsx)(p.Z,{sx:{height:"300px",width:"100%"},children:(0,l.jsx)(R,{elements:n,style:{width:"100%",height:"100%"},stylesheet:o,layout:{name:a.nodes.length>1e3?"random":"fcose",animate:!1,samplingType:!1,animationDuration:1500,fit:!0,padding:30},onNodeClick:r})})});T.displayName="MemoizedNetworkChart";let O=e=>{let{viewId:t,content:r,onNodeClick:o,prettyName:i}=e,s=(0,f.useCallback)(e=>{if(!e)return[];let t=[];for(let r of Object.keys(e)){let a=(null==e?void 0:e[r])||{},n={id:r,data:a.map(e=>{let t=Object.keys(e)[0];return{x:parseFloat(t),y:parseFloat(e[t])}})};t.push(n)}return t},[]),c=(0,f.useCallback)(e=>{if(!e)return{};let t={};for(let r of Object.values(e))for(let e of Object.keys(r))t[e]=(null==r?void 0:r[e])||{};return t},[]),d=(0,f.useCallback)(e=>{if(!e||0===Object.values(e).length)return[];let t=new Set;return Object.values(e).forEach(e=>{Object.keys(e).forEach(e=>{t.add(e)})}),Array.from(t).sort()},[]),u=(0,f.useCallback)(e=>{if(!e||!e.nodes)return{nodes:[],links:[]};let t=new Map;e.nodes.forEach(e=>{let r=e.id||e.label,l=(0,n._)((0,a._)({},e),{id:r,label:e.label||r,size:e.size||30,color:e.color||"#1f77b4"});t.has(l.id)||t.set(l.id,l)});let r=e.links.map(e=>{let t="object"==typeof e.source?e.source.id||e.source.label:e.source,r="object"==typeof e.target?e.target.id||e.target.label:e.target;return(0,n._)((0,a._)({},e),{source:t,target:r})});return{nodes:Array.from(t.values()),links:r}},[]),p=(0,f.useCallback)((e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),(null==e?void 0:e.id)&&o(e.id.includes("@")?e.id.split("@")[1]:e.id)},[o]);if("char_example_xy"===t){let e=s(r);return(0,l.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},onKeyDown:e=>{e.stopPropagation(),e.preventDefault()},children:(0,l.jsx)(f.Suspense,{fallback:(0,l.jsx)(v.Z,{}),children:(0,l.jsx)(_,{data:e})})})}if(t.endsWith("_distribution")){let e=c(r),t=d(r);return(0,l.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},onKeyDown:e=>{e.stopPropagation(),e.preventDefault()},children:(0,l.jsx)(f.Suspense,{fallback:(0,l.jsx)(v.Z,{}),children:(0,l.jsx)(D,{prettyName:i,data:e,keys:t})})})}if(!t.endsWith("nivo_view"))return null;{let e=u(r);return(0,l.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},onKeyDown:e=>{e.stopPropagation(),e.preventDefault()},children:(0,l.jsx)(f.Suspense,{fallback:(0,l.jsx)(v.Z,{}),children:(0,l.jsx)(T,{data:e,onNodeClick:p})})})}};var I=r(34159),A=r(57966),H=r(77674),P=r(70139),F=r(60488),W=r(81035),Y=r(40519);let U=e=>{let{chart:t}=e,r=(0,f.useRef)(null),a=(0,f.useRef)(null),[n,o]=(0,f.useState)(1),[i,s]=(0,f.useState)({x:0,y:0}),[c,d]=(0,f.useState)(!1),[m,h]=(0,f.useState)({x:0,y:0});(0,f.useEffect)(()=>{Y.Z.initialize({startOnLoad:!1,theme:"dark",securityLevel:"loose",fontFamily:"Fira Code"})},[]),(0,f.useEffect)(()=>{(async()=>{if(a.current&&t)try{let e="mermaid-".concat(Date.now());a.current.innerHTML="";let{svg:r}=await Y.Z.render(e,t);a.current.innerHTML=r,o(1),s({x:0,y:0})}catch(e){console.error("Mermaid rendering error:",e),a.current.innerHTML='<div style="color: red; padding: 20px;">Error rendering diagram: '.concat(e,"</div>")}})()},[t]),(0,f.useEffect)(()=>{let e=r.current;if(!e)return;let t=e=>{e.preventDefault()};return e.addEventListener("wheel",t,{passive:!1}),()=>{e.removeEventListener("wheel",t)}},[]);let g=(0,f.useCallback)(()=>{o(e=>Math.min(1.2*e,3))},[]),b=(0,f.useCallback)(()=>{o(e=>Math.max(e/1.2,.3))},[]),v=(0,f.useCallback)(()=>{o(1),s({x:0,y:0})},[]),y=(0,f.useCallback)(e=>{0===e.button&&(d(!0),h({x:e.clientX-i.x,y:e.clientY-i.y}))},[i]),j=(0,f.useCallback)(e=>{c&&s({x:e.clientX-m.x,y:e.clientY-m.y})},[c,m]),k=(0,f.useCallback)(()=>{d(!1)},[]),w=(0,f.useCallback)(e=>{if(r.current){let t=r.current.getBoundingClientRect(),a=t.width/2,l=t.height/2,i=e.deltaY>0?.9:1.1,c=Math.max(.3,Math.min(10,n*i)),d=e.clientX-t.left,u=e.clientY-t.top,p=(d-a)*(1-i),x=(u-l)*(1-i);o(c),s(e=>({x:e.x+p,y:e.y+x}))}},[n]);return(0,l.jsxs)(u.Z,{elevation:2,sx:{height:600,width:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,l.jsxs)(P.Z,{variant:"dense",sx:{backgroundColor:"background.paper",borderBottom:1,borderColor:"divider",minHeight:48},children:[(0,l.jsx)(x.Z,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Mermaid Diagram"}),(0,l.jsxs)(p.Z,{sx:{display:"flex",gap:1},children:[(0,l.jsx)(F.Z,{title:"Zoom In",children:(0,l.jsx)(W.Z,{onClick:g,size:"small",children:(0,l.jsx)(I.Z,{})})}),(0,l.jsx)(F.Z,{title:"Zoom Out",children:(0,l.jsx)(W.Z,{onClick:b,size:"small",children:(0,l.jsx)(A.Z,{})})}),(0,l.jsx)(F.Z,{title:"Reset View",children:(0,l.jsx)(W.Z,{onClick:v,size:"small",children:(0,l.jsx)(H.Z,{})})})]})]}),(0,l.jsxs)(p.Z,{ref:r,sx:{flex:1,overflow:"hidden",cursor:c?"grabbing":"grab",backgroundColor:"background.default",position:"relative",userSelect:"none"},onMouseDown:y,onMouseMove:j,onMouseUp:k,onMouseLeave:k,onWheel:w,children:[(0,l.jsx)(p.Z,{ref:a,sx:{transform:"translate(".concat(i.x,"px, ").concat(i.y,"px) scale(").concat(n,")"),transformOrigin:"center center",transition:c?"none":"transform 0.1s ease-out",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:0,left:0,"& svg":{maxWidth:"none",maxHeight:"none",pointerEvents:"none"}}}),(0,l.jsxs)(p.Z,{sx:{position:"absolute",bottom:16,right:16,backgroundColor:"background.paper",px:1,py:.5,borderRadius:1,fontSize:"0.75rem",opacity:.8},children:[Math.round(100*n),"%"]})]})]})},V=e=>{let{viewId:t,content:r,rawApiData:a,refetch:n,contentType:o,backgroundColor:i,jumpToNode:s,hexColor:c,onHexColorChange:d,prettyName:u}=e,p=(0,f.useRef)(null),x=(0,f.useCallback)(()=>{"text/dot"===o&&p.current&&(0,k.f)(p.current,{engine:"dot",fit:!0,zoom:!0}).renderDot(r)},[r,o]);if((0,f.useEffect)(()=>{x()},[x]),!r)return(0,l.jsx)("div",{className:"error-message",children:"No content available."});if("application/json"===o)if("class_attribute_field"===t)return(0,l.jsx)(y.l,{rawApiData:a,loading:!1,error:null,refetch:n});else if("char_example_xy"===t||t.endsWith("_distribution")||t.endsWith("nivo_view"))return(0,l.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},onKeyDown:e=>{e.stopPropagation(),e.preventDefault()},children:(0,l.jsx)(f.Suspense,{fallback:(0,l.jsx)(v.Z,{}),children:(0,l.jsx)(O,{viewId:t,content:r,onNodeClick:s,prettyName:u})})});else if("bnode_navigator"===t)return(0,l.jsx)(M,{content:r,jumpToNode:s});else return(0,l.jsx)("div",{className:"content-container",style:{background:i},children:(0,l.jsx)(f.Suspense,{fallback:(0,l.jsx)(v.Z,{}),children:(0,l.jsx)(C.gc,{data:r,shouldExpandNode:C.T})})});if("text/dot"===o)return(0,l.jsx)("div",{className:"content-container graphviz-container",style:{background:i},children:(0,l.jsx)("div",{ref:p})});if("text/mermaid"===o)return(0,l.jsx)("div",{className:"mermaid-container",style:{background:i,width:"100%",height:"600px",overflow:"hidden",position:"relative",padding:0,margin:0,borderRadius:"4px"},children:(0,l.jsx)(U,{chart:r})});if("text/html"===o)return(0,l.jsx)("div",{className:"content-container html-content",style:{background:i},children:(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})});if("image/svg"===o)return(0,l.jsx)("div",{className:"content-container",style:{background:"transparent"},children:(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:r},style:{background:"transparent"}})});else if("image/svg+xml"===o)return(0,l.jsx)("div",{className:"content-container",style:{background:"transparent"},children:(0,l.jsx)("img",{src:"data:image/svg+xml;base64,".concat(r),alt:"Graphviz",style:{background:"transparent"}})});else if("image/png"===o||"image/jpeg"===o)return(0,l.jsx)("div",{className:"content-container",style:{background:i},children:(0,l.jsx)("img",{src:"data:".concat(o,";base64,").concat(r),alt:"Content"})});else if("image/jsondot"===o)return(0,l.jsx)("div",{className:"content-container",style:{background:i},children:(0,l.jsx)(f.Suspense,{fallback:(0,l.jsx)(v.Z,{}),children:(0,l.jsx)(C.gc,{data:r})})});else if("text/java"===o)return(0,l.jsx)("div",{className:"content-container",style:{background:i},children:(0,l.jsx)(f.Suspense,{fallback:(0,l.jsx)(v.Z,{}),children:(0,l.jsx)(j,{language:"java",code:r})})});else if("text/hex"===o)return(0,l.jsx)("div",{className:"content-container",style:{background:i},children:(0,l.jsx)(w.AI,{color:c,disableAlpha:!0,onChangeComplete:d})});else if("text/plain"===o)return(0,l.jsx)("div",{className:"content-container",style:{background:i},children:(0,l.jsx)(f.Suspense,{fallback:(0,l.jsx)(v.Z,{}),children:(0,l.jsx)(j,{language:"plaintext",code:r})})});else return(0,l.jsxs)("div",{className:"error-message",children:["Unsupported content type: ",o]})},B=e=>{var t,r;let{loading:a,error:n,dataContent:o,refetch:i,rawApiData:s,backgroundColor:c,jumpToNode:d,hexColor:u,onHexColorChange:x,viewId:m}=e,h=(0,f.useMemo)(()=>{var e,t,r;return null==o||null==(r=o.results)||null==(t=r[0])||null==(e=t.result)?void 0:e.data},[o]),g=(0,f.useMemo)(()=>{var e,t,r,a,n;return null==o||null==(n=o.results)||null==(a=n[0])||null==(r=a.result)||null==(t=r.contentType)||null==(e=t.split(";"))?void 0:e[0]},[o]),b=(0,f.useMemo)(()=>{var e,t;return null==o||null==(t=o.results)||null==(e=t[0])?void 0:e.pretty_name},[o]);return a?(0,l.jsx)(p.Z,{className:"view-container",sx:{position:"relative",padding:2,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px"},children:(0,l.jsx)(v.Z,{})}):n?(0,l.jsx)(p.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:(0,l.jsxs)("div",{className:"error-message",style:{marginTop:"40px"},children:["Error fetching data: ",n.message]})}):s?(null==o||null==(r=o.results)||null==(t=r[0])?void 0:t.error)!==void 0?(0,l.jsx)(p.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:(0,l.jsxs)("div",{className:"error-message",style:{marginTop:"40px"},children:["Backend Error: ",o.results[0].error]})}):h&&g?(0,l.jsx)(p.Z,{sx:{position:"relative",padding:2,flex:1,minHeight:"300px",display:"flex",flexDirection:"column",overflow:"hidden"},children:(0,l.jsx)(p.Z,{sx:{mt:4,flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},children:(0,l.jsx)(V,{viewId:m,content:h,refetch:i,rawApiData:s,contentType:g,backgroundColor:c,jumpToNode:d,hexColor:u,onHexColorChange:x,prettyName:b})})}):(0,l.jsx)(p.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:(0,l.jsx)("div",{className:"error-message",style:{marginTop:"40px"},children:"Result data or content type missing in the response."})}):(0,l.jsx)(p.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:(0,l.jsx)("div",{className:"error-message",style:{marginTop:"40px"},children:"No data available."})})},G=(0,f.memo)(e=>{let{viewId:t,sx:r}=e,v=(0,d.Z)(),{data:y,isLoading:j,error:k,refetch:w}=(0,c.m_)(t,{},{staleTime:3e4,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),C=(0,g.NL)(),{isLoading:Z,withLoading:N}=(0,i.$C)(),[M,z,D]=(0,s.av)(!1,{transitionUpdates:!0}),[_,E,S]=(0,s.av)("#ffffff",{transitionUpdates:!0,debounceMs:300}),[L,R,T]=(0,s.av)(null,{transitionUpdates:!0}),O=(0,s.pQ)(t),I=(0,s.pQ)(_),[A]=(0,s.m9)(_,500),H=(0,c.uC)("update_colour",{onSuccess:()=>{(0,s.Le)(()=>{C.setQueryData(["apiData",t],e=>{var t;return e?(0,n._)((0,a._)({},e),{data:(0,n._)((0,a._)({},e.data),{results:null==(t=e.data.results)?void 0:t.map(e=>(0,n._)((0,a._)({},e),{color:A}))})}):e}),R(null)})},onError:e=>{console.error("Failed to save color:",e),(0,s.Le)(()=>{R("Failed to save color changes"),E("#ffffff")})}}),P=(0,c.uC)("jump",{onSuccess:async()=>{(0,s.Le)(()=>{C.invalidateQueries({queryKey:["apiData"]}),R(null)})},onError:e=>{console.error("Failed to jump to node:",e),(0,s.Le)(()=>{R("Failed to navigate to node")})}}),F=(0,f.useCallback)(e=>{E(e.hex)},[E]);(0,f.useEffect)(()=>{"#ffffff"!==A&&A!==_&&N(async()=>{try{await H.mutateAsync({view_id:O,value:A})}catch(e){console.error("Color update failed:",e)}})},[A,O,H,N,_]);let W=(0,f.useCallback)(e=>{N(async()=>{try{await P.mutateAsync({node_id:e})}catch(e){console.error("Jump to node failed:",e)}})},[P,N]),Y=(0,f.useCallback)(e=>{(0,s.Le)(()=>{z(e)})},[z]),U=(0,f.useCallback)(()=>{N(async()=>{try{await w(),R(null)}catch(e){console.error("Retry failed:",e),R("Retry failed. Please try again.")}})},[w,N,R]),{dataContent:V,exportData:G,backgroundColor:K}=(0,f.useMemo)(()=>{try{var e,t,a,n;let l=null==y?void 0:y.data,o=null==y||null==(n=y.data)||null==(a=n.results)||null==(t=a[0])||null==(e=t.result)?void 0:e.data,i=(null==r?void 0:r.bgcolor)||"transparent";return{dataContent:l,exportData:o,backgroundColor:i}}catch(e){return console.error("Error processing view data:",e),R("Error processing view data"),{dataContent:void 0,exportData:void 0,backgroundColor:(null==r?void 0:r.bgcolor)||"transparent"}}},[y,null==r?void 0:r.bgcolor,R]),X=(0,f.useCallback)(e=>{let{error:r,resetError:a}=e;return(0,l.jsxs)(u.Z,{elevation:1,sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:200,p:3,border:"1px solid ".concat(v.palette.divider),borderRadius:2,bgcolor:"background.paper"},children:[(0,l.jsxs)(p.Z,{sx:{textAlign:"center",mb:2},children:[(0,l.jsx)(x.Z,{variant:"h2",sx:{fontSize:"2rem",mb:1},children:"⚠️"}),(0,l.jsxs)(x.Z,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["\xc9chec du chargement de la vue: ",t]}),!1,L&&(0,l.jsx)(m.Z,{severity:"error",sx:{mt:1,fontSize:"0.75rem"},children:L})]}),(0,l.jsxs)(p.Z,{sx:{display:"flex",gap:1},children:[(0,l.jsx)(h.Z,{variant:"outlined",onClick:()=>{a(),R(null)},size:"small",children:"R\xe9essayer"}),(0,l.jsx)(h.Z,{variant:"contained",onClick:U,size:"small",children:"Recharger les donn\xe9es"})]})]})},[t,L,U,R,v.palette.divider]),Q=Z||D||S||T;return(0,l.jsx)(o.ZP,{fallback:(0,l.jsx)(X,{error:Error("View render error"),resetError:()=>window.location.reload()}),onError:(e,r)=>{console.error("View ".concat(t," error:"),e,r),R("Erreur de rendu: ".concat(e.message))},resetKeys:[t],children:(0,l.jsxs)(p.Z,{sx:(0,a._)({width:"100%",height:"100%",minHeight:300,position:"relative",display:"flex",flexDirection:"column",opacity:Q?.8:1,transition:"opacity 0.2s ease-in-out",overflow:"hidden"},r),children:[L&&(0,l.jsx)(m.Z,{severity:"error",onClose:()=>R(null),sx:{position:"absolute",top:8,left:"50%",transform:"translateX(-50%)",zIndex:1e3,fontSize:"0.75rem",maxWidth:"90%"},"aria-live":"polite",children:L}),(0,l.jsx)(o.ZP,{fallback:(0,l.jsx)(m.Z,{severity:"warning",sx:{m:1},children:"Erreur lors du chargement du modal"}),onError:e=>{console.error("Modal error:",e),R("Le modal n'a pas pu \xeatre charg\xe9")},children:(0,l.jsx)(f.Suspense,{fallback:null,children:(0,l.jsx)(b,{dataForModal:G,isModalOpen:M,setIsModalOpen:Y})})}),(0,l.jsx)(p.Z,{sx:{flex:1,width:"100%",overflow:"auto",position:"relative",display:"flex",flexDirection:"column",scrollbarWidth:"thin",scrollbarColor:"".concat(v.palette.primary.main," ").concat(v.palette.grey[200]),"&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{bgcolor:"grey.100",borderRadius:1},"&::-webkit-scrollbar-thumb":{bgcolor:"primary.main",borderRadius:1,"&:hover":{bgcolor:"primary.dark"}}},children:(0,l.jsx)(o.ZP,{fallback:(0,l.jsx)(X,{error:Error("View content error"),resetError:U}),onError:(e,t)=>{console.error("View content error:",e,t),R("Erreur de contenu: ".concat(e.message))},children:(0,l.jsx)(f.Suspense,{fallback:(0,l.jsx)(p.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,p:2},children:(0,l.jsx)(i.vj.Component,{message:"Chargement de ".concat(O,"...")})}),children:(0,l.jsx)(B,{loading:j,error:k,rawApiData:y,refetch:w,dataContent:V,backgroundColor:K,jumpToNode:W,hexColor:I,onHexColorChange:F,viewId:O})})})}),Q&&(0,l.jsx)(p.Z,{sx:{position:"absolute",top:8,right:8,zIndex:10},"aria-live":"polite","aria-label":"Op\xe9ration en cours",children:(0,l.jsx)(i.vj.Inline,{text:""})})]})})});G.displayName="View";let K=G},22826:function(e,t,r){r.d(t,{Z:()=>n});var a=r(67294);let n=e=>{let t="undefined"!=typeof document,r=(0,a.useRef)(t?document.title:null);(0,a.useEffect)(()=>{if(t)return document.title!==e&&(document.title=e),()=>{null!==r.current&&(document.title=r.current)}},[t,e])}}}]);
//# sourceMappingURL=2130.ba0281e9.js.map