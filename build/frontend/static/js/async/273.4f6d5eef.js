/*! For license information please see 273.4f6d5eef.js.LICENSE.txt */
"use strict";(self.webpackChunklogin_page=self.webpackChunklogin_page||[]).push([["273"],{7371:function(e,t,r){r.r(t),r.d(t,{default:()=>tP});var n=r(8827),o=r(4997),i=r(4786),a=r(1215),l=r(4757),u=r(1035),c=r(7230),s=r(2903),f=r(9126),d=r(1967),p=r(6972),h=r(9e3),y=r(3627),v=r(8655),m=r(7294),g=r(7178),b=r(1419),x=r(6770),w=r(2153),j=r(1731),O=r(9717),S=r(6896),E=r(5893);function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let L=m.memo(function(e){var t,r=e.show,n=e.selectedField,o=e.existingNodeList,c=e.loadingExistingNodes,s=e.onClose,f=e.onSelectNode,d=function(e){if(Array.isArray(e))return e}(t=(0,m.useState)(""))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{i=(r=r.call(e)).next,!1;for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return P(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=d[0],h=d[1],v=(0,m.useCallback)(function(e){h(e.target.value)},[]),b=(0,m.useCallback)(function(){s()},[s]),L=(0,m.useMemo)(function(){return o.filter(function(e){return e.name.toLowerCase().includes(p.toLowerCase())})},[o,p]),_=(0,m.useCallback)(function(e){f(e,n)},[f,n]);return(0,E.jsx)(x.Z,{open:r,onClose:b,"aria-labelledby":"existing-node-modal-title","aria-describedby":"existing-node-modal-description",children:(0,E.jsx)(i.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:600,maxHeight:"80vh",bgcolor:"background.paper",boxShadow:24,outline:"none"},children:(0,E.jsxs)(w.Z,{className:"existing-node-card",sx:{width:"100%",maxHeight:"80vh",overflow:"auto"},children:[(0,E.jsx)(j.Z,{id:"existing-node-modal-title",title:"Select Existing Node",action:(0,E.jsx)(u.Z,{onClick:b,"aria-label":"close",children:(0,E.jsx)(y.Z,{})})}),(0,E.jsxs)(O.Z,{children:[(0,E.jsx)(S.Z,{fullWidth:!0,variant:"outlined",placeholder:"Search nodes...",value:p,onChange:v,sx:{mb:2}}),(0,E.jsx)(i.Z,{className:"node-list",sx:{maxHeight:"50vh",overflow:"auto"},children:c?(0,E.jsxs)(i.Z,{display:"flex",justifyContent:"center",p:2,children:[(0,E.jsx)(a.Z,{size:24})," ",(0,E.jsx)(l.Z,{sx:{ml:1},children:"Loading nodes..."})]}):(0,E.jsx)(g.Z,{spacing:1,children:L.map(function(e){return(0,E.jsx)(i.Z,{sx:{p:2,cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:function(){return _(e)},children:(0,E.jsx)(l.Z,{fontWeight:"bold",children:e.name})},e.id)})})})]})]})})})});var _=r(7484),k=r.n(_);let C=e=>{if(!e)return"";let t=e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").trim();return t.charAt(0).toUpperCase()+t.slice(1)},N=(e,t)=>"".concat(e,"@").concat(t),Z=(e,t,r)=>{if((null==r?void 0:r.required)&&(null==t||"string"==typeof t&&""===t.trim()||Array.isArray(t)&&0===t.length))return"Ce champ est requis";if((null==r?void 0:r.min)!==void 0&&"number"==typeof t&&t<r.min)return"La valeur doit \xeatre au moins ".concat(r.min);if((null==r?void 0:r.max)!==void 0&&"number"==typeof t&&t>r.max)return"La valeur doit \xeatre au plus ".concat(r.max);if(null==r?void 0:r.size){let e=Array.isArray(t)||"string"==typeof t?t.length:-1;if(-1!==e){if(void 0!==r.size.min&&e<r.size.min)return"Doit contenir au moins ".concat(r.size.min," caract\xe8res/\xe9l\xe9ments");if(void 0!==r.size.max&&e>r.size.max)return"Doit contenir au plus ".concat(r.size.max," caract\xe8res/\xe9l\xe9ments")}}if((null==r?void 0:r.pattern)&&"string"==typeof t&&!new RegExp(r.pattern).test(t))return"Doit correspondre au mod\xe8le : ".concat(r.pattern);switch(e){case"EmailNode":return"Veuillez entrer une adresse e-mail valide";case"IntNode":return"Veuillez entrer un entier valide";case"PhoneNumberNode":return"Veuillez entrer un num\xe9ro de t\xe9l\xe9phone valide";case"DateNode":return"Veuillez entrer une date valide";default:return"Valeur invalide"}},T=(e,t,r)=>{let n=!0,o="";if((null==r?void 0:r.required)&&(null==t||"string"==typeof t&&""===t.trim()||Array.isArray(t)&&0===t.length))return{isValid:n=!1,message:o="Ce champ est requis"};if(!(null==r?void 0:r.required)&&(null==t||"string"==typeof t&&""===t.trim()||Array.isArray(t)&&0===t.length))return{isValid:!0,message:""};if((null==r?void 0:r.min)!==void 0&&"number"==typeof t&&t<r.min)return{isValid:n=!1,message:o="La valeur doit \xeatre au moins ".concat(r.min)};if((null==r?void 0:r.max)!==void 0&&"number"==typeof t&&t>r.max)return{isValid:n=!1,message:o="La valeur doit \xeatre au plus ".concat(r.max)};if(null==r?void 0:r.size){let e=Array.isArray(t)||"string"==typeof t?t.length:-1;if(-1!==e){if(void 0!==r.size.min&&e<r.size.min)return{isValid:n=!1,message:o="Doit contenir au moins ".concat(r.size.min," caract\xe8res/\xe9l\xe9ments")};if(void 0!==r.size.max&&e>r.size.max)return{isValid:n=!1,message:o="Doit contenir au plus ".concat(r.size.max," caract\xe8res/\xe9l\xe9ments")}}}if((null==r?void 0:r.pattern)&&"string"==typeof t&&!new RegExp(r.pattern).test(t))return{isValid:n=!1,message:o="Doit correspondre au mod\xe8le : ".concat(r.pattern)};switch(e){case"IntNode":(n=/^-?\d+$/.test(t))||(o="Veuillez entrer un entier valide");break;case"DateNode":(n=k()(t).isValid())||(o="Veuillez entrer une date valide")}return{isValid:n,message:o}},I=["StringNode","EmailNode","PhoneNumberNode","IntNode"],F=["BooleanNode"],A=["DateNode"],D=["ImageNode"],G=["FileNode"],K=["ListNode"],z=["ColorNode"],V=[...I,...G,...F,...A,...z];var R=r(9469),U=r(4651),W=r(3892),q=r(2719),Q=r(9298);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var $=["field","fieldKey","value","onFocus","onChange","error","helperText"];function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let M=function(e){var t,r,o,i,a,l,u,c,s,f,d,p=(0,n.c)(24);p[0]!==e?(r=e.field,o=e.fieldKey,c=e.value,l=e.onFocus,a=e.onChange,t=e.error,i=e.helperText,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,$),p[0]=e,p[1]=t,p[2]=r,p[3]=o,p[4]=i,p[5]=a,p[6]=l,p[7]=u,p[8]=c):(t=p[1],r=p[2],o=p[3],i=p[4],a=p[5],l=p[6],u=p[7],c=p[8]),p[9]!==r.type||p[10]!==r.validations?(s={},r.validations&&("IntNode"===r.type&&void 0!==r.validations.min&&(s.min=r.validations.min),"IntNode"===r.type&&void 0!==r.validations.max&&(s.max=r.validations.max),r.validations.size&&(void 0!==r.validations.size.min&&(s.minLength=r.validations.size.min),void 0!==r.validations.size.max&&(s.maxLength=r.validations.size.max))),p[9]=r.type,p[10]=r.validations,p[11]=s):s=p[11];var h=function(e){switch(e){case"EmailNode":return"email";case"PhoneNumberNode":return"tel";case"IntNode":return"number";default:return"text"}}(r.type),y=c||"";return p[12]!==a?(f=function(e){return a(e.target.value)},p[12]=a,p[13]=f):f=p[13],p[14]!==t||p[15]!==o||p[16]!==i||p[17]!==s||p[18]!==l||p[19]!==u||p[20]!==h||p[21]!==y||p[22]!==f?(d=(0,E.jsx)(S.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(t){var n,o,i;n=e,o=t,i=r[t],(o=function(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Y(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y(t)?t:t+""}(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({fullWidth:!0,id:o,variant:"outlined",type:h,value:y,onFocus:l,onChange:f,error:t,helperText:i,inputProps:s},u)),p[14]=t,p[15]=o,p[16]=i,p[17]=s,p[18]=l,p[19]=u,p[20]=h,p[21]=y,p[22]=f,p[23]=d):d=p[23],d};var H=r(2095),X=r(5714);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee=["fieldKey","value","onChange","error","helperText","field"];function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?et(Object(r),!0).forEach(function(t){var n,o,i;n=e,o=t,i=r[t],(o=function(e){var t=function(e,t){if("object"!=J(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=J(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J(t)?t:t+""}(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let en=function(e){var t,r,o,i,a,l,u,c,s,f,d,p,h,y,v,m,g,b,x=(0,n.c)(31);if(x[0]!==e){e.fieldKey;var w=e.value,j=e.onChange,O=e.error,S=e.helperText,P=e.field,L=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ee);u=w,a=j,r=O,i=S,o=P,l=L,x[0]=e,x[1]=r,x[2]=o,x[3]=i,x[4]=a,x[5]=l,x[6]=u}else r=x[1],o=x[2],i=x[3],a=x[4],l=x[5],u=x[6];return null!=(t=o)&&t.validations&&(void 0!==o.validations.min&&(x[7]!==o.validations.min?(f=k()(o.validations.min),x[7]=o.validations.min,x[8]=f):f=x[8],c=f),void 0!==o.validations.max&&(x[9]!==o.validations.max?(d=k()(o.validations.max),x[9]=o.validations.max,x[10]=d):d=x[10],s=d)),x[11]!==u?(p=u?k()(u):null,x[11]=u,x[12]=p):p=x[12],x[13]!==a?(h=function(e){return a(e)},x[13]=a,x[14]=h):h=x[14],x[15]===Symbol.for("react.memo_cache_sentinel")?(y={width:"100%"},x[15]=y):y=x[15],x[16]!==r?(v={textField:{size:"small",error:r}},x[16]=r,x[17]=v):v=x[17],x[18]!==s||x[19]!==c||x[20]!==l||x[21]!==p||x[22]!==h||x[23]!==v?(m=(0,E.jsx)(H.M,er(er({value:p,onChange:h,sx:y,minDate:c,maxDate:s},l),{},{slotProps:v})),x[18]=s,x[19]=c,x[20]=l,x[21]=p,x[22]=h,x[23]=v,x[24]=m):m=x[24],x[25]!==i?(g=i&&(0,E.jsx)(X.Z,{children:i}),x[25]=i,x[26]=g):g=x[26],x[27]!==r||x[28]!==m||x[29]!==g?(b=(0,E.jsxs)(W.Z,{fullWidth:!0,error:r,children:[m,g]}),x[27]=r,x[28]=m,x[29]=g,x[30]=b):b=x[30],b};var eo=r(9380),ei=r(9276);function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var el=["fieldKey","value","onFocus","onChange"];function eu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let ec=function(e){var t,r,o,i,a,l,u=(0,n.c)(12);if(u[0]!==e){var c=e.fieldKey,s=e.value,f=(e.onFocus,e.onChange),d=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,el);t=c,i=s,r=f,o=d,u[0]=e,u[1]=t,u[2]=r,u[3]=o,u[4]=i}else t=u[1],r=u[2],o=u[3],i=u[4];var p=!!i;return u[5]!==r?(a=function(e){return r(e.target.checked)},u[5]=r,u[6]=a):a=u[6],u[7]!==t||u[8]!==o||u[9]!==p||u[10]!==a?(l=(0,E.jsx)(eo.Z,{control:(0,E.jsx)(ei.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(r),!0).forEach(function(t){var n,o,i;n=e,o=t,i=r[t],(o=function(e){var t=function(e,t){if("object"!=ea(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ea(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ea(t)?t:t+""}(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({id:t,checked:p,onChange:a},o)),label:""}),u[7]=t,u[8]=o,u[9]=p,u[10]=a,u[11]=l):l=u[11],l};function es(e){return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ef=["field","fieldKey","value","onFocus","onChange"];function ed(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ep(){ep=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,l,u,c,s=Object.create((r&&r.prototype instanceof v?r:v).prototype);return o(s,"_invoke",{value:(a=t,l=n,u=new L(i||[]),c=d,function(t,r){if(c===p)throw Error("Generator is already running");if(c===h){if("throw"===t)throw r;return{value:e,done:!0}}for(u.method=t,u.arg=r;;){var n=u.delegate;if(n){var o=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var l=a.arg;return l?l.done?(n[r.resultName]=l.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):l:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(n,u);if(o){if(o===y)continue;return o}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(c===d)throw c=h,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c=p;var i=f(a,l,u);if("normal"===i.type){if(c=u.done?h:"suspendedYield",i.arg===y)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(c=h,u.method="throw",u.arg=i.arg)}})}),s}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",h="completed",y={};function v(){}function m(){}function g(){}var b={};c(b,a,function(){return this});var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==r&&n.call(w,a)&&(b=w);var j=g.prototype=v.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,l){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==es(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,l)},function(e){r("throw",e,a,l)}):t.resolve(s).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,l)})}l(u.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(es(t)+" is not iterable")}return m.prototype=g,o(j,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},O(S.prototype),c(S.prototype,l,function(){return this}),t.AsyncIterator=S,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(j),c(j,u,"Generator"),c(j,a,function(){return this}),c(j,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function eh(e,t,r,n,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,o)}function ey(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){eh(i,n,o,a,l,"next",e)}function l(e){eh(i,n,o,a,l,"throw",e)}a(void 0)})}}let ev=function(e){var t,r,o,a,l,u,s,f,d,p,h,y,v,m=(0,n.c)(21);if(m[0]!==e){var g=e.field,b=(e.fieldKey,e.value),x=e.onFocus,w=e.onChange,j=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ef);r=g,u=b,a=x,o=w,l=j,m[0]=e,m[1]=r,m[2]=o,m[3]=a,m[4]=l,m[5]=u}else r=m[1],o=m[2],a=m[3],l=m[4],u=m[5];return(m[6]===Symbol.for("react.memo_cache_sentinel")?(s={display:"flex",flexDirection:"column",alignItems:"center",mt:2},m[6]=s):s=m[6],m[7]!==r||m[8]!==u?(f=u&&(0,E.jsx)(i.Z,{component:"img",className:"image-preview",src:"data:".concat(r.mimeType,";base64,").concat(u),alt:r.name,sx:{maxHeight:"150px",width:"auto",objectFit:"contain",mt:1,border:"1px solid #eee"}}),m[7]=r,m[8]=u,m[9]=f):f=m[9],m[10]===Symbol.for("react.memo_cache_sentinel")?(d={mt:2},m[10]=d):d=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(p={display:"none"},m[11]=p):p=m[11],m[12]!==o)?(t=ey(ep().mark(function e(t){var r,n,i;return ep().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null==(r=t.target.files)?void 0:r[0]){e.next=3;break}return e.abrupt("return");case 3:(i=new FileReader).onloadend=ey(ep().mark(function e(){var t,r;return ep().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"string"==typeof(null==i?void 0:i.result)&&(r=null==i||null==(t=i.result)?void 0:t.split(",")[1],o(r));case 1:case"end":return e.stop()}},e)})),i.readAsDataURL(n);case 6:case"end":return e.stop()}},e)})),h=function(e){return t.apply(this,arguments)},m[12]=o,m[13]=h):h=m[13],m[14]!==a||m[15]!==l||m[16]!==h?(y=(0,E.jsxs)(c.Z,{variant:"contained",component:"label",sx:d,children:["Upload New Image",(0,E.jsx)(S.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(r),!0).forEach(function(t){var n,o,i;n=e,o=t,i=r[t],(o=function(e){var t=function(e,t){if("object"!=es(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=es(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==es(t)?t:t+""}(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ed(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({type:"file",accept:"image/*",sx:p,onClick:a,onChange:h},l))]}),m[14]=a,m[15]=l,m[16]=h,m[17]=y):y=m[17],m[18]!==f||m[19]!==y?(v=(0,E.jsxs)(i.Z,{className:"image-preview-wrapper",sx:s,children:[f,y]}),m[18]=f,m[19]=y,m[20]=v):v=m[20],v};var em=r(4697),eg=r(1786);function eb(e){return(eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ex=["field","fieldKey","value","defaultValue","onFocus","onChange","onFirstChange","error","helperText","multiple"];function ew(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ej(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ew(Object(r),!0).forEach(function(t){var n,o,i;n=e,o=t,i=r[t],(o=function(e){var t=function(e,t){if("object"!=eb(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eb(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eb(t)?t:t+""}(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ew(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let eO=function(e){var t,r,o,i,a,l,u,c,s,f,d,p,h,y,g,b,x,w,j,O,P,L,_,k,C,N,Z,T,I,F,A,D,G,K,z,V,R=(0,n.c)(71);if(R[0]!==e){var U=e.field,q=e.fieldKey,Q=e.value,Y=e.defaultValue,$=(e.onFocus,e.onChange),B=e.onFirstChange,M=e.error,H=e.helperText,J=e.multiple,ee=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ex);f=U,d=q,x=Q,c=Y,h=$,y=B,s=M,p=H,b=J,g=ee,R[0]=e,R[1]=c,R[2]=s,R[3]=f,R[4]=d,R[5]=p,R[6]=h,R[7]=y,R[8]=g,R[9]=b,R[10]=x}else c=R[1],s=R[2],f=R[3],d=R[4],p=R[5],h=R[6],y=R[7],g=R[8],b=R[9],x=R[10];var et=void 0!==b&&b;R[11]!==f.listNodeType?(w=null==(j=f.listNodeType)?void 0:j.split(".").pop(),R[11]=f.listNodeType,R[12]=w):w=R[12];var er=w;R[13]!==f.choices?(O=f.choices||[],R[13]=f.choices,R[14]=O):O=R[14];var en=O,eo=en.length>0;R[15]!==f.id?(P={node_id:f.id},R[15]=f.id,R[16]=P):P=R[16];var ei=(0,v.m_)("class_attribute_field",P),ea=ei.data,el=ei.isLoading,eu=ei.isError;R[17]!==eo||R[18]!==y||R[19]!==(null==ea||null==(t=ea.data)||null==(t=t.results)||null==(t=t[0])||null==(t=t.result)||null==(t=t.data)?void 0:t.attributes)||R[20]!==eu||R[21]!==el?(L=function(){var e,t;eo||el||eu||(null==ea||null==(e=ea.data)||null==(e=e.results)||null==(e=e[0])||null==(e=e.result)||null==(e=e.data)||null==(e=e.attributes)?void 0:e.length)===0||y(null==ea||null==(t=ea.data)||null==(t=t.results)||null==(t=t[0])||null==(t=t.result)||null==(t=t.data)||null==(t=t.attributes)||null==(t=t.map(eS))?void 0:t[0])},R[17]=eo,R[18]=y,R[19]=null==ea||null==(_=ea.data)||null==(_=_.results)||null==(_=_[0])||null==(_=_.result)||null==(_=_.data)?void 0:_.attributes,R[20]=eu,R[21]=el,R[22]=L):L=R[22];var ec=null==ea||null==(r=ea.data)||null==(r=r.results)||null==(r=r[0])||null==(r=r.result)||null==(r=r.data)||null==(r=r.attributes)?void 0:r.length,es=null==ea||null==(o=ea.data)||null==(o=o.results)||null==(o=o[0])||null==(o=o.result)||null==(o=o.data)||null==(o=o.attributes)?void 0:o.map;R[23]!==eo||R[24]!==y||R[25]!==eu||R[26]!==el||R[27]!==ec||R[28]!==es?(k=[eo,el,eu,y,ec,es],R[23]=eo,R[24]=y,R[25]=eu,R[26]=el,R[27]=ec,R[28]=es,R[29]=k):k=R[29],(0,m.useEffect)(L,k),R[30]!==er?(C={type:er},R[30]=er,R[31]=C):C=R[31];var ef=(0,v.m_)(eo?void 0:"list_existing_node",C),ed=ef.data,ep=ef.isLoading,eh=ef.isError;R[32]!==c||R[33]!==eo||R[34]!==eh||R[35]!==ep||R[36]!==(null==ed||null==(i=ed.data)||null==(i=i.results)||null==(i=i[0])||null==(i=i.result)?void 0:i.data)||R[37]!==et||R[38]!==y?(N=function(){var e;if(eo&&!ep&&!eh&&(null==ed||null==(e=ed.data)||null==(e=e.results)||null==(e=e[0])||null==(e=e.result)||null==(e=e.data)?void 0:e.length)!==0&&!et)if(c){var t,r=Number.parseInt(c.split("@")[1]),n=null==ed||null==(t=ed.data)||null==(t=t.results)||null==(t=t[0])||null==(t=t.result)?void 0:t.data.find(function(e){return e.id===r});n?y({label:n.name,value:n.id}):y(void 0)}else y(void 0)},R[32]=c,R[33]=eo,R[34]=eh,R[35]=ep,R[36]=null==ed||null==(Z=ed.data)||null==(Z=Z.results)||null==(Z=Z[0])||null==(Z=Z.result)?void 0:Z.data,R[37]=et,R[38]=y,R[39]=N):N=R[39];var ey=null==ed||null==(a=ed.data)||null==(a=a.results)||null==(a=a[0])||null==(a=a.result)?void 0:a.data.find,ev=null==ed||null==(l=ed.data)||null==(l=l.results)||null==(l=l[0])||null==(l=l.result)||null==(l=l.data)?void 0:l.length;return R[40]!==c||R[41]!==eo||R[42]!==eh||R[43]!==ep||R[44]!==et||R[45]!==y||R[46]!==ey||R[47]!==ev?(T=[eo,ep,eh,c,ey,ev,et,y],R[40]=c,R[41]=eo,R[42]=eh,R[43]=ep,R[44]=et,R[45]=y,R[46]=ey,R[47]=ev,R[48]=T):T=R[48],(0,m.useEffect)(N,T),R[49]!==s?(I=function(e){return(0,E.jsx)(S.Z,ej(ej({},e),{},{error:s}))},R[49]=s,R[50]=I):I=R[50],R[51]!==en||R[52]!==eo||R[53]!==(null==ed||null==(u=ed.data)||null==(u=u.results)||null==(u=u[0])||null==(u=u.result)?void 0:u.data)?(F=eo?en.map(eE):(null==ed||null==(A=ed.data)||null==(A=A.results)||null==(A=A[0])||null==(A=A.result)?void 0:A.data.map(eP).sort(eL))||[],R[51]=en,R[52]=eo,R[53]=null==ed||null==(D=ed.data)||null==(D=D.results)||null==(D=D[0])||null==(D=D.result)?void 0:D.data,R[54]=F):F=R[54],R[55]!==h?(G=function(e,t){h(t)},R[55]=h,R[56]=G):G=R[56],R[57]!==d||R[58]!==et||R[59]!==g||R[60]!==I||R[61]!==F||R[62]!==G||R[63]!==x?(K=(0,E.jsx)(eg.Z,ej({disablePortal:!0,renderInput:I,options:F,groupBy:e_,getOptionKey:ek,getOptionLabel:eC,isOptionEqualToValue:eN,size:"small",id:d,value:x,onChange:G,multiple:et},g)),R[57]=d,R[58]=et,R[59]=g,R[60]=I,R[61]=F,R[62]=G,R[63]=x,R[64]=K):K=R[64],R[65]!==p?(z=p&&(0,E.jsx)(X.Z,{children:p}),R[65]=p,R[66]=z):z=R[66],R[67]!==s||R[68]!==K||R[69]!==z?(V=(0,E.jsxs)(W.Z,{fullWidth:!0,error:s,children:[K,z]}),R[67]=s,R[68]=K,R[69]=z,R[70]=V):V=R[70],V};function eS(e){return{label:e.name.split(". ")[1],value:e.id}}function eE(e){return{label:e,value:e,firstLetter:e[0].toUpperCase()}}function eP(e){var t=e.name[0].toUpperCase();return{label:e.name,value:e.id,firstLetter:"France(FR)"===e.name?" ":/[0-9]/.test(t)?"0-9":t}}function eL(e,t){return e.firstLetter!==t.firstLetter?e.firstLetter.localeCompare(t.firstLetter):e.label.localeCompare(t.label)}function e_(e){return e.firstLetter}function ek(e){var t;return null!=(t=e.value)?t:""}function eC(e){var t;return null!=(t=e.label)?t:""}function eN(e,t){return e.value===t.value}var eZ=r(7942),eT=r(6762),eI=r(4791);function eF(e){return(eF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var eA=["field","fieldKey","value","defaultValue","onFocus","onChange","error","helperText","onFirstChange"];function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(t){var n,o,i;n=e,o=t,i=r[t],(o=function(e){var t=function(e,t){if("object"!=eF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eF(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eF(t)?t:t+""}(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let eK=function(e){var t,r,o,i,a,l,u,c,s,f,d,p,h,y,v,m=(0,n.c)(27);if(m[0]!==e){var g=e.field,b=e.fieldKey,x=e.value,w=e.defaultValue,j=e.onFocus,O=e.onChange,S=e.error,P=e.helperText,L=(e.onFirstChange,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,eA));o=g,i=b,s=x,t=w,u=j,l=O,r=S,a=P,c=L,m[0]=e,m[1]=t,m[2]=r,m[3]=o,m[4]=i,m[5]=a,m[6]=l,m[7]=u,m[8]=c,m[9]=s}else t=m[1],r=m[2],o=m[3],i=m[4],a=m[5],l=m[6],u=m[7],c=m[8],s=m[9];var _=s||t;return m[10]!==l?(f=function(e){return l(e.target.value)},m[10]=l,m[11]=f):f=m[11],m[12]!==o.choices?(d=null==(p=o.choices)?void 0:p.map(ez),m[12]=o.choices,m[13]=d):d=m[13],m[14]!==i||m[15]!==u||m[16]!==c||m[17]!==_||m[18]!==f||m[19]!==d?(h=(0,E.jsx)(eT.Z,eG(eG({row:!0,name:i,value:_,onChange:f,onFocus:u},c),{},{children:d})),m[14]=i,m[15]=u,m[16]=c,m[17]=_,m[18]=f,m[19]=d,m[20]=h):h=m[20],m[21]!==a?(y=a&&(0,E.jsx)(X.Z,{children:a}),m[21]=a,m[22]=y):y=m[22],m[23]!==r||m[24]!==h||m[25]!==y?(v=(0,E.jsxs)(W.Z,{fullWidth:!0,error:r,children:[h,y]}),m[23]=r,m[24]=h,m[25]=y,m[26]=v):v=m[26],v};function ez(e,t){return(0,E.jsx)(eo.Z,{value:t,control:(0,E.jsx)(eI.Z,{}),label:e},t)}var eV=r(7884);function eR(e){return(eR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eU(){eU=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,l,u,c,s=Object.create((r&&r.prototype instanceof v?r:v).prototype);return o(s,"_invoke",{value:(a=t,l=n,u=new L(i||[]),c=d,function(t,r){if(c===p)throw Error("Generator is already running");if(c===h){if("throw"===t)throw r;return{value:e,done:!0}}for(u.method=t,u.arg=r;;){var n=u.delegate;if(n){var o=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var l=a.arg;return l?l.done?(n[r.resultName]=l.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):l:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(n,u);if(o){if(o===y)continue;return o}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(c===d)throw c=h,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c=p;var i=f(a,l,u);if("normal"===i.type){if(c=u.done?h:"suspendedYield",i.arg===y)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(c=h,u.method="throw",u.arg=i.arg)}})}),s}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",h="completed",y={};function v(){}function m(){}function g(){}var b={};c(b,a,function(){return this});var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==r&&n.call(w,a)&&(b=w);var j=g.prototype=v.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,l){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==eR(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,l)},function(e){r("throw",e,a,l)}):t.resolve(s).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,l)})}l(u.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(eR(t)+" is not iterable")}return m.prototype=g,o(j,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},O(S.prototype),c(S.prototype,l,function(){return this}),t.AsyncIterator=S,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(j),c(j,u,"Generator"),c(j,a,function(){return this}),c(j,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function eW(e,t,r,n,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,o)}function eq(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){eW(i,n,o,a,l,"next",e)}function l(e){eW(i,n,o,a,l,"throw",e)}a(void 0)})}}function eQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var eY=function(e){var t,r,o,i,a,l,u,c=(0,n.c)(15),s=e.option,f=e.fieldId,d=function(e){if(Array.isArray(e))return e}(t=(0,m.useState)(s.value))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{i=(r=r.call(e)).next,!1;for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eQ(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eQ(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=d[0],h=d[1],y=(0,v.uC)("set_value"),g=(0,R.NL)();c[0]!==f||c[1]!==g||c[2]!==y||c[3]!==p?(r=eq(eU().mark(function e(t){return eU().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",console.warn("No field provided for saving changes"));case 2:return e.prev=3,e.next=6,eZ.ZP.promise(y.mutateAsync({id:t.id,value:p},{onSuccess:function(){var e=eq(eU().mark(function e(){return eU().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(f)}]});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}),{loading:"Enregistrement de ".concat(C(t.name),"..."),success:"Changements enregistr\xe9s pour ".concat(C(t.name)),error:"Erreur lors de l'enregistrement des changements pour ".concat(C(t.name))});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Error saving changes:",e.t0);case 12:case"end":return e.stop()}},e,null,[[3,8]])})),o=function(e){return r.apply(this,arguments)},c[0]=f,c[1]=g,c[2]=y,c[3]=p,c[4]=o):o=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(i={maxWait:2e3},c[5]=i):i=c[5];var b=(0,em.y1)(o,500,i),x=p||!1;return c[6]!==b||c[7]!==s?(a=function(e){h(e.target.checked),b(s)},c[6]=b,c[7]=s,c[8]=a):a=c[8],c[9]!==x||c[10]!==a?(l=(0,E.jsx)(ei.Z,{checked:x,onChange:a}),c[9]=x,c[10]=a,c[11]=l):l=c[11],c[12]!==s.name||c[13]!==l?(u=(0,E.jsx)(eo.Z,{label:s.name,control:l}),c[12]=s.name,c[13]=l,c[14]=u):u=c[14],u};let e$=function(e){var t,r,o,i,a,l,u,c,s=(0,n.c)(13),f=e.field,d=e.error,p=e.helperText;s[0]!==f.id?(r={node_id:f.id},s[0]=f.id,s[1]=r):r=s[1];var h=(0,v.m_)("class_attribute_field",r).data;return s[2]!==(null==h||null==(t=h.data)||null==(t=t.results)||null==(t=t[0])||null==(t=t.result)||null==(t=t.data)?void 0:t.attributes)||s[3]!==f.id?(o=null==h||null==(i=h.data)||null==(i=i.results)||null==(i=i[0])||null==(i=i.result)||null==(i=i.data)||null==(i=i.attributes)?void 0:i.map(function(e,t){return(0,E.jsx)(eY,{option:e,fieldId:f.id},t)}),s[2]=null==h||null==(a=h.data)||null==(a=a.results)||null==(a=a[0])||null==(a=a.result)||null==(a=a.data)?void 0:a.attributes,s[3]=f.id,s[4]=o):o=s[4],s[5]!==o?(l=(0,E.jsx)(eV.Z,{row:!0,children:o}),s[5]=o,s[6]=l):l=s[6],s[7]!==p?(u=p&&(0,E.jsx)(X.Z,{children:p}),s[7]=p,s[8]=u):u=s[8],s[9]!==d||s[10]!==l||s[11]!==u?(c=(0,E.jsxs)(W.Z,{fullWidth:!0,error:d,children:[l,u]}),s[9]=d,s[10]=l,s[11]=u,s[12]=c):c=s[12],c};var eB=r(3180),eM=r(4649),eH=r(5471);r(4493),r(3608);var eX=r(1994);function eJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}eB.Tu.workerSrc=new URL(r(7663),r.b).toString();let e0=function(e){var t,r,o,u,s,d,p,h,y,v,g,b,x,w,j,O=(0,n.c)(28),S=e.value,P=e.onChange,L=e.error,_=e.helperText,k=function(e){if(Array.isArray(e))return e}(t=(0,m.useState)(S))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{i=(r=r.call(e)).next,!1;for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eJ(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eJ(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),C=k[0],N=k[1];O[0]!==S?(r=function(){if(S){for(var e=atob(S),t=Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);var n=new Blob([new Uint8Array(t)],{type:"application/pdf"});N(URL.createObjectURL(n))}},o=[S],O[0]=S,O[1]=r,O[2]=o):(r=O[1],o=O[2]),(0,m.useEffect)(r,o),O[3]!==P?(u=function(e){var t=e.target.files[0];if(t&&"application/pdf"===t.type){var r=new FileReader;r.onloadend=function(){if("string"==typeof r.result){var e;P(null==(e=r.result)?void 0:e.split(",")[1])}},r.readAsDataURL(t)}else t&&(alert("Please select a PDF file."),e.target.value=null)},O[3]=P,O[4]=u):u=O[4];var Z=u;O[5]!==C?(s=function(e){e.stopPropagation(),C&&window.open(C,"_blank","noopener,noreferrer")},O[5]=C,O[6]=s):s=O[6];var T=s;O[7]===Symbol.for("react.memo_cache_sentinel")?(d={display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},O[7]=d):d=O[7];var I="2px solid ".concat(L?"error.main":"transparent");return O[8]===Symbol.for("react.memo_cache_sentinel")?(p={borderColor:"primary.main",boxShadow:4,transform:"scale(1.02)"},O[8]=p):p=O[8],O[9]!==I?(h={cursor:"pointer",border:I,borderRadius:"8px",width:"180px",height:"254px",overflow:"hidden",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f8f8f8",mb:2,transition:"all 0.2s ease-in-out","&:hover":p},O[9]=I,O[10]=h):h=O[10],O[11]!==C?(y=C?(0,E.jsx)(eM.Z,{file:C,loading:(0,E.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,E.jsx)(a.Z,{size:40,sx:{mb:1}}),(0,E.jsx)(l.Z,{variant:"caption",color:"text.secondary",children:"Loading PDF..."})]}),error:(0,E.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[(0,E.jsx)(eX.Z,{color:"error",sx:{fontSize:40,mb:1}}),(0,E.jsx)(l.Z,{variant:"caption",color:"error",children:"Preview not available"})]}),children:(0,E.jsx)(eH.Z,{pageNumber:1,width:180,renderTextLayer:!1,renderAnnotationLayer:!1})}):(0,E.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[(0,E.jsx)(eX.Z,{color:"disabled",sx:{fontSize:60,mb:1}}),(0,E.jsx)(l.Z,{variant:"caption",color:"text.secondary",align:"center",children:"No PDF selected"})]}),O[11]=C,O[12]=y):y=O[12],O[13]!==T||O[14]!==h||O[15]!==y?(v=(0,E.jsx)(f.Z,{elevation:2,onClick:T,sx:h,children:y}),O[13]=T,O[14]=h,O[15]=y,O[16]=v):v=O[16],O[17]===Symbol.for("react.memo_cache_sentinel")?(g=(0,E.jsx)(eX.Z,{}),b={mt:1},O[17]=g,O[18]=b):(g=O[17],b=O[18]),O[19]!==Z?(x=(0,E.jsxs)(c.Z,{variant:"contained",component:"label",color:"primary",startIcon:g,sx:b,children:["Upload PDF",(0,E.jsx)("input",{type:"file",hidden:!0,accept:"application/pdf",onChange:Z})]}),O[19]=Z,O[20]=x):x=O[20],O[21]!==L||O[22]!==_?(w=_&&(0,E.jsx)(l.Z,{color:L?"error":"textSecondary",variant:"caption",sx:{mt:1},children:_}),O[21]=L,O[22]=_,O[23]=w):w=O[23],O[24]!==v||O[25]!==x||O[26]!==w?(j=(0,E.jsxs)(i.Z,{sx:d,children:[v,x,w]}),O[24]=v,O[25]=x,O[26]=w,O[27]=j):j=O[27],j};function e1(e){return(e1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e2=["field","fieldKey","value","onFocus","onChange","onFirstChange","error","helperText"];function e3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let e4=function(e){var t,r,o,i,a,l,u,c,s,f,d,p,h,y,g,b,x=(0,n.c)(31);if(x[0]!==e){var w=e.field,j=e.fieldKey,O=e.value,S=(e.onFocus,e.onChange),P=e.onFirstChange,L=e.error,_=e.helperText,k=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,e2);a=w,l=j,d=O,c=S,s=P,i=L,u=_,f=k,x[0]=e,x[1]=i,x[2]=a,x[3]=l,x[4]=u,x[5]=c,x[6]=s,x[7]=f,x[8]=d}else i=x[1],a=x[2],l=x[3],u=x[4],c=x[5],s=x[6],f=x[7],d=x[8];x[9]!==a.id?(p={node_id:a.id},x[9]=a.id,x[10]=p):p=x[10];var C=(0,v.m_)("class_attribute_field",p),N=C.data,Z=C.isLoading,T=C.isError;x[11]!==T||x[12]!==Z||x[13]!==s||x[14]!==(null==N||null==(t=N.data)||null==(t=t.results)||null==(t=t[0])||null==(t=t.result)||null==(t=t.data)?void 0:t.attributes)?(h=function(){var e,t;Z||T||(null==N||null==(e=N.data)||null==(e=e.results)||null==(e=e[0])||null==(e=e.result)||null==(e=e.data)||null==(e=e.attributes)?void 0:e.length)===0||s(null==N||null==(t=N.data)||null==(t=t.results)||null==(t=t[0])||null==(t=t.result)||null==(t=t.data)||null==(t=t.attributes)?void 0:t.map(e5))},x[11]=T,x[12]=Z,x[13]=s,x[14]=null==N||null==(y=N.data)||null==(y=y.results)||null==(y=y[0])||null==(y=y.result)||null==(y=y.data)?void 0:y.attributes,x[15]=h):h=x[15];var I=null==N||null==(r=N.data)||null==(r=r.results)||null==(r=r[0])||null==(r=r.result)||null==(r=r.data)||null==(r=r.attributes)?void 0:r.length,F=null==N||null==(o=N.data)||null==(o=o.results)||null==(o=o[0])||null==(o=o.result)||null==(o=o.data)||null==(o=o.attributes)?void 0:o.map;return x[16]!==T||x[17]!==Z||x[18]!==s||x[19]!==I||x[20]!==F?(g=[Z,T,s,I,F],x[16]=T,x[17]=Z,x[18]=s,x[19]=I,x[20]=F,x[21]=g):g=x[21],(0,m.useEffect)(h,g),x[22]!==i||x[23]!==a||x[24]!==l||x[25]!==u||x[26]!==c||x[27]!==s||x[28]!==f||x[29]!==d?(b=(0,E.jsx)(eO,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e3(Object(r),!0).forEach(function(t){var n,o,i;n=e,o=t,i=r[t],(o=function(e){var t=function(e,t){if("object"!=e1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=e1(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e1(t)?t:t+""}(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e3(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({field:a,fieldKey:l,value:d,onChange:c,onFirstChange:s,error:i,helperText:u,multiple:!0},f)),x[22]=i,x[23]=a,x[24]=l,x[25]=u,x[26]=c,x[27]=s,x[28]=f,x[29]=d,x[30]=b):b=x[30],b};function e5(e){return{firstLetter:e.name.split(". ")[1][0],label:e.name.split(". ")[1],value:e.id}}var e6=r(770);function e7(e){return(e7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e8=["value","onFocus","onChange","error","helperText"];function e9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let te=function(e){var t,r,o,i,a,u,c,s,f,d,p,h=(0,n.c)(21);h[0]!==e?(u=e.value,i=e.onFocus,o=e.onChange,t=e.error,r=e.helperText,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,e8),h[0]=e,h[1]=t,h[2]=r,h[3]=o,h[4]=i,h[5]=a,h[6]=u):(t=h[1],r=h[2],o=h[3],i=h[4],a=h[5],u=h[6]),h[7]===Symbol.for("react.memo_cache_sentinel")?(c={marginLeft:20},h[7]=c):c=h[7];var y=u||"";return h[8]!==o?(s=function(e){o(e.hex)},h[8]=o,h[9]=s):s=h[9],h[10]!==i||h[11]!==a||h[12]!==y||h[13]!==s?(f=(0,E.jsx)(e6.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e9(Object(r),!0).forEach(function(t){var n,o,i;n=e,o=t,i=r[t],(o=function(e){var t=function(e,t){if("object"!=e7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=e7(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e7(t)?t:t+""}(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e9(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({style:c,color:y,onFocus:i,onChange:s},a)),h[10]=i,h[11]=a,h[12]=y,h[13]=s,h[14]=f):f=h[14],h[15]!==t||h[16]!==r?(d=r&&(0,E.jsx)(l.Z,{color:t?"error":"textSecondary",variant:"caption",sx:{mt:1},children:r}),h[15]=t,h[16]=r,h[17]=d):d=h[17],h[18]!==f||h[19]!==d?(p=(0,E.jsxs)(E.Fragment,{children:[f,d]}),h[18]=f,h[19]=d,h[20]=p):p=h[20],p};function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(){tr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,l,u,c,s=Object.create((r&&r.prototype instanceof v?r:v).prototype);return o(s,"_invoke",{value:(a=t,l=n,u=new L(i||[]),c=d,function(t,r){if(c===p)throw Error("Generator is already running");if(c===h){if("throw"===t)throw r;return{value:e,done:!0}}for(u.method=t,u.arg=r;;){var n=u.delegate;if(n){var o=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var l=a.arg;return l?l.done?(n[r.resultName]=l.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):l:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(n,u);if(o){if(o===y)continue;return o}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(c===d)throw c=h,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c=p;var i=f(a,l,u);if("normal"===i.type){if(c=u.done?h:"suspendedYield",i.arg===y)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(c=h,u.method="throw",u.arg=i.arg)}})}),s}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",h="completed",y={};function v(){}function m(){}function g(){}var b={};c(b,a,function(){return this});var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==r&&n.call(w,a)&&(b=w);var j=g.prototype=v.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,l){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==tt(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,l)},function(e){r("throw",e,a,l)}):t.resolve(s).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,l)})}l(u.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(tt(t)+" is not iterable")}return m.prototype=g,o(j,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},O(S.prototype),c(S.prototype,l,function(){return this}),t.AsyncIterator=S,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(j),c(j,u,"Generator"),c(j,a,function(){return this}),c(j,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function tn(e,t,r,n,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,o)}function to(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){tn(i,n,o,a,l,"next",e)}function l(e){tn(i,n,o,a,l,"throw",e)}a(void 0)})}}function ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ta(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ta(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let tl=m.memo(function(e){var t,r,n,o=e.field,a=e.fieldKey,s=e.isExpanded,f=e.onToggleField,d=e.onChangingForm,p=e.parentId,h=e.defaultValue,y=void 0===h?"":h,g=o.id,b=o.name,x=o.type,w=o.validations,j=o.isValid;o.choices,o.source;var O=ti((0,m.useState)(K.includes(x)?"RADIO"===o.listType?o.value:[]:y),2),S=O[0],P=O[1],L=ti((0,m.useState)(!1),2),_=L[0],k=L[1],N=ti((0,m.useState)(""),2),Y=N[0],$=N[1],B=(0,R.NL)(),H=(0,v.uC)("set_value"),X=(0,v.uC)("add_existing_node"),J=(0,v.uC)("remove_from_list"),ee=(0,em.y1)(function(e){var t=T(x,e,w);return k(!t.isValid),$(t.message),t.isValid},300,{maxWait:1e3});(0,m.useEffect)(function(){ee(S)},[S,ee]);var et=(0,em.y1)((t=to(tr().mark(function e(t){return tr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",console.warn("No field provided for saving changes"));case 2:if(ee(S)){e.next=6;break}return"Invalid value for ".concat(t.name," (").concat(t.type,"): ").concat(S),e.abrupt("return");case 6:return e.prev=6,e.next=9,eZ.ZP.promise(H.mutateAsync({id:t.id,value:S,parentId:p},{onSuccess:function(){var e=to(tr().mark(function e(){return tr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(p)}]});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}),{loading:"Enregistrement de ".concat(C(t.name),"..."),success:"Changements enregistr\xe9s pour ".concat(C(t.name)),error:"Erreur lors de l'enregistrement des changements pour ".concat(C(t.name))});case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(6),console.error("Error saving changes:",e.t0),k(!0),$("Error saving changes: ".concat(e.t0.message));case 16:case"end":return e.stop()}},e,null,[[6,11]])})),function(e){return t.apply(this,arguments)}),500,{maxWait:2e3}),er=(0,m.useCallback)((r=to(tr().mark(function e(t){return tr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return P(null),e.abrupt("return");case 3:return P(t),e.prev=4,e.next=7,eZ.ZP.promise(H.mutateAsync({id:o.id,value:t},{onSuccess:function(){var e=to(tr().mark(function e(){return tr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(p)}]});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}),{loading:"Enregistrement de ".concat(C(o.name),"..."),success:"Changements enregistr\xe9s pour ".concat(C(o.name)),error:"Erreur lors de l'enregistrement des changements pour ".concat(C(o.name))});case 7:e.next=14;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("Error saving changes:",e.t0),k(!0),$("Error saving changes: ".concat(e.t0.message));case 14:case"end":return e.stop()}},e,null,[[4,9]])})),function(e){return r.apply(this,arguments)}),[o.id,o.name,p,B.invalidateQueries,H.mutateAsync]),eo=(0,em.y1)((n=to(tr().mark(function e(t,r){var n,o=arguments;return tr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(o.length>2)||void 0===o[2]||o[2],t){e.next=3;break}return e.abrupt("return",console.warn("No field provided for saving changes"));case 3:if(ee(r)){e.next=7;break}return"Invalid value for ".concat(t.name," (").concat(t.type,"): ").concat(r),e.abrupt("return");case 7:return e.prev=7,e.next=10,eZ.ZP.promise((n?X:J).mutateAsync({node_id:t.id,id:r},{onSuccess:function(){var e=to(tr().mark(function e(){return tr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(p)}]});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}),{loading:"Enregistrement de ".concat(C(t.name),"..."),success:"Changements enregistr\xe9s pour ".concat(C(t.name)),error:"Erreur lors de l'enregistrement des changements pour ".concat(C(t.name))});case 10:e.next=17;break;case 12:e.prev=12,e.t0=e.catch(7),console.error("Error saving changes:",e.t0),k(!0),$("Error saving changes: ".concat(e.t0.message));case 17:case"end":return e.stop()}},e,null,[[7,12]])})),function(e,t){return n.apply(this,arguments)})),ei=(0,m.useCallback)(function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=T(o.type,e,w);k(!t),t?$(""):$(Z(o.type,e,w)),et(o),P(e)},[o,et,w]),ea=(0,m.useCallback)(function(e){var t=T(o.type,null==e?void 0:e.value,w);k(!t),t?$(""):$(Z(o.type,null==e?void 0:e.value,w)),eo(o,null==e?void 0:e.value),P(e)},[o,eo,w]),el=(0,m.useCallback)(function(e){P(e)},[]),eu=(0,m.useCallback)(function(e){if(ee(e)){var t=S||[],r=e||[],n=r.filter(function(e){return!t.some(function(t){return t.value===e.value})});n.length>0&&n.forEach(function(e){eo(o,e.value)});var i=t.filter(function(e){return!r.some(function(t){return t.value===e.value})});i.length>0&&i.forEach(function(e){eo(o,e.value,!1)}),P(e)}},[o,eo,S,ee]),es=(0,m.useCallback)(function(e){return P(e)},[]),ef=(0,m.useCallback)(function(){d(b,g)},[d,b,g]),ed=(0,m.useCallback)(function(){f(a,g)},[f,a,g]);return(0,m.useEffect)(function(){return function(){et.flush()}},[et]),(0,E.jsx)(i.Z,{className:"form-field-wrapper",sx:{p:1},children:(0,E.jsxs)(U.Z,{container:!0,className:"form-field",spacing:2,alignItems:"center",children:[(0,E.jsx)(U.Z,{size:{xs:12,sm:4},children:(0,E.jsxs)(W.Z,{component:"fieldset",sx:{display:"flex",flexDirection:"row"},children:[(0,E.jsx)(c.Z,{tabIndex:-1,variant:"text",color:"primary",onClick:ef,title:a,sx:{textAlign:"left",justifyContent:"flex-start"},children:(0,E.jsx)(l.Z,{fontWeight:"medium",color:!1===j?"error":"primary",sx:{fontWeight:!1===j?"bold":"regular"},children:C(b)})}),!(V.includes(x)||K.includes(x)&&"LIST"!==o.listType)&&(0,E.jsx)(i.Z,{className:"toggle-wrapper",textAlign:"right",children:(0,E.jsx)(u.Z,{onClick:ed,size:"small",children:s?(0,E.jsx)(Q.Z,{}):(0,E.jsx)(q.Z,{})})})]})}),(0,E.jsxs)(U.Z,{size:{xs:12,sm:6},children:[K.includes(x)&&"CHECKBOX"===o.listType&&(0,E.jsx)(e$,{field:o,error:_,helperText:_?Y:""}),I.includes(x)&&(0,E.jsx)(M,{field:o,fieldKey:a,value:S,onChange:ei,size:"small",error:_,helperText:_?Y:""}),A.includes(x)&&(0,E.jsx)(en,{fieldKey:a,field:o,value:S,onChange:ei,error:_,helperText:_?Y:""}),F.includes(x)&&(0,E.jsx)(ec,{fieldKey:a,value:S,onChange:ei}),D.includes(x)&&s&&(0,E.jsx)(ev,{field:o,fieldKey:a,value:S,onChange:ei,size:"small"}),K.includes(x)&&"DROPDOWN"===o.listType&&(0,E.jsx)(eO,{field:o,fieldKey:a,value:null!=S?S:null,onChange:ea,onFirstChange:el,defaultValue:y,error:_,helperText:_?Y:""}),K.includes(x)&&o.isDropdown&&(0,E.jsx)(e4,{field:o,fieldKey:a,value:null!=S?S:[],onChange:eu,onFirstChange:es,error:_,helperText:_?Y:""}),K.includes(x)&&"RADIO"===o.listType&&(0,E.jsx)(eK,{field:o,fieldKey:a,value:S,onChange:ei,onFirstChange:el,defaultValue:y,error:_,helperText:_?Y:""}),G.includes(x)&&(0,E.jsx)(e0,{value:S,onChange:er,error:_,helperText:Y}),z.includes(x)&&(0,E.jsx)(te,{value:S,onChange:ei,error:_,helperText:Y})]})]})},a)},function(e,t){return e.fieldKey===t.fieldKey&&e.isExpanded===t.isExpanded&&e.onToggleField===t.onToggleField&&e.defaultValue===t.defaultValue}),tu=function(e){var t=e.parentId,r=e.fields,n=e.visited,o=void 0===n?new Set:n,i=e.expandedFields,a=e.toggleField,u=e.handleChangingForm,c=e.rootId;return r&&Array.isArray(r)?r.map(function(e){var r=e.id,n=e.name,s=e.type;if(!n||"graph"===n)return null;var f=N(e.id,e.name);if(o.has(r))return(0,E.jsxs)(l.Z,{color:"error",children:["Circular reference detected for ",n]},"cycle-".concat(r));var d=i[f]||!1;return(0,E.jsxs)(m.Fragment,{children:[(0,E.jsx)(tl,{field:e,fieldKey:f,isExpanded:d,onToggleField:a,onChangingForm:u,defaultValue:e.value,parentId:t}),!(V.includes(s)||K.includes(s)&&"LIST"!==e.listType)&&(0,E.jsx)(tg,{fieldKey:f,field:e,rootId:c,isToggle:d})]},f)}):null};function tc(e){return(tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ts(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ts(Object(r),!0).forEach(function(t){td(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ts(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function td(e,t,r){var n;return(n=function(e,t){if("object"!=tc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tc(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==tc(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tp(){tp=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,l,u,c,s=Object.create((r&&r.prototype instanceof v?r:v).prototype);return o(s,"_invoke",{value:(a=t,l=n,u=new L(i||[]),c=d,function(t,r){if(c===p)throw Error("Generator is already running");if(c===h){if("throw"===t)throw r;return{value:e,done:!0}}for(u.method=t,u.arg=r;;){var n=u.delegate;if(n){var o=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var l=a.arg;return l?l.done?(n[r.resultName]=l.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):l:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(n,u);if(o){if(o===y)continue;return o}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(c===d)throw c=h,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c=p;var i=f(a,l,u);if("normal"===i.type){if(c=u.done?h:"suspendedYield",i.arg===y)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(c=h,u.method="throw",u.arg=i.arg)}})}),s}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",h="completed",y={};function v(){}function m(){}function g(){}var b={};c(b,a,function(){return this});var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==r&&n.call(w,a)&&(b=w);var j=g.prototype=v.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,l){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==tc(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,l)},function(e){r("throw",e,a,l)}):t.resolve(s).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,l)})}l(u.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(tc(t)+" is not iterable")}return m.prototype=g,o(j,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},O(S.prototype),c(S.prototype,l,function(){return this}),t.AsyncIterator=S,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(j),c(j,u,"Generator"),c(j,a,function(){return this}),c(j,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function th(e,t,r,n,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,o)}function ty(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){th(i,n,o,a,l,"next",e)}function l(e){th(i,n,o,a,l,"throw",e)}a(void 0)})}}function tv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tm(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tm(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}let tg=m.memo(function(e){e.fieldKey;var t,r,n,a,u,s,f,d=e.field,p=e.rootId,h=e.isRoot,y=void 0!==h&&h,x=e.isToggle,w=void 0!==x&&x,j=(0,v.m_)("class_attribute_field",{node_id:"string"==typeof d.id?Number.parseInt(d.id):d.id},{enabled:w||y}),O=j.data,S=j.isLoading;j.error,j.refetch;var P=(0,o.s0)(),_=(0,R.NL)(),k=(0,v.uC)("jump"),C=(0,v.uC)("add_node"),Z=(0,v.uC)("list_existing_node"),T=(0,v.uC)("add_existing_node"),I=tv((0,m.useState)({}),2),F=I[0],A=I[1],D=tv((0,m.useState)(!1),2),G=D[0],z=D[1],V=tv((0,m.useState)([]),2),U=V[0],W=V[1],q=tv((0,m.useState)(null),2),Q=q[0],Y=q[1],$=tv((0,m.useState)(!1),2),B=$[0],M=$[1],H=(0,m.useCallback)((t=ty(tp().mark(function e(t,r){return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.mutateAsync({node_id:r});case 3:return e.next=5,P("/add-node/form/".concat(r));case 5:window.location.reload(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error changing form:",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e,r){return t.apply(this,arguments)}),[k,P]);d.id;var X=d.type,J=d.name,ee=(0,m.useRef)(F);(0,m.useEffect)(function(){ee.current=F},[F]);var et=(0,m.useCallback)((r=ty(tp().mark(function e(t,r){var n;return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=ee.current[t],A(function(e){return tf(tf({},e),{},td({},t,!n))});case 2:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)}),[]),er=(0,m.useCallback)((n=ty(tp().mark(function e(t){var r,n;return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null==t?void 0:t.id,n=null==t?void 0:t.listNodeType,e.prev=2,e.next=5,C.mutateAsync({BNodeClass:n,node_id:r},{onSuccess:function(){var e=ty(tp().mark(function e(){return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:r}]});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});case 5:e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("Error adding new node:",e.t0);case 11:case"end":return e.stop()}},e,null,[[2,8]])})),function(e){return n.apply(this,arguments)}),[C,_.invalidateQueries]),en=(0,m.useCallback)((a=ty(tp().mark(function e(t){var r,n,o;return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Y(t),z(!0),M(!0),r=t.listNodeType.split(".").pop(),e.prev=4,e.next=7,Z.mutateAsync({type:r});case 7:W((null==(o=e.sent)||null==(n=o.data)||null==(n=n.results)||null==(n=n[0])||null==(n=n.result)?void 0:n.data)||[]),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("Error fetching class attribute field:",e.t0);case 15:return e.prev=15,M(!1),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[4,12,15,18]])})),function(e){return a.apply(this,arguments)}),[Z]),eo=(0,m.useCallback)((u=ty(tp().mark(function e(t){return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.mutateAsync({id:t.id,node_id:d.id},{onSuccess:function(){var e=ty(tp().mark(function e(){return tp().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:d.id}]});case 2:k.mutate({node_id:p});case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error adding existing node:",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])})),function(e){return u.apply(this,arguments)}),[T,k,p,d.id,_.invalidateQueries]),ei=(0,m.useCallback)(function(e,t){eo(e),z(!1)},[eo]);(0,m.useEffect)(function(){if(!S&&O){var e,t={},r={};((null==O||null==(e=O.data)||null==(e=e.results)||null==(e=e[0])||null==(e=e.result)||null==(e=e.data)?void 0:e.attributes)||[]).forEach(function(e){if(e.name&&"null"!==e.value&&void 0!==e.value){var n=N(e.id,e.name);t[n]=e.value,r[n]=e}})}},[S,O]);var ea=(null==O||null==(s=O.data)||null==(s=s.results)||null==(s=s[0])||null==(s=s.result)||null==(s=s.data)?void 0:s.attributes)||[];return(0,E.jsxs)(m.Fragment,{children:[y?(0,E.jsx)(i.Z,{component:"form",className:"form-fields",onSubmit:function(e){return e.preventDefault()},sx:{mt:3},children:ea.length>0?(0,E.jsx)(tu,{parentId:d.id,fields:ea,expandedFields:F,toggleField:et,handleChangingForm:H,rootId:p}):(0,E.jsx)(l.Z,{children:"No fields available."})}):(0,E.jsxs)(i.Z,{className:"nested-fields",sx:{mt:2,pl:2,borderLeft:"1px solid #e0e0e0"},children:[w&&(ea.length>0?(0,E.jsx)(tu,{parentId:d.id,fields:ea,expandedFields:F,toggleField:et,handleChangingForm:H,rootId:p}):(0,E.jsx)(l.Z,{variant:"body2",color:"text.secondary",children:"No subfields available for this."})),K.includes(X)&&w&&d.canAddNewNode&&(0,E.jsxs)(g.Z,{direction:"row",spacing:2,className:"add-new-node",sx:{mt:2},children:[null!=(f=d.allowCreation)?f:(0,E.jsxs)(c.Z,{variant:"outlined",startIcon:(0,E.jsx)(b.Z,{}),onClick:function(){return er(d)},children:["Add new ",J]}),(0,E.jsxs)(c.Z,{variant:"outlined",startIcon:(0,E.jsx)(b.Z,{}),onClick:function(){return en(d)},children:["Add ",J," from Existing Node"]})]})]}),(0,E.jsx)(L,{show:G,selectedField:Q,existingNodeList:U,loadingExistingNodes:B,onClose:function(){z(!1),k.mutate({node_id:p})},onSelectNode:ei})]})},function(e,t){return e.fieldKey===t.fieldKey&&e.rootId===t.rootId&&e.isToggle===t.isToggle});var tb=r(9599),tx=r(7454),tw=r(3162);function tj(e){return(tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tO(){tO=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(t,r,n,i){var a,l,u,c,s=Object.create((r&&r.prototype instanceof v?r:v).prototype);return o(s,"_invoke",{value:(a=t,l=n,u=new L(i||[]),c=d,function(t,r){if(c===p)throw Error("Generator is already running");if(c===h){if("throw"===t)throw r;return{value:e,done:!0}}for(u.method=t,u.arg=r;;){var n=u.delegate;if(n){var o=function t(r,n){var o=n.method,i=r.iterator[o];if(i===e)return n.delegate=null,"throw"===o&&r.iterator.return&&(n.method="return",n.arg=e,t(r,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+o+"' method")),y;var a=f(i,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var l=a.arg;return l?l.done?(n[r.resultName]=l.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):l:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}(n,u);if(o){if(o===y)continue;return o}}if("next"===u.method)u.sent=u._sent=u.arg;else if("throw"===u.method){if(c===d)throw c=h,u.arg;u.dispatchException(u.arg)}else"return"===u.method&&u.abrupt("return",u.arg);c=p;var i=f(a,l,u);if("normal"===i.type){if(c=u.done?h:"suspendedYield",i.arg===y)continue;return{value:i.arg,done:u.done}}"throw"===i.type&&(c=h,u.method="throw",u.arg=i.arg)}})}),s}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",h="completed",y={};function v(){}function m(){}function g(){}var b={};c(b,a,function(){return this});var x=Object.getPrototypeOf,w=x&&x(x(_([])));w&&w!==r&&n.call(w,a)&&(b=w);var j=g.prototype=v.prototype=Object.create(b);function O(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){var r;o(this,"_invoke",{value:function(o,i){function a(){return new t(function(r,a){!function r(o,i,a,l){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,s=c.value;return s&&"object"==tj(s)&&n.call(s,"__await")?t.resolve(s.__await).then(function(e){r("next",e,a,l)},function(e){r("throw",e,a,l)}):t.resolve(s).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,l)})}l(u.arg)}(o,i,r,a)})}return r=r?r.then(a,a):a()}})}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function _(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw TypeError(tj(t)+" is not iterable")}return m.prototype=g,o(j,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},O(S.prototype),c(S.prototype,l,function(){return this}),t.AsyncIterator=S,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},O(j),c(j,u,"Generator"),c(j,a,function(){return this}),c(j,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=_,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:_(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function tS(e,t,r,n,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,o)}function tE(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){tS(i,n,o,a,l,"next",e)}function l(e){tS(i,n,o,a,l,"throw",e)}a(void 0)})}}let tP=function(){var e,t,r,h,m,g,x,w,j,O,S,P,L,_,k,Z,T,I,F,A,D,G,K,z,V,U=(0,n.c)(57),W=(0,o.UO)().rootId,q=W?parseInt(W):0,Q=(0,R.NL)(),Y=(0,o.s0)();U[0]!==q?(el={node_id:q},U[0]=q,U[1]=el):el=U[1];var $=(0,v.m_)("class_attribute_field",el),B=$.data,M=$.isLoading,H=$.error,X=$.refetch,J=null==B||null==(eo=B.data)||null==(eo=eo.results)||null==(eo=eo[0])||null==(eo=eo.result)||null==(eo=eo.data)||null==(eo=eo.currentNode)?void 0:eo.name,ee=(0,v.uC)("export_csv"),et=(0,v.uC)("remove_node");U[2]!==Q||U[3]!==(null==B||null==(ei=B.data)||null==(ei=ei.results)||null==(ei=ei[0])||null==(ei=ei.result)||null==(ei=ei.data)?void 0:ei.attributes)?(eu={onSuccess:(en=tE(tO().mark(function e(){var t;return tO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:null==B||null==(t=B.data)||null==(t=t.results)||null==(t=t[0])||null==(t=t.result)||null==(t=t.data)||null==(t=t.attributes)?void 0:t.filter(tL)[0].id}]});case 2:case"end":return e.stop()}},e)})),function(){return en.apply(this,arguments)})},U[2]=Q,U[3]=null==B||null==(ec=B.data)||null==(ec=ec.results)||null==(ec=ec[0])||null==(ec=ec.result)||null==(ec=ec.data)?void 0:ec.attributes,U[4]=eu):eu=U[4];var er=(0,v.uC)("search_node",eu);if(M)return U[5]===Symbol.for("react.memo_cache_sentinel")?(es=(0,E.jsx)(i.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:(0,E.jsx)(a.Z,{})}),U[5]=es):es=U[5],es;if(H){var en,eo,ei,ea,el,eu,ec,es,ef,ed=H.message||"Unknown error";return U[6]!==ed?(ef=(0,E.jsxs)(l.Z,{color:"error",children:["Error loading form fields: ",ed]}),U[6]=ed,U[7]=ef):ef=U[7],ef}return(U[8]===Symbol.for("react.memo_cache_sentinel")?(r={p:3,position:"relative"},U[8]=r):r=U[8],U[9]!==Y?(h=function(){return Y(-1)},U[9]=Y,U[10]=h):h=U[10],U[11]===Symbol.for("react.memo_cache_sentinel")?(m={position:"absolute",top:16,right:16},g=(0,E.jsx)(y.Z,{}),U[11]=m,U[12]=g):(m=U[11],g=U[12]),U[13]!==h?(x=(0,E.jsx)(u.Z,{className:"close-button",onClick:h,"aria-label":"close",sx:m,children:g}),U[13]=h,U[14]=x):x=U[14],U[15]!==J?(w=C(J),U[15]=J,U[16]=w):w=U[16],U[17]!==w?(j=(0,E.jsxs)(l.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:["Form for: ",w]}),U[17]=w,U[18]=j):j=U[18],U[19]!==J||U[20]!==q?(O=N(q,J),U[19]=J,U[20]=q,U[21]=O):O=U[21],U[22]!==q?(S={id:q},U[22]=q,U[23]=S):S=U[23],U[24]!==q||U[25]!==S||U[26]!==O?(P=(0,E.jsx)(tg,{fieldKey:O,rootId:q,isRoot:!0,field:S}),U[24]=q,U[25]=S,U[26]=O,U[27]=P):P=U[27],U[28]!==(null==B||null==(ea=B.data)||null==(ea=ea.results)||null==(ea=ea[0])||null==(ea=ea.result)||null==(ea=ea.data.currentNode)?void 0:ea.type)||U[29]!==q||U[30]!==er?(L=(null==B||null==(_=B.data)||null==(_=_.results)||null==(_=_[0])||null==(_=_.result)||null==(_=_.data.currentNode)?void 0:_.type)==="SearchForm"?(0,E.jsx)(c.Z,{variant:"contained",color:"primary",sx:{},onClick:function(){return er.mutate({node_id:q})},children:"Rechercher"}):"",U[28]=null==B||null==(k=B.data)||null==(k=k.results)||null==(k=k[0])||null==(k=k.result)||null==(k=k.data.currentNode)?void 0:k.type,U[29]=q,U[30]=er,U[31]=L):L=U[31],U[32]!==P||U[33]!==L||U[34]!==x||U[35]!==j?(Z=(0,E.jsxs)(s.Z,{className:"form-page",component:f.Z,elevation:3,sx:r,children:[x,j,P,L]}),U[32]=P,U[33]=L,U[34]=x,U[35]=j,U[36]=Z):Z=U[36],U[37]===Symbol.for("react.memo_cache_sentinel")?(T={position:"absolute",bottom:16,right:16},U[37]=T):T=U[37],U[38]===Symbol.for("react.memo_cache_sentinel")?(I=(0,E.jsx)(d.Z,{}),F=(0,E.jsx)(tb.Z,{}),U[38]=I,U[39]=F):(I=U[38],F=U[39]),U[40]!==ee||U[41]!==J||U[42]!==q)?(A={icon:F,name:"Exporter",onClick:(e=tE(tO().mark(function e(){var t,r,n;return tO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.mutateAsync({node_id:q,includeAllFields:!0,maxDepth:4});case 2:n=new Blob([null==(r=e.sent)||null==(t=r.data)||null==(t=t.results)||null==(t=t[0])||null==(t=t.result)?void 0:t.data],{type:"text/csv"}),(0,tw.saveAs)(n,"".concat(J,".csv"));case 5:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})},U[40]=ee,U[41]=J,U[42]=q,U[43]=A):A=U[43],(U[44]===Symbol.for("react.memo_cache_sentinel")?(D={icon:(0,E.jsx)(b.Z,{}),name:"Ajouter une nouvelle entr\xe9e"},G=(0,E.jsx)(tx.Z,{}),U[44]=D,U[45]=G):(D=U[44],G=U[45]),U[46]!==Y||U[47]!==X||U[48]!==et||U[49]!==q)?(K={icon:G,name:"Supprimer",onClick:(t=tE(tO().mark(function e(){return tO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et.mutateAsync({node_id:q},{onSuccess:function(){var e=tE(tO().mark(function e(){return tO().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:Y(-1);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});case 2:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})},U[46]=Y,U[47]=X,U[48]=et,U[49]=q,U[50]=K):K=U[50],U[51]!==A||U[52]!==K?(z=(0,E.jsx)(p.Z,{ariaLabel:"SpeedDial playground example",sx:T,hidden:!1,icon:I,children:[A,D,K].map(t_)}),U[51]=A,U[52]=K,U[53]=z):z=U[53],U[54]!==Z||U[55]!==z?(V=(0,E.jsxs)(E.Fragment,{children:[Z,z]}),U[54]=Z,U[55]=z,U[56]=V):V=U[56],V};function tL(e){return"results"===e.name}function t_(e){return(0,E.jsx)(h.Z,{icon:e.icon,tooltipTitle:e.name,onClick:e.onClick},e.name)}}}]);
//# sourceMappingURL=273.4f6d5eef.js.map