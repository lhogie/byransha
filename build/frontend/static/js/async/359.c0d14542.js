"use strict";(self.webpackChunklogin_page=self.webpackChunklogin_page||[]).push([["359"],{77318:function(e,t,r){r.r(t),r.d(t,{default:()=>w});var s=r(85893),n=r(22826),a=r(38655),l=r(89425),i=r(51001),o=r(3840),d=r(83321);let c=(0,d.Z)((0,s.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),u=(0,d.Z)((0,s.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorder");var x=r(86001),h=r(84786),p=r(2903),f=r(89126),m=r(54757),g=r(6896),j=r(30548),v=r(64651),Z=r(32153),b=r(89717),y=r(81035),C=r(99469),S=r(67294),k=r(83796);let w=()=>{(0,n.Z)("Add node");let e=(0,k.s0)(),{data:t,refetch:r}=(0,a.m_)("class_distribution"),d=(0,C.NL)(),[w,W]=(0,S.useState)([]),[L,A]=(0,S.useState)([]),[R,I]=(0,S.useState)(new Set),[M,O]=(0,S.useState)(""),[P,E]=(0,S.useState)(!1),[N,$]=(0,S.useState)(()=>{try{let e=localStorage.getItem("favorites");if(null==e)return[];{let t=JSON.parse(e);return Array.isArray(t)?t:[]}}catch(e){return[]}}),_=(0,a.uC)("jump",{onSuccess:async()=>{await d.invalidateQueries()}}),G=(0,a.uC)("add_node"),z=(0,a.uC)("class_information"),B=async e=>{let t=L.find(t=>t.endsWith(e));if(t)try{var r,s,n,a;let e=await G.mutateAsync({BNodeClass:t}),l=null==e||null==(a=e.data)||null==(n=a.results)||null==(s=n[0])||null==(r=s.result)?void 0:r.data.id;return await _.mutateAsync({node_id:l}),l}catch(e){throw console.error("Error during handleCreateAndJump for ".concat(t,":"),e),e}},F=async t=>{try{let r=await B(t);e("/add-node/form/".concat(r))}catch(e){console.error("Navigation skipped due to error:",e)}},J=e=>{$(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};(0,S.useEffect)(()=>{localStorage.setItem("favorites",JSON.stringify(N))},[N]),(0,S.useEffect)(()=>{if(t)try{var e,r,s,n;let a=((null==t||null==(n=t.data)||null==(s=n.results)||null==(r=s[0])||null==(e=r.result)?void 0:e.data)||[]).filter(e=>Object.keys(e)[0]),l=a.map(e=>Object.keys(e)[0].split(".").pop()),i=a.map(e=>Object.keys(e)[0]);W(l),A(i)}catch(e){console.error("Failed to parse class names:",e)}},[t]);let T=(0,S.useCallback)(async e=>{let t=localStorage.getItem("persisting:".concat(e));if(null!==t)return"true"===t;try{var r,s,n,a;let t=await z.mutateAsync({classForm:e}),l=null==t||null==(a=t.data)||null==(n=a.results)||null==(s=n[0])||null==(r=s.result)?void 0:r.data;return(null==l?void 0:l.BusinessNode)!==void 0}catch(t){return console.error("Error fetching info for ".concat(e,":"),t),!1}},[z.mutateAsync]);return(0,S.useEffect)(()=>{L&&0!==L.length&&(async()=>{let e=new Set;await Promise.all(L.map(async t=>{await T(t)&&e.add(t)})),I(e)})()},[L,T]),(0,s.jsx)(x.Z,{in:!P,timeout:300,children:(0,s.jsx)(h.Z,{sx:{padding:{xs:"8px",sm:"16px",md:"40px"}},children:(0,s.jsxs)(p.Z,{component:f.Z,elevation:3,maxWidth:!1,sx:{p:4,position:"relative",minHeight:"85vh",overflow:"auto"},children:[(0,s.jsx)(m.Z,{variant:"h3",component:"h1",gutterBottom:!0,sx:{color:"#2c3e50",textAlign:"center",fontWeight:600,pb:2,borderBottom:"3px solid #3498db"},children:"Add a new node"}),(0,s.jsx)(h.Z,{sx:{display:"flex",justifyContent:"center",mb:3,width:"100%"},children:(0,s.jsx)(g.Z,{fullWidth:!0,variant:"outlined",placeholder:"Search class name...",value:M,onChange:e=>O(e.target.value),sx:{maxWidth:{xs:"100%",sm:400}},InputProps:{startAdornment:(0,s.jsx)(j.Z,{position:"start",children:(0,s.jsx)(o.Z,{})})}})}),N.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{variant:"h4",component:"h2",sx:{color:"#34495e",my:3,fontWeight:500},children:"Favorites (Persistent Only)"}),(0,s.jsx)(v.Z,{container:!0,spacing:2,sx:{mt:2,justifyContent:"center"},children:N.map(e=>{let t=L.find(t=>t.endsWith(e));return{short:e,full:t}}).filter(e=>{let{full:t}=e;return t&&R.has(t)}).filter(e=>{let{short:t}=e;return t.toLowerCase().includes(M.toLowerCase())}).map(e=>{let{short:t}=e;return(0,s.jsx)(v.Z,{children:(0,s.jsx)(Z.Z,{onClick:()=>F(t),sx:{minWidth:{xs:80,sm:120},cursor:"pointer",transition:"all 0.2s ease","&:hover":{bgcolor:"#f0f8ff",transform:"translateY(-2px)",boxShadow:3}},children:(0,s.jsxs)(b.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",p:2,"&:last-child":{pb:2}},children:[(0,s.jsx)(h.Z,{onClick:e=>{e.stopPropagation(),J(t)},sx:{mr:1,display:"inline-flex",cursor:"pointer"},children:(0,s.jsx)(c,{sx:{color:"#f1c40f"}})}),(0,s.jsx)(h.Z,{children:t})]})})},t)})})]}),(0,s.jsx)(m.Z,{variant:"h4",component:"h2",sx:{color:"#34495e",my:3,fontWeight:500},children:"All persisting classes"}),(0,s.jsx)(v.Z,{container:!0,spacing:2,sx:{mt:2,justifyContent:"center"},children:w.map((e,t)=>({short:e,full:L[t]})).filter(e=>{let{full:t}=e;return R.has(t)}).filter(e=>{let{short:t}=e;return t.toLowerCase().includes(M.toLowerCase())}).map(e=>{let{short:t}=e;return(0,s.jsx)(v.Z,{children:(0,s.jsx)(Z.Z,{sx:{minWidth:{xs:80,sm:120},cursor:"pointer",transition:"all 0.2s ease","&:hover":{bgcolor:"#f0f8ff",transform:"translateY(-2px)",boxShadow:3}},children:(0,s.jsxs)(b.Z,{onClick:()=>F(t),sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",p:2,"&:last-child":{pb:2}},children:[(0,s.jsx)(h.Z,{onClick:e=>{e.stopPropagation(),J(t)},sx:{mr:1,display:"inline-flex",cursor:"pointer"},children:N.includes(t)?(0,s.jsx)(c,{sx:{color:"#f1c40f"}}):(0,s.jsx)(u,{sx:{color:"#ccc"}})}),(0,s.jsx)(h.Z,{children:t})]})})},t)})}),(0,s.jsxs)(h.Z,{sx:{position:"absolute",top:10,right:10,display:"flex",gap:1,zIndex:1e3},children:[(0,s.jsx)(y.Z,{onClick:()=>{Object.keys(localStorage).filter(e=>e.startsWith("persisting:")).forEach(e=>localStorage.removeItem(e)),I(new Set),r()},"aria-label":"reload",title:"Reload all classes",sx:{"&:hover":{color:"#3498db"}},children:(0,s.jsx)(i.Z,{})}),(0,s.jsx)(y.Z,{onClick:()=>{E(!0),setTimeout(()=>e("/home"),300)},"aria-label":"close",title:"Close",sx:{"&:hover":{color:"#e74c3c"}},children:(0,s.jsx)(l.Z,{})})]})]})})})}},22826:function(e,t,r){r.d(t,{Z:()=>n});var s=r(67294);let n=e=>{let t="undefined"!=typeof document,r=(0,s.useRef)(t?document.title:null);(0,s.useEffect)(()=>{if(t)return document.title!==e&&(document.title=e),()=>{null!==r.current&&(document.title=r.current)}},[t,e])}},2903:function(e,t,r){r.d(t,{Z:()=>j});var s=r(67294),n=r(67026),a=r(16873),l=r(12531),i=r(5858),o=r(96166),d=r(87537),c=r(56955),u=r(85893);let x=(0,c.Z)(),h=(0,d.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`maxWidth${(0,i.Z)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),p=e=>(0,o.Z)({props:e,name:"MuiContainer",defaultTheme:x});var f=r(24716),m=r(96847),g=r(34407);let j=function(e={}){let{createStyledComponent:t=h,useThemeProps:r=p,componentName:o="MuiContainer"}=e,d=t(({theme:e,ownerState:t})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}}),({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce((t,r)=>{let s=e.breakpoints.values[r];return 0!==s&&(t[e.breakpoints.up(r)]={maxWidth:`${s}${e.breakpoints.unit}`}),t},{}),({theme:e,ownerState:t})=>({..."xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},...t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}}));return s.forwardRef(function(e,t){let s=r(e),{className:c,component:x="div",disableGutters:h=!1,fixed:p=!1,maxWidth:f="lg",classes:m,...g}=s,j={...s,component:x,disableGutters:h,fixed:p,maxWidth:f},v=((e,t)=>{let{classes:r,fixed:s,disableGutters:n,maxWidth:o}=e,d={root:["root",o&&`maxWidth${(0,i.Z)(String(o))}`,s&&"fixed",n&&"disableGutters"]};return(0,l.Z)(d,e=>(0,a.ZP)(t,e),r)})(j,o);return(0,u.jsx)(d,{as:x,ownerState:j,className:(0,n.Z)(v.root,c),ref:t,...g})})}({createStyledComponent:(0,m.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[`maxWidth${(0,f.Z)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,g.i)({props:e,name:"MuiContainer"})})}}]);
//# sourceMappingURL=359.c0d14542.js.map