{"version":3,"file":"static/js/async/475.66d370ed.js","sources":["webpack://login_page/./src/Components/LoginForm/LoginForm.tsx","webpack://login_page/./src/global/useTitle.tsx"],"sourcesContent":["import { type FormEventHandler, useState } from \"react\";\nimport \"./LoginForm.css\";\nimport { FaEye, FaEyeSlash, FaUser } from \"react-icons/fa\";\nimport logo from \"../Assets/i3S_RVB_Couleur.png\";\nimport { useNavigate } from \"react-router\";\nimport { useTitle } from \"@global/useTitle\";\nimport { useApiMutation } from \"@hooks/useApiData\";\nimport { useQueryClient } from \"@tanstack/react-query\";\n\nconst LoginForm = () => {\n\tconst [username, setUsername] = useState<string>(\"\");\n\tconst [password, setPassword] = useState<string>(\"\");\n\tconst [passwordVisible, setPasswordVisible] = useState<boolean>(false);\n\tconst [error, setError] = useState<string>(\"\");\n\n\tconst navigate = useNavigate();\n\tconst queryClient = useQueryClient();\n\n\tconst authMutation = useApiMutation(\"authenticate\", {\n\t\tonSuccess: async () => {\n\t\t\tawait queryClient.invalidateQueries();\n\t\t},\n\t});\n\n\tuseTitle(\"Login\");\n\n\tconst togglePasswordVisibility = () => {\n\t\tsetPasswordVisible((prevState) => !prevState);\n\t};\n\n\tconst handleSubmit: FormEventHandler<HTMLFormElement> = async (e) => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tauthMutation.mutate(\n\t\t\t\t{\n\t\t\t\t\tusername: username,\n\t\t\t\t\tpassword: password,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tonSuccess: (_data) => {\n\t\t\t\t\t\tnavigate(\"/home\"); // Redirect to HomePage\n\t\t\t\t\t},\n\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\tsetError(\"Failed to connect to the server\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t\tsetError(\"Failed to connect to the server\");\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<div className=\"wrapper\">\n\t\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t\t<div className=\"image-container\">\n\t\t\t\t\t\t<img src={logo} alt=\"Logo\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={`input-box ${username ? \"not-empty\" : \"\"}`}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"input-field\"\n\t\t\t\t\t\t\tplaceholder=\"Identifiant\"\n\t\t\t\t\t\t\tvalue={username}\n\t\t\t\t\t\t\tonChange={(e) => setUsername(e.target.value)}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<FaUser className=\"icon\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={`input-box ${password ? \"not-empty\" : \"\"}`}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype={passwordVisible ? \"text\" : \"password\"}\n\t\t\t\t\t\t\tclassName=\"input-field\"\n\t\t\t\t\t\t\tplaceholder=\"Mot de passe\"\n\t\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{passwordVisible ? (\n\t\t\t\t\t\t\t<FaEyeSlash\n\t\t\t\t\t\t\t\tclassName=\"toggle-icon icon\"\n\t\t\t\t\t\t\t\tonClick={togglePasswordVisibility}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<FaEye\n\t\t\t\t\t\t\t\tclassName=\"toggle-icon icon\"\n\t\t\t\t\t\t\t\tonClick={togglePasswordVisibility}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{error && <p className=\"error-message\">{error}</p>}\n\n\t\t\t\t\t<button type=\"submit\">\n\t\t\t\t\t\t<span>Se connecter</span>\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\nexport default LoginForm;\n","import { useEffect, useRef } from \"react\";\n\nexport const useTitle = (title: string) => {\n\tconst documentDefined = typeof document !== \"undefined\";\n\tconst originalTitle = useRef(documentDefined ? document.title : null);\n\n\tuseEffect(() => {\n\t\tif (!documentDefined) return;\n\n\t\tif (document.title !== title) document.title = title;\n\n\t\treturn () => {\n\t\t\tdocument.title = originalTitle.current!;\n\t\t};\n\t}, [documentDefined, title]);\n};\n"],"names":["username","setUsername","useState","password","setPassword","passwordVisible","setPasswordVisible","error","setError","navigate","useNavigate","queryClient","useQueryClient","authMutation","useApiMutation","useTitle","togglePasswordVisibility","prevState","handleSubmit","e","_data","console","err","logo","FaUser","FaEyeSlash","FaEye","title","documentDefined","document","originalTitle","useRef","useEffect"],"mappings":"gRAuGA,MA9FkB,KACjB,GAAM,CAACA,EAAUC,EAAY,CAAGC,AAAAA,GAAAA,EAAAA,QAAAA,AAAAA,EAAiB,IAC3C,CAACC,EAAUC,EAAY,CAAGF,AAAAA,GAAAA,EAAAA,QAAAA,AAAAA,EAAiB,IAC3C,CAACG,EAAiBC,EAAmB,CAAGJ,AAAAA,GAAAA,EAAAA,QAAAA,AAAAA,EAAkB,IAC1D,CAACK,EAAOC,EAAS,CAAGN,AAAAA,GAAAA,EAAAA,QAAAA,AAAAA,EAAiB,IAErCO,EAAWC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,IACXC,EAAcC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,IAEdC,EAAeC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAe,eAAgB,CACnD,UAAW,UACV,MAAMH,EAAY,iBAAiB,EACpC,CACD,GAEAI,AAAAA,GAAAA,EAAAA,CAAAA,AAAAA,EAAS,SAET,IAAMC,EAA2B,KAChCV,EAAmB,AAACW,GAAc,CAACA,EACpC,EAEMC,EAAkD,MAAOC,IAC9DA,EAAE,cAAc,GAChB,GAAI,CACHN,EAAa,MAAM,CAClB,CACC,SAAUb,EACV,SAAUG,CACX,EACA,CACC,UAAW,AAACiB,IACXX,EAAS,QACV,EACA,QAAS,AAACF,IACTc,QAAQ,KAAK,CAACd,GACdC,EAAS,kCACV,CACD,EAEF,CAAE,MAAOc,EAAK,CACbD,QAAQ,KAAK,CAACC,GACdd,EAAS,kCACV,CACD,EAEA,MACC,UAAC,OAAI,UAAU,Y,SACd,UAAC,OAAI,UAAU,U,SACd,WAAC,QAAK,SAAUU,E,UACf,UAAC,OAAI,UAAU,kB,SACd,UAAC,OAAI,IAAKK,EAAM,IAAI,M,KAErB,WAAC,OAAI,UAAY,aAAwC,OAA5BvB,EAAW,YAAc,I,UACrD,UAAC,SACA,KAAK,OACL,UAAU,cACV,YAAY,cACZ,MAAOA,EACP,SAAU,AAACmB,GAAMlB,EAAYkB,EAAE,MAAM,CAAC,KAAK,EAC3C,SAAQ,E,GAET,UAACK,EAAAA,GAAMA,CAAAA,CAAC,UAAU,M,MAEnB,WAAC,OAAI,UAAY,aAAwC,OAA5BrB,EAAW,YAAc,I,UACrD,UAAC,SACA,KAAME,EAAkB,OAAS,WACjC,UAAU,cACV,YAAY,eACZ,MAAOF,EACP,SAAU,AAACgB,GAAMf,EAAYe,EAAE,MAAM,CAAC,KAAK,EAC3C,SAAQ,E,GAERd,EACA,UAACoB,EAAAA,GAAUA,CAAAA,CACV,UAAU,mBACV,QAAST,C,GAGV,UAACU,EAAAA,GAAKA,CAAAA,CACL,UAAU,mBACV,QAASV,C,MAIXT,GAAS,UAAC,KAAE,UAAU,gB,SAAiBA,C,GAExC,UAAC,UAAO,KAAK,S,SACZ,UAAC,Q,SAAK,c,WAMZ,C,sDCpGO,IAAMQ,EAAW,AAACY,IACxB,IAAMC,EAAkB,AAAoB,aAApB,OAAOC,SACzBC,EAAgBC,AAAAA,GAAAA,EAAAA,MAAAA,AAAAA,EAAOH,EAAkBC,SAAS,KAAK,CAAG,MAEhEG,AAAAA,GAAAA,EAAAA,SAAAA,AAAAA,EAAU,KACT,GAAKJ,EAIL,OAFIC,SAAS,KAAK,GAAKF,GAAOE,CAAAA,SAAS,KAAK,CAAGF,CAAI,EAE5C,KACNE,SAAS,KAAK,CAAGC,EAAc,OAAO,AACvC,CACD,EAAG,CAACF,EAAiBD,EAAM,CAC5B,C"}