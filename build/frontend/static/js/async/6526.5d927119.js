"use strict";(self.webpackChunklogin_page=self.webpackChunklogin_page||[]).push([["6526"],{81705:function(e,r,s){s.r(r),s.d(r,{default:()=>q});var n=s(7409),t=s(99282),a=s(85893),o=s(22826),i=s(31754),d=s(38655),l=s(41606),u=s(89708),c=s(7841),m=s(50782),p=s(90271),x=s(2903),f=s(89126),h=s(84786),b=s(39467),v=s(6896),g=s(30548),y=s(81035),w=s(54757),Z=s(99469),j=s(67294),C=s(52293),k=s(83796),S=s(16310);let _=s.p+"static/image/i3S_RVB_Couleur.eaa939af.png",I=S.Ry({username:S.Z_().required("L'identifiant est requis").min(2,"L'identifiant doit contenir au moins 2 caract\xe8res").max(50,"L'identifiant ne peut pas d\xe9passer 50 caract\xe8res"),password:S.Z_().required("Le mot de passe est requis").min(1,"Le mot de passe est requis")}),q=()=>{let[e,r]=(0,j.useState)(!1),[s,S]=(0,j.useState)(""),q=(0,p.Z)(),L=(0,k.s0)(),W=(0,Z.NL)(),{control:z,handleSubmit:A,formState:{errors:M,isSubmitting:P},setError:R}=(0,C.cI)({resolver:(0,i.X)(I),defaultValues:{username:"",password:""},mode:"onBlur"}),V=(0,d.uC)("authenticate",{onSuccess:async()=>{await W.invalidateQueries()}});(0,o.Z)("Connexion");let B=()=>{r(e=>!e)},Q=async e=>{try{S(""),await V.mutateAsync({username:e.username,password:e.password},{onSuccess:()=>{L("/home",{replace:!0})},onError:e=>{console.error("Authentication error:",e),"username"===e.field?R("username",{type:"server",message:e.message||"Identifiant invalide"}):"password"===e.field?R("password",{type:"server",message:e.message||"Mot de passe invalide"}):S(e.message||"\xc9chec de la connexion au serveur. Veuillez v\xe9rifier vos identifiants.")}})}catch(e){console.error("Unexpected error:",e),S("Une erreur inattendue s'est produite. Veuillez r\xe9essayer.")}},T=P||V.isPending;return(0,a.jsx)(x.Z,{component:"main",maxWidth:"sm",sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",py:3},children:(0,a.jsxs)(f.Z,{elevation:6,sx:{p:{xs:2,sm:3,md:4},width:"100%",maxWidth:{xs:"90vw",sm:400},borderRadius:2,backgroundColor:"background.paper",border:"1px solid ".concat(q.palette.divider)},children:[(0,a.jsx)(h.Z,{sx:{display:"flex",justifyContent:"center",mb:3},children:(0,a.jsx)(h.Z,{component:"img",src:_,alt:"Logo I3S",sx:{maxWidth:{xs:150,sm:200},width:"100%",height:"auto",borderRadius:1}})}),s&&(0,a.jsx)(b.Z,{severity:"error",sx:{mb:2},onClose:()=>S(""),role:"alert","aria-live":"polite",children:s}),(0,a.jsxs)(h.Z,{component:"form",onSubmit:A(Q),noValidate:!0,"aria-label":"Formulaire de connexion",children:[(0,a.jsx)(C.Qr,{name:"username",control:z,render:e=>{var r;let{field:s}=e;return(0,a.jsx)(v.Z,(0,t._)((0,n._)({},s),{margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Identifiant",name:"username",autoComplete:"username",autoFocus:!0,disabled:T,error:!!M.username,helperText:null==(r=M.username)?void 0:r.message,InputProps:{startAdornment:(0,a.jsx)(g.Z,{position:"start",children:(0,a.jsx)(l.Z,{color:"action"})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"primary.main"}}},inputProps:{"aria-describedby":M.username?"username-error":void 0}}))}}),(0,a.jsx)(C.Qr,{name:"password",control:z,render:r=>{var s;let{field:o}=r;return(0,a.jsx)(v.Z,(0,t._)((0,n._)({},o),{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Mot de passe",type:e?"text":"password",id:"password",autoComplete:"current-password",disabled:T,error:!!M.password,helperText:null==(s=M.password)?void 0:s.message,InputProps:{endAdornment:(0,a.jsx)(g.Z,{position:"end",children:(0,a.jsx)(y.Z,{"aria-label":e?"Masquer le mot de passe":"Afficher le mot de passe",onClick:B,onMouseDown:e=>e.preventDefault(),edge:"end",disabled:T,size:"small",children:e?(0,a.jsx)(u.Z,{}):(0,a.jsx)(c.Z,{})})})},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"primary.main"}}},inputProps:{"aria-describedby":M.password?"password-error":void 0}}))}}),(0,a.jsx)(m.Z,{type:"submit",fullWidth:!0,variant:"contained",loading:T,loadingPosition:"start",disabled:T,sx:{mt:3,mb:2,py:1.5,borderRadius:2,fontWeight:600,textTransform:"none",fontSize:"1rem","&:hover":{backgroundColor:"primary.dark"},"&:disabled":{backgroundColor:"action.disabledBackground"}},"aria-describedby":s?"auth-error":void 0,children:T?"Connexion en cours...":"Se connecter"})]}),(0,a.jsx)(h.Z,{sx:{mt:2,textAlign:"center"},children:(0,a.jsx)(w.Z,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:"Veuillez vous connecter avec vos identifiants"})})]})})}},22826:function(e,r,s){s.d(r,{Z:()=>t});var n=s(67294);let t=e=>{let r="undefined"!=typeof document,s=(0,n.useRef)(r?document.title:null);(0,n.useEffect)(()=>{if(r)return document.title!==e&&(document.title=e),()=>{null!==s.current&&(document.title=s.current)}},[r,e])}}}]);
//# sourceMappingURL=6526.5d927119.js.map