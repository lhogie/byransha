"use strict";(self.webpackChunklogin_page=self.webpackChunklogin_page||[]).push([["701"],{2589:function(e,r,l){l.r(r),l.d(r,{default:()=>W});var t=l(5893),a=l(7294),s=l(3816),n=l(9157),i=l(2992),o=l(2826),c=l(2561),d=l(8655),x=l(1419),f=l(3321);let p=(0,f.Z)((0,t.jsx)("path",{d:"M19 12h-2v3h-3v2h5zM7 9h3V7H5v5h2zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16.01H3V4.99h18z"}),"AspectRatio");var m=l(9425);let h=(0,f.Z)((0,t.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove");var u=l(2153),g=l(4757),b=l(4786),w=l(9717),j=l(7230),v=l(8523),y=l(3876),Z=l(9276),C=l(9410),k=l(1215),S=l(3796);let I=(0,a.memo)(e=>{let{view:r,onClick:l,handleViewToggle:o}=e,c=(0,a.useCallback)(e=>{e.preventDefault(),(0,a.startTransition)(()=>{o(r.name)})},[o,r.name]);return(0,t.jsx)(n.ZP,{fallback:(0,t.jsx)(u.Z,{sx:{aspectRatio:"1",border:"1px solid #f44336",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#ffebee"},children:(0,t.jsx)(g.Z,{color:"error",children:"Error loading view"})}),children:(0,t.jsxs)(u.Z,{sx:{cursor:"pointer",aspectRatio:"1",border:"1px solid #e0e0e0",borderRadius:2,display:"flex",flexDirection:"column",bgcolor:"technical"===r.type?"#fff9c4":"#ffffff",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:[(0,t.jsxs)(b.Z,{sx:{height:"40px",width:"100%",bgcolor:"technical"===r.type?"#fff8b0":"#f5f5f5",borderBottom:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",cursor:"grab",position:"relative"},children:[(0,t.jsx)(g.Z,{className:"DragHere",variant:"caption",sx:{color:"#757575",textAlign:"center",flex:1,px:1},children:"".concat(r.pretty_name," - ").concat(r.description)}),(0,t.jsxs)(b.Z,{sx:{display:"flex",position:"absolute",right:4},children:[(0,t.jsx)("button",{type:"button",className:"expand-card",onClick:l,"aria-label":"expand",style:{background:"none",border:"none",cursor:"pointer",padding:"2px",display:"flex",alignItems:"center"},children:(0,t.jsx)(p,{fontSize:"small"})}),(0,t.jsx)("button",{type:"button",className:"erased-card",onClick:c,"aria-label":"close",style:{background:"none",border:"none",cursor:"pointer",padding:"2px",display:"flex",alignItems:"center"},children:(0,t.jsx)(m.Z,{fontSize:"small"})})]})]}),(0,t.jsx)(w.Z,{sx:{padding:{xs:"12px",sm:"16px"},height:"calc(100% - 40px)",display:"flex",flexDirection:"column",overflow:"hidden",bgcolor:"technical"===r.type?"#fff9c4":"#ffffff"},children:(0,t.jsx)(b.Z,{sx:{flex:1,overflow:"auto",color:"#424242",msOverflowStyle:"none",scrollbarWidth:"thin",scrollbarColor:"#3f51b5 #e8eaf6","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{bgcolor:"#3f51b5",borderRadius:"3px"},"&::-webkit-scrollbar-track":{bgcolor:"#e8eaf6"},wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap",maxWidth:"100%",fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:r.error?(0,t.jsx)(g.Z,{color:"error",variant:"body2",children:r.error}):(0,t.jsx)(n.ZP,{fallback:(0,t.jsx)(g.Z,{color:"error",variant:"body2",children:"Error loading view"}),children:(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(i.vj.Inline,{text:"Loading view..."}),children:(0,t.jsx)(s.G,{viewId:r.name.replaceAll(" ","_"),sx:{bgcolor:"technical"===r.type?"#fff9c4":"#ffffff",width:"100%"}})})})})})]})})});I.displayName="ViewCard";let V=(0,a.memo)(e=>{let{views:r,selectedViews:l,columns:s,onViewClick:i,onViewToggle:o}=e,c=r.filter(e=>l.includes(e.name)),d=(0,a.useDeferredValue)(c),x=Math.min(s,d.length);return(0,t.jsx)(n.ZP,{fallback:(0,t.jsx)(b.Z,{sx:{textAlign:"center",p:3,color:"error.main"},children:(0,t.jsx)(g.Z,{children:"Error loading view grid"})}),children:(0,t.jsx)(b.Z,{sx:{display:"flex",flexWrap:"wrap",gap:{xs:2,sm:4},opacity:1,transition:"opacity 0.2s ease-in-out"},children:d.map(e=>(0,t.jsx)(b.Z,{sx:{width:{xs:"100%",sm:"calc(".concat(100/Math.min(s,2),"% - 16px)"),md:"calc(".concat(100/x,"% - 32px)")}},children:(0,t.jsx)(I,{view:e,onClick:r=>{r.defaultPrevented||i(e)},handleViewToggle:o})},e.name))})})});V.displayName="ViewGrid";let z=(0,a.memo)(()=>{let e=(0,S.s0)(),{data:r,isLoading:l,error:s}=(0,d.m_)("endpoints?only_applicable&type=byransha.web.View",{},{staleTime:3e4,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0}),{isLoading:f,withLoading:p}=(0,i.$C)();(0,o.Z)("Home");let[m,u,w]=(0,c.av)(2,{transitionUpdates:!0,deferUpdates:!1}),[I,z,W]=(0,c.av)(null,{transitionUpdates:!0}),[T,N]=(0,a.useState)([]),[O,R]=(0,a.useState)(()=>JSON.parse(localStorage.getItem("showTechnicalViews")||"false")),[_]=(0,c.av)("",{transitionUpdates:!0,debounceMs:300}),[D]=(0,c.m9)(_,300),M=(0,d.uC)("jump"),[P,H]=(0,a.useState)([]),[L]=(0,a.useTransition)(),A=(0,a.useCallback)(()=>{let e=window.innerWidth;return e<900?1:e<1600?2:e<2100?3:4},[]),E=(0,a.useDeferredValue)(P),J=(0,a.useDeferredValue)(T),G=(0,a.useMemo)(()=>{let e=O?E:E.filter(e=>"technical"!==e.type);return D.trim()&&(e=e.filter(e=>{var r,l;return(null==(r=e.pretty_name)?void 0:r.toLowerCase().includes(D.toLowerCase()))||(null==(l=e.description)?void 0:l.toLowerCase().includes(D.toLowerCase()))})),e},[E,O,D]);a.useEffect(()=>{var e,l,t,s;(null==r||null==(s=r.data)||null==(t=s.results)||null==(l=t[0])||null==(e=l.result)?void 0:e.data)&&(0,a.startTransition)(()=>{let e,l=r.data.results[0].result.data,t=O?l:l.filter(e=>"technical"!==e.type),a=JSON.parse(localStorage.getItem("viewOrder"))||[],s=t;a.length>0&&(s=[...t].sort((e,r)=>{let l=a.indexOf(e.endpoint),t=a.indexOf(r.endpoint);return(-1===l?1/0:l)-(-1===t?1/0:t)})),H(s);let n=JSON.parse(localStorage.getItem("selectedViewsSaved"));e=n&&0!==n.length?n.filter(e=>t.some(r=>r.name===e)):t.map(e=>e.name),localStorage.setItem("selectedViewsSaved",JSON.stringify(e)),N(e)})},[r,O]),a.useEffect(()=>{let e=()=>{(0,a.startTransition)(()=>{u(A())})};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[A,u]);let U=(0,a.useCallback)(e=>{z(e.currentTarget)},[z]),B=(0,a.useCallback)(()=>{z(null)},[z]),F=(0,a.useCallback)(e=>{(0,a.startTransition)(()=>{N(r=>{let l=r.includes(e)?r.filter(r=>r!==e):[...r,e];return localStorage.setItem("selectedViewsSaved",JSON.stringify(l)),0===P.filter(e=>"technical"===e.type).filter(e=>l.includes(e.name)).length&&O&&(R(!1),localStorage.setItem("showTechnicalViews",JSON.stringify(!1))),l})})},[P,O]),Y=(0,a.useCallback)(()=>{(0,a.startTransition)(()=>{R(e=>{var l,t,a,s,n;let i=!e;localStorage.setItem("showTechnicalViews",JSON.stringify(i));let o=((null==r||null==(n=r.data)||null==(s=n.results)||null==(a=s[0])||null==(t=a.result)||null==(l=t.data)?void 0:l.filter(e=>"technical"===e.type))||[]).map(e=>e.name);return N(e=>{let r;return r=i?[...new Set([...e,...o])]:e.filter(e=>!o.includes(e)),localStorage.setItem("selectedViewsSaved",JSON.stringify(r)),r}),i})})},[r]),$=(0,a.useCallback)(l=>{p(async()=>{if(l.name.endsWith("class_attribute_field")){var t,a;await M.mutateAsync({node:null==r||null==(t=r.data)?void 0:t.node_id}),e("/add-node/form/".concat(null==r||null==(a=r.data)?void 0:a.node_id))}else e("/information/".concat(l.name.replaceAll(" ","_")))})},[M,r,e,p]),q=(0,a.useCallback)(()=>{(0,a.startTransition)(()=>{u(e=>Math.min(e+1,G.length))})},[G.length,u]),K=(0,a.useCallback)(()=>{(0,a.startTransition)(()=>{u(e=>Math.max(e-1,1))})},[u]);if(l)return(0,t.jsx)(n.ZP,{children:(0,t.jsx)(i.vj.Page,{})});if(s||!r||!r.data||!r.data.results)return(0,t.jsx)(n.ZP,{children:(0,t.jsx)(b.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:3,bgcolor:"#2e3b55"},children:(0,t.jsxs)(b.Z,{sx:{bgcolor:"#fff3e0",p:3,borderRadius:2,color:"#ef6c00",textAlign:"center",maxWidth:"500px"},children:[(0,t.jsx)(g.Z,{variant:"h6",gutterBottom:!0,children:"Failed to Load Data"}),(0,t.jsx)(g.Z,{variant:"body2",sx:{mb:2},children:(null==s?void 0:s.message)||"Data is null or unavailable."}),(0,t.jsx)(j.Z,{variant:"contained",onClick:()=>window.location.reload(),sx:{mt:1},children:"Retry"})]})})});let Q=f||w||W||L;return(0,t.jsx)(n.ZP,{children:(0,t.jsxs)(b.Z,{sx:{padding:{xs:"8px",sm:"16px",md:"40px"},maxWidth:"100%",margin:"0 auto",bgcolor:"#2e3b55",minHeight:"100vh",zIndex:1,opacity:Q?.8:1,transition:"opacity 0.2s ease-in-out"},className:"home-page",children:[(0,t.jsxs)(b.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},mb:{xs:2,sm:4},gap:{xs:2,sm:0}},children:[(0,t.jsxs)(b.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2},alignItems:{xs:"flex-start",sm:"center"},width:{xs:"100%",sm:"auto"}},children:[(0,t.jsxs)(b.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,t.jsx)(j.Z,{variant:"outlined",onClick:U,disabled:Q,sx:{minWidth:{xs:36,sm:40},borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px 8px",sm:"6px 12px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"},"&:disabled":{opacity:.6}},children:"Views"}),(0,t.jsx)(v.Z,{anchorEl:I,open:!!I,onClose:B,PaperProps:{sx:{maxHeight:500,maxWidth:400,overflowY:"auto",width:"auto",padding:1,borderRadius:"8px"}},children:G.map(e=>(0,t.jsx)(y.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingRight:1,fontSize:"14px",color:"technical"===e.type?"#283593":"#424242",backgroundColor:"technical"===e.type?"#fff9c4":"transparent",borderRadius:"8px","&:hover":{backgroundColor:"technical"===e.type?"#fff8b0":"#e8eaf6"}},children:(0,t.jsxs)(b.Z,{sx:{display:"flex",alignItems:"center",flexGrow:1,borderRadius:"18px"},onClick:()=>F(e.name),children:[(0,t.jsx)(Z.Z,{checked:J.includes(e.name),sx:{color:"#90caf9","&.Mui-checked":{color:"#90caf9"}}}),(0,t.jsx)(C.Z,{primary:e.pretty_name})]})},e.name))})]}),(0,t.jsxs)(b.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,t.jsx)(Z.Z,{checked:O,onChange:Y,disabled:Q,sx:{color:"#90caf9","&.Mui-checked":{color:"#90caf9"},padding:{xs:"4px",sm:"6px"}}}),(0,t.jsx)(g.Z,{sx:{color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Show Technical Views"})]}),(0,t.jsxs)(b.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,t.jsx)(j.Z,{variant:"outlined",onClick:K,disabled:1===m||Q,sx:{minWidth:{xs:36,sm:40},borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px",sm:"6px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},children:(0,t.jsx)(h,{fontSize:"small"})}),(0,t.jsx)(g.Z,{sx:{color:"#ffffff",fontWeight:"bold",fontSize:{xs:"0.875rem",sm:"1rem"}},children:m}),(0,t.jsx)(j.Z,{variant:"outlined",onClick:q,disabled:m===G.length||Q,sx:{minWidth:{xs:36,sm:40},borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px",sm:"6px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},children:(0,t.jsx)(x.Z,{fontSize:"small"})})]})]}),(0,t.jsx)(j.Z,{variant:"outlined",onClick:()=>e("/add-node"),disabled:Q,sx:{minWidth:{xs:36,sm:40},borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px 8px",sm:"6px 12px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},children:"Add new node"})]}),(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(i.vj.Grid,{columns:m,count:6}),children:(0,t.jsx)(V,{views:G,selectedViews:J,columns:m,onViewClick:$,onViewToggle:F})}),Q&&(0,t.jsx)(b.Z,{sx:{position:"fixed",bottom:16,right:16,zIndex:9999},children:(0,t.jsx)(k.Z,{size:24,sx:{color:"#90caf9"}})})]})})});z.displayName="HomePage";let W=z}}]);
//# sourceMappingURL=701.f3015a22.js.map