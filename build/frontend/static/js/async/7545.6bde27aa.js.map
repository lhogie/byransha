{"version":3,"file":"static/js/async/7545.6bde27aa.js","sources":["webpack://login_page/./src/Components/HomePage/HomePage.tsx"],"sourcesContent":["import { View } from \"@common/View\";\nimport ErrorBoundary from \"@components/ErrorBoundary\";\nimport {\n\tLoadingStates,\n\tuseLoadingState,\n} from \"@components/Loading/LoadingComponents\";\nimport { useTitle } from \"@global/useTitle\";\nimport { useOptimizedDebounce, useOptimizedState } from \"@hooks/react19\";\nimport { useApiData, useApiMutation } from \"@hooks/useApiData\";\nimport {\n\tAdd as AddIcon,\n\tClose as CloseIcon,\n\tAspectRatio as ExpandIcon,\n\tRemove as RemoveIcon,\n\tViewModule as ViewModuleIcon,\n} from \"@mui/icons-material\";\nimport {\n\tAlert,\n\tBox,\n\tButton,\n\tButtonGroup,\n\tCard,\n\tCardContent,\n\tCardHeader,\n\tCheckbox,\n\tCircularProgress,\n\tDialog,\n\tDialogContent,\n\tDialogTitle,\n\tDivider,\n\tFormControlLabel,\n\tIconButton,\n\tListItemText,\n\tMenu,\n\tMenuItem,\n\tPaper,\n\tSkeleton,\n\tStack,\n\tSwitch,\n\tTooltip,\n\tTypography,\n\tuseTheme,\n} from \"@mui/material\";\nimport React, {\n\ttype MouseEventHandler,\n\tmemo,\n\tSuspense,\n\tstartTransition,\n\tuseCallback,\n\tuseDeferredValue,\n\tuseMemo,\n\tuseState,\n\tuseTransition,\n} from \"react\";\nimport { useNavigate } from \"react-router\";\n\n// Memoized ViewCard component with enhanced accessibility\nconst ViewCard = memo(\n\t({\n\t\tview,\n\t\tonExpand,\n\t\thandleViewToggle,\n\t}: {\n\t\tview: any;\n\t\tonExpand: (view: any) => void;\n\t\thandleViewToggle: (endpoint: string) => void;\n\t}) => {\n\t\tconst theme = useTheme();\n\t\tconst handleToggle = useCallback(\n\t\t\t(e: React.MouseEvent) => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\thandleViewToggle(view.name);\n\t\t\t},\n\t\t\t[handleViewToggle, view.name],\n\t\t);\n\n\t\tconst handleExpand = useCallback(\n\t\t\t(e: React.MouseEvent) => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tonExpand(view);\n\t\t\t},\n\t\t\t[onExpand, view],\n\t\t);\n\n\t\tconst isTechnical = view.type === \"technical\";\n\n\t\treturn (\n\t\t\t<ErrorBoundary\n\t\t\t\tfallback={\n\t\t\t\t\t<Card\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\taspectRatio: \"1\",\n\t\t\t\t\t\t\tborder: `1px solid ${theme.palette.error.main}`,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\talignItems: \"center\",\n\t\t\t\t\t\t\tjustifyContent: \"center\",\n\t\t\t\t\t\t\tbgcolor: \"error.light\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t\trole=\"alert\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Typography color=\"error\" variant=\"body2\">\n\t\t\t\t\t\t\tErreur de chargement de la vue\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Card>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<Card\n\t\t\t\t\tsx={{\n\t\t\t\t\t\taspectRatio: \"1\",\n\t\t\t\t\t\tborder: `1px solid ${theme.palette.divider}`,\n\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\tflexDirection: \"column\",\n\t\t\t\t\t\tbgcolor: isTechnical ? \"warning.light\" : \"background.paper\",\n\t\t\t\t\t\ttransition:\n\t\t\t\t\t\t\t\"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out\",\n\t\t\t\t\t\t\"&:hover\": {\n\t\t\t\t\t\t\ttransform: \"translateY(-2px)\",\n\t\t\t\t\t\t\tboxShadow: theme.shadows[4],\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"&:focus-within\": {\n\t\t\t\t\t\t\toutline: `2px solid ${theme.palette.primary.main}`,\n\t\t\t\t\t\t\toutlineOffset: \"2px\",\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\taria-label={`Vue ${view.pretty_name}: ${view.description}`}\n\t\t\t\t>\n\t\t\t\t\t<CardHeader\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\theight: { xs: 50, sm: 60 },\n\t\t\t\t\t\t\tbgcolor: isTechnical ? \"warning.main\" : \"grey.100\",\n\t\t\t\t\t\t\tborderBottom: `1px solid ${theme.palette.divider}`,\n\t\t\t\t\t\t\tp: { xs: 0.5, sm: 1 },\n\t\t\t\t\t\t\tposition: \"relative\",\n\t\t\t\t\t\t\t\"& .MuiCardHeader-content\": {\n\t\t\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\tvariant=\"caption\"\n\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\tcolor: isTechnical\n\t\t\t\t\t\t\t\t\t\t? \"warning.contrastText\"\n\t\t\t\t\t\t\t\t\t\t: \"text.secondary\",\n\t\t\t\t\t\t\t\t\tfontWeight: 500,\n\t\t\t\t\t\t\t\t\tdisplay: \"-webkit-box\",\n\t\t\t\t\t\t\t\t\tWebkitLineClamp: 2,\n\t\t\t\t\t\t\t\t\tWebkitBoxOrient: \"vertical\",\n\t\t\t\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t\t\t\t\tlineHeight: 1.2,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{view.pretty_name}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsubheader={\n\t\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\t\tvariant=\"caption\"\n\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\tcolor: isTechnical ? \"warning.contrastText\" : \"text.disabled\",\n\t\t\t\t\t\t\t\t\tfontSize: \"0.7rem\",\n\t\t\t\t\t\t\t\t\tdisplay: \"-webkit-box\",\n\t\t\t\t\t\t\t\t\tWebkitLineClamp: 1,\n\t\t\t\t\t\t\t\t\tWebkitBoxOrient: \"vertical\",\n\t\t\t\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{view.description}\n\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t}\n\t\t\t\t\t\taction={\n\t\t\t\t\t\t\t<Stack direction=\"row\" spacing={0.5}>\n\t\t\t\t\t\t\t\t<Tooltip title=\"Agrandir la vue\">\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\tonClick={handleExpand}\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\taria-label={`Agrandir la vue ${view.pretty_name}`}\n\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\tcolor: isTechnical\n\t\t\t\t\t\t\t\t\t\t\t\t? \"warning.contrastText\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"action.active\",\n\t\t\t\t\t\t\t\t\t\t\t\"&:hover\": {\n\t\t\t\t\t\t\t\t\t\t\t\tbgcolor: \"action.hover\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\"&:focus\": {\n\t\t\t\t\t\t\t\t\t\t\t\toutline: `2px solid ${theme.palette.primary.main}`,\n\t\t\t\t\t\t\t\t\t\t\t\toutlineOffset: \"1px\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ExpandIcon fontSize=\"small\" />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t<Tooltip title=\"Fermer la vue\">\n\t\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\t\tonClick={handleToggle}\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\taria-label={`Fermer la vue ${view.pretty_name}`}\n\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\tcolor: isTechnical\n\t\t\t\t\t\t\t\t\t\t\t\t? \"warning.contrastText\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"action.active\",\n\t\t\t\t\t\t\t\t\t\t\t\"&:hover\": {\n\t\t\t\t\t\t\t\t\t\t\t\tbgcolor: \"action.hover\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\"&:focus\": {\n\t\t\t\t\t\t\t\t\t\t\t\toutline: `2px solid ${theme.palette.primary.main}`,\n\t\t\t\t\t\t\t\t\t\t\t\toutlineOffset: \"1px\",\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<CloseIcon fontSize=\"small\" />\n\t\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<CardContent\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\tp: { xs: 1.5, sm: 2 },\n\t\t\t\t\t\t\theight: \"calc(100% - 60px)\",\n\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\tflexDirection: \"column\",\n\t\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\t\tbgcolor: isTechnical ? \"warning.light\" : \"background.paper\",\n\t\t\t\t\t\t\t\"&:last-child\": { pb: { xs: 1.5, sm: 2 } },\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t\t\t\toverflow: \"auto\",\n\t\t\t\t\t\t\t\tcolor: \"text.primary\",\n\t\t\t\t\t\t\t\tscrollbarWidth: \"thin\",\n\t\t\t\t\t\t\t\tscrollbarColor: `${theme.palette.primary.main} ${theme.palette.grey[200]}`,\n\t\t\t\t\t\t\t\t\"&::-webkit-scrollbar\": { width: \"6px\" },\n\t\t\t\t\t\t\t\t\"&::-webkit-scrollbar-thumb\": {\n\t\t\t\t\t\t\t\t\tbgcolor: \"primary.main\",\n\t\t\t\t\t\t\t\t\tborderRadius: \"3px\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"&::-webkit-scrollbar-track\": {\n\t\t\t\t\t\t\t\t\tbgcolor: \"grey.200\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\twordBreak: \"break-word\",\n\t\t\t\t\t\t\t\toverflowWrap: \"break-word\",\n\t\t\t\t\t\t\t\twhiteSpace: \"pre-wrap\",\n\t\t\t\t\t\t\t\tmaxWidth: \"100%\",\n\t\t\t\t\t\t\t\tfontSize: { xs: \"0.75rem\", sm: \"0.875rem\" },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\taria-label={`Contenu de la vue ${view.pretty_name}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{view.error ? (\n\t\t\t\t\t\t\t\t<Alert severity=\"error\" variant=\"outlined\" sx={{ mt: 1 }}>\n\t\t\t\t\t\t\t\t\t<Typography variant=\"body2\">{view.error}</Typography>\n\t\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<ErrorBoundary\n\t\t\t\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t\t\t\t<Alert severity=\"error\" variant=\"outlined\" sx={{ mt: 1 }}>\n\t\t\t\t\t\t\t\t\t\t\t<Typography variant=\"body2\">\n\t\t\t\t\t\t\t\t\t\t\t\tErreur de chargement de la vue\n\t\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t\t</Alert>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Suspense\n\t\t\t\t\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t\t\t\t\t<Stack spacing={1} sx={{ mt: 1 }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton variant=\"text\" width=\"80%\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton variant=\"text\" width=\"60%\" />\n\t\t\t\t\t\t\t\t\t\t\t\t<Skeleton variant=\"rectangular\" height={60} />\n\t\t\t\t\t\t\t\t\t\t\t</Stack>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\t\t\tviewId={view.name.replaceAll(\" \", \"_\")}\n\t\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\t\tbgcolor: isTechnical\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"warning.light\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"background.paper\",\n\t\t\t\t\t\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t</ErrorBoundary>\n\t\t);\n\t},\n);\n\nconst ViewGrid = memo(\n\t({\n\t\tviews,\n\t\tselectedViews,\n\t\tcolumns,\n\t\tonViewToggle,\n\t\tonViewExpand,\n\t}: {\n\t\tviews: any[];\n\t\tselectedViews: string[];\n\t\tcolumns: number;\n\t\tonViewToggle: (endpoint: string) => void;\n\t\tonViewExpand: (view: any) => void;\n\t}) => {\n\t\t// Use regular filtered views\n\t\tconst visibleViews = views.filter((view) =>\n\t\t\tselectedViews.includes(view.name),\n\t\t);\n\t\tconst deferredVisibleViews = useDeferredValue(visibleViews);\n\t\tconst rowColumns = Math.min(columns, deferredVisibleViews.length);\n\n\t\treturn (\n\t\t\t<ErrorBoundary\n\t\t\t\tfallback={\n\t\t\t\t\t<Box sx={{ textAlign: \"center\", p: 3, color: \"error.main\" }}>\n\t\t\t\t\t\t<Typography>Error loading view grid</Typography>\n\t\t\t\t\t</Box>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<Box\n\t\t\t\t\tsx={{\n\t\t\t\t\t\tdisplay: \"grid\",\n\t\t\t\t\t\tgridTemplateColumns: {\n\t\t\t\t\t\t\txs: \"1fr\",\n\t\t\t\t\t\t\tsm: `repeat(${Math.min(columns, 2)}, 1fr)`,\n\t\t\t\t\t\t\tmd: `repeat(${rowColumns}, 1fr)`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgap: { xs: 2, sm: 4 },\n\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\ttransition: \"opacity 0.2s ease-in-out\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{deferredVisibleViews.map((view) => (\n\t\t\t\t\t\t<ViewCard\n\t\t\t\t\t\t\tkey={view.name}\n\t\t\t\t\t\t\tview={view}\n\t\t\t\t\t\t\tonExpand={onViewExpand}\n\t\t\t\t\t\t\thandleViewToggle={onViewToggle}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</Box>\n\t\t\t</ErrorBoundary>\n\t\t);\n\t},\n);\n\nconst HomePage = memo(() => {\n\tconst theme = useTheme();\n\tconst navigate = useNavigate();\n\tconst [_selectedDate, setSelectedDate] = useState<number>(Date.now());\n\tconst _dateRangeStart = new Date(\"1920-01-01\").getTime();\n\tconst _dateRangeEnd = Date.now();\n\tconst _handleDateChange = (_: Event, value: number | number[]) => {\n\t\tsetSelectedDate(value as number);\n\t};\n\tconst { data, isLoading, error } = useApiData(\n\t\t\"endpoints?only_applicable&type=byransha.web.View\",\n\t\t{},\n\t\t{\n\t\t\tstaleTime: 30000,\n\t\t\tgcTime: 5 * 60 * 1000,\n\t\t\trefetchOnWindowFocus: false,\n\t\t\trefetchOnReconnect: true,\n\t\t},\n\t);\n\tconst { isLoading: isTransitioning, withLoading } = useLoadingState();\n\n\t// State for expanded view modal with optimization for faster loading\n\tconst [expandedView, setExpandedView] = useOptimizedState<any>(null, {\n\t\ttransitionUpdates: true,\n\t});\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\n\n\tuseTitle(\"Accueil\");\n\n\tconst _nodeInfo = useApiMutation(\"node_info\");\n\n\t// const handleViewExpand = useCallback(\n\t// \t(view: any) => {\n\t// \t\twithLoading(async () => {\n\t// \t\t\tif (view.name.endsWith(\"class_attribute_field\")) {\n\t// \t\t\t\tawait jumpToId.mutateAsync({\n\t// \t\t\t\t\tnode: data?.data?.node_id,\n\t// \t\t\t\t});\n\t// \t\t\t\tnavigate(`/add-node/form/${data?.data?.node_id}`);\n\t// \t\t\t} else {\n\t// \t\t\t\tnavigate(`/home/${view.name}`)\n\t// \t\t\t\tconsole.log(\"Expanding view:\", view.name);\n\t// \t\t\t}\n\t// \t\t});\n\t// \t},\n\t// \t[setExpandedView, withLoading, jumpToId, data, navigate],\n\t// );\n\n\t// Column management with auto mode toggle\n\tconst [columns, setColumns, isColumnsUpdating] = useOptimizedState(2, {\n\t\ttransitionUpdates: true,\n\t\tdeferUpdates: false,\n\t});\n\n\tconst [autoColumns, setAutoColumns] = useState<boolean>(() =>\n\t\tJSON.parse(localStorage.getItem(\"autoColumns\") || \"true\"),\n\t);\n\n\tconst [selectMenuAnchor, setSelectMenuAnchor, isMenuUpdating] =\n\t\tuseOptimizedState<HTMLButtonElement | null>(null, {\n\t\t\ttransitionUpdates: true,\n\t\t});\n\n\tconst [selectedViews, setSelectedViews] = useState<string[]>([]);\n\n\tconst [showTechnicalViews, setShowTechnicalViews] = useState<boolean>(() =>\n\t\tJSON.parse(localStorage.getItem(\"showTechnicalViews\") || \"false\"),\n\t);\n\n\t// Debounced search functionality (even though not visible in UI, prepared for future)\n\tconst [searchQuery] = useOptimizedState(\"\", {\n\t\ttransitionUpdates: true,\n\t\tdebounceMs: 300,\n\t});\n\tconst [debouncedSearchQuery] = useOptimizedDebounce(searchQuery, 300);\n\n\tconst jumpToId = useApiMutation(\"jump\");\n\n\t// Optimized list management for views\n\tconst [views, setViews] = useState<any[]>([]);\n\tconst [isPending] = useTransition();\n\n\t// Memoized function to calculate auto column count\n\tconst getAutoColumnCount = useCallback(() => {\n\t\tconst width = window.innerWidth;\n\t\tif (width < 900) return 1;\n\t\telse if (width < 1600) return 2;\n\t\telse if (width < 2100) return 3;\n\t\treturn 4;\n\t}, []);\n\n\t// Deferred values for better performance during rapid changes\n\tconst deferredViews = useDeferredValue(views);\n\tconst deferredSelectedViews = useDeferredValue(selectedViews);\n\n\t// Memoized filtered views with search functionality\n\tconst filteredViews = useMemo(() => {\n\t\tlet filtered = showTechnicalViews\n\t\t\t? deferredViews\n\t\t\t: deferredViews.filter((view: any) => view.type !== \"technical\");\n\n\t\t// Apply search filter if query exists\n\t\tif (debouncedSearchQuery.trim()) {\n\t\t\tfiltered = filtered.filter(\n\t\t\t\t(view: any) =>\n\t\t\t\t\tview.pretty_name\n\t\t\t\t\t\t?.toLowerCase()\n\t\t\t\t\t\t.includes(debouncedSearchQuery.toLowerCase()) ||\n\t\t\t\t\tview.description\n\t\t\t\t\t\t?.toLowerCase()\n\t\t\t\t\t\t.includes(debouncedSearchQuery.toLowerCase()),\n\t\t\t);\n\t\t}\n\n\t\treturn filtered;\n\t}, [deferredViews, showTechnicalViews, debouncedSearchQuery]);\n\n\t// Effect for handling data changes with startTransition\n\tReact.useEffect(() => {\n\t\tif (data?.data?.results?.[0]?.result?.data) {\n\t\t\tstartTransition(() => {\n\t\t\t\tconst apiViews = data.data.results[0].result.data;\n\t\t\t\tconst filteredApiViews = showTechnicalViews\n\t\t\t\t\t? apiViews\n\t\t\t\t\t: apiViews.filter((view: any) => view.type !== \"technical\");\n\n\t\t\t\t// Handle view ordering first\n\t\t\t\tconst savedOrder =\n\t\t\t\t\tJSON.parse(localStorage.getItem(\"viewOrder\") as string) || [];\n\t\t\t\tlet finalViews = filteredApiViews;\n\t\t\t\tif (savedOrder.length > 0) {\n\t\t\t\t\tfinalViews = [...filteredApiViews].sort((a, b) => {\n\t\t\t\t\t\tconst indexA = savedOrder.indexOf(a.endpoint);\n\t\t\t\t\t\tconst indexB = savedOrder.indexOf(b.endpoint);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t(indexA === -1 ? Infinity : indexA) -\n\t\t\t\t\t\t\t(indexB === -1 ? Infinity : indexB)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Set views only once\n\t\t\t\tsetViews(finalViews);\n\n\t\t\t\t// Handle selected views with preserved state\n\t\t\t\tconst saved = JSON.parse(\n\t\t\t\t\tlocalStorage.getItem(\"selectedViewsSaved\") as string,\n\t\t\t\t);\n\t\t\t\tlet newSelected: any;\n\t\t\t\tif (!saved || saved.length === 0) {\n\t\t\t\t\tnewSelected = filteredApiViews.map((view: any) => view.name);\n\t\t\t\t} else {\n\t\t\t\t\tnewSelected = saved.filter((endpoint: any) =>\n\t\t\t\t\t\tfilteredApiViews.some((view: any) => view.name === endpoint),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tlocalStorage.setItem(\"selectedViewsSaved\", JSON.stringify(newSelected));\n\t\t\t\tsetSelectedViews(newSelected);\n\t\t\t});\n\t\t}\n\t}, [data, showTechnicalViews]);\n\n\t// Effect for handling window resize with auto columns\n\tReact.useEffect(() => {\n\t\tconst handleResize = () => {\n\t\t\tif (autoColumns) {\n\t\t\t\tstartTransition(() => {\n\t\t\t\t\tsetColumns(getAutoColumnCount());\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tif (autoColumns) {\n\t\t\twindow.addEventListener(\"resize\", handleResize);\n\t\t\thandleResize();\n\t\t}\n\n\t\treturn () => window.removeEventListener(\"resize\", handleResize);\n\t}, [getAutoColumnCount, setColumns, autoColumns]);\n\n\t// Optimized handlers using React 19 features\n\tconst handleSelectMenuOpen = useCallback<\n\t\tMouseEventHandler<HTMLButtonElement>\n\t>(\n\t\t(event) => {\n\t\t\tsetSelectMenuAnchor(event.currentTarget);\n\t\t},\n\t\t[setSelectMenuAnchor],\n\t);\n\n\tconst handleSelectMenuClose = useCallback<\n\t\tMouseEventHandler<HTMLButtonElement>\n\t>(() => {\n\t\tsetSelectMenuAnchor(null);\n\t}, [setSelectMenuAnchor]);\n\n\tconst handleViewToggle = useCallback(\n\t\t(endpoint: string) => {\n\t\t\tstartTransition(() => {\n\t\t\t\tsetSelectedViews((prev) => {\n\t\t\t\t\tconst newSelected = prev.includes(endpoint)\n\t\t\t\t\t\t? prev.filter((id) => id !== endpoint)\n\t\t\t\t\t\t: [...prev, endpoint];\n\n\t\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\t\"selectedViewsSaved\",\n\t\t\t\t\t\tJSON.stringify(newSelected),\n\t\t\t\t\t);\n\n\t\t\t\t\tconst technicalViews = views.filter(\n\t\t\t\t\t\t(view) => view.type === \"technical\",\n\t\t\t\t\t);\n\t\t\t\t\tconst openTechnicalViews = technicalViews.filter((view) =>\n\t\t\t\t\t\tnewSelected.includes(view.name),\n\t\t\t\t\t);\n\t\t\t\t\tif (openTechnicalViews.length === 0 && showTechnicalViews) {\n\t\t\t\t\t\tsetShowTechnicalViews(false);\n\t\t\t\t\t\tlocalStorage.setItem(\"showTechnicalViews\", JSON.stringify(false));\n\t\t\t\t\t}\n\t\t\t\t\treturn newSelected;\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t[views, showTechnicalViews],\n\t);\n\n\tconst handleTechnicalViewsToggle = useCallback(() => {\n\t\tstartTransition(() => {\n\t\t\tsetShowTechnicalViews((prev) => {\n\t\t\t\tconst newValue = !prev;\n\t\t\t\tlocalStorage.setItem(\"showTechnicalViews\", JSON.stringify(newValue));\n\n\t\t\t\tconst techViews =\n\t\t\t\t\tdata?.data?.results?.[0]?.result?.data?.filter(\n\t\t\t\t\t\t(view: any) => view.type === \"technical\",\n\t\t\t\t\t) || [];\n\t\t\t\tconst techEndpoints = techViews.map((view: any) => view.name);\n\n\t\t\t\tsetSelectedViews((prevSelected) => {\n\t\t\t\t\tlet updated: any;\n\t\t\t\t\tif (newValue) {\n\t\t\t\t\t\tupdated = [...new Set([...prevSelected, ...techEndpoints])];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tupdated = prevSelected.filter(\n\t\t\t\t\t\t\t(endpoint) => !techEndpoints.includes(endpoint),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tlocalStorage.setItem(\"selectedViewsSaved\", JSON.stringify(updated));\n\t\t\t\t\treturn updated;\n\t\t\t\t});\n\n\t\t\t\treturn newValue;\n\t\t\t});\n\t\t});\n\t}, [data]);\n\n\tconst handleAutoColumnsToggle = useCallback(() => {\n\t\tconst newAutoValue = !autoColumns;\n\t\tsetAutoColumns(newAutoValue);\n\t\tlocalStorage.setItem(\"autoColumns\", JSON.stringify(newAutoValue));\n\n\t\tif (newAutoValue) {\n\t\t\t// Apply auto sizing immediately when enabling\n\t\t\tstartTransition(() => {\n\t\t\t\tsetColumns(getAutoColumnCount());\n\t\t\t});\n\t\t}\n\t}, [autoColumns, getAutoColumnCount, setColumns]);\n\n\tconst handleViewExpand = useCallback(\n\t\t(view: any) => {\n\t\t\twithLoading(async () => {\n\t\t\t\tif (view.name.endsWith(\"class_attribute_field\")) {\n\t\t\t\t\tawait jumpToId.mutateAsync({\n\t\t\t\t\t\tnode: data?.data?.node_id,\n\t\t\t\t\t});\n\t\t\t\t\tnavigate(`/add-node/form/${data?.data?.node_id}`);\n\t\t\t\t} else {\n\t\t\t\t\tnavigate(`/home/${view.name}`);\n\t\t\t\t\tconsole.log(\"Expanding view:\", view.name);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[withLoading, jumpToId, data, navigate],\n\t);\n\n\tconst handleCloseExpandedView = useCallback(() => {\n\t\tsetIsModalOpen(false);\n\t\t// Delay clearing the view to allow modal close animation\n\t\tsetTimeout(() => setExpandedView(null), 200);\n\t}, [setExpandedView]);\n\n\tconst incrementColumns = useCallback(() => {\n\t\tstartTransition(() => {\n\t\t\tsetColumns((prev) => Math.min(prev + 1, filteredViews.length));\n\t\t});\n\t}, [filteredViews.length, setColumns]);\n\n\tconst decrementColumns = useCallback(() => {\n\t\tstartTransition(() => {\n\t\t\tsetColumns((prev) => Math.max(prev - 1, 1));\n\t\t});\n\t}, [setColumns]);\n\n\t// Loading state with React 19 optimizations\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<ErrorBoundary>\n\t\t\t\t<LoadingStates.Page />\n\t\t\t</ErrorBoundary>\n\t\t);\n\t}\n\n\t// Error state with recovery\n\tif (error || !data || !data.data || !data.data.results) {\n\t\treturn (\n\t\t\t<ErrorBoundary>\n\t\t\t\t<Box\n\t\t\t\t\tsx={{\n\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\tflexDirection: \"column\",\n\t\t\t\t\t\talignItems: \"center\",\n\t\t\t\t\t\tjustifyContent: \"center\",\n\t\t\t\t\t\theight: \"100vh\",\n\t\t\t\t\t\tpadding: 3,\n\t\t\t\t\t\tbgcolor: \"#2e3b55\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\tbgcolor: \"#fff3e0\",\n\t\t\t\t\t\t\tp: 3,\n\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\tcolor: \"#ef6c00\",\n\t\t\t\t\t\t\ttextAlign: \"center\",\n\t\t\t\t\t\t\tmaxWidth: \"500px\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Typography variant=\"h6\" gutterBottom>\n\t\t\t\t\t\t\tFailed to Load Data\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Typography variant=\"body2\" sx={{ mb: 2 }}>\n\t\t\t\t\t\t\t{error?.message || \"Data is null or unavailable.\"}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tonClick={() => window.location.reload()}\n\t\t\t\t\t\t\tsx={{ mt: 1 }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRetry\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</ErrorBoundary>\n\t\t);\n\t}\n\n\tconst isPendingAny =\n\t\tisTransitioning || isColumnsUpdating || isMenuUpdating || isPending;\n\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<Box\n\t\t\t\tsx={{\n\t\t\t\t\tpadding: { xs: \"8px\", sm: \"16px\", md: \"40px\" },\n\t\t\t\t\tmaxWidth: \"100%\",\n\t\t\t\t\tmargin: \"0 auto\",\n\t\t\t\t\tbgcolor: \"#2e3b55\",\n\t\t\t\t\tminHeight: \"100vh\",\n\t\t\t\t\tzIndex: 1,\n\t\t\t\t\topacity: isPendingAny ? 0.8 : 1,\n\t\t\t\t\ttransition: \"opacity 0.2s ease-in-out\",\n\t\t\t\t}}\n\t\t\t\tclassName=\"home-page\"\n\t\t\t>\n\t\t\t\t{/* Header avec design amélioré */}\n\t\t\t\t<Paper\n\t\t\t\t\televation={2}\n\t\t\t\t\tsx={{\n\t\t\t\t\t\tp: { xs: 2, sm: 3 },\n\t\t\t\t\t\tmb: { xs: 2, sm: 4 },\n\t\t\t\t\t\tborderRadius: 3,\n\t\t\t\t\t\tbgcolor: \"rgba(255, 255, 255, 0.95)\",\n\t\t\t\t\t\tbackdropFilter: \"blur(10px)\",\n\t\t\t\t\t\tborder: \"1px solid rgba(255, 255, 255, 0.2)\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\tflexDirection: { xs: \"column\", lg: \"row\" },\n\t\t\t\t\t\t\tjustifyContent: \"space-between\",\n\t\t\t\t\t\t\talignItems: { xs: \"flex-start\", lg: \"center\" },\n\t\t\t\t\t\t\tgap: { xs: 2, sm: 3 },\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{/* Section gauche - Contrôles principaux */}\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\t\tflexDirection: { xs: \"column\", sm: \"row\" },\n\t\t\t\t\t\t\t\tgap: { xs: 2, sm: 3 },\n\t\t\t\t\t\t\t\talignItems: { xs: \"flex-start\", sm: \"center\" },\n\t\t\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{/* Sélection des vues */}\n\t\t\t\t\t\t\t<Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\tstartIcon={<ViewModuleIcon />}\n\t\t\t\t\t\t\t\t\tonClick={handleSelectMenuOpen}\n\t\t\t\t\t\t\t\t\tdisabled={isPendingAny}\n\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\tborderColor: \"#90caf9\",\n\t\t\t\t\t\t\t\t\t\tcolor: \"#1976d2\",\n\t\t\t\t\t\t\t\t\t\ttextTransform: \"none\",\n\t\t\t\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\t\t\t\t\"&:hover\": {\n\t\t\t\t\t\t\t\t\t\t\tborderColor: \"#42a5f5\",\n\t\t\t\t\t\t\t\t\t\t\tbgcolor: \"rgba(25, 118, 210, 0.04)\",\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSélection des vues\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t\t\tanchorEl={selectMenuAnchor}\n\t\t\t\t\t\t\t\t\topen={Boolean(selectMenuAnchor)}\n\t\t\t\t\t\t\t\t\tonClose={handleSelectMenuClose}\n\t\t\t\t\t\t\t\t\tPaperProps={{\n\t\t\t\t\t\t\t\t\t\tsx: {\n\t\t\t\t\t\t\t\t\t\t\tmaxHeight: { xs: 300, sm: 400 },\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth: { xs: \"90vw\", sm: 350 },\n\t\t\t\t\t\t\t\t\t\t\tmt: 1,\n\t\t\t\t\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\t\t\t\t\tboxShadow: theme.shadows[8],\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{filteredViews.map((view) => (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tkey={view.name}\n\t\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\t\tpy: 1,\n\t\t\t\t\t\t\t\t\t\t\t\tpx: 2,\n\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: 1,\n\t\t\t\t\t\t\t\t\t\t\t\tmx: 1,\n\t\t\t\t\t\t\t\t\t\t\t\tmb: 0.5,\n\t\t\t\t\t\t\t\t\t\t\t\t\"&:hover\": {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbgcolor: \"primary.50\",\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\t\t\t\t\t\t\talignItems: \"center\",\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleViewToggle(view.name)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={deferredSelectedViews.includes(view.name)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"#90caf9\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"&.Mui-checked\": { color: \"#90caf9\" },\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\t\t\t\tprimary={view.pretty_name}\n\t\t\t\t\t\t\t\t\t\t\t\t\tsecondary={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tview.type === \"technical\" ? \"Technique\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t\t</Box>\n\n\t\t\t\t\t\t\t{/* Toggle vues techniques */}\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\t\tchecked={showTechnicalViews}\n\t\t\t\t\t\t\t\t\t\tonChange={handleTechnicalViewsToggle}\n\t\t\t\t\t\t\t\t\t\tdisabled={isPendingAny}\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlabel=\"Vues techniques\"\n\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\"& .MuiFormControlLabel-label\": {\n\t\t\t\t\t\t\t\t\t\tfontSize: { xs: \"0.875rem\", sm: \"1rem\" },\n\t\t\t\t\t\t\t\t\t\tcolor: \"text.primary\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Divider\n\t\t\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\t\t\tflexItem\n\t\t\t\t\t\t\t\tsx={{ display: { xs: \"none\", sm: \"block\" } }}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{/* Contrôles de colonnes améliorés */}\n\t\t\t\t\t\t\t<Box sx={{ display: \"flex\", alignItems: \"center\", gap: 2 }}>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\t\t\tchecked={autoColumns}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleAutoColumnsToggle}\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlabel=\"Auto colonnes\"\n\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\"& .MuiFormControlLabel-label\": {\n\t\t\t\t\t\t\t\t\t\t\tfontSize: { xs: \"0.875rem\", sm: \"1rem\" },\n\t\t\t\t\t\t\t\t\t\t\tcolor: \"text.primary\",\n\t\t\t\t\t\t\t\t\t\t\tfontWeight: autoColumns ? 600 : 400,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tpx: 2,\n\t\t\t\t\t\t\t\t\t\tpy: 1,\n\t\t\t\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\t\t\t\tbgcolor: autoColumns ? \"primary.50\" : \"grey.50\",\n\t\t\t\t\t\t\t\t\t\ttransition: \"all 0.2s ease-in-out\",\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t{!autoColumns && (\n\t\t\t\t\t\t\t\t\t<ButtonGroup\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\tdisabled={isPendingAny}\n\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\t\"& .MuiButton-root\": {\n\t\t\t\t\t\t\t\t\t\t\t\tminWidth: { xs: 32, sm: 40 },\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: { xs: \"0.75rem\", sm: \"0.875rem\" },\n\t\t\t\t\t\t\t\t\t\t\t\tborderColor: \"#90caf9\",\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"#1976d2\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"&:hover\": {\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderColor: \"#42a5f5\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tbgcolor: \"rgba(25, 118, 210, 0.04)\",\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Button onClick={decrementColumns} disabled={columns === 1}>\n\t\t\t\t\t\t\t\t\t\t\t<RemoveIcon fontSize=\"small\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Button disabled sx={{ cursor: \"default\" }}>\n\t\t\t\t\t\t\t\t\t\t\t{columns}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={incrementColumns}\n\t\t\t\t\t\t\t\t\t\t\tdisabled={columns === filteredViews.length}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<AddIcon fontSize=\"small\" />\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\n\t\t\t\t\t\t{/* Bouton Ajouter nouveau noeud */}\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tstartIcon={<AddIcon />}\n\t\t\t\t\t\t\tonClick={() => navigate(\"/add-node\")}\n\t\t\t\t\t\t\tdisabled={isPendingAny}\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\tpx: 3,\n\t\t\t\t\t\t\t\tpy: 1.5,\n\t\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\t\ttextTransform: \"none\",\n\t\t\t\t\t\t\t\tfontSize: \"1rem\",\n\t\t\t\t\t\t\t\tfontWeight: 600,\n\t\t\t\t\t\t\t\tboxShadow: theme.shadows[3],\n\t\t\t\t\t\t\t\t\"&:hover\": {\n\t\t\t\t\t\t\t\t\tboxShadow: theme.shadows[6],\n\t\t\t\t\t\t\t\t\ttransform: \"translateY(-1px)\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttransition: \"all 0.2s ease-in-out\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tNouveau nœud\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Box>\n\t\t\t\t</Paper>\n\n\t\t\t\t<Suspense fallback={<LoadingStates.Grid columns={columns} count={6} />}>\n\t\t\t\t\t<ViewGrid\n\t\t\t\t\t\tviews={filteredViews}\n\t\t\t\t\t\tselectedViews={deferredSelectedViews}\n\t\t\t\t\t\tcolumns={columns}\n\t\t\t\t\t\tonViewToggle={handleViewToggle}\n\t\t\t\t\t\tonViewExpand={handleViewExpand}\n\t\t\t\t\t/>\n\t\t\t\t</Suspense>\n\n\t\t\t\t{/* Loading Indicator */}\n\t\t\t\t{isPendingAny && (\n\t\t\t\t\t<Box\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\tposition: \"fixed\",\n\t\t\t\t\t\t\tbottom: 24,\n\t\t\t\t\t\t\tright: 24,\n\t\t\t\t\t\t\tzIndex: 1400,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t{/* Modal optimisé pour expanded view */}\n\t\t\t\t<Dialog\n\t\t\t\t\topen={isModalOpen}\n\t\t\t\t\tonClose={handleCloseExpandedView}\n\t\t\t\t\tmaxWidth=\"lg\"\n\t\t\t\t\tfullWidth\n\t\t\t\t\taria-labelledby=\"expanded-view-title\"\n\t\t\t\t\tPaperProps={{\n\t\t\t\t\t\tsx: {\n\t\t\t\t\t\t\theight: \"90vh\",\n\t\t\t\t\t\t\tmaxHeight: \"90vh\",\n\t\t\t\t\t\t\tborderRadius: 3,\n\t\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\tTransitionProps={{\n\t\t\t\t\t\ttimeout: 300,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\tjustifyContent: \"space-between\",\n\t\t\t\t\t\t\talignItems: \"center\",\n\t\t\t\t\t\t\tborderBottom: \"1px solid #e0e0e0\",\n\t\t\t\t\t\t\tbgcolor: \"primary.50\",\n\t\t\t\t\t\t\tpy: 2,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n\t\t\t\t\t\t\t{expandedView?.pretty_name || \"Vue agrandie\"}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tonClick={handleCloseExpandedView}\n\t\t\t\t\t\t\taria-label=\"Fermer la vue agrandie\"\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\"&:hover\": {\n\t\t\t\t\t\t\t\t\tbgcolor: \"primary.100\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t<DialogContent sx={{ p: 0, height: \"100%\" }}>\n\t\t\t\t\t\t{expandedView && isModalOpen && (\n\t\t\t\t\t\t\t<Suspense\n\t\t\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\t\t\t\t\tflexDirection: \"column\",\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: \"center\",\n\t\t\t\t\t\t\t\t\t\t\talignItems: \"center\",\n\t\t\t\t\t\t\t\t\t\t\theight: \"100%\",\n\t\t\t\t\t\t\t\t\t\t\tgap: 2,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<CircularProgress size={48} />\n\t\t\t\t\t\t\t\t\t\t<Typography variant=\"body1\" color=\"text.secondary\">\n\t\t\t\t\t\t\t\t\t\t\tChargement de {expandedView.pretty_name}...\n\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\tviewId={expandedView.name}\n\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\theight: \"100%\",\n\t\t\t\t\t\t\t\t\t\toverflow: \"auto\",\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</DialogContent>\n\t\t\t\t</Dialog>\n\t\t\t</Box>\n\t\t</ErrorBoundary>\n\t);\n});\n\nexport default HomePage;\n"],"names":["ViewCard","memo","view","onExpand","handleViewToggle","theme","useTheme","handleToggle","useCallback","e","handleExpand","isTechnical","ErrorBoundary","Card","Typography","CardHeader","Stack","Tooltip","IconButton","ExpandIcon","CloseIcon","CardContent","Box","Alert","Suspense","Skeleton","View","ViewGrid","views","selectedViews","columns","onViewToggle","onViewExpand","visibleViews","deferredVisibleViews","useDeferredValue","rowColumns","Math","navigate","useNavigate","_selectedDate","setSelectedDate","useState","Date","data","isLoading","error","useApiData","isTransitioning","withLoading","useLoadingState","expandedView","setExpandedView","useOptimizedState","isModalOpen","setIsModalOpen","useTitle","useApiMutation","setColumns","isColumnsUpdating","autoColumns","setAutoColumns","JSON","localStorage","selectMenuAnchor","setSelectMenuAnchor","isMenuUpdating","setSelectedViews","showTechnicalViews","setShowTechnicalViews","searchQuery","debouncedSearchQuery","useOptimizedDebounce","jumpToId","setViews","isPending","useTransition","getAutoColumnCount","width","window","deferredViews","deferredSelectedViews","filteredViews","useMemo","filtered","_view_pretty_name","_view_description","React","_data_data_results__result","startTransition","newSelected","apiViews","filteredApiViews","savedOrder","finalViews","a","b","indexA","indexB","Infinity","saved","endpoint","handleResize","handleSelectMenuOpen","event","handleSelectMenuClose","prev","id","openTechnicalViews","technicalViews","handleTechnicalViewsToggle","_data_data_results__result_data","newValue","techEndpoints","techViews","prevSelected","updated","Set","handleAutoColumnsToggle","newAutoValue","handleViewExpand","_data_data","_data_data1","console","handleCloseExpandedView","setTimeout","incrementColumns","decrementColumns","LoadingStates","Button","isPendingAny","Paper","ViewModuleIcon","Menu","Boolean","MenuItem","Checkbox","ListItemText","FormControlLabel","Switch","Divider","ButtonGroup","RemoveIcon","AddIcon","CircularProgress","Dialog","DialogTitle","DialogContent"],"mappings":"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"}