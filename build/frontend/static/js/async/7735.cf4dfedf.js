"use strict";(self.webpackChunklogin_page=self.webpackChunklogin_page||[]).push([["7735"],{94279:function(e,t,n){n.r(t),n.d(t,{default:()=>k});var r=n(85893),i=n(22826),a=n(38655),s=n(89425),l=n(51001),o=n(83321);let d=(0,o.Z)((0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),c=(0,o.Z)((0,r.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),u=(0,o.Z)((0,r.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorder");var p=n(86001),h=n(2903),x=n(89126),f=n(54757),m=n(84786),g=n(6896),v=n(30548),Z=n(64651),b=n(32153),j=n(89717),y=n(81035),S=n(99469),C=n(67294),w=n(83796);let k=()=>{(0,i.Z)("Add node");let e=(0,w.s0)(),{data:t,isLoading:n,error:o,refetch:k}=(0,a.m_)("bnode_class_distribution"),W=(0,S.NL)(),[L,A]=(0,C.useState)([]),[P,E]=(0,C.useState)([]),[R,I]=(0,C.useState)(new Set),[M,$]=(0,C.useState)(""),[z,N]=(0,C.useState)(!1),[O,_]=(0,C.useState)(()=>{try{let e=localStorage.getItem("favorites");if(null==e)return[];{let t=JSON.parse(e);return Array.isArray(t)?t:[]}}catch(e){return[]}}),G=(0,a.uC)("jump",{onSuccess:async()=>{await W.invalidateQueries()}}),B=(0,a.uC)("add_node"),F=(0,a.uC)("class_information"),J=async e=>{let t=P.find(t=>t.endsWith(e));if(t)try{var n,r,i,a;let e=await B.mutateAsync({BNodeClass:t}),s=null==e||null==(a=e.data)||null==(i=a.results)||null==(r=i[0])||null==(n=r.result)?void 0:n.data.id;return await G.mutateAsync({node_id:s}),s}catch(e){throw console.error("Error during handleCreateAndJump for ".concat(t,":"),e),e}},T=async t=>{try{let n=await J(t);e("/add-node/form/".concat(n))}catch(e){console.error("Navigation skipped due to error:",e)}},H=e=>{_(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};(0,C.useEffect)(()=>{localStorage.setItem("favorites",JSON.stringify(O))},[O]),(0,C.useEffect)(()=>{if(t)try{var e,n,r,i;let a=((null==t||null==(i=t.data)||null==(r=i.results)||null==(n=r[0])||null==(e=n.result)?void 0:e.data)||[]).filter(e=>Object.keys(e)[0]),s=a.map(e=>Object.keys(e)[0].split(".").pop()),l=a.map(e=>Object.keys(e)[0]);A(s),E(l)}catch(e){console.error("Failed to parse class names:",e)}},[t]);let Y=(0,C.useCallback)(async e=>{let t=localStorage.getItem("persisting:".concat(e));if(null!==t)return"true"===t;try{var n,r,i,a;let t=await F.mutateAsync({classForm:e}),s=null==t||null==(a=t.data)||null==(i=a.results)||null==(r=i[0])||null==(n=r.result)?void 0:n.data;return(null==s?void 0:s.BusinessNode)!==void 0}catch(t){return console.error("Error fetching info for ".concat(e,":"),t),!1}},[F.mutateAsync]);return(0,C.useEffect)(()=>{P&&0!==P.length&&(async()=>{let e=new Set;await Promise.all(P.map(async t=>{await Y(t)&&e.add(t)})),I(e)})()},[P,Y]),(0,r.jsx)(p.Z,{in:!z,timeout:300,children:(0,r.jsxs)(h.Z,{component:x.Z,elevation:3,sx:{p:4,position:"relative",bgcolor:"#f8f9fa",maxWidth:"100%",width:"100%",minHeight:"80vh",overflow:"hidden"},children:[(0,r.jsx)(f.Z,{variant:"h3",component:"h1",gutterBottom:!0,sx:{color:"#2c3e50",textAlign:"center",fontWeight:600,pb:2,borderBottom:"3px solid #3498db"},children:"Add a new node"}),(0,r.jsx)(m.Z,{sx:{display:"flex",justifyContent:"center",mb:3,width:"100%"},children:(0,r.jsx)(g.Z,{fullWidth:!0,variant:"outlined",placeholder:"Search class name...",value:M,onChange:e=>$(e.target.value),sx:{maxWidth:400},InputProps:{startAdornment:(0,r.jsx)(v.Z,{position:"start",children:(0,r.jsx)(d,{})})}})}),O.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{variant:"h4",component:"h2",sx:{color:"#34495e",my:3,fontWeight:500},children:"Favorites (Persistent Only)"}),(0,r.jsx)(Z.Z,{container:!0,spacing:2,sx:{mt:2,justifyContent:"center"},children:O.map(e=>{let t=P.find(t=>t.endsWith(e));return{short:e,full:t}}).filter(e=>{let{full:t}=e;return t&&R.has(t)}).filter(e=>{let{short:t}=e;return t.toLowerCase().includes(M.toLowerCase())}).map(e=>{let{short:t}=e;return(0,r.jsx)(Z.Z,{children:(0,r.jsx)(b.Z,{onClick:()=>T(t),sx:{minWidth:120,cursor:"pointer",transition:"all 0.2s ease","&:hover":{bgcolor:"#f0f8ff",transform:"translateY(-2px)",boxShadow:3}},children:(0,r.jsxs)(j.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",p:2,"&:last-child":{pb:2}},children:[(0,r.jsx)(m.Z,{onClick:e=>{e.stopPropagation(),H(t)},sx:{mr:1,display:"inline-flex",cursor:"pointer"},children:(0,r.jsx)(c,{sx:{color:"#f1c40f"}})}),(0,r.jsx)(m.Z,{children:t})]})})},t)})})]}),(0,r.jsx)(f.Z,{variant:"h4",component:"h2",sx:{color:"#34495e",my:3,fontWeight:500},children:"All persisting classes"}),(0,r.jsx)(Z.Z,{container:!0,spacing:2,sx:{mt:2,justifyContent:"center"},children:L.map((e,t)=>({short:e,full:P[t]})).filter(e=>{let{full:t}=e;return R.has(t)}).filter(e=>{let{short:t}=e;return t.toLowerCase().includes(M.toLowerCase())}).map(e=>{let{short:t}=e;return(0,r.jsx)(Z.Z,{children:(0,r.jsx)(b.Z,{sx:{minWidth:120,cursor:"pointer",transition:"all 0.2s ease","&:hover":{bgcolor:"#f0f8ff",transform:"translateY(-2px)",boxShadow:3}},children:(0,r.jsxs)(j.Z,{onClick:()=>T(t),sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",p:2,"&:last-child":{pb:2}},children:[(0,r.jsx)(m.Z,{onClick:e=>{e.stopPropagation(),H(t)},sx:{mr:1,display:"inline-flex",cursor:"pointer"},children:O.includes(t)?(0,r.jsx)(c,{sx:{color:"#f1c40f"}}):(0,r.jsx)(u,{sx:{color:"#ccc"}})}),(0,r.jsx)(m.Z,{children:t})]})})},t)})}),(0,r.jsxs)(m.Z,{sx:{position:"absolute",top:10,right:10,display:"flex",gap:1,zIndex:1e3},children:[(0,r.jsx)(y.Z,{onClick:()=>{Object.keys(localStorage).filter(e=>e.startsWith("persisting:")).forEach(e=>localStorage.removeItem(e)),I(new Set),k()},"aria-label":"reload",title:"Reload all classes",sx:{"&:hover":{color:"#3498db"}},children:(0,r.jsx)(l.Z,{})}),(0,r.jsx)(y.Z,{onClick:()=>{N(!0),setTimeout(()=>e("/home"),300)},"aria-label":"close",title:"Close",sx:{"&:hover":{color:"#e74c3c"}},children:(0,r.jsx)(s.Z,{})})]})]})})}},22826:function(e,t,n){n.d(t,{Z:()=>i});var r=n(67294);let i=e=>{let t="undefined"!=typeof document,n=(0,r.useRef)(t?document.title:null);(0,r.useEffect)(()=>{if(t)return document.title!==e&&(document.title=e),()=>{document.title=n.current}},[t,e])}},2903:function(e,t,n){n.d(t,{Z:()=>v});var r=n(67294),i=n(67026),a=n(16873),s=n(12531),l=n(5858),o=n(96166),d=n(87537),c=n(56955),u=n(85893);let p=(0,c.Z)(),h=(0,d.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`maxWidth${(0,l.Z)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),x=e=>(0,o.Z)({props:e,name:"MuiContainer",defaultTheme:p});var f=n(24716),m=n(96847),g=n(34407);let v=function(e={}){let{createStyledComponent:t=h,useThemeProps:n=x,componentName:o="MuiContainer"}=e,d=t(({theme:e,ownerState:t})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}}),({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce((t,n)=>{let r=e.breakpoints.values[n];return 0!==r&&(t[e.breakpoints.up(n)]={maxWidth:`${r}${e.breakpoints.unit}`}),t},{}),({theme:e,ownerState:t})=>({..."xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},...t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}}));return r.forwardRef(function(e,t){let r=n(e),{className:c,component:p="div",disableGutters:h=!1,fixed:x=!1,maxWidth:f="lg",classes:m,...g}=r,v={...r,component:p,disableGutters:h,fixed:x,maxWidth:f},Z=((e,t)=>{let{classes:n,fixed:r,disableGutters:i,maxWidth:o}=e,d={root:["root",o&&`maxWidth${(0,l.Z)(String(o))}`,r&&"fixed",i&&"disableGutters"]};return(0,s.Z)(d,e=>(0,a.ZP)(t,e),n)})(v,o);return(0,u.jsx)(d,{as:p,ownerState:v,className:(0,i.Z)(Z.root,c),ref:t,...g})})}({createStyledComponent:(0,m.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`maxWidth${(0,f.Z)(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,g.i)({props:e,name:"MuiContainer"})})},30548:function(e,t,n){n.d(t,{Z:()=>b});var r,i=n(67294),a=n(67026),s=n(12531),l=n(24716),o=n(54757),d=n(61345),c=n(65873),u=n(96847),p=n(92155),h=n(34407),x=n(92908),f=n(16873);function m(e){return(0,f.ZP)("MuiInputAdornment",e)}let g=(0,x.Z)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var v=n(85893);let Z=(0,u.ZP)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t[`position${(0,l.Z)(n.position)}`],!0===n.disablePointerEvents&&t.disablePointerEvents,t[n.variant]]}})((0,p.Z)(({theme:e})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${g.positionStart}&:not(.${g.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),b=i.forwardRef(function(e,t){let n=(0,h.i)({props:e,name:"MuiInputAdornment"}),{children:u,className:p,component:x="div",disablePointerEvents:f=!1,disableTypography:g=!1,position:b,variant:j,...y}=n,S=(0,c.Z)()||{},C=j;j&&S.variant,S&&!C&&(C=S.variant);let w={...n,hiddenLabel:S.hiddenLabel,size:S.size,disablePointerEvents:f,position:b,variant:C},k=(e=>{let{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:a,variant:o}=e,d={root:["root",n&&"disablePointerEvents",i&&`position${(0,l.Z)(i)}`,o,r&&"hiddenLabel",a&&`size${(0,l.Z)(a)}`]};return(0,s.Z)(d,m,t)})(w);return(0,v.jsx)(d.Z.Provider,{value:null,children:(0,v.jsx)(Z,{as:x,ownerState:w,className:(0,a.Z)(k.root,p),ref:t,...y,children:"string"!=typeof u||g?(0,v.jsxs)(i.Fragment,{children:["start"===b?r||(r=(0,v.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"​"})):null,u]}):(0,v.jsx)(o.Z,{color:"textSecondary",children:u})})})})}}]);
//# sourceMappingURL=7735.cf4dfedf.js.map