"use strict";(self.webpackChunklogin_page=self.webpackChunklogin_page||[]).push([["998"],{3816:function(e,t,r){r.d(t,{G:()=>Q});var a=r(7409),n=r(9282),o=r(5893),l=r(7294),i=r(8655),s=r(4786),c=r(9469),d=r(488),u=r(1035),p=r(6770),x=r(4757),h=r(1215),m=r(9425),f=r(5327),g=r(3852);let b={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:"800px",maxHeight:"80vh",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,display:"flex",flexDirection:"column",overflow:"hidden"},v={display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},j={overflowY:"auto",maxHeight:"calc(80vh - 100px)",width:"100%",scrollbarWidth:"thin",scrollbarColor:"#888 #f1f1f1","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},y=e=>{let{dataForModal:t,isModalOpen:r,setIsModalOpen:a}=e,[n,i]=(0,l.useTransition)(),c=(0,l.useCallback)(e=>{e.stopPropagation(),i(()=>{a(!0)})},[a]),y=(0,l.useCallback)(e=>{e.stopPropagation(),i(()=>{a(!1)})},[a]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{title:"Show Raw Backend Response",children:(0,o.jsx)("span",{children:(0,o.jsx)(u.Z,{onClick:c,size:"small",sx:{position:"absolute",top:5,right:5,zIndex:10,width:30,height:30,color:"primary.main"},"aria-label":"Show raw JSON",disabled:null==t,children:(0,o.jsx)(f.Z,{})})})}),(0,o.jsx)(p.Z,{open:r,onClose:y,"aria-labelledby":"raw-json-modal-title","aria-describedby":"raw-json-modal-description",children:(0,o.jsxs)(s.Z,{sx:b,children:[(0,o.jsxs)(s.Z,{sx:v,children:[(0,o.jsx)(x.Z,{id:"raw-json-modal-title",variant:"h6",component:"h2",children:"Raw Backend Response"}),(0,o.jsx)(u.Z,{onClick:y,"aria-label":"close",children:(0,o.jsx)(m.Z,{})})]}),(0,o.jsx)(s.Z,{sx:j,children:t?(0,o.jsx)(l.Suspense,{fallback:(0,o.jsx)(h.Z,{}),children:(0,o.jsx)(g.gc,{data:t})}):(0,o.jsx)(x.Z,{children:"No raw data available to display."})})]})})]})};var k=r(2206);let w=e=>{let{code:t,language:r}=e;return(0,o.jsx)("code",{style:{whiteSpace:"pre-wrap",padding:"10px",borderRadius:"5px"},children:t.trim()})};var Z=r(7563),C=r(6685),N=r(8446),S=r(4867),z=r.n(S);N.Z.use(z());let _=e=>{let{elements:t,style:r,stylesheet:n,layout:i,onNodeClick:s}=e,c=(0,l.useRef)(null),d=(0,l.useRef)(null),u=(0,l.useCallback)(e=>{let t=e.target;s&&s({id:t.id()},e)},[s]),p=(0,l.useCallback)(e=>{let t=e.target;t.style("label",t.data("label"))},[]),x=(0,l.useCallback)(e=>{e.target.style("label","")},[]);return(0,l.useEffect)(()=>{if(!c.current)return;let e=(0,N.Z)({container:c.current,elements:t,style:n||[{selector:"node",style:{"background-color":"data(color)",width:"data(size)",height:"data(size)","text-valign":"top","text-halign":"center","text-margin-y":-5,"font-size":"12px",color:"#000000","text-outline-width":2,"text-outline-color":"#ffffff","z-index":1,label:""}},{selector:"edge",style:{width:2,"line-color":"#cccccc","target-arrow-color":"#cccccc","target-arrow-shape":"triangle","curve-style":"bezier"}}],layout:i||{name:"fcose",animate:!1,samplingType:!1,animationDuration:1500,fit:!0,padding:30}});return d.current=e,e.on("tap","node",u),e.on("mouseover","node",p),e.on("mouseout","node",x),()=>{d.current&&(d.current.destroy(),d.current=null)}},[t,n,i,u,p,x]),(0,l.useEffect)(()=>{if(d.current&&t){d.current.elements().remove(),d.current.add(t);let e=i||{name:"fcose",animate:!1,samplingType:!1,animationDuration:1500,fit:!0,padding:30};d.current.layout(e).run()}},[t,i]),(0,o.jsx)("div",{ref:c,style:(0,a._)({width:"100%",height:"100%"},r)})};N.Z.use(z());let E=(0,l.memo)(e=>{let{data:t}=e,r=(0,l.useMemo)(()=>({tooltip:{trigger:"axis",confine:!0},color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],legend:{data:t.map(e=>e.id),orient:"vertical",right:10,top:"center"},grid:{left:"5%",right:"15%",bottom:"10%",top:"10%",containLabel:!0},xAxis:{type:"value",name:"X Axis",nameLocation:"middle",nameGap:30},yAxis:{type:"value",name:"Y Axis",min:-1,max:1,nameLocation:"middle",nameGap:50},series:t.map(e=>({name:e.id,type:"line",data:e.data.map(e=>[e.x,e.y]),showSymbol:!1,symbolSize:8,emphasis:{focus:"series"},animationDuration:300}))}),[t]);return(0,o.jsx)(C.Z,{lazyUpdate:!0,option:r,style:{height:"100%",minHeight:"300px",width:"100%"}})}),R=(0,l.memo)(e=>{let{prettyName:t,data:r,keys:a}=e,n=(0,l.useMemo)(()=>({tooltip:{confine:!0,trigger:"axis",axisPointer:{type:"shadow"}},grid:{containLabel:!1},xAxis:{data:a,axisLabel:{rotate:45,formatter:e=>e.length>10?"".concat(e.substring(0,10),"..."):e}},yAxis:{type:"value"},series:{name:t,type:"bar",data:a.map(e=>r[e]),emphasis:{focus:"series",blurScope:"coordinateSystem"},animationDuration:300}}),[r,a,t]);return(0,o.jsx)(C.Z,{lazyUpdate:!0,option:n,style:{height:"100%",minHeight:"300px",width:"100%"}})}),D=(0,l.memo)(e=>{let{data:t,onNodeClick:r}=e,a=(0,l.useMemo)(()=>t,[t]),n=(0,l.useMemo)(()=>[...a.nodes.map(e=>({data:{id:e.id,label:e.label,size:e.size||30,color:e.color||"#1f77b4",x:e.x,y:e.y}})),...a.links.map(e=>({data:{id:"".concat(e.source,"-").concat(e.target),source:e.source,target:e.target}}))],[a]),i=(0,l.useMemo)(()=>[{selector:"node",style:{"background-color":"data(color)",width:"data(size)",height:"data(size)","text-valign":"top","text-halign":"center","text-margin-y":-5,"font-size":"12px",color:"#000000","text-outline-width":2,"text-outline-color":"#ffffff","z-index":1,label:""}},{selector:"edge",style:{width:2,"line-color":"#cccccc","target-arrow-color":"#cccccc","target-arrow-shape":"triangle","curve-style":"bezier"}}],[]);return(0,o.jsx)(s.Z,{sx:{height:"100%",minHeight:"300px",width:"100%"},children:(0,o.jsx)(_,{elements:n,style:{width:"100%",height:"100%"},stylesheet:i,layout:{name:a.nodes.length>1e3?"random":"fcose",animate:!1,samplingType:!1,animationDuration:1500,fit:!0,padding:30},onNodeClick:r})})}),M=e=>{let{viewId:t,content:r,onNodeClick:i,prettyName:s}=e,c=(0,l.useCallback)(e=>{if(!e)return[];let t=[];for(let r of Object.keys(e)){let a=(null==e?void 0:e[r])||{},n={id:r,data:a.map(e=>{let t=Object.keys(e)[0];return{x:parseFloat(t),y:parseFloat(e[t])}})};t.push(n)}return t},[]),d=(0,l.useCallback)(e=>{if(!e)return{};let t={};for(let r of Object.values(e))for(let e of Object.keys(r))t[e]=(null==r?void 0:r[e])||{};return t},[]),u=(0,l.useCallback)(e=>{if(!e||0===Object.values(e).length)return[];let t=new Set;return Object.values(e).forEach(e=>{Object.keys(e).forEach(e=>t.add(e))}),Array.from(t).sort()},[]),p=(0,l.useCallback)(e=>{if(!e||!e.nodes)return{nodes:[],links:[]};let t=new Map;e.nodes.forEach(e=>{let r=e.id||e.label,o=(0,n._)((0,a._)({},e),{id:r,label:e.label||r,size:e.size||30,color:e.color||"#1f77b4"});t.has(o.id)||t.set(o.id,o)});let r=e.links.map(e=>{let t="object"==typeof e.source?e.source.id||e.source.label:e.source,r="object"==typeof e.target?e.target.id||e.target.label:e.target;return(0,n._)((0,a._)({},e),{source:t,target:r})});return{nodes:Array.from(t.values()),links:r}},[]),x=(0,l.useCallback)((e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),(null==e?void 0:e.id)&&i(e.id.includes("@")?e.id.split("@")[1]:e.id)},[i]);if("char_example_xy"===t){let e=c(r);return(0,o.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,o.jsx)(l.Suspense,{fallback:(0,o.jsx)(h.Z,{}),children:(0,o.jsx)(E,{data:e})})})}if(t.endsWith("_distribution")){let e=d(r),t=u(r);return(0,o.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,o.jsx)(l.Suspense,{fallback:(0,o.jsx)(h.Z,{}),children:(0,o.jsx)(R,{prettyName:s,data:e,keys:t})})})}if(!t.endsWith("nivo_view"))return null;{let e=p(r);return(0,o.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,o.jsx)(l.Suspense,{fallback:(0,o.jsx)(h.Z,{}),children:(0,o.jsx)(D,{data:e,onNodeClick:x})})})}};var T=r(2153),I=r(9717),L=r(5648),O=r(4651),A=r(107);let H=e=>{let{content:t}=e,r=(0,l.useRef)(null),[a,n]=(0,l.useState)(0),i=(0,l.useMemo)(()=>{var e;return(null==t||null==(e=t.attributes)?void 0:e.filter(e=>"graph"!==e.name))||[]},[null==t?void 0:t.attributes]);(0,l.useEffect)(()=>{let e=()=>{r.current&&n(r.current.offsetWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let c=(0,l.useMemo)(()=>0===a?1:a>=600?2:1,[a]),d=(0,l.useMemo)(()=>{let e=[];for(let t=0;t<i.length;t+=c)e.push(i.slice(t,t+c));return e},[i,c]),u=(0,A.MG)({count:d.length,getScrollElement:()=>r.current,estimateSize:(0,l.useCallback)(()=>300,[]),overscan:2}),p=(0,l.useCallback)(e=>{var t;let r=(null==(t=e.mimeType)?void 0:t.startsWith("image/"))&&e.value,a=Object.hasOwn(e,"value")&&null!==e.value&&void 0!==e.value;return(0,o.jsx)(T.Z,{sx:{width:"100%",display:"flex",flexDirection:"column",height:260,maxHeight:260},children:(0,o.jsxs)(I.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,o.jsx)(x.Z,{variant:"h6",component:"div",sx:{wordBreak:"break-word"},children:e.name}),r&&(0,o.jsx)(L.Z,{component:"img",sx:{maxHeight:200,width:"auto",objectFit:"contain",mt:1,border:"1px solid #eee"},image:"data:".concat(e.mimeType,";base64,").concat(e.value),alt:"Output value for ".concat(e.name)}),!r&&a&&(0,o.jsx)(x.Z,{variant:"body2",component:"pre",sx:{whiteSpace:"pre-wrap",wordBreak:"break-all",mt:1,p:1,backgroundColor:"#f5f5f5",borderRadius:1,overflow:"auto",maxHeight:160},children:"object"==typeof e.value?JSON.stringify(e.value,null,2):String(e.value)}),!a&&!r&&(0,o.jsx)(x.Z,{variant:"body2",sx:{fontStyle:"italic",mt:1,p:1,backgroundColor:"#f5f5f5",borderRadius:1,flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:40},children:"(No displayable value)"})]})})},[]);return Array.isArray(null==t?void 0:t.attributes)?(null==t?void 0:t.attributes.length)===0?(0,o.jsx)(x.Z,{sx:{p:2},children:"No output nodes connected."}):(0,o.jsx)(s.Z,{ref:r,sx:{height:"400px",overflow:"auto",p:1,width:"100%"},children:(0,o.jsx)(s.Z,{sx:{height:"".concat(u.getTotalSize(),"px"),width:"100%",position:"relative"},children:u.getVirtualItems().map(e=>{let t=d[e.index];return t?(0,o.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start,"px)")},children:(0,o.jsx)(O.Z,{container:!0,spacing:2,sx:{width:"100%"},children:t.map(e=>(0,o.jsx)(O.Z,{size:{xs:12,sm:6},sx:{display:"flex"},children:p(e)},e.id))})},e.key):null})})}):(0,o.jsxs)(x.Z,{sx:{p:2},color:"error",children:["Error: Expected an array for 'class_attribute_field' data, but received type ",typeof(null==t?void 0:t.attributes),"."]})};var P=r(7230);let F=e=>{let{allNodes:t,handleButtonClick:r}=e,a=(0,l.useRef)(null),n=(0,A.MG)({count:t.length,estimateSize:()=>56,getScrollElement:()=>a.current,overscan:10});return(0,o.jsx)(s.Z,{ref:a,sx:{height:400,overflowY:"auto",position:"relative",border:"1px solid #e0e0e0",borderRadius:1,p:1},children:(0,o.jsx)(s.Z,{sx:{height:"".concat(n.getTotalSize(),"px"),position:"relative",width:"100%"},children:n.getVirtualItems().map(e=>{let a=t[e.index];if(!a)return null;let n="in"===a.type;return(0,o.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start,"px)"),display:"flex",alignItems:"center",px:1},children:(0,o.jsxs)(P.Z,{onClick:e=>r(e,a.id),variant:"contained",sx:{bgcolor:n?"#3949ab":"#00897b",color:"#fff","&:hover":{bgcolor:n?"#5c6bc0":"#26a69a"}},children:[a.key," (",a.id,")"]})},e.key)})})})},W=e=>{let{content:t,jumpToNode:r}=e,a=(0,l.useCallback)((e,t)=>{e.stopPropagation(),e.preventDefault(),r(t)},[r]),n=Object.keys(t.ins||{}),i=Object.keys(t.outs||{}),c=[...n.map(e=>({key:e,id:t.ins[e],type:"in"})),...i.map(e=>({key:e,id:t.outs[e],type:"out"}))];return c.length<=50?(0,o.jsxs)(s.Z,{sx:{p:1},children:[(0,o.jsx)(s.Z,{sx:{mb:2},children:n.map(e=>(0,o.jsxs)(P.Z,{onClick:r=>a(r,t.ins[e]),variant:"contained",sx:{bgcolor:"#3949ab",color:"#fff",mr:1,mb:1,"&:hover":{bgcolor:"#5c6bc0"}},children:[e," (",t.ins[e],")"]},e))}),(0,o.jsx)(s.Z,{sx:{paddingY:"10px"},children:i.map(e=>(0,o.jsxs)(P.Z,{onClick:r=>a(r,t.outs[e]),variant:"contained",sx:{bgcolor:"#00897b",color:"#fff",mr:1,mb:1,"&:hover":{bgcolor:"#26a69a"}},children:[e," (",t.outs[e],")"]},e))})]}):(0,o.jsx)(F,{allNodes:c,handleButtonClick:a})},G=e=>{let{viewId:t,content:r,contentType:a,backgroundColor:n,jumpToNode:i,hexColor:s,onHexColorChange:c,prettyName:d}=e,u=(0,l.useRef)(null),p=(0,l.useCallback)(()=>{"text/dot"===a&&u.current&&(0,Z.f)(u.current,{engine:"dot",fit:!0,zoom:!0}).renderDot(r)},[r,a]);if((0,l.useEffect)(()=>{p()},[p]),!r)return(0,o.jsx)("div",{className:"error-message",children:"No content available."});if("application/json"===a)if("class_attribute_field"===t)return(0,o.jsx)(H,{content:r});else if("char_example_xy"===t||t.endsWith("_distribution")||t.endsWith("nivo_view"))return(0,o.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,o.jsx)(l.Suspense,{fallback:(0,o.jsx)(h.Z,{}),children:(0,o.jsx)(M,{viewId:t,content:r,onNodeClick:i,prettyName:d})})});else if("bnode_navigator"===t)return(0,o.jsx)(W,{content:r,jumpToNode:i});else return(0,o.jsx)("div",{className:"content-container",style:{background:n},children:(0,o.jsx)(l.Suspense,{fallback:(0,o.jsx)(h.Z,{}),children:(0,o.jsx)(g.gc,{data:r,shouldExpandNode:g.T})})});if("text/dot"===a)return(0,o.jsx)("div",{className:"content-container graphviz-container",style:{background:n},children:(0,o.jsx)("div",{ref:u})});if("text/html"===a)return(0,o.jsx)("div",{className:"content-container html-content",style:{background:n},children:(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})});if("image/svg"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:"transparent"},children:(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:r},style:{background:"transparent"}})});if("image/svg+xml"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:"transparent"},children:(0,o.jsx)("img",{src:"data:image/svg+xml;base64,".concat(r),alt:"Graphviz",style:{background:"transparent"}})});else if("text/plain"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:n},children:(0,o.jsx)("pre",{children:r})});else if("image/png"===a||"image/jpeg"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:n},children:(0,o.jsx)("img",{src:"data:".concat(a,";base64,").concat(r),alt:"Content"})});else if("image/jsondot"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:n},children:(0,o.jsx)(l.Suspense,{fallback:(0,o.jsx)(h.Z,{}),children:(0,o.jsx)(g.gc,{data:r})})});else if("text/java"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:n},children:(0,o.jsx)(l.Suspense,{fallback:(0,o.jsx)(h.Z,{}),children:(0,o.jsx)(w,{language:"java",code:r})})});else if("text/hex"===a)return(0,o.jsx)("div",{className:"content-container",style:{background:n},children:(0,o.jsx)(k.AI,{color:s,disableAlpha:!0,onChangeComplete:c})});else return(0,o.jsxs)("div",{className:"error-message",children:["Unsupported content type: ",a]})},V=e=>{var t,r;let{loading:a,error:n,rawApiData:i,dataContent:c,backgroundColor:d,jumpToNode:u,hexColor:p,onHexColorChange:x,viewId:m}=e,f=(0,l.useMemo)(()=>{var e,t,r;return null==c||null==(r=c.results)||null==(t=r[0])||null==(e=t.result)?void 0:e.data},[c]),g=(0,l.useMemo)(()=>{var e,t,r;return null==c||null==(r=c.results)||null==(t=r[0])||null==(e=t.result)?void 0:e.contentType},[c]),b=(0,l.useMemo)(()=>{var e,t;return null==c||null==(t=c.results)||null==(e=t[0])?void 0:e.pretty_name},[c]);return a?(0,o.jsx)(s.Z,{className:"view-container",sx:{position:"relative",padding:2,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px"},children:(0,o.jsx)(h.Z,{})}):n?(0,o.jsx)(s.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:(0,o.jsxs)("div",{className:"error-message",style:{marginTop:"40px"},children:["Error fetching data: ",n.message]})}):i?(null==c||null==(r=c.results)||null==(t=r[0])?void 0:t.error)!==void 0?(0,o.jsx)(s.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:(0,o.jsxs)("div",{className:"error-message",style:{marginTop:"40px"},children:["Backend Error: ",c.results[0].error]})}):f&&g?(0,o.jsx)(s.Z,{sx:{position:"relative",padding:2,flex:1,minHeight:"300px",display:"flex",flexDirection:"column",overflow:"hidden"},children:(0,o.jsx)(s.Z,{sx:{mt:4,flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},children:(0,o.jsx)(G,{viewId:m,content:f,contentType:g,backgroundColor:d,jumpToNode:u,hexColor:p,onHexColorChange:x,prettyName:b})})}):(0,o.jsx)(s.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:(0,o.jsx)("div",{className:"error-message",style:{marginTop:"40px"},children:"Result data or content type missing in the response."})}):(0,o.jsx)(s.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:(0,o.jsx)("div",{className:"error-message",style:{marginTop:"40px"},children:"No data available."})})};var B=r(9157),U=r(2992),Y=r(2561);let Q=(0,l.memo)(e=>{let{viewId:t,sx:r}=e,{data:d,isLoading:u,error:p,refetch:x}=(0,i.m_)(t,{},{staleTime:3e4,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),h=(0,c.NL)(),{isLoading:m,withLoading:f}=(0,U.$C)(),[g,b,v]=(0,Y.av)(!1,{transitionUpdates:!0}),[j,k,w]=(0,Y.av)("#ffffff",{transitionUpdates:!0,debounceMs:300}),[Z,C,N]=(0,Y.av)(null,{transitionUpdates:!0}),S=(0,Y.pQ)(t),z=(0,Y.pQ)(j),[_]=(0,Y.m9)(j,500),E=(0,i.uC)("update_colour",{onSuccess:()=>{(0,Y.Le)(()=>{h.setQueryData(["apiData",t],e=>{var t;return e?(0,n._)((0,a._)({},e),{data:(0,n._)((0,a._)({},e.data),{results:null==(t=e.data.results)?void 0:t.map(e=>(0,n._)((0,a._)({},e),{color:_}))})}):e}),C(null)})},onError:e=>{console.error("Failed to save color:",e),(0,Y.Le)(()=>{C("Failed to save color changes"),k("#ffffff")})}}),R=(0,i.uC)("jump",{onSuccess:async()=>{(0,Y.Le)(()=>{h.invalidateQueries({queryKey:["apiData"]}),C(null)})},onError:e=>{console.error("Failed to jump to node:",e),(0,Y.Le)(()=>{C("Failed to navigate to node")})}}),D=(0,l.useCallback)(e=>{k(e.hex)},[k]);(0,l.useEffect)(()=>{"#ffffff"!==_&&_!==j&&f(async()=>{try{await E.mutateAsync({view_id:S,value:_})}catch(e){console.error("Color update failed:",e)}})},[_,S,E,f,j]);let M=(0,l.useCallback)(e=>{f(async()=>{try{await R.mutateAsync({node_id:e})}catch(e){console.error("Jump to node failed:",e)}})},[R,f]),T=(0,l.useCallback)(()=>{(0,Y.Le)(()=>{b(!1)})},[b]),I=(0,l.useCallback)(()=>{f(async()=>{try{await x(),C(null)}catch(e){console.error("Retry failed:",e),C("Retry failed. Please try again.")}})},[x,f,C]),{dataContent:L,exportData:O,backgroundColor:A}=(0,l.useMemo)(()=>{try{var e,t,a,n;let o=null==d?void 0:d.data,l=null==d||null==(n=d.data)||null==(a=n.results)||null==(t=a[0])||null==(e=t.result)?void 0:e.data,i=(null==r?void 0:r.bgcolor)||"transparent";return{dataContent:o,exportData:l,backgroundColor:i}}catch(e){return console.error("Error processing view data:",e),C("Error processing view data"),{dataContent:void 0,exportData:void 0,backgroundColor:(null==r?void 0:r.bgcolor)||"transparent"}}},[d,null==r?void 0:r.bgcolor,C]),H=(0,l.useCallback)(e=>{let{error:r,resetError:a}=e;return(0,o.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"200px",padding:2,border:"1px solid #e0e0e0",borderRadius:1,backgroundColor:"#fafafa"},children:[(0,o.jsxs)(s.Z,{sx:{textAlign:"center",mb:2},children:[(0,o.jsx)(s.Z,{component:"span",sx:{fontSize:"2rem",color:"#f44336"},children:"⚠️"}),(0,o.jsxs)(s.Z,{sx:{mt:1,color:"#666",fontSize:"0.875rem"},children:["Failed to load view: ",t]}),!1,Z&&(0,o.jsx)(s.Z,{sx:{mt:1,color:"#f44336",fontSize:"0.75rem"},children:Z})]}),(0,o.jsxs)(s.Z,{sx:{display:"flex",gap:1},children:[(0,o.jsx)("button",{type:"button",onClick:()=>{a(),C(null)},style:{padding:"8px 16px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem"},children:"Retry"}),(0,o.jsx)("button",{type:"button",onClick:I,style:{padding:"8px 16px",backgroundColor:"#f57c00",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem"},children:"Refetch Data"})]})]})},[t,Z,I,C]),P=m||v||w||N;return(0,o.jsx)(B.ZP,{fallback:(0,o.jsx)(H,{error:Error("View render error"),resetError:()=>window.location.reload()}),onError:(e,r)=>{console.error("View ".concat(t," error:"),e,r),C("Render error: ".concat(e.message))},resetKeys:[t],children:(0,o.jsxs)(s.Z,{className:"view-container",sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",opacity:P?.8:1,transition:"opacity 0.2s ease-in-out"},children:[Z&&(0,o.jsx)(s.Z,{sx:{position:"absolute",top:8,left:"50%",transform:"translateX(-50%)",zIndex:1e3,bgcolor:"error.main",color:"white",px:2,py:1,borderRadius:1,fontSize:"0.75rem"},children:Z}),(0,o.jsx)(B.ZP,{fallback:(0,o.jsx)("div",{children:"Error loading modal"}),onError:e=>{console.error("Modal error:",e),C("Modal failed to load")},children:(0,o.jsx)(l.Suspense,{fallback:null,children:(0,o.jsx)(y,{dataForModal:O,isModalOpen:g,setIsModalOpen:T})})}),(0,o.jsx)(B.ZP,{fallback:(0,o.jsx)(H,{error:Error("View content error"),resetError:I}),onError:(e,t)=>{console.error("View content error:",e,t),C("Content error: ".concat(e.message))},children:(0,o.jsx)(l.Suspense,{fallback:(0,o.jsx)(U.vj.Component,{message:"Loading ".concat(S,"...")}),children:(0,o.jsx)(V,{loading:u,error:p,rawApiData:d,dataContent:L,backgroundColor:A,jumpToNode:M,hexColor:z,onHexColorChange:D,viewId:S})})}),P&&(0,o.jsx)(s.Z,{sx:{position:"absolute",top:8,right:8,zIndex:10},children:(0,o.jsx)(U.vj.Inline,{text:""})})]})})});Q.displayName="View"},2826:function(e,t,r){r.d(t,{Z:()=>n});var a=r(7294);let n=e=>{let t="undefined"!=typeof document,r=(0,a.useRef)(t?document.title:null);(0,a.useEffect)(()=>{if(t)return document.title!==e&&(document.title=e),()=>{document.title=r.current}},[t,e])}}}]);
//# sourceMappingURL=998.555b48f6.js.map