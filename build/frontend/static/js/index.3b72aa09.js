(()=>{"use strict";var e={1527:function(e,t,l){var n=l(5893),a=l(7294),r=l(745),o=l(92),i=l(4997),s=l(8827),c=l(5794),d=l(4578),u=l(1078),m=l(9282),f=l(2643),h=l(3760),x=l(2140),p=l(430);let g=new x.h({mapsAsObjects:!0}),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0,n=new URLSearchParams((0,u._)({},t)).toString(),a="".concat("https://localhost:8080/api","/").concat(e).concat(n?"?".concat(n):"");return(0,f.a)((0,u._)({initialData:void 0,queryKey:["apiData",e,t],queryFn:()=>p.Z.get(a,{withCredentials:!0,headers:{Accept:"application/cbor"},responseType:"arraybuffer"}).then(e=>(0,m._)((0,u._)({},e),{data:g.decode(new Uint8Array(e.data))})),retry:2,staleTime:6e4},l))},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,h.D)((0,u._)({mutationFn:t=>p.Z.post("".concat("https://localhost:8080/api","/").concat(e),t,{withCredentials:!0,headers:{Accept:"application/cbor"},responseType:"arraybuffer"}).then(e=>(0,m._)((0,u._)({},e),{data:g.decode(new Uint8Array(e.data))}))},t))};var y=l(3802),j=l(2992),_=l(7839),S=l(3553),w=l(3666);l(6023);var Z=l(7942);let C=(0,c.Z)({cssVariables:!0,colorSchemes:{dark:!1},typography:{fontFamily:"IBM Plex Sans, sans-serif"}},w.g,S.gQ);function k(e){return{kind:"page",title:e.endpoint,segment:"information/".concat(e.endpoint.replaceAll(" ","_")),icon:(0,n.jsx)(y.Z,{})}}var N=l(922);let I=l.p+"static/image/i3S_RVB_Couleur.eaa939af.png",A=e=>{let t,l,n=(0,s.c)(3),r="undefined"!=typeof document,o=(0,a.useRef)(r?document.title:null);n[0]!==e?(t=()=>{if(r)return document.title!==e&&(document.title=e),()=>{document.title=o.current}},l=[r,e],n[0]=e,n[1]=t,n[2]=l):(t=n[1],l=n[2]),(0,a.useEffect)(t,l)};var z=l(9469);function D(e){return!e}var E=l(9840),O=l(4728),T=l(533),L=l(1854),F=l(4786),W=l(7178),P=l(9782),R=l(4018),V=l(3876),K=l(4757),M=l(7230),H=l(1035),U=l(8523),B=l(6896),q=l(1215),Q=l(1786),J=l(1161),G=l(9154),Y=l(9516),$=l(5634),X=l(9410),ee=l(4697),et=l(9696);let el=e=>{var t,l,r,o,c,d,f,h,x,p,g,y;let j,_,S,w,Z,C,k,N,I,A=(0,s.c)(21),[D,E]=(0,a.useState)("");A[0]===Symbol.for("react.memo_cache_sentinel")?(j={maxWait:500},A[0]=j):j=A[0];let[O]=(0,ee.Nr)(D,250,j),T=(0,i.s0)(),L=(0,z.NL)();A[1]!==L?(_={onSuccess:async()=>{await L.invalidateQueries()}},A[1]=L,A[2]=_):_=A[2];let F=v("jump",_);A[3]!==O?(S={query:O},A[3]=O,A[4]=S):S=A[4];let W=O.length>0;A[5]!==W?(w={enabled:W,gcTime:3e4},A[5]=W,A[6]=w):w=A[6];let{isLoading:P,data:R}=b("search_node",S,w);A[7]!==(null==R||null==(o=R.data)||null==(r=o.results)||null==(l=r[0])||null==(t=l.result)?void 0:t.data)?(Z=(null==R||null==(h=R.data)||null==(f=h.results)||null==(d=f[0])||null==(c=d.result)?void 0:c.data)||[],A[7]=null==R||null==(y=R.data)||null==(g=y.results)||null==(p=g[0])||null==(x=p.result)?void 0:x.data,A[8]=Z):Z=A[8];let V=Z;return A[9]===Symbol.for("react.memo_cache_sentinel")?(C={width:300},A[9]=C):C=A[9],A[10]!==F||A[11]!==T?(k=(e,t)=>{t&&(F.mutate({node_id:t.id}),T("/home"))},A[10]=F,A[11]=T,A[12]=k):k=A[12],A[13]!==P||A[14]!==D?(N=e=>(0,n.jsx)(B.Z,(0,m._)((0,u._)({},e),{label:"Rechercher",variant:"outlined",size:"small",value:D,onChange:e=>E(e.target.value),slotProps:{input:(0,m._)((0,u._)({},e.InputProps),{endAdornment:(0,n.jsxs)(n.Fragment,{children:[P?(0,n.jsx)(q.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]}),sx:{pr:.5}})},sx:{display:{xs:"none",md:"inline-block"},mr:1}})),A[13]=P,A[14]=D,A[15]=N):N=A[15],A[16]!==P||A[17]!==V||A[18]!==k||A[19]!==N?(I=(0,n.jsx)(Q.Z,{sx:C,isOptionEqualToValue:en,getOptionKey:ea,getOptionLabel:er,options:V,loading:P,renderOption:eo,onChange:k,renderInput:N}),A[16]=P,A[17]=V,A[18]=k,A[19]=N,A[20]=I):I=A[20],I};function en(e,t){return e.name===t.name}function ea(e){return e.id}function er(e){return"".concat(e.name," (").concat(e.type,")")}function eo(e,t){return(0,a.createElement)(J.ZP,(0,m._)((0,u._)({},e),{key:t.id,children:[(0,n.jsx)(G.Z,{children:(0,n.jsx)(Y.Z,{invisible:t.isValid,badgeContent:(0,n.jsx)(et.Z,{color:"warning"}),children:(0,n.jsx)($.Z,{src:t.img?"data:".concat(t.imgMimeType,";base64,").concat(t.img):"",alt:t.name})})},"".concat(t.id,".avatar")),(0,n.jsx)(X.Z,{primary:t.name,secondary:t.type,primaryTypographyProps:{style:{marginRight:8}}},"".concat(t.id,".text"))]}))}var ei=l(6649),es=l(9717),ec=l(2153),ed=l(9276),eu=l(1419),em=l(372),ef=l(9425),eh=l(7012),ex=l(488),ep=l(6770),eg=l(5327),eb=l(3852);let ev={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:"800px",maxHeight:"80vh",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,display:"flex",flexDirection:"column",overflow:"hidden"},ey={display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},ej={overflowY:"auto",maxHeight:"calc(80vh - 100px)",width:"100%",scrollbarWidth:"thin",scrollbarColor:"#888 #f1f1f1","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},e_=e=>{let t,l,r,o,i,c,d,u,m,f,h,x,p=(0,s.c)(25),{dataForModal:g,isModalOpen:b,setIsModalOpen:v}=e,[,y]=(0,a.useTransition)();p[0]!==v?(t=e=>{e.stopPropagation(),y(()=>{v(!0)})},p[0]=v,p[1]=t):t=p[1];let j=t;p[2]!==v?(l=e=>{e.stopPropagation(),y(()=>{v(!1)})},p[2]=v,p[3]=l):l=p[3];let _=l;p[4]===Symbol.for("react.memo_cache_sentinel")?(r={position:"absolute",top:5,right:5,zIndex:10,width:30,height:30,color:"primary.main"},p[4]=r):r=p[4];let S=null==g;return p[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)(eg.Z,{}),p[5]=o):o=p[5],p[6]!==j||p[7]!==S?(i=(0,n.jsx)(ex.Z,{title:"Show Raw Backend Response",children:(0,n.jsx)("span",{children:(0,n.jsx)(H.Z,{onClick:j,size:"small",sx:r,"aria-label":"Show raw JSON",disabled:S,children:o})})}),p[6]=j,p[7]=S,p[8]=i):i=p[8],p[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(K.Z,{id:"raw-json-modal-title",variant:"h6",component:"h2",children:"Raw Backend Response"}),p[9]=c):c=p[9],p[10]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(ef.Z,{}),p[10]=d):d=p[10],p[11]!==_?(u=(0,n.jsxs)(F.Z,{sx:ey,children:[c,(0,n.jsx)(H.Z,{onClick:_,"aria-label":"close",children:d})]}),p[11]=_,p[12]=u):u=p[12],p[13]!==g?(m=(0,n.jsx)(F.Z,{sx:ej,children:g?(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)(q.Z,{}),children:(0,n.jsx)(eb.gc,{data:g})}):(0,n.jsx)(K.Z,{children:"No raw data available to display."})}),p[13]=g,p[14]=m):m=p[14],p[15]!==m||p[16]!==u?(f=(0,n.jsxs)(F.Z,{sx:ev,children:[u,m]}),p[15]=m,p[16]=u,p[17]=f):f=p[17],p[18]!==_||p[19]!==b||p[20]!==f?(h=(0,n.jsx)(ep.Z,{open:b,onClose:_,"aria-labelledby":"raw-json-modal-title","aria-describedby":"raw-json-modal-description",children:f}),p[18]=_,p[19]=b,p[20]=f,p[21]=h):h=p[21],p[22]!==h||p[23]!==i?(x=(0,n.jsxs)(n.Fragment,{children:[i,h]}),p[22]=h,p[23]=i,p[24]=x):x=p[24],x};var eS=l(2206);let ew=e=>{let t,l,a,r=(0,s.c)(5),{code:o}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={whiteSpace:"pre-wrap",padding:"10px",borderRadius:"5px"},r[0]=t):t=r[0],r[1]!==o?(l=o.trim(),r[1]=o,r[2]=l):l=r[2],r[3]!==l?(a=(0,n.jsx)("code",{style:t,children:l}),r[3]=l,r[4]=a):a=r[4],a};var eZ=l(7563),eC=l(6685),ek=l(5054),eN=l(8446),eI=l(4867),eA=l.n(eI);eN.Z.use(eA());let ez=(0,a.memo)(e=>{let t,l,a,r,o,i,c,d,u,m,f,h,x=(0,s.c)(17),{data:p}=e;return x[0]===Symbol.for("react.memo_cache_sentinel")?(l={trigger:"axis",confine:!0},a=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],x[0]=l,x[1]=a):(l=x[0],a=x[1]),x[2]!==p?(r=p.map(eT),x[2]=p,x[3]=r):r=x[3],x[4]!==r?(o={data:r,orient:"vertical",right:10,top:"center"},x[4]=r,x[5]=o):o=x[5],x[6]===Symbol.for("react.memo_cache_sentinel")?(i={left:"5%",right:"15%",bottom:"10%",top:"10%",containLabel:!0},c={type:"value",name:"X Axis",nameLocation:"middle",nameGap:30},d={type:"value",name:"Y Axis",min:-1,max:1,nameLocation:"middle",nameGap:50},x[6]=i,x[7]=c,x[8]=d):(i=x[6],c=x[7],d=x[8]),x[9]!==p?(u=p.map(eF),x[9]=p,x[10]=u):u=x[10],x[11]!==o||x[12]!==u?(m={tooltip:l,color:a,legend:o,grid:i,xAxis:c,yAxis:d,series:u},x[11]=o,x[12]=u,x[13]=m):m=x[13],t=m,x[14]===Symbol.for("react.memo_cache_sentinel")?(f={height:"100%",minHeight:"300px",width:"100%"},x[14]=f):f=x[14],x[15]!==t?(h=(0,n.jsx)(eC.Z,{lazyUpdate:!0,option:t,style:f}),x[15]=t,x[16]=h):h=x[16],h}),eD=(0,a.memo)(e=>{let t,l,a,r,o,i,c,d,u,m,f,h,x=(0,s.c)(21),{prettyName:p,data:g,keys:b}=e;if(x[0]===Symbol.for("react.memo_cache_sentinel")?(l={confine:!0,trigger:"axis",axisPointer:{type:"shadow"}},a={containLabel:!1},x[0]=l,x[1]=a):(l=x[0],a=x[1]),x[2]===Symbol.for("react.memo_cache_sentinel")?(r={rotate:45,formatter:eW},x[2]=r):r=x[2],x[3]!==b?(o={data:b,axisLabel:r},x[3]=b,x[4]=o):o=x[4],x[5]===Symbol.for("react.memo_cache_sentinel")?(i={type:"value"},x[5]=i):i=x[5],x[6]!==g||x[7]!==b){let e;x[9]!==g?(e=e=>g[e],x[9]=g,x[10]=e):e=x[10],c=b.map(e),x[6]=g,x[7]=b,x[8]=c}else c=x[8];return x[11]===Symbol.for("react.memo_cache_sentinel")?(d={focus:"series",blurScope:"coordinateSystem"},x[11]=d):d=x[11],x[12]!==p||x[13]!==c?(u={name:p,type:"bar",data:c,emphasis:d,animationDuration:300},x[12]=p,x[13]=c,x[14]=u):u=x[14],x[15]!==o||x[16]!==u?(m={tooltip:l,grid:a,xAxis:o,yAxis:i,series:u},x[15]=o,x[16]=u,x[17]=m):m=x[17],t=m,x[18]===Symbol.for("react.memo_cache_sentinel")?(f={height:"100%",minHeight:"300px",width:"100%"},x[18]=f):f=x[18],x[19]!==t?(h=(0,n.jsx)(eC.Z,{lazyUpdate:!0,option:t,style:f}),x[19]=t,x[20]=h):h=x[20],h}),eE=(0,a.memo)(e=>{let t,l,a,r,o,i,c,d,u,m,f=(0,s.c)(15),{data:h,onNodeClick:x}=e;f[0]!==h.links||f[1]!==h.nodes?(l=ek.Z.normalizeElements({nodes:h.nodes.map(eP),edges:h.links.map(eR)}),f[0]=h.links,f[1]=h.nodes,f[2]=l):l=f[2],t=l,f[3]===Symbol.for("react.memo_cache_sentinel")?(r={selector:"node",style:{"background-color":"data(color)",width:"data(size)",height:"data(size)","text-valign":"top","text-halign":"center","text-margin-y":-5,"font-size":"12px",color:"#000000","text-outline-width":2,"text-outline-color":"#ffffff","z-index":1,label:""}},f[3]=r):r=f[3],f[4]===Symbol.for("react.memo_cache_sentinel")?(o=[r,{selector:"edge",style:{width:2,"line-color":"#cccccc","target-arrow-color":"#cccccc","target-arrow-shape":"triangle","curve-style":"bezier"}}],f[4]=o):o=f[4],a=o,f[5]===Symbol.for("react.memo_cache_sentinel")?(i={height:"100%",minHeight:"300px",width:"100%"},f[5]=i):i=f[5],f[6]===Symbol.for("react.memo_cache_sentinel")?(c={width:"100%",height:"100%"},f[6]=c):c=f[6];let p=h.nodes.length>1e3?"random":"fcose";f[7]!==p?(d={name:p,animate:!1,samplingType:!1,animationDuration:1500,fit:!0,padding:30},f[7]=p,f[8]=d):d=f[8];let g=d;return f[9]!==x?(u=e=>{e.on("tap","node",e=>{let t=e.target;x&&x({id:t.id()},e)}),e.on("mouseover","node",eV),e.on("mouseout","node",eK)},f[9]=x,f[10]=u):u=f[10],f[11]!==g||f[12]!==u||f[13]!==t?(m=(0,n.jsx)(F.Z,{sx:i,children:(0,n.jsx)(ek.Z,{elements:t,style:c,stylesheet:a,layout:g,cy:u})}),f[11]=g,f[12]=u,f[13]=t,f[14]=m):m=f[14],m}),eO=e=>{let t,l=(0,s.c)(22),{viewId:r,content:o,onNodeClick:i,prettyName:c}=e;l[0]!==i?(t=(e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),(null==e?void 0:e.id)&&i(e.id.includes("@")?e.id.split("@")[1]:e.id)},l[0]=i,l[1]=t):t=l[1];let d=t;if("char_example_xy"===r){let e,t,r;l[2]!==o?(e=function(e){if(!e)return[];let t=[];for(let l of Object.keys(e)){let n=(null==e?void 0:e[l])||{},a={id:l,data:n.map(eM)};t.push(a)}return t}(o),l[2]=o,l[3]=e):e=l[3];let i=e;return l[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(q.Z,{}),l[4]=t):t=l[4],l[5]!==i?(r=(0,n.jsx)("div",{className:"graph",onClick:eU,children:(0,n.jsx)(a.Suspense,{fallback:t,children:(0,n.jsx)(ez,{data:i})})}),l[5]=i,l[6]=r):r=l[6],r}if(r.endsWith("_distribution")){let e,t,r,i;l[7]!==o?(e=function(e){if(!e)return{};let t={};for(let l of Object.values(e))for(let e of Object.keys(l))t[e]=(null==l?void 0:l[e])||{};return t}(o),l[7]=o,l[8]=e):e=l[8];let s=e;l[9]!==o?(t=function(e){if(!e||0===Object.values(e).length)return[];let t=new Set;return Object.values(e).forEach(e=>{Object.keys(e).forEach(e=>t.add(e))}),Array.from(t).sort()}(o),l[9]=o,l[10]=t):t=l[10];let d=t;return l[11]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(q.Z,{}),l[11]=r):r=l[11],l[12]!==s||l[13]!==d||l[14]!==c?(i=(0,n.jsx)("div",{className:"graph",onClick:eB,children:(0,n.jsx)(a.Suspense,{fallback:r,children:(0,n.jsx)(eD,{prettyName:c,data:s,keys:d})})}),l[12]=s,l[13]=d,l[14]=c,l[15]=i):i=l[15],i}if(!r.endsWith("nivo_view"))return null;{let e,t,r;l[16]!==o?(e=function(e){if(!e||!e.nodes)return{nodes:[],links:[]};let t=new Map;e.nodes.forEach(e=>{let l=e.id||e.label,n=(0,m._)((0,u._)({},e),{id:l,label:e.label||l,size:e.size||30,color:e.color||"#1f77b4"});t.has(n.id)||t.set(n.id,n)});let l=e.links.map(eH);return{nodes:Array.from(t.values()),links:l}}(o),l[16]=o,l[17]=e):e=l[17];let i=e;return l[18]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(q.Z,{}),l[18]=t):t=l[18],l[19]!==d||l[20]!==i?(r=(0,n.jsx)("div",{className:"graph",onClick:eq,children:(0,n.jsx)(a.Suspense,{fallback:t,children:(0,n.jsx)(eE,{data:i,onNodeClick:d})})}),l[19]=d,l[20]=i,l[21]=r):r=l[21],r}};function eT(e){return e.id}function eL(e){return[e.x,e.y]}function eF(e){return{name:e.id,type:"line",data:e.data.map(eL),showSymbol:!1,symbolSize:8,emphasis:{focus:"series"},animationDuration:300}}function eW(e){return e.length>10?"".concat(e.substring(0,10),"..."):e}function eP(e){return{data:{id:e.id,label:e.label,size:e.size||30,color:e.color||"#1f77b4",x:e.x,y:e.y}}}function eR(e){return{data:{source:e.source,target:e.target}}}function eV(e){let t=e.target;t.style("label",t.data("label"))}function eK(e){e.target.style("label","")}function eM(e){let t=Object.keys(e)[0];return{x:parseFloat(t),y:parseFloat(e[t])}}function eH(e){let t="object"==typeof e.source?e.source.id||e.source.label:e.source,l="object"==typeof e.target?e.target.id||e.target.label:e.target;return(0,m._)((0,u._)({},e),{source:t,target:l})}function eU(e){e.stopPropagation(),e.preventDefault()}function eB(e){e.stopPropagation(),e.preventDefault()}function eq(e){e.stopPropagation(),e.preventDefault()}var eQ=l(5648),eJ=l(632);let eG=e=>{let t,l,a,r=(0,s.c)(9),{content:o}=e;if(!Array.isArray(null==o?void 0:o.attributes)){let e,t;r[0]===Symbol.for("react.memo_cache_sentinel")?(e={p:2},r[0]=e):e=r[0];let l=typeof(null==o?void 0:o.attributes);return r[1]!==l?(t=(0,n.jsxs)(K.Z,{sx:e,color:"error",children:["Error: Expected an array for 'class_attribute_field' data, but received type ",l,"."]}),r[1]=l,r[2]=t):t=r[2],t}if((null==o?void 0:o.attributes.length)===0){let e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(K.Z,{sx:{p:2},children:"No output nodes connected."}),r[3]=e):e=r[3],e}if(r[4]===Symbol.for("react.memo_cache_sentinel")?(t={p:1,display:"flex",flexWrap:"wrap",gap:2},r[4]=t):t=r[4],r[5]!==(null==o?void 0:o.attributes)){var i;l=null==o||null==(i=o.attributes)?void 0:i.map(eY),r[5]=null==o?void 0:o.attributes,r[6]=l}else l=r[6];return r[7]!==l?(a=(0,n.jsx)(F.Z,{sx:t,children:l}),r[7]=l,r[8]=a):a=r[8],a};function eY(e){var t;let l=(null==(t=e.mimeType)?void 0:t.startsWith("image/"))&&e.value,a=Object.hasOwn(e,"value")&&null!==e.value&&void 0!==e.value;return"graph"===e.name?null:(0,n.jsxs)(ec.Z,{sx:{minWidth:275,maxWidth:350,display:"flex",flexDirection:"column"},children:[(0,n.jsxs)(es.Z,{sx:{flexGrow:1},children:[(0,n.jsx)(K.Z,{variant:"h6",component:"div",sx:{wordBreak:"break-word"},children:e.name}),l&&(0,n.jsx)(eQ.Z,{component:"img",sx:{maxHeight:200,width:"auto",objectFit:"contain",mt:1,border:"1px solid #eee"},image:"data:".concat(e.mimeType,";base64,").concat(e.value),alt:"Output value for ".concat(e.name)}),!l&&a&&(0,n.jsx)(K.Z,{variant:"body2",component:"pre",sx:{whiteSpace:"pre-wrap",wordBreak:"break-all",mt:1,p:1,backgroundColor:"#f5f5f5",borderRadius:1},children:"object"==typeof e.value?JSON.stringify(e.value,null,2):String(e.value)}),!a&&!l&&(0,n.jsx)(K.Z,{variant:"body2",sx:{fontStyle:"italic",mt:1},children:"(No displayable value)"})]}),"true"===e.editable&&(0,n.jsx)(eJ.Z,{children:(0,n.jsx)(M.Z,{size:"small",onClick:t=>{t.stopPropagation(),alert("Edit action for: ".concat(e.name," (ID: ").concat(e.id,") - Not implemented yet."))},children:"Edit"})})]},e.id)}let e$=e=>{let t,l,a,r,o,i,c,d,u=(0,s.c)(19),{content:m,jumpToNode:f}=e;u[0]!==f?(t=(e,t)=>{e.stopPropagation(),e.preventDefault(),f(t)},u[0]=f,u[1]=t):t=u[1];let h=t;return u[2]===Symbol.for("react.memo_cache_sentinel")?(l={mb:2},u[2]=l):l=u[2],u[3]!==m.ins?(a=Object.keys(m.ins),u[3]=m.ins,u[4]=a):a=u[4],u[5]!==m.ins||u[6]!==h||u[7]!==a?(r=(0,n.jsx)(F.Z,{sx:l,children:a.map(e=>(0,n.jsxs)(M.Z,{onClick:t=>h(t,m.ins[e]),variant:"contained",sx:{bgcolor:"#3949ab",color:"#fff",mr:1,mb:1,"&:hover":{bgcolor:"#5c6bc0"}},children:[e," (",m.ins[e],")"]},e))}),u[5]=m.ins,u[6]=h,u[7]=a,u[8]=r):r=u[8],u[9]===Symbol.for("react.memo_cache_sentinel")?(o={paddingY:"10px"},u[9]=o):o=u[9],u[10]!==m.outs?(i=Object.keys(m.outs),u[10]=m.outs,u[11]=i):i=u[11],u[12]!==m.outs||u[13]!==h||u[14]!==i?(c=(0,n.jsx)(F.Z,{sx:o,children:i.map(e=>(0,n.jsxs)(M.Z,{onClick:t=>h(t,m.outs[e]),variant:"contained",sx:{bgcolor:"#00897b",color:"#fff",mr:1,mb:1,"&:hover":{bgcolor:"#26a69a"}},children:[e," (",m.outs[e],")"]},e))}),u[12]=m.outs,u[13]=h,u[14]=i,u[15]=c):c=u[15],u[16]!==r||u[17]!==c?(d=(0,n.jsxs)(n.Fragment,{children:[r,c]}),u[16]=r,u[17]=c,u[18]=d):d=u[18],d},eX=e=>{let t,l,r,o=(0,s.c)(88),{viewId:i,content:c,contentType:d,backgroundColor:u,jumpToNode:m,hexColor:f,onHexColorChange:h,prettyName:x}=e,p=(0,a.useRef)(null);o[0]!==c||o[1]!==d?(t=()=>{"text/dot"===d&&p.current&&(0,eZ.f)(p.current,{engine:"dot",fit:!0,zoom:!0}).renderDot(c)},o[0]=c,o[1]=d,o[2]=t):t=o[2];let g=t;if(o[3]!==g?(l=()=>{g()},r=[g],o[3]=g,o[4]=l,o[5]=r):(l=o[4],r=o[5]),(0,a.useEffect)(l,r),!c){let e;return o[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"error-message",children:"No content available."}),o[6]=e):e=o[6],e}if("application/json"===d)if("class_attribute_field"===i){let e;return o[7]!==c?(e=(0,n.jsx)(eG,{content:c}),o[7]=c,o[8]=e):e=o[8],e}else if("char_example_xy"===i||i.endsWith("_distribution")||i.endsWith("nivo_view")){let e,t;return o[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(q.Z,{}),o[9]=e):e=o[9],o[10]!==c||o[11]!==m||o[12]!==x||o[13]!==i?(t=(0,n.jsx)("div",{className:"graph",onClick:e0,children:(0,n.jsx)(a.Suspense,{fallback:e,children:(0,n.jsx)(eO,{viewId:i,content:c,onNodeClick:m,prettyName:x})})}),o[10]=c,o[11]=m,o[12]=x,o[13]=i,o[14]=t):t=o[14],t}else if("bnode_navigator"===i){let e;return o[15]!==c||o[16]!==m?(e=(0,n.jsx)(e$,{content:c,jumpToNode:m}),o[15]=c,o[16]=m,o[17]=e):e=o[17],e}else{let e,t,l,r;return o[18]!==u?(e={background:u},o[18]=u,o[19]=e):e=o[19],o[20]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(q.Z,{}),o[20]=t):t=o[20],o[21]!==c?(l=(0,n.jsx)(a.Suspense,{fallback:t,children:(0,n.jsx)(eb.gc,{data:c,shouldExpandNode:eb.T})}),o[21]=c,o[22]=l):l=o[22],o[23]!==e||o[24]!==l?(r=(0,n.jsx)("div",{className:"content-container",style:e,children:l}),o[23]=e,o[24]=l,o[25]=r):r=o[25],r}if("text/dot"===d){let e,t,l;return o[26]!==u?(e={background:u},o[26]=u,o[27]=e):e=o[27],o[28]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("div",{ref:p}),o[28]=t):t=o[28],o[29]!==e?(l=(0,n.jsx)("div",{className:"content-container graphviz-container",style:e,children:t}),o[29]=e,o[30]=l):l=o[30],l}if("text/html"===d){let e,t,l;return o[31]!==u?(e={background:u},o[31]=u,o[32]=e):e=o[32],o[33]!==c?(t=(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:c}}),o[33]=c,o[34]=t):t=o[34],o[35]!==e||o[36]!==t?(l=(0,n.jsx)("div",{className:"content-container html-content",style:e,children:t}),o[35]=e,o[36]=t,o[37]=l):l=o[37],l}if("image/svg"===d){let e,t,l,a;return o[38]===Symbol.for("react.memo_cache_sentinel")?(e={background:"transparent"},o[38]=e):e=o[38],o[39]!==c?(t={__html:c},o[39]=c,o[40]=t):t=o[40],o[41]===Symbol.for("react.memo_cache_sentinel")?(l={background:"transparent"},o[41]=l):l=o[41],o[42]!==t?(a=(0,n.jsx)("div",{className:"content-container",style:e,children:(0,n.jsx)("div",{dangerouslySetInnerHTML:t,style:l})}),o[42]=t,o[43]=a):a=o[43],a}if("image/svg+xml"===d){let e,t,l;o[44]===Symbol.for("react.memo_cache_sentinel")?(e={background:"transparent"},o[44]=e):e=o[44];let a="data:image/svg+xml;base64,".concat(c);return o[45]===Symbol.for("react.memo_cache_sentinel")?(t={background:"transparent"},o[45]=t):t=o[45],o[46]!==a?(l=(0,n.jsx)("div",{className:"content-container",style:e,children:(0,n.jsx)("img",{src:a,alt:"Graphviz",style:t})}),o[46]=a,o[47]=l):l=o[47],l}else if("text/plain"===d){let e,t,l;return o[48]!==u?(e={background:u},o[48]=u,o[49]=e):e=o[49],o[50]!==c?(t=(0,n.jsx)("pre",{children:c}),o[50]=c,o[51]=t):t=o[51],o[52]!==e||o[53]!==t?(l=(0,n.jsx)("div",{className:"content-container",style:e,children:t}),o[52]=e,o[53]=t,o[54]=l):l=o[54],l}else if("image/png"===d||"image/jpeg"===d){let e,t,l;o[55]!==u?(e={background:u},o[55]=u,o[56]=e):e=o[56];let a="data:".concat(d,";base64,").concat(c);return o[57]!==a?(t=(0,n.jsx)("img",{src:a,alt:"Content"}),o[57]=a,o[58]=t):t=o[58],o[59]!==e||o[60]!==t?(l=(0,n.jsx)("div",{className:"content-container",style:e,children:t}),o[59]=e,o[60]=t,o[61]=l):l=o[61],l}else if("image/jsondot"===d){let e,t,l,r;return o[62]!==u?(e={background:u},o[62]=u,o[63]=e):e=o[63],o[64]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(q.Z,{}),o[64]=t):t=o[64],o[65]!==c?(l=(0,n.jsx)(a.Suspense,{fallback:t,children:(0,n.jsx)(eb.gc,{data:c})}),o[65]=c,o[66]=l):l=o[66],o[67]!==e||o[68]!==l?(r=(0,n.jsx)("div",{className:"content-container",style:e,children:l}),o[67]=e,o[68]=l,o[69]=r):r=o[69],r}else if("text/java"===d){let e,t,l,r;return o[70]!==u?(e={background:u},o[70]=u,o[71]=e):e=o[71],o[72]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(q.Z,{}),o[72]=t):t=o[72],o[73]!==c?(l=(0,n.jsx)(a.Suspense,{fallback:t,children:(0,n.jsx)(ew,{language:"java",code:c})}),o[73]=c,o[74]=l):l=o[74],o[75]!==e||o[76]!==l?(r=(0,n.jsx)("div",{className:"content-container",style:e,children:l}),o[75]=e,o[76]=l,o[77]=r):r=o[77],r}else if("text/hex"===d){let e,t,l;return o[78]!==u?(e={background:u},o[78]=u,o[79]=e):e=o[79],o[80]!==f||o[81]!==h?(t=(0,n.jsx)(eS.AI,{color:f,disableAlpha:!0,onChangeComplete:h}),o[80]=f,o[81]=h,o[82]=t):t=o[82],o[83]!==e||o[84]!==t?(l=(0,n.jsx)("div",{className:"content-container",style:e,children:t}),o[83]=e,o[84]=t,o[85]=l):l=o[85],l}else{let e;return o[86]!==d?(e=(0,n.jsxs)("div",{className:"error-message",children:["Unsupported content type: ",d]}),o[86]=d,o[87]=e):e=o[87],e}};function e0(e){e.stopPropagation(),e.preventDefault()}let e1=e=>{var t,l,a,r,o,i,c,d,u,m;let f,h,x,p,g,b,v=(0,s.c)(24),{loading:y,error:j,rawApiData:_,dataContent:S,backgroundColor:w,jumpToNode:Z,hexColor:C,onHexColorChange:k,viewId:N}=e;if(f=null==S||null==(a=S.results)||null==(l=a[0])||null==(t=l.result)?void 0:t.data,h=null==S||null==(i=S.results)||null==(o=i[0])||null==(r=o.result)?void 0:r.contentType,x=null==S||null==(d=S.results)||null==(c=d[0])?void 0:c.pretty_name,y){let e;return v[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(F.Z,{className:"view-container",sx:{position:"relative",padding:2,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px"},children:(0,n.jsx)(q.Z,{})}),v[0]=e):e=v[0],e}if(j){let e,t,l;return v[1]===Symbol.for("react.memo_cache_sentinel")?(e={position:"relative",padding:2},v[1]=e):e=v[1],v[2]===Symbol.for("react.memo_cache_sentinel")?(t={marginTop:"40px"},v[2]=t):t=v[2],v[3]!==j.message?(l=(0,n.jsx)(F.Z,{className:"view-container information-page",sx:e,children:(0,n.jsxs)("div",{className:"error-message",style:t,children:["Error fetching data: ",j.message]})}),v[3]=j.message,v[4]=l):l=v[4],l}if(!_){let e,t;return v[5]===Symbol.for("react.memo_cache_sentinel")?(e={position:"relative",padding:2},v[5]=e):e=v[5],v[6]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(F.Z,{className:"view-container information-page",sx:e,children:(0,n.jsx)("div",{className:"error-message",style:{marginTop:"40px"},children:"No data available."})}),v[6]=t):t=v[6],t}if((null==S||null==(m=S.results)||null==(u=m[0])?void 0:u.error)!==void 0){let e,t,l;return v[7]===Symbol.for("react.memo_cache_sentinel")?(e={position:"relative",padding:2},v[7]=e):e=v[7],v[8]===Symbol.for("react.memo_cache_sentinel")?(t={marginTop:"40px"},v[8]=t):t=v[8],v[9]!==S.results[0].error?(l=(0,n.jsx)(F.Z,{className:"view-container information-page",sx:e,children:(0,n.jsxs)("div",{className:"error-message",style:t,children:["Backend Error: ",S.results[0].error]})}),v[9]=S.results[0].error,v[10]=l):l=v[10],l}if(!f||!h){let e,t;return v[11]===Symbol.for("react.memo_cache_sentinel")?(e={position:"relative",padding:2},v[11]=e):e=v[11],v[12]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(F.Z,{className:"view-container information-page",sx:e,children:(0,n.jsx)("div",{className:"error-message",style:{marginTop:"40px"},children:"Result data or content type missing in the response."})}),v[12]=t):t=v[12],t}return v[13]===Symbol.for("react.memo_cache_sentinel")?(p={position:"relative",padding:2,flex:1,minHeight:"300px",display:"flex",flexDirection:"column",overflow:"hidden"},v[13]=p):p=v[13],v[14]===Symbol.for("react.memo_cache_sentinel")?(g={mt:4,flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},v[14]=g):g=v[14],v[15]!==w||v[16]!==C||v[17]!==Z||v[18]!==k||v[19]!==x||v[20]!==h||v[21]!==f||v[22]!==N?(b=(0,n.jsx)(F.Z,{sx:p,children:(0,n.jsx)(F.Z,{sx:g,children:(0,n.jsx)(eX,{viewId:N,content:f,contentType:h,backgroundColor:w,jumpToNode:Z,hexColor:C,onHexColorChange:k,prettyName:x})})}),v[15]=w,v[16]=C,v[17]=Z,v[18]=k,v[19]=x,v[20]=h,v[21]=f,v[22]=N,v[23]=b):b=v[23],b},e2=e=>{var t,l,r,o;let i,c,d,u,m,f,h,x,p,g=(0,s.c)(26),{viewId:y,sx:j}=e,{data:_,isLoading:S,error:w}=b(y),Z=(0,z.NL)(),[C,k]=(0,a.useState)(!1),[N,I]=(0,a.useState)("#ffffff"),A=v("update_colour");g[0]!==A||g[1]!==y?(i=e=>{I(e.hex),A.mutate({view_id:y,value:e.hex})},g[0]=A,g[1]=y,g[2]=i):i=g[2];let D=i;g[3]!==Z?(c={onSuccess:async()=>{await Z.invalidateQueries()}},g[3]=Z,g[4]=c):c=g[4];let E=v("jump",c);g[5]!==E?(d=e=>{E.mutate({node_id:e})},g[5]=E,g[6]=d):d=g[6];let O=d;g[7]!==_?(u=null!=_?_:{data:void 0},g[7]=_,g[8]=u):u=g[8];let{data:T}=u;null==j||j.bgcolor,m=(null==j?void 0:j.bgcolor)||"transparent";let L=null==_||null==(o=_.data)||null==(r=o.results)||null==(l=r[0])||null==(t=l.result)?void 0:t.data;return g[9]===Symbol.for("react.memo_cache_sentinel")?(f={height:"100%",display:"flex",flexDirection:"column"},g[9]=f):f=g[9],g[10]!==L||g[11]!==C?(h=(0,n.jsx)(e_,{dataForModal:L,isModalOpen:C,setIsModalOpen:k}),g[10]=L,g[11]=C,g[12]=h):h=g[12],g[13]!==m||g[14]!==T||g[15]!==w||g[16]!==D||g[17]!==N||g[18]!==O||g[19]!==S||g[20]!==_||g[21]!==y?(x=(0,n.jsx)(e1,{loading:S,error:w,rawApiData:_,dataContent:T,backgroundColor:m,jumpToNode:O,hexColor:N,onHexColorChange:D,viewId:y}),g[13]=m,g[14]=T,g[15]=w,g[16]=D,g[17]=N,g[18]=O,g[19]=S,g[20]=_,g[21]=y,g[22]=x):x=g[22],g[23]!==h||g[24]!==x?(p=(0,n.jsxs)(F.Z,{className:"view-container",sx:f,children:[h,x]}),g[23]=h,g[24]=x,g[25]=p):p=g[25],p},e4=(0,a.memo)(e=>{let t,l,r,o,i,c,d,u,m,f,h,x,p,g,b,v,y,j,_,S,w=(0,s.c)(41),{view:Z,onClick:C,handleViewToggle:k}=e,N="technical"===Z.type?"#fff9c4":"#ffffff";w[0]!==N?(t={cursor:"pointer",aspectRatio:"1",border:"1px solid #e0e0e0",borderRadius:2,display:"flex",flexDirection:"column",bgcolor:N},w[0]=N,w[1]=t):t=w[1];let I="technical"===Z.type?"#fff8b0":"#f5f5f5";w[2]!==I?(l={height:"40px",width:"100%",bgcolor:I,borderBottom:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",cursor:"grab"},w[2]=I,w[3]=l):l=w[3],w[4]===Symbol.for("react.memo_cache_sentinel")?(r={color:"#757575"},w[4]=r):r=w[4];let A="".concat(Z.pretty_name," - ").concat(Z.description);w[5]!==A?(o=(0,n.jsx)(K.Z,{className:"DragHere",variant:"caption",sx:r,children:A}),w[5]=A,w[6]=o):o=w[6],w[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(eh.Z,{}),w[7]=i):i=w[7],w[8]!==C?(c=(0,n.jsxs)("button",{type:"button",className:"expand-card",onClick:C,"aria-label":"expand",children:[" ",i," "]}),w[8]=C,w[9]=c):c=w[9],w[10]!==k||w[11]!==Z.name?(d=e=>{k(Z.name)},w[10]=k,w[11]=Z.name,w[12]=d):d=w[12],w[13]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)(ef.Z,{}),w[13]=u):u=w[13],w[14]!==d?(m=(0,n.jsxs)("button",{type:"button",className:"erased-card",onClick:d,children:[" ",u," "]}),w[14]=d,w[15]=m):m=w[15],w[16]!==m||w[17]!==l||w[18]!==o||w[19]!==c?(f=(0,n.jsxs)(F.Z,{sx:l,children:[o,c,m]}),w[16]=m,w[17]=l,w[18]=o,w[19]=c,w[20]=f):f=w[20],w[21]===Symbol.for("react.memo_cache_sentinel")?(h={xs:"12px",sm:"16px"},w[21]=h):h=w[21];let z="technical"===Z.type?"#fff9c4":"#ffffff";return w[22]!==z?(x={padding:h,height:"calc(100% - 40px)",display:"flex",flexDirection:"column",overflow:"hidden",bgcolor:z},w[22]=z,w[23]=x):x=w[23],w[24]===Symbol.for("react.memo_cache_sentinel")?(p={width:"6px"},g={bgcolor:"#3f51b5",borderRadius:"3px"},b={bgcolor:"#e8eaf6"},w[24]=p,w[25]=g,w[26]=b):(p=w[24],g=w[25],b=w[26]),w[27]===Symbol.for("react.memo_cache_sentinel")?(v={flex:1,overflow:"auto",color:"#424242",msOverflowStyle:"none",scrollbarWidth:"thin",scrollbarColor:"#3f51b5 #e8eaf6","&::-webkit-scrollbar":p,"&::-webkit-scrollbar-thumb":g,"&::-webkit-scrollbar-track":b,wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap",maxWidth:"100%",fontSize:{xs:"0.75rem",sm:"0.875rem"}},w[27]=v):v=w[27],w[28]!==Z.error||w[29]!==Z.name||w[30]!==Z.type?(y=Z.error?Z.error:(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading view..."}),children:(0,n.jsx)(e2,{viewId:Z.name.replaceAll(" ","_"),sx:{bgcolor:"technical"===Z.type?"#fff9c4":"#ffffff",width:"100%"}})}),w[28]=Z.error,w[29]=Z.name,w[30]=Z.type,w[31]=y):y=w[31],w[32]!==y?(j=(0,n.jsx)(F.Z,{sx:v,children:y}),w[32]=y,w[33]=j):j=w[33],w[34]!==x||w[35]!==j?(_=(0,n.jsx)(es.Z,{sx:x,children:j}),w[34]=x,w[35]=j,w[36]=_):_=w[36],w[37]!==f||w[38]!==t||w[39]!==_?(S=(0,n.jsxs)(ec.Z,{sx:t,children:[f,_]}),w[37]=f,w[38]=t,w[39]=_,w[40]=S):S=w[40],S});function e3(){let e=localStorage.getItem("showTechnicalViews");return!!e&&JSON.parse(e)}function e5(){let e=window.innerWidth;return e<900?1:e<1600?2:e<2100?3:4}function e8(e){return"technical"!==e.type}function e6(e){return e.name}function e7(e){return"technical"===e.type}function e9(e){return"technical"===e.type}function te(e){return e.name}function tt(e){return Math.max(e-1,1)}var tl=l(6001),tn=l(2903),ta=l(9126),tr=l(548),to=l(4651),ti=l(4672),ts=l(5307),tc=l(1001),td=l(5661),tu=l(1967),tm=l(7745),tf=l(9e3),th=l(3627),tx=l(1731);let tp=a.memo(e=>{let{show:t,selectedField:l,existingNodeList:r,loadingExistingNodes:o,onClose:i,onSelectNode:s}=e,[c,d]=(0,a.useState)(""),u=(0,a.useCallback)(e=>{d(e.target.value)},[]),m=(0,a.useCallback)(()=>{i()},[i]),f=(0,a.useMemo)(()=>r.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())),[r,c]),h=(0,a.useCallback)(e=>{s(e,l)},[s,l]);return(0,n.jsx)(ep.Z,{open:t,onClose:m,"aria-labelledby":"existing-node-modal-title","aria-describedby":"existing-node-modal-description",children:(0,n.jsx)(F.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:600,maxHeight:"80vh",bgcolor:"background.paper",boxShadow:24,outline:"none"},children:(0,n.jsxs)(ec.Z,{className:"existing-node-card",sx:{width:"100%",maxHeight:"80vh",overflow:"auto"},children:[(0,n.jsx)(tx.Z,{id:"existing-node-modal-title",title:"Select Existing Node",action:(0,n.jsx)(H.Z,{onClick:m,"aria-label":"close",children:(0,n.jsx)(th.Z,{})})}),(0,n.jsxs)(es.Z,{children:[(0,n.jsx)(B.Z,{fullWidth:!0,variant:"outlined",placeholder:"Search nodes...",value:c,onChange:u,sx:{mb:2}}),(0,n.jsx)(F.Z,{className:"node-list",sx:{maxHeight:"50vh",overflow:"auto"},children:o?(0,n.jsxs)(F.Z,{display:"flex",justifyContent:"center",p:2,children:[(0,n.jsx)(q.Z,{size:24})," ",(0,n.jsx)(K.Z,{sx:{ml:1},children:"Loading nodes..."})]}):(0,n.jsx)(W.Z,{spacing:1,children:f.map(e=>(0,n.jsx)(F.Z,{sx:{p:2,cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>h(e),children:(0,n.jsx)(K.Z,{fontWeight:"bold",children:e.name})},e.id))})})]})]})})})});var tg=l(7484),tb=l.n(tg);let tv=e=>{if(!e)return"";let t=e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").trim();return t.charAt(0).toUpperCase()+t.slice(1)},ty=(e,t)=>"".concat(e,"@").concat(t),tj=(e,t,l)=>{if((null==l?void 0:l.required)&&(null==t||"string"==typeof t&&""===t.trim()||Array.isArray(t)&&0===t.length))return"Ce champ est requis";if((null==l?void 0:l.min)!==void 0&&"number"==typeof t&&t<l.min)return"La valeur doit \xeatre au moins ".concat(l.min);if((null==l?void 0:l.max)!==void 0&&"number"==typeof t&&t>l.max)return"La valeur doit \xeatre au plus ".concat(l.max);if(null==l?void 0:l.size){let e=Array.isArray(t)||"string"==typeof t?t.length:-1;if(-1!==e){if(void 0!==l.size.min&&e<l.size.min)return"Doit contenir au moins ".concat(l.size.min," caract\xe8res/\xe9l\xe9ments");if(void 0!==l.size.max&&e>l.size.max)return"Doit contenir au plus ".concat(l.size.max," caract\xe8res/\xe9l\xe9ments")}}if((null==l?void 0:l.pattern)&&"string"==typeof t&&!new RegExp(l.pattern).test(t))return"Doit correspondre au mod\xe8le : ".concat(l.pattern);switch(e){case"EmailNode":return"Veuillez entrer une adresse e-mail valide";case"IntNode":return"Veuillez entrer un entier valide";case"PhoneNumberNode":return"Veuillez entrer un num\xe9ro de t\xe9l\xe9phone valide";case"DateNode":return"Veuillez entrer une date valide";default:return"Valeur invalide"}},t_=(e,t,l)=>{let n=!0,a="";if((null==l?void 0:l.required)&&(null==t||"string"==typeof t&&""===t.trim()||Array.isArray(t)&&0===t.length))return{isValid:n=!1,message:a="Ce champ est requis"};if(!(null==l?void 0:l.required)&&(null==t||"string"==typeof t&&""===t.trim()||Array.isArray(t)&&0===t.length))return{isValid:!0,message:""};if((null==l?void 0:l.min)!==void 0&&"number"==typeof t&&t<l.min)return{isValid:n=!1,message:a="La valeur doit \xeatre au moins ".concat(l.min)};if((null==l?void 0:l.max)!==void 0&&"number"==typeof t&&t>l.max)return{isValid:n=!1,message:a="La valeur doit \xeatre au plus ".concat(l.max)};if(null==l?void 0:l.size){let e=Array.isArray(t)||"string"==typeof t?t.length:-1;if(-1!==e){if(void 0!==l.size.min&&e<l.size.min)return{isValid:n=!1,message:a="Doit contenir au moins ".concat(l.size.min," caract\xe8res/\xe9l\xe9ments")};if(void 0!==l.size.max&&e>l.size.max)return{isValid:n=!1,message:a="Doit contenir au plus ".concat(l.size.max," caract\xe8res/\xe9l\xe9ments")}}}if((null==l?void 0:l.pattern)&&"string"==typeof t&&!new RegExp(l.pattern).test(t))return{isValid:n=!1,message:a="Doit correspondre au mod\xe8le : ".concat(l.pattern)};switch(e){case"IntNode":(n=/^-?\d+$/.test(t))||(a="Veuillez entrer un entier valide");break;case"DateNode":(n=tb()(t).isValid())||(a="Veuillez entrer une date valide")}return{isValid:n,message:a}},tS=["StringNode","EmailNode","PhoneNumberNode","IntNode"],tw=["BooleanNode"],tZ=["DateNode"],tC=["ImageNode"],tk=["DropdownNode"],tN=["RadioNode"],tI=["ListCheckboxNode"],tA=["FileNode"],tz=["ListNode","SetNode"],tD=["ColorNode"],tE=[...tS,...tA,...tw,...tI,...tZ,...tk,...tN,...tD];var tO=l(3892),tT=l(2719),tL=l(9298),tF=l(8848);let tW=e=>{let t,l,a,r,o,i,c,d,m,f,h,x=(0,s.c)(24);x[0]!==e?(c=(0,tF._)(e,["field","fieldKey","value","onFocus","onChange","error","helperText"]),{field:l,fieldKey:a,value:d,onFocus:i,onChange:o,error:t,helperText:r}=e,x[0]=e,x[1]=t,x[2]=l,x[3]=a,x[4]=r,x[5]=o,x[6]=i,x[7]=c,x[8]=d):(t=x[1],l=x[2],a=x[3],r=x[4],o=x[5],i=x[6],c=x[7],d=x[8]),x[9]!==l.type||x[10]!==l.validations?(m={},l.validations&&("IntNode"===l.type&&void 0!==l.validations.min&&(m.min=l.validations.min),"IntNode"===l.type&&void 0!==l.validations.max&&(m.max=l.validations.max),l.validations.size&&(void 0!==l.validations.size.min&&(m.minLength=l.validations.size.min),void 0!==l.validations.size.max&&(m.maxLength=l.validations.size.max))),x[9]=l.type,x[10]=l.validations,x[11]=m):m=x[11];let p=function(e){switch(e){case"EmailNode":return"email";case"PhoneNumberNode":return"tel";case"IntNode":return"number";default:return"text"}}(l.type),g=d||"";return x[12]!==o?(f=e=>o(e.target.value),x[12]=o,x[13]=f):f=x[13],x[14]!==t||x[15]!==a||x[16]!==r||x[17]!==m||x[18]!==i||x[19]!==c||x[20]!==p||x[21]!==g||x[22]!==f?(h=(0,n.jsx)(B.Z,(0,u._)({fullWidth:!0,id:a,variant:"outlined",type:p,value:g,onFocus:i,onChange:f,error:t,helperText:r,inputProps:m},c)),x[14]=t,x[15]=a,x[16]=r,x[17]=m,x[18]=i,x[19]=c,x[20]=p,x[21]=g,x[22]=f,x[23]=h):h=x[23],h};var tP=l(2095),tR=l(5714);let tV=e=>{let t,l,a,r,o,i,c,d,f,h,x,p,g,b,v,y=(0,s.c)(31);if(y[0]!==e){let{fieldKey:n,value:s,onChange:c,error:d,helperText:u,field:m}=e,f=(0,tF._)(e,["fieldKey","value","onChange","error","helperText","field"]);i=s,r=c,t=d,a=u,l=m,o=f,y[0]=e,y[1]=t,y[2]=l,y[3]=a,y[4]=r,y[5]=o,y[6]=i}else t=y[1],l=y[2],a=y[3],r=y[4],o=y[5],i=y[6];if(null==l?void 0:l.validations){if(void 0!==l.validations.min){let e;y[7]!==l.validations.min?(e=tb()(l.validations.min),y[7]=l.validations.min,y[8]=e):e=y[8],b=e}if(void 0!==l.validations.max){let e;y[9]!==l.validations.max?(e=tb()(l.validations.max),y[9]=l.validations.max,y[10]=e):e=y[10],v=e}}return y[11]!==i?(c=i?tb()(i):null,y[11]=i,y[12]=c):c=y[12],y[13]!==r?(d=e=>r(e),y[13]=r,y[14]=d):d=y[14],y[15]===Symbol.for("react.memo_cache_sentinel")?(f={width:"100%"},y[15]=f):f=y[15],y[16]!==t?(h={textField:{size:"small",error:t}},y[16]=t,y[17]=h):h=y[17],y[18]!==v||y[19]!==b||y[20]!==o||y[21]!==c||y[22]!==d||y[23]!==h?(x=(0,n.jsx)(tP.M,(0,m._)((0,u._)({value:c,onChange:d,sx:f,minDate:b,maxDate:v},o),{slotProps:h})),y[18]=v,y[19]=b,y[20]=o,y[21]=c,y[22]=d,y[23]=h,y[24]=x):x=y[24],y[25]!==a?(p=a&&(0,n.jsx)(tR.Z,{children:a}),y[25]=a,y[26]=p):p=y[26],y[27]!==t||y[28]!==x||y[29]!==p?(g=(0,n.jsxs)(tO.Z,{fullWidth:!0,error:t,children:[x,p]}),y[27]=t,y[28]=x,y[29]=p,y[30]=g):g=y[30],g};var tK=l(9380);let tM=e=>{let t,l,a,r,o,i,c=(0,s.c)(12);if(c[0]!==e){let{fieldKey:n,value:o,onFocus:i,onChange:s}=e,d=(0,tF._)(e,["fieldKey","value","onFocus","onChange"]);t=n,r=o,l=s,a=d,c[0]=e,c[1]=t,c[2]=l,c[3]=a,c[4]=r}else t=c[1],l=c[2],a=c[3],r=c[4];let d=!!r;return c[5]!==l?(o=e=>l(e.target.checked),c[5]=l,c[6]=o):o=c[6],c[7]!==t||c[8]!==a||c[9]!==d||c[10]!==o?(i=(0,n.jsx)(tK.Z,{control:(0,n.jsx)(ed.Z,(0,u._)({id:t,checked:d,onChange:o},a)),label:""}),c[7]=t,c[8]=a,c[9]=d,c[10]=o,c[11]=i):i=c[11],i},tH=e=>{let t,l,a,r,o,i,c,d,m,f,h,x,p=(0,s.c)(21);if(p[0]!==e){let{field:n,fieldKey:i,value:s,onFocus:c,onChange:d}=e,u=(0,tF._)(e,["field","fieldKey","value","onFocus","onChange"]);t=n,o=s,a=c,l=d,r=u,p[0]=e,p[1]=t,p[2]=l,p[3]=a,p[4]=r,p[5]=o}else t=p[1],l=p[2],a=p[3],r=p[4],o=p[5];return p[6]===Symbol.for("react.memo_cache_sentinel")?(i={display:"flex",flexDirection:"column",alignItems:"center",mt:2},p[6]=i):i=p[6],p[7]!==t||p[8]!==o?(c=o&&(0,n.jsx)(F.Z,{component:"img",className:"image-preview",src:"data:".concat(t.mimeType,";base64,").concat(o),alt:t.name,sx:{maxHeight:"150px",width:"auto",objectFit:"contain",mt:1,border:"1px solid #eee"}}),p[7]=t,p[8]=o,p[9]=c):c=p[9],p[10]===Symbol.for("react.memo_cache_sentinel")?(d={mt:2},p[10]=d):d=p[10],p[11]===Symbol.for("react.memo_cache_sentinel")?(m={display:"none"},p[11]=m):m=p[11],p[12]!==l?(f=async e=>{var t;let n=null==(t=e.target.files)?void 0:t[0];if(!n)return;let a=new FileReader;a.onloadend=async()=>{if("string"==typeof(null==a?void 0:a.result)){var e;let t=null==a||null==(e=a.result)?void 0:e.split(",")[1];l(t)}},a.readAsDataURL(n)},p[12]=l,p[13]=f):f=p[13],p[14]!==a||p[15]!==r||p[16]!==f?(h=(0,n.jsxs)(M.Z,{variant:"contained",component:"label",sx:d,children:["Upload New Image",(0,n.jsx)(B.Z,(0,u._)({type:"file",accept:"image/*",sx:m,onClick:a,onChange:f},r))]}),p[14]=a,p[15]=r,p[16]=f,p[17]=h):h=p[17],p[18]!==c||p[19]!==h?(x=(0,n.jsxs)(F.Z,{className:"image-preview-wrapper",sx:i,children:[c,h]}),p[18]=c,p[19]=h,p[20]=x):x=p[20],x},tU=e=>{var t,l,r,o,i,c,d,f,h,x,p,g,v,y,j,_,S,w,Z,C,k,N,I,A,z,D,E,O,T;let L,F,W,P,R,V,K,M,H,U,q,J,G,Y,$,X,ee,et,el,en,ea=(0,s.c)(50);if(ea[0]!==e){let{field:t,fieldKey:l,value:n,defaultValue:a,onFocus:r,onChange:o,onFirstChange:i,error:s,helperText:c,multiple:d}=e,u=(0,tF._)(e,["field","fieldKey","value","defaultValue","onFocus","onChange","onFirstChange","error","helperText","multiple"]);W=t,P=l,U=n,L=a,V=o,K=i,F=s,R=c,H=d,M=u,ea[0]=e,ea[1]=L,ea[2]=F,ea[3]=W,ea[4]=P,ea[5]=R,ea[6]=V,ea[7]=K,ea[8]=M,ea[9]=H,ea[10]=U}else L=ea[1],F=ea[2],W=ea[3],P=ea[4],R=ea[5],V=ea[6],K=ea[7],M=ea[8],H=ea[9],U=ea[10];let er=void 0!==H&&H;ea[11]!==W.listNodeType?(q=W.listNodeType.split(".").pop(),ea[11]=W.listNodeType,ea[12]=q):q=ea[12];let eo=q;ea[13]!==eo?(J={type:eo},ea[13]=eo,ea[14]=J):J=ea[14];let{data:ei,isLoading:es,isError:ec}=b("list_existing_node",J);ea[15]!==L||ea[16]!==ec||ea[17]!==es||ea[18]!==(null==ei||null==(o=ei.data)||null==(r=o.results)||null==(l=r[0])||null==(t=l.result)?void 0:t.data)||ea[19]!==er||ea[20]!==K?(G=()=>{var e,t,l,n,a,r,o,i,s;if(!es&&!ec&&(null==ei||null==(a=ei.data)||null==(n=a.results)||null==(l=n[0])||null==(t=l.result)||null==(e=t.data)?void 0:e.length)!==0&&!er)if(L){let e=Number.parseInt(L.split("@")[1]),t=null==ei||null==(s=ei.data)||null==(i=s.results)||null==(o=i[0])||null==(r=o.result)?void 0:r.data.find(t=>t.id===e);t?K({label:t.name,value:t.id}):K(void 0)}else K(void 0)},ea[15]=L,ea[16]=ec,ea[17]=es,ea[18]=null==ei||null==(k=ei.data)||null==(C=k.results)||null==(Z=C[0])||null==(w=Z.result)?void 0:w.data,ea[19]=er,ea[20]=K,ea[21]=G):G=ea[21];let ed=null==ei||null==(f=ei.data)||null==(d=f.results)||null==(c=d[0])||null==(i=c.result)?void 0:i.data.find,eu=null==ei||null==(v=ei.data)||null==(g=v.results)||null==(p=g[0])||null==(x=p.result)||null==(h=x.data)?void 0:h.length;return ea[22]!==L||ea[23]!==ec||ea[24]!==es||ea[25]!==er||ea[26]!==K||ea[27]!==ed||ea[28]!==eu?(Y=[es,ec,L,ed,eu,er,K],ea[22]=L,ea[23]=ec,ea[24]=es,ea[25]=er,ea[26]=K,ea[27]=ed,ea[28]=eu,ea[29]=Y):Y=ea[29],(0,a.useEffect)(G,Y),ea[30]!==F?($=e=>(0,n.jsx)(B.Z,(0,m._)((0,u._)({},e),{error:F})),ea[30]=F,ea[31]=$):$=ea[31],ea[32]!==(null==ei||null==(S=ei.data)||null==(_=S.results)||null==(j=_[0])||null==(y=j.result)?void 0:y.data)?(X=(null==ei||null==(z=ei.data)||null==(A=z.results)||null==(I=A[0])||null==(N=I.result)?void 0:N.data.map(tB).sort(tq))||[],ea[32]=null==ei||null==(T=ei.data)||null==(O=T.results)||null==(E=O[0])||null==(D=E.result)?void 0:D.data,ea[33]=X):X=ea[33],ea[34]!==V?(ee=(e,t)=>{V(t)},ea[34]=V,ea[35]=ee):ee=ea[35],ea[36]!==P||ea[37]!==er||ea[38]!==M||ea[39]!==ee||ea[40]!==$||ea[41]!==X||ea[42]!==U?(et=(0,n.jsx)(Q.Z,(0,u._)({disablePortal:!0,renderInput:$,options:X,groupBy:tQ,getOptionKey:tJ,getOptionLabel:tG,isOptionEqualToValue:tY,size:"small",id:P,value:U,onChange:ee,multiple:er},M)),ea[36]=P,ea[37]=er,ea[38]=M,ea[39]=ee,ea[40]=$,ea[41]=X,ea[42]=U,ea[43]=et):et=ea[43],ea[44]!==R?(el=R&&(0,n.jsx)(tR.Z,{children:R}),ea[44]=R,ea[45]=el):el=ea[45],ea[46]!==F||ea[47]!==et||ea[48]!==el?(en=(0,n.jsxs)(tO.Z,{fullWidth:!0,error:F,children:[et,el]}),ea[46]=F,ea[47]=et,ea[48]=el,ea[49]=en):en=ea[49],en};function tB(e){let t=e.name[0].toUpperCase();return{label:e.name,value:e.id,firstLetter:"France(FR)"===e.name?" ":/[0-9]/.test(t)?"0-9":t}}function tq(e,t){return e.firstLetter!==t.firstLetter?e.firstLetter.localeCompare(t.firstLetter):e.label.localeCompare(t.label)}function tQ(e){return e.firstLetter}function tJ(e){var t;return null!=(t=e.value)?t:""}function tG(e){var t;return null!=(t=e.label)?t:""}function tY(e,t){return e.value===t.value}var t$=l(6762),tX=l(4791);let t0=e=>{let t,l,a,r,o,i,c,d,f,h,x,p,g,b,v=(0,s.c)(27);v[0]!==e?(d=(0,tF._)(e,["field","fieldKey","value","defaultValue","onFocus","onChange","error","helperText"]),{field:a,fieldKey:r,value:f,defaultValue:t,onFocus:c,onChange:i,error:l,helperText:o}=e,v[0]=e,v[1]=t,v[2]=l,v[3]=a,v[4]=r,v[5]=o,v[6]=i,v[7]=c,v[8]=d,v[9]=f):(t=v[1],l=v[2],a=v[3],r=v[4],o=v[5],i=v[6],c=v[7],d=v[8],f=v[9]);let y=f||t;return v[10]!==i?(h=e=>i(e.target.value),v[10]=i,v[11]=h):h=v[11],v[12]!==a.options?(x=a.options.map(t1),v[12]=a.options,v[13]=x):x=v[13],v[14]!==r||v[15]!==c||v[16]!==d||v[17]!==y||v[18]!==h||v[19]!==x?(p=(0,n.jsx)(t$.Z,(0,m._)((0,u._)({row:!0,name:r,value:y,onChange:h,onFocus:c},d),{children:x})),v[14]=r,v[15]=c,v[16]=d,v[17]=y,v[18]=h,v[19]=x,v[20]=p):p=v[20],v[21]!==o?(g=o&&(0,n.jsx)(tR.Z,{children:o}),v[21]=o,v[22]=g):g=v[22],v[23]!==l||v[24]!==p||v[25]!==g?(b=(0,n.jsxs)(tO.Z,{fullWidth:!0,error:l,children:[p,g]}),v[23]=l,v[24]=p,v[25]=g,v[26]=b):b=v[26],b};function t1(e,t){return(0,n.jsx)(tK.Z,{value:t,control:(0,n.jsx)(tX.Z,{}),label:e},t)}var t2=l(7884);let t4=e=>{let t,l,r,o,i,c=(0,s.c)(15),{option:d,fieldId:u}=e,[m,f]=(0,a.useState)(d.value),h=v("set_value"),x=(0,z.NL)();c[0]!==u||c[1]!==x||c[2]!==h||c[3]!==m?(t=async e=>{if(!e)return console.warn("No field provided for saving changes");try{await Z.ZP.promise(h.mutateAsync({id:e.id,value:m},{onSuccess:async()=>{await x.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(u)}]})}}),{loading:"Enregistrement de ".concat(tv(e.name),"..."),success:"Changements enregistr\xe9s pour ".concat(tv(e.name)),error:"Erreur lors de l'enregistrement des changements pour ".concat(tv(e.name))})}catch(e){console.error("Error saving changes:",e)}},c[0]=u,c[1]=x,c[2]=h,c[3]=m,c[4]=t):t=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(l={maxWait:2e3},c[5]=l):l=c[5];let p=(0,ee.y1)(t,500,l),g=m||!1;return c[6]!==p||c[7]!==d?(r=e=>{f(e.target.checked),p(d)},c[6]=p,c[7]=d,c[8]=r):r=c[8],c[9]!==g||c[10]!==r?(o=(0,n.jsx)(ed.Z,{checked:g,onChange:r}),c[9]=g,c[10]=r,c[11]=o):o=c[11],c[12]!==d.name||c[13]!==o?(i=(0,n.jsx)(tK.Z,{label:d.name,control:o}),c[12]=d.name,c[13]=o,c[14]=i):i=c[14],i},t3=e=>{var t,l,a,r,o,i,c,d,u,m,f,h,x,p,g,v;let y,j,_,S,w,Z=(0,s.c)(13),{field:C,error:k,helperText:N}=e;Z[0]!==C.id?(y={node_id:C.id},Z[0]=C.id,Z[1]=y):y=Z[1];let{data:I}=b("class_attribute_field",y);return Z[2]!==(null==I||null==(o=I.data)||null==(r=o.results)||null==(a=r[0])||null==(l=a.result)||null==(t=l.data)?void 0:t.attributes)||Z[3]!==C.id?(j=null==I||null==(f=I.data)||null==(m=f.results)||null==(u=m[0])||null==(d=u.result)||null==(c=d.data)||null==(i=c.attributes)?void 0:i.map((e,t)=>(0,n.jsx)(t4,{option:e,fieldId:C.id},t)),Z[2]=null==I||null==(v=I.data)||null==(g=v.results)||null==(p=g[0])||null==(x=p.result)||null==(h=x.data)?void 0:h.attributes,Z[3]=C.id,Z[4]=j):j=Z[4],Z[5]!==j?(_=(0,n.jsx)(t2.Z,{row:!0,children:j}),Z[5]=j,Z[6]=_):_=Z[6],Z[7]!==N?(S=N&&(0,n.jsx)(tR.Z,{children:N}),Z[7]=N,Z[8]=S):S=Z[8],Z[9]!==k||Z[10]!==_||Z[11]!==S?(w=(0,n.jsxs)(tO.Z,{fullWidth:!0,error:k,children:[_,S]}),Z[9]=k,Z[10]=_,Z[11]=S,Z[12]=w):w=Z[12],w};var t5=l(3180),t8=l(4649),t6=l(5471);l(4493),l(3608);var t7=l(1994);t5.Tu.workerSrc=new URL(l(7663),l.b).toString();let t9=e=>{let t,l,r,o,i,c,d,u,m,f,h,x,p,g,b=(0,s.c)(28),{value:v,onChange:y,error:j,helperText:_}=e,[S,w]=(0,a.useState)(v);b[0]!==v?(t=()=>{if(v){let e=atob(v),t=Array(e.length);for(let l=0;l<e.length;l++)t[l]=e.charCodeAt(l);let l=new Blob([new Uint8Array(t)],{type:"application/pdf"});w(URL.createObjectURL(l))}},l=[v],b[0]=v,b[1]=t,b[2]=l):(t=b[1],l=b[2]),(0,a.useEffect)(t,l),b[3]!==y?(r=e=>{let t=e.target.files[0];if(t&&"application/pdf"===t.type){let e=new FileReader;e.onloadend=()=>{if("string"==typeof e.result){var t;y(null==(t=e.result)?void 0:t.split(",")[1])}},e.readAsDataURL(t)}else t&&(alert("Please select a PDF file."),e.target.value=null)},b[3]=y,b[4]=r):r=b[4];let Z=r;b[5]!==S?(o=e=>{e.stopPropagation(),S&&window.open(S,"_blank","noopener,noreferrer")},b[5]=S,b[6]=o):o=b[6];let C=o;b[7]===Symbol.for("react.memo_cache_sentinel")?(i={display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},b[7]=i):i=b[7];let k="2px solid ".concat(j?"error.main":"transparent");return b[8]===Symbol.for("react.memo_cache_sentinel")?(c={borderColor:"primary.main",boxShadow:4,transform:"scale(1.02)"},b[8]=c):c=b[8],b[9]!==k?(d={cursor:"pointer",border:k,borderRadius:"8px",width:"180px",height:"254px",overflow:"hidden",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f8f8f8",mb:2,transition:"all 0.2s ease-in-out","&:hover":c},b[9]=k,b[10]=d):d=b[10],b[11]!==S?(u=S?(0,n.jsx)(t8.Z,{file:S,loading:(0,n.jsxs)(F.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)(q.Z,{size:40,sx:{mb:1}}),(0,n.jsx)(K.Z,{variant:"caption",color:"text.secondary",children:"Loading PDF..."})]}),error:(0,n.jsxs)(F.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[(0,n.jsx)(t7.Z,{color:"error",sx:{fontSize:40,mb:1}}),(0,n.jsx)(K.Z,{variant:"caption",color:"error",children:"Preview not available"})]}),children:(0,n.jsx)(t6.Z,{pageNumber:1,width:180,renderTextLayer:!1,renderAnnotationLayer:!1})}):(0,n.jsxs)(F.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[(0,n.jsx)(t7.Z,{color:"disabled",sx:{fontSize:60,mb:1}}),(0,n.jsx)(K.Z,{variant:"caption",color:"text.secondary",align:"center",children:"No PDF selected"})]}),b[11]=S,b[12]=u):u=b[12],b[13]!==C||b[14]!==d||b[15]!==u?(m=(0,n.jsx)(ta.Z,{elevation:2,onClick:C,sx:d,children:u}),b[13]=C,b[14]=d,b[15]=u,b[16]=m):m=b[16],b[17]===Symbol.for("react.memo_cache_sentinel")?(f=(0,n.jsx)(t7.Z,{}),h={mt:1},b[17]=f,b[18]=h):(f=b[17],h=b[18]),b[19]!==Z?(x=(0,n.jsxs)(M.Z,{variant:"contained",component:"label",color:"primary",startIcon:f,sx:h,children:["Upload PDF",(0,n.jsx)("input",{type:"file",hidden:!0,accept:"application/pdf",onChange:Z})]}),b[19]=Z,b[20]=x):x=b[20],b[21]!==j||b[22]!==_?(p=_&&(0,n.jsx)(K.Z,{color:j?"error":"textSecondary",variant:"caption",sx:{mt:1},children:_}),b[21]=j,b[22]=_,b[23]=p):p=b[23],b[24]!==m||b[25]!==x||b[26]!==p?(g=(0,n.jsxs)(F.Z,{sx:i,children:[m,x,p]}),b[24]=m,b[25]=x,b[26]=p,b[27]=g):g=b[27],g},le=e=>{var t,l,r,o,i,c,d,m,f,h,x,p,g,v,y,j,_,S,w,Z,C,k;let N,I,A,z,D,E,O,T,L,F,W,P,R=(0,s.c)(31);if(R[0]!==e){let{field:t,fieldKey:l,value:n,onFocus:a,onChange:r,onFirstChange:o,error:i,helperText:s}=e,c=(0,tF._)(e,["field","fieldKey","value","onFocus","onChange","onFirstChange","error","helperText"]);I=t,A=l,T=n,D=r,E=o,N=i,z=s,O=c,R[0]=e,R[1]=N,R[2]=I,R[3]=A,R[4]=z,R[5]=D,R[6]=E,R[7]=O,R[8]=T}else N=R[1],I=R[2],A=R[3],z=R[4],D=R[5],E=R[6],O=R[7],T=R[8];R[9]!==I.id?(L={node_id:I.id},R[9]=I.id,R[10]=L):L=R[10];let{data:V,isLoading:K,isError:M}=b("class_attribute_field",L);R[11]!==M||R[12]!==K||R[13]!==E||R[14]!==(null==V||null==(i=V.data)||null==(o=i.results)||null==(r=o[0])||null==(l=r.result)||null==(t=l.data)?void 0:t.attributes)?(F=()=>{var e,t,l,n,a,r,o,i,s,c,d,u;K||M||(null==V||null==(r=V.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)||null==(t=l.data)||null==(e=t.attributes)?void 0:e.length)===0||E(null==V||null==(u=V.data)||null==(d=u.results)||null==(c=d[0])||null==(s=c.result)||null==(i=s.data)||null==(o=i.attributes)?void 0:o.map(lt))},R[11]=M,R[12]=K,R[13]=E,R[14]=null==V||null==(k=V.data)||null==(C=k.results)||null==(Z=C[0])||null==(w=Z.result)||null==(S=w.data)?void 0:S.attributes,R[15]=F):F=R[15];let H=null==V||null==(x=V.data)||null==(h=x.results)||null==(f=h[0])||null==(m=f.result)||null==(d=m.data)||null==(c=d.attributes)?void 0:c.length,U=null==V||null==(_=V.data)||null==(j=_.results)||null==(y=j[0])||null==(v=y.result)||null==(g=v.data)||null==(p=g.attributes)?void 0:p.map;return R[16]!==M||R[17]!==K||R[18]!==E||R[19]!==H||R[20]!==U?(W=[K,M,E,H,U],R[16]=M,R[17]=K,R[18]=E,R[19]=H,R[20]=U,R[21]=W):W=R[21],(0,a.useEffect)(F,W),R[22]!==N||R[23]!==I||R[24]!==A||R[25]!==z||R[26]!==D||R[27]!==E||R[28]!==O||R[29]!==T?(P=(0,n.jsx)(tU,(0,u._)({field:I,fieldKey:A,value:T,onChange:D,onFirstChange:E,error:N,helperText:z,multiple:!0},O)),R[22]=N,R[23]=I,R[24]=A,R[25]=z,R[26]=D,R[27]=E,R[28]=O,R[29]=T,R[30]=P):P=R[30],P};function lt(e){return{firstLetter:e.name.split(". ")[1][0],label:e.name.split(". ")[1],value:e.id}}var ll=l(770);let ln=e=>{let t,l,a,r,o,i,c,d,m,f,h,x=(0,s.c)(21);x[0]!==e?(o=(0,tF._)(e,["value","onFocus","onChange","error","helperText"]),{value:i,onFocus:r,onChange:a,error:t,helperText:l}=e,x[0]=e,x[1]=t,x[2]=l,x[3]=a,x[4]=r,x[5]=o,x[6]=i):(t=x[1],l=x[2],a=x[3],r=x[4],o=x[5],i=x[6]),x[7]===Symbol.for("react.memo_cache_sentinel")?(c={marginLeft:20},x[7]=c):c=x[7];let p=i||"";return x[8]!==a?(d=e=>{a(e.hex)},x[8]=a,x[9]=d):d=x[9],x[10]!==r||x[11]!==o||x[12]!==p||x[13]!==d?(m=(0,n.jsx)(ll.Z,(0,u._)({style:c,color:p,onFocus:r,onChange:d},o)),x[10]=r,x[11]=o,x[12]=p,x[13]=d,x[14]=m):m=x[14],x[15]!==t||x[16]!==l?(f=l&&(0,n.jsx)(K.Z,{color:t?"error":"textSecondary",variant:"caption",sx:{mt:1},children:l}),x[15]=t,x[16]=l,x[17]=f):f=x[17],x[18]!==m||x[19]!==f?(h=(0,n.jsxs)(n.Fragment,{children:[m,f]}),x[18]=m,x[19]=f,x[20]=h):h=x[20],h},la=a.memo(e=>{let{field:t,fieldKey:l,isExpanded:r,onToggleField:o,onChangingForm:i,parentId:s,defaultValue:c=""}=e,{id:d,name:u,type:m,validations:f,isValid:h}=t,[x,p]=(0,a.useState)(tk.includes(m)?{label:c,value:null==c?void 0:c.split("@")[1]}:tz.includes(m)?[]:c),[g,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(""),_=(0,z.NL)(),S=v("set_value"),w=v("add_existing_node"),C=v("remove_from_list"),k=(0,a.useCallback)(e=>{let t=t_(m,e,f);return b(!t.isValid),j(t.message),t.isValid},[m,f]);(0,a.useEffect)(()=>{k(x)},[x,k]);let N=(0,ee.y1)(async e=>{if(!e)return console.warn("No field provided for saving changes");if(!k(x))return void"Invalid value for ".concat(e.name," (").concat(e.type,"): ").concat(x);try{await Z.ZP.promise(S.mutateAsync({id:e.id,value:x,parentId:s},{onSuccess:async()=>{await _.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(s)}]})}}),{loading:"Enregistrement de ".concat(tv(e.name),"..."),success:"Changements enregistr\xe9s pour ".concat(tv(e.name)),error:"Erreur lors de l'enregistrement des changements pour ".concat(tv(e.name))})}catch(e){console.error("Error saving changes:",e),b(!0),j("Error saving changes: ".concat(e.message))}},500,{maxWait:2e3}),I=(0,a.useCallback)(async e=>{if(!e)return void p(null);p(e);try{await Z.ZP.promise(S.mutateAsync({id:t.id,value:e},{onSuccess:async()=>{await _.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(s)}]})}}),{loading:"Enregistrement de ".concat(tv(t.name),"..."),success:"Changements enregistr\xe9s pour ".concat(tv(t.name)),error:"Erreur lors de l'enregistrement des changements pour ".concat(tv(t.name))})}catch(e){console.error("Error saving changes:",e),b(!0),j("Error saving changes: ".concat(e.message))}},[t.id,t.name,s,_.invalidateQueries,S.mutateAsync]),A=(0,ee.y1)(async function(e,t){let l=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!e)return console.warn("No field provided for saving changes");if(!k(t))return void"Invalid value for ".concat(e.name," (").concat(e.type,"): ").concat(t);try{await Z.ZP.promise((l?w:C).mutateAsync({node_id:e.id,id:t},{onSuccess:async()=>{await _.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(s)}]})}}),{loading:"Enregistrement de ".concat(tv(e.name),"..."),success:"Changements enregistr\xe9s pour ".concat(tv(e.name)),error:"Erreur lors de l'enregistrement des changements pour ".concat(tv(e.name))})}catch(e){console.error("Error saving changes:",e),b(!0),j("Error saving changes: ".concat(e.message))}}),D=(0,a.useCallback)(function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let l=t_(t.type,e,f);b(!l),l?j(""):j(tj(t.type,e,f)),N(t),p(e)},[t,N,f]),E=(0,a.useCallback)(e=>{let l=t_(t.type,null==e?void 0:e.value,f);b(!l),l?j(""):j(tj(t.type,null==e?void 0:e.value,f)),A(t,null==e?void 0:e.value),p(e)},[t,A,f]),O=(0,a.useCallback)(e=>{p(e)},[]),T=(0,a.useCallback)(e=>{if(!k(e))return;let l=x||[],n=e||[],a=n.filter(e=>!l.some(t=>t.value===e.value));a.length>0&&a.forEach(e=>{A(t,e.value)});let r=l.filter(e=>!n.some(t=>t.value===e.value));r.length>0&&r.forEach(e=>{A(t,e.value,!1)}),p(e)},[t,A,x,k]),L=(0,a.useCallback)(e=>p(e),[]),W=(0,a.useCallback)(()=>{i(u,d)},[i,u,d]),P=(0,a.useCallback)(()=>{o(l,d)},[o,l,d]);return(0,a.useEffect)(()=>()=>{N.flush()},[N]),(0,n.jsx)(F.Z,{className:"form-field-wrapper",sx:{p:1},children:(0,n.jsxs)(to.Z,{container:!0,className:"form-field",spacing:2,alignItems:"center",children:[(0,n.jsx)(to.Z,{size:{xs:12,sm:4},children:(0,n.jsxs)(tO.Z,{component:"fieldset",sx:{display:"flex",flexDirection:"row"},children:[(0,n.jsx)(M.Z,{tabIndex:-1,variant:"text",color:"primary",onClick:W,title:l,sx:{textAlign:"left",justifyContent:"flex-start"},children:(0,n.jsx)(K.Z,{fontWeight:"medium",color:!1===h?"error":"primary",sx:{fontWeight:!1===h?"bold":"regular"},children:tv(u)})}),!(tE.includes(m)||tz.includes(m)&&t.isDropdown)&&(0,n.jsx)(F.Z,{className:"toggle-wrapper",textAlign:"right",children:(0,n.jsx)(H.Z,{onClick:P,size:"small",children:r?(0,n.jsx)(tL.Z,{}):(0,n.jsx)(tT.Z,{})})})]})}),(0,n.jsxs)(to.Z,{size:{xs:12,sm:6},children:[tI.includes(m)&&(0,n.jsx)(t3,{field:t,error:g,helperText:g?y:""}),tS.includes(m)&&(0,n.jsx)(tW,{field:t,fieldKey:l,value:x,onChange:D,size:"small",error:g,helperText:g?y:""}),tZ.includes(m)&&(0,n.jsx)(tV,{fieldKey:l,field:t,value:x,onChange:D,error:g,helperText:g?y:""}),tw.includes(m)&&(0,n.jsx)(tM,{fieldKey:l,value:x,onChange:D}),tC.includes(m)&&r&&(0,n.jsx)(tH,{field:t,fieldKey:l,value:x,onChange:D,size:"small"}),tk.includes(m)&&(0,n.jsx)(tU,{field:t,fieldKey:l,value:null!=x?x:null,onChange:E,onFirstChange:O,defaultValue:c,error:g,helperText:g?y:""}),tz.includes(m)&&t.isDropdown&&(0,n.jsx)(le,{field:t,fieldKey:l,value:null!=x?x:[],onChange:T,onFirstChange:L,error:g,helperText:g?y:""}),tN.includes(m)&&(0,n.jsx)(t0,{field:t,fieldKey:l,value:x,onChange:D,defaultValue:c,error:g,helperText:g?y:""}),tA.includes(m)&&(0,n.jsx)(t9,{value:x,onChange:I,error:g,helperText:y}),tD.includes(m)&&(0,n.jsx)(ln,{value:x,onChange:D,error:g,helperText:y})]})]})},l)},(e,t)=>e.fieldKey===t.fieldKey&&e.isExpanded===t.isExpanded&&e.onToggleField===t.onToggleField&&e.defaultValue===t.defaultValue),lr=e=>{let{parentId:t,fields:l,visited:r=new Set,expandedFields:o,toggleField:i,handleChangingForm:s,rootId:c}=e;return l&&Array.isArray(l)?l.map(e=>{let{id:l,name:d,type:u}=e;if(!d||"graph"===d)return null;let m=ty(e.id,e.name);if(r.has(l))return(0,n.jsxs)(K.Z,{color:"error",children:["Circular reference detected for ",d]},"cycle-".concat(l));let f=o[m]||!1;return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(la,{field:e,fieldKey:m,isExpanded:f,onToggleField:i,onChangingForm:s,defaultValue:e.value,parentId:t}),!(tE.includes(u)||tz.includes(u)&&e.isDropdown)&&(0,n.jsx)(lo,{fieldKey:m,field:e,rootId:c,isToggle:f})]},m)}):null},lo=a.memo(e=>{var t,l,r,o,s,c;let{fieldKey:d,field:f,rootId:h,isRoot:x=!1,isToggle:p=!1}=e,{data:g,isLoading:y,error:j,refetch:_}=b("class_attribute_field",{node_id:"string"==typeof f.id?Number.parseInt(f.id):f.id},{enabled:p||x}),S=(0,i.s0)(),w=(0,z.NL)(),Z=v("jump"),C=v("add_node"),k=v("list_existing_node"),N=v("add_existing_node"),[I,A]=(0,a.useState)({}),[D,E]=(0,a.useState)(!1),[O,T]=(0,a.useState)([]),[L,P]=(0,a.useState)(null),[R,V]=(0,a.useState)(!1);(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e?JSON.stringify(e,null,"tab"===t?"	":t):""},[]);let H=(0,a.useCallback)(async(e,t)=>{try{await Z.mutateAsync({node_id:t}),await S("/add-node/form/".concat(t)),window.location.reload()}catch(e){console.error("Error changing form:",e)}},[Z,S]),{id:U,type:B,name:q}=f,Q=(0,a.useRef)(I);(0,a.useEffect)(()=>{Q.current=I},[I]);let J=(0,a.useCallback)(async(e,t)=>{let l=Q.current[e];A(t=>(0,m._)((0,u._)({},t),{[e]:!l}))},[]),G=(0,a.useCallback)(async e=>{let t=null==e?void 0:e.id,l=null==e?void 0:e.listNodeType;try{await C.mutateAsync({BNodeClass:l,node_id:t},{onSuccess:async()=>{await w.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:t}]})}})}catch(e){console.error("Error adding new node:",e)}},[C,w.invalidateQueries]),Y=(0,a.useCallback)(async e=>{P(e),E(!0),V(!0);let t=e.listNodeType.split(".").pop();try{var l,n,a,r;let e=await k.mutateAsync({type:t}),o=(null==e||null==(r=e.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)?void 0:l.data)||[];T(o)}catch(e){console.error("Error fetching class attribute field:",e)}finally{V(!1)}},[k]),$=(0,a.useCallback)(async e=>{try{await N.mutateAsync({id:e.id,node_id:f.id},{onSuccess:async()=>{await w.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:f.id}]}),Z.mutate({node_id:h})}})}catch(e){console.error("Error adding existing node:",e)}},[N,Z,h,f.id,w.invalidateQueries]),X=(0,a.useCallback)((e,t)=>{$(e),E(!1)},[$]);(0,a.useEffect)(()=>{if(!y&&g){var e,t,l,n,a;let r={},o={};((null==g||null==(a=g.data)||null==(n=a.results)||null==(l=n[0])||null==(t=l.result)||null==(e=t.data)?void 0:e.attributes)||[]).forEach(e=>{if(e.name&&"null"!==e.value&&void 0!==e.value){let t=ty(e.id,e.name);r[t]=e.value,o[t]=e}})}},[y,g]);let ee=(null==g||null==(s=g.data)||null==(o=s.results)||null==(r=o[0])||null==(l=r.result)||null==(t=l.data)?void 0:t.attributes)||[];return(0,n.jsxs)(a.Fragment,{children:[x?(0,n.jsx)(F.Z,{component:"form",className:"form-fields",onSubmit:e=>e.preventDefault(),sx:{mt:3},children:ee.length>0?(0,n.jsx)(lr,{parentId:f.id,fields:ee,expandedFields:I,toggleField:J,handleChangingForm:H,rootId:h}):(0,n.jsx)(K.Z,{children:"No fields available."})}):(0,n.jsxs)(F.Z,{className:"nested-fields",sx:{mt:2,pl:2,borderLeft:"1px solid #e0e0e0"},children:[p&&(ee.length>0?(0,n.jsx)(lr,{parentId:f.id,fields:ee,expandedFields:I,toggleField:J,handleChangingForm:H,rootId:h}):(0,n.jsx)(K.Z,{variant:"body2",color:"text.secondary",children:"No subfields available for this."})),tz.includes(B)&&p&&!f.isDropdown&&(0,n.jsxs)(W.Z,{direction:"row",spacing:2,className:"add-new-node",sx:{mt:2},children:[null!=(c=f.canAddNewNode)?c:(0,n.jsxs)(M.Z,{variant:"outlined",startIcon:(0,n.jsx)(eu.Z,{}),onClick:()=>G(f),children:["Add new ",q]}),(0,n.jsxs)(M.Z,{variant:"outlined",startIcon:(0,n.jsx)(eu.Z,{}),onClick:()=>Y(f),children:["Add ",q," from Existing Node"]})]})]}),(0,n.jsx)(tp,{show:D,selectedField:L,existingNodeList:O,loadingExistingNodes:R,onClose:()=>{E(!1),Z.mutate({node_id:h})},onSelectNode:X})]})},(e,t)=>e.fieldKey===t.fieldKey&&e.rootId===t.rootId&&e.isToggle===t.isToggle);var li=l(9599),ls=l(7454),lc=l(3162);function ld(e){return"results"===e.name}function lu(e){return(0,n.jsx)(tf.Z,{icon:e.icon,tooltipTitle:e.name,onClick:e.onClick},e.name)}let lm=(0,i.aj)([{Component:function(){let e,t,l,a,r,o=(0,s.c)(9),{data:c,isLoading:u,error:m}=b("endpoints?only_applicable&type=byransha.web.View");if(o[0]!==c||o[1]!==m||o[2]!==u){var f;e=!u&&!m&&(null==c||null==(f=c.data)?void 0:f.results)?c.data.results.map(k):[{kind:"page",title:"Loading...",segment:"home",icon:(0,n.jsx)(y.Z,{})}],o[0]=c,o[1]=m,o[2]=u,o[3]=e}else e=o[3];let h=e;return o[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(Z.x7,{}),o[4]=t):t=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(l={title:"",logo:(0,n.jsx)("img",{src:"/logo.svg",alt:"I3S",width:"100%",height:"100%",color:"inherit"}),homeUrl:"/home"},a=(0,n.jsx)(i.j3,{}),o[5]=l,o[6]=a):(l=o[5],a=o[6]),o[7]!==h?(r=(0,n.jsxs)(_._C,{dateAdapter:j.y,adapterLocale:"fr",children:[t,(0,n.jsx)(d.C,{navigation:h,theme:C,branding:l,children:a})]}),o[7]=h,o[8]=r):r=o[8],r},children:[{path:"/",element:(0,n.jsx)(()=>{let e,t,l,r,o,c,d,u,m,f,h,x,p,g,b,y=(0,s.c)(34),[j,_]=(0,a.useState)(""),[S,w]=(0,a.useState)(""),[Z,C]=(0,a.useState)(!1),[k,E]=(0,a.useState)(""),O=(0,i.s0)(),T=(0,z.NL)();y[0]!==T?(e={onSuccess:async()=>{await T.invalidateQueries()}},y[0]=T,y[1]=e):e=y[1];let L=v("authenticate",e);A("Login"),y[2]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{C(D)},y[2]=t):t=y[2];let F=t;y[3]!==L||y[4]!==O||y[5]!==S||y[6]!==j?(l=async e=>{e.preventDefault();try{L.mutate({username:j,password:S},{onSuccess:e=>{O("/home")},onError:e=>{console.error(e),E("Failed to connect to the server")}})}catch(e){console.error(e),E("Failed to connect to the server")}},y[3]=L,y[4]=O,y[5]=S,y[6]=j,y[7]=l):l=y[7];let W=l;y[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("div",{className:"image-container",children:(0,n.jsx)("img",{src:I,alt:"Logo"})}),y[8]=r):r=y[8];let P="input-box ".concat(j?"not-empty":"");y[9]===Symbol.for("react.memo_cache_sentinel")?(o=e=>_(e.target.value),y[9]=o):o=y[9],y[10]!==j?(c=(0,n.jsx)("input",{type:"text",className:"input-field",placeholder:"Identifiant",value:j,onChange:o,required:!0}),y[10]=j,y[11]=c):c=y[11],y[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(N.Xws,{className:"icon"}),y[12]=d):d=y[12],y[13]!==P||y[14]!==c?(u=(0,n.jsxs)("div",{className:P,children:[c,d]}),y[13]=P,y[14]=c,y[15]=u):u=y[15];let R="input-box ".concat(S?"not-empty":""),V=Z?"text":"password";return y[16]===Symbol.for("react.memo_cache_sentinel")?(m=e=>w(e.target.value),y[16]=m):m=y[16],y[17]!==S||y[18]!==V?(f=(0,n.jsx)("input",{type:V,className:"input-field",placeholder:"Mot de passe",value:S,onChange:m,required:!0}),y[17]=S,y[18]=V,y[19]=f):f=y[19],y[20]!==Z?(h=Z?(0,n.jsx)(N.tgn,{className:"toggle-icon icon",onClick:F}):(0,n.jsx)(N.dSq,{className:"toggle-icon icon",onClick:F}),y[20]=Z,y[21]=h):h=y[21],y[22]!==f||y[23]!==h||y[24]!==R?(x=(0,n.jsxs)("div",{className:R,children:[f,h]}),y[22]=f,y[23]=h,y[24]=R,y[25]=x):x=y[25],y[26]!==k?(p=k&&(0,n.jsx)("p",{className:"error-message",children:k}),y[26]=k,y[27]=p):p=y[27],y[28]===Symbol.for("react.memo_cache_sentinel")?(g=(0,n.jsx)("button",{type:"submit",children:(0,n.jsx)("span",{children:"Se connecter"})}),y[28]=g):g=y[28],y[29]!==W||y[30]!==x||y[31]!==p||y[32]!==u?(b=(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("div",{className:"wrapper",children:(0,n.jsxs)("form",{onSubmit:W,children:[r,u,x,p,g]})})}),y[29]=W,y[30]=x,y[31]=p,y[32]=u,y[33]=b):b=y[33],b},{})},{element:(0,n.jsx)(()=>{var e,t,l;let r=(0,i.s0)(),{pathname:o}=(0,i.TH)(),[s,c]=(0,a.useState)(null),{data:d,isLoading:u,error:m}=b("endpoints?only_applicable&type=byransha.web.View"),{data:f,isLoading:h}=b("user_history"),x=(0,z.NL)(),p=v("jump",{onSuccess:async()=>{await x.invalidateQueries()}}),g=v("logout",{onSuccess:async()=>{await x.invalidateQueries(),r("/")}}),y=(0,a.useCallback)(e=>{p.mutate({node_id:e})},[p.mutate]),j=e=>{y(e.id)},_=async()=>{g.mutate({})},S=e=>c(e.currentTarget),w=()=>c(null),Z=null!=(l=null==f||null==(t=f.data)||null==(e=t.results)?void 0:e[0].result.data)?l:[],C=Z.length>3?Z.slice(-2):Z,k=Z[Z.length-1],N=v("bnode_class_distribution"),I=v("add_node"),A=async e=>{let t=e||"byransha.labmodel.model.v0.SearchForm";if(t)try{var l,n,a,r;let e=await I.mutateAsync({BNodeClass:t}),o=null==e||null==(r=e.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)?void 0:l.data.id;return await p.mutateAsync({node_id:o}),o}catch(e){throw console.error("Error during handleCreateAndJump for ".concat(t,":"),e),e}},D=async()=>{try{var e,t,l,n;let a=await N.mutateAsync({}),o=((null==a||null==(n=a.data)||null==(l=n.results)||null==(t=l[0])||null==(e=t.result)?void 0:e.data)||[]).find(e=>{let t=Object.keys(e)[0];return null==t?void 0:t.includes("SearchForm")}),i=await A(Object.keys(o)[0]);r("/add-node/form/".concat(i))}catch(e){console.error("Navigation skipped due to error:",e)}};return(0,n.jsx)(F.Z,{sx:{'& .MuiDrawer-root .MuiDrawer-paper, & [role="navigation"]':{"&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"}},children:(0,n.jsx)(E.c,{hideNavigation:!0,disableCollapsibleSidebar:!0,slots:{appTitle:()=>(0,n.jsxs)(W.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,n.jsx)(F.Z,{sx:{height:"40px",display:"flex",alignItems:"center"},children:(0,n.jsx)("img",{src:"/logo.svg",alt:"I3S",style:{height:"100%"}})}),(0,n.jsxs)(P.Z,{separator:(0,n.jsx)(T.Z,{sx:{color:"#b0bec5",fontSize:"18px"}}),"aria-label":"navigation history",sx:{bgcolor:"transparent",p:"4px 0","& .MuiBreadcrumbs-ol":{alignItems:"center"}},children:[(0,n.jsx)(R.Z,{component:i.rU,sx:{color:"#546e7a",fontSize:"14px",textDecoration:"none",p:"4px 8px",borderRadius:"2px","&:hover":{color:"#306DAD",bgcolor:"#f5f7ff"}},to:"/home",children:"Home"}),Z.length>3&&(0,n.jsx)(H.Z,{onClick:S,size:"small",sx:{color:"#90a4ae",p:"2px","&:hover":{color:"#306DAD",bgcolor:"#f5f7ff"}},children:(0,n.jsx)(L.Z,{fontSize:"small"})}),C.map(e=>(0,n.jsx)(R.Z,{component:"button",onClick:()=>j(e),sx:{color:e===k?"#306DAD":"#546e7a",fontSize:"14px",fontWeight:e===k?"500":"400",textDecoration:"none",p:"4px 8px",borderRadius:"2px",bgcolor:e===k?"#e8eaf6":"transparent",transition:"all 0.2s ease","&:hover":{color:"#306DAD",bgcolor:"#f5f7ff"}},children:e.pretty_name},e.id))]}),(0,n.jsx)(U.Z,{anchorEl:s,open:!!s,onClose:w,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{sx:{borderRadius:"4px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",mt:"5vh",ml:"18vw"}},children:Z.map(e=>(0,n.jsx)(V.Z,{onClick:()=>{j(e),w()},sx:{fontSize:"14px",color:e===k?"#306DAD":"#546e7a",bgcolor:e===k?"#f5f7ff":"transparent","&:hover":{bgcolor:"#e8eaf6",color:"#306DAD"}},children:e.pretty_name},e.id))})]}),toolbarActions:()=>{var e,t;return(0,n.jsxs)(W.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,n.jsxs)(H.Z,{onClick:D,children:[" ",(0,n.jsx)(ei.Z,{})," "]}),(0,n.jsx)(el,{}),u?(0,n.jsx)(K.Z,{sx:{color:"#90a4ae",fontSize:"14px"},children:"Loading..."}):m?(0,n.jsx)(K.Z,{sx:{color:"#780906",fontSize:"14px"},children:"Error"}):(0,n.jsxs)(F.Z,{sx:{display:"flex",alignItems:"center",gap:1,p:"6px 12px",bgcolor:"#f5f7ff",borderRadius:"4px",transition:"background-color 0.2s ease","&:hover":{bgcolor:"#e8eaf6"}},children:[(0,n.jsx)(K.Z,{sx:{color:"#306DAD",fontSize:"14px",fontWeight:"500"},children:(null==d||null==(e=d.data)?void 0:e.username)||"Unknown User"}),(0,n.jsxs)(K.Z,{sx:{color:"#546e7a",fontSize:"14px"},children:["(",(null==d||null==(t=d.data)?void 0:t.user_id)||"N/A",")"]}),(0,n.jsxs)(K.Z,{sx:{color:"#90a4ae",fontSize:"12px"},children:["v",(null==d?void 0:d.data["backend version"])||"N/A"]})]}),(0,n.jsx)(M.Z,{variant:"outlined",size:"small",onClick:_,sx:{ml:2},children:"Se deconnecter"})]})}},children:(0,n.jsx)(O._,{style:{maxWidth:"100%"},children:(0,n.jsx)(i.j3,{})})})})},{}),children:[{path:"/home",element:(0,n.jsx)(()=>{var e,t,l,r,o,c,d,u,m,f,h,x,p,g,y,j;let _,S,w,Z,C,k,N,I,z,D,E,O,T,L,W,P,R,H,B,Q,J,G,Y,$,ee,et,el,en,ea,er,eo,ei,es,ec,ef,eh,ex,ep,eg,eb,ev,ey,ej,e_,eS,ew,eZ,eC,ek,eN,eI=(0,s.c)(109),eA=(0,i.s0)(),{data:ez,isLoading:eD}=b("endpoints?only_applicable&type=byransha.web.View");A("Home"),eI[0]===Symbol.for("react.memo_cache_sentinel")?(_=[],eI[0]=_):_=eI[0];let[eE,eO]=(0,a.useState)(_),[eT,eL]=(0,a.useState)(2),[eF,eW]=(0,a.useState)(null);eI[1]===Symbol.for("react.memo_cache_sentinel")?(S=[],eI[1]=S):S=eI[1];let[eP,eR]=(0,a.useState)(S),[eV,eK]=(0,a.useState)(e3);if((0,a.useState)(!1),(0,a.useState)("#ffffff"),eI[2]!==eP||eI[3]!==eE){let e;eI[5]!==eP?(e=e=>eP.includes(e.name),eI[5]=eP,eI[6]=e):e=eI[6],w=eE.filter(e),eI[2]=eP,eI[3]=eE,eI[4]=w}else w=eI[4];let eM=Math.min(eT,w.length),eH=v("jump");if(eI[7]!==(null==ez||null==(r=ez.data)||null==(l=r.results)||null==(t=l[0])||null==(e=t.result)?void 0:e.data)||eI[8]!==eV?(Z=()=>{var e,t,l,n,a,r,o,i,s,c,d,u;if(null==ez||null==(n=ez.data)||null==(l=n.results)||null==(t=l[0])||null==(e=t.result)?void 0:e.data){let e=eV?null==ez||null==(i=ez.data)||null==(o=i.results)||null==(r=o[0])||null==(a=r.result)?void 0:a.data:null==ez||null==(u=ez.data)||null==(d=u.results)||null==(c=d[0])||null==(s=c.result)?void 0:s.data.filter(e8);eO(e),eR(()=>{let t,l=JSON.parse(localStorage.getItem("selectedViewsSaved"));return t=l&&0!==l.length?l.filter(t=>e.some(e=>e.name===t)):e.map(e6),localStorage.setItem("selectedViewsSaved",JSON.stringify(t)),t});let t=JSON.parse(localStorage.getItem("viewOrder"))||[],l=e;t.length>0&&(l=[...e].sort((e,l)=>{let n=t.indexOf(e.endpoint),a=t.indexOf(l.endpoint);return(-1===n?1/0:n)-(-1===a?1/0:a)})),eO(l)}},eI[7]=null==ez||null==(x=ez.data)||null==(h=x.results)||null==(f=h[0])||null==(m=f.result)?void 0:m.data,eI[8]=eV,eI[9]=Z):Z=eI[9],eI[10]!==ez||eI[11]!==eV?(C=[ez,eV],eI[10]=ez,eI[11]=eV,eI[12]=C):C=eI[12],a.useEffect(Z,C),eI[13]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{let e=()=>eL(e5());return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},N=[e5],eI[13]=k,eI[14]=N):(k=eI[13],N=eI[14]),a.useEffect(k,N),eD){let e,t;return eI[15]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"#2e3b55"},eI[15]=e):e=eI[15],eI[16]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(F.Z,{sx:e,children:(0,n.jsx)(q.Z,{sx:{color:"#1e88e5"}})}),eI[16]=t):t=eI[16],t}if(!ez||!ez.data||!ez.data.results){let e;return eI[17]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(F.Z,{sx:{bgcolor:"#fff3e0",p:2,borderRadius:2,color:"#ef6c00",textAlign:"center"},children:"Error: Data is null."}),eI[17]=e):e=eI[17],e}eI[18]===Symbol.for("react.memo_cache_sentinel")?(I=e=>eW(e.currentTarget),eI[18]=I):I=eI[18];let eU=I;eI[19]===Symbol.for("react.memo_cache_sentinel")?(z=()=>eW(null),eI[19]=z):z=eI[19];let eB=z;eI[20]!==eV||eI[21]!==eE?(D=e=>{eR(t=>{let l=t.includes(e)?t.filter(t=>t!==e):[...t,e];return localStorage.setItem("selectedViewsSaved",JSON.stringify(l)),0===eE.filter(e7).filter(e=>l.includes(e.name)).length&&eV&&(eK(!1),localStorage.setItem("showTechnicalViews",JSON.stringify(!1))),l})},eI[20]=eV,eI[21]=eE,eI[22]=D):D=eI[22];let eq=D;eI[23]!==(null==ez||null==(u=ez.data)||null==(d=u.results)||null==(c=d[0])||null==(o=c.result)?void 0:o.data)?(E=()=>{eK(e=>{var t,l,n,a,r;let o=!e;localStorage.setItem("showTechnicalViews",JSON.stringify(o));let i=((null==ez||null==(r=ez.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)||null==(t=l.data)?void 0:t.filter(e9))||[]).map(te);return eR(e=>{let t;return t=o?[...new Set([...e,...i])]:e.filter(e=>!i.includes(e)),localStorage.setItem("selectedViewsSaved",JSON.stringify(t)),t}),o})},eI[23]=null==ez||null==(j=ez.data)||null==(y=j.results)||null==(g=y[0])||null==(p=g.result)?void 0:p.data,eI[24]=E):E=eI[24];let eQ=E;eI[25]!==eE.length?(O=()=>eL(e=>Math.min(e+1,eE.length)),eI[25]=eE.length,eI[26]=O):O=eI[26];let eJ=O;eI[27]===Symbol.for("react.memo_cache_sentinel")?(T=()=>eL(tt),eI[27]=T):T=eI[27];let eG=T;eI[28]===Symbol.for("react.memo_cache_sentinel")?(L={padding:{xs:"8px",sm:"16px",md:"40px"},maxWidth:"100%",margin:"0 auto",bgcolor:"#2e3b55",minHeight:"100vh",zIndex:1},eI[28]=L):L=eI[28],eI[29]===Symbol.for("react.memo_cache_sentinel")?(W={xs:"column",sm:"row"},eI[29]=W):W=eI[29],eI[30]===Symbol.for("react.memo_cache_sentinel")?(P={display:"flex",flexDirection:W,justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},mb:{xs:2,sm:4},gap:{xs:2,sm:0}},eI[30]=P):P=eI[30],eI[31]===Symbol.for("react.memo_cache_sentinel")?(R={display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2},alignItems:{xs:"flex-start",sm:"center"},width:{xs:"100%",sm:"auto"}},eI[31]=R):R=eI[31],eI[32]===Symbol.for("react.memo_cache_sentinel")?(H={display:"flex",alignItems:"center",gap:1},eI[32]=H):H=eI[32],eI[33]===Symbol.for("react.memo_cache_sentinel")?(B={xs:36,sm:40},eI[33]=B):B=eI[33],eI[34]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,n.jsx)(M.Z,{variant:"outlined",onClick:eU,sx:{minWidth:B,borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px 8px",sm:"6px 12px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},children:"Views"}),eI[34]=Q):Q=eI[34];let eY=!!eF;if(eI[35]===Symbol.for("react.memo_cache_sentinel")?(J={sx:{maxHeight:500,maxWidth:400,overflowY:"auto",width:"auto",padding:1,borderRadius:"8px"}},eI[35]=J):J=eI[35],eI[36]!==eq||eI[37]!==eP||eI[38]!==eE){let e;eI[40]!==eq||eI[41]!==eP?(e=(e,t)=>(0,n.jsx)(V.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingRight:1,fontSize:"14px",color:"technical"===e.type?"#283593":"#424242",backgroundColor:"technical"===e.type?"#fff9c4":"transparent",borderRadius:"8px","&:hover":{backgroundColor:"technical"===e.type?"#fff8b0":"#e8eaf6"}},children:(0,n.jsxs)(F.Z,{sx:{display:"flex",alignItems:"center",flexGrow:1,borderRadius:"18px"},onClick:()=>eq(e.name),children:[(0,n.jsx)(ed.Z,{checked:eP.includes(e.name),sx:{color:"#90caf9","&.Mui-checked":{color:"#90caf9"}}}),(0,n.jsx)(X.Z,{primary:e.pretty_name})]})},e.name),eI[40]=eq,eI[41]=eP,eI[42]=e):e=eI[42],G=eE.map(e),eI[36]=eq,eI[37]=eP,eI[38]=eE,eI[39]=G}else G=eI[39];eI[43]!==eF||eI[44]!==eY||eI[45]!==G?(Y=(0,n.jsxs)(F.Z,{sx:H,children:[Q,(0,n.jsx)(U.Z,{anchorEl:eF,open:eY,onClose:eB,PaperProps:J,children:G})]}),eI[43]=eF,eI[44]=eY,eI[45]=G,eI[46]=Y):Y=eI[46],eI[47]===Symbol.for("react.memo_cache_sentinel")?($={display:"flex",alignItems:"center",gap:1},eI[47]=$):$=eI[47],eI[48]===Symbol.for("react.memo_cache_sentinel")?(ee={color:"#90caf9","&.Mui-checked":{color:"#90caf9"},padding:{xs:"4px",sm:"6px"}},eI[48]=ee):ee=eI[48],eI[49]!==eQ||eI[50]!==eV?(et=(0,n.jsx)(ed.Z,{checked:eV,onChange:eQ,sx:ee}),eI[49]=eQ,eI[50]=eV,eI[51]=et):et=eI[51],eI[52]===Symbol.for("react.memo_cache_sentinel")?(el=(0,n.jsx)(K.Z,{sx:{color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Show Technical Views"}),eI[52]=el):el=eI[52],eI[53]!==et?(en=(0,n.jsxs)(F.Z,{sx:$,children:[et,el]}),eI[53]=et,eI[54]=en):en=eI[54],eI[55]===Symbol.for("react.memo_cache_sentinel")?(ea={display:"flex",alignItems:"center",gap:1},eI[55]=ea):ea=eI[55];let e$=1===eT;eI[56]===Symbol.for("react.memo_cache_sentinel")?(er={xs:36,sm:40},eI[56]=er):er=eI[56],eI[57]===Symbol.for("react.memo_cache_sentinel")?(eo={minWidth:er,borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px",sm:"6px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},ei=(0,n.jsx)(em.Z,{fontSize:"small"}),eI[57]=eo,eI[58]=ei):(eo=eI[57],ei=eI[58]),eI[59]!==e$?(es=(0,n.jsx)(M.Z,{variant:"outlined",onClick:eG,disabled:e$,sx:eo,children:ei}),eI[59]=e$,eI[60]=es):es=eI[60],eI[61]===Symbol.for("react.memo_cache_sentinel")?(ec={color:"#ffffff",fontWeight:"bold",fontSize:{xs:"0.875rem",sm:"1rem"}},eI[61]=ec):ec=eI[61],eI[62]!==eT?(ef=(0,n.jsx)(K.Z,{sx:ec,children:eT}),eI[62]=eT,eI[63]=ef):ef=eI[63];let eX=eT===eE.length;if(eI[64]===Symbol.for("react.memo_cache_sentinel")?(eh={xs:36,sm:40},eI[64]=eh):eh=eI[64],eI[65]===Symbol.for("react.memo_cache_sentinel")?(ex={minWidth:eh,borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px",sm:"6px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},ep=(0,n.jsx)(eu.Z,{fontSize:"small"}),eI[65]=ex,eI[66]=ep):(ex=eI[65],ep=eI[66]),eI[67]!==eJ||eI[68]!==eX?(eg=(0,n.jsx)(M.Z,{variant:"outlined",onClick:eJ,disabled:eX,sx:ex,children:ep}),eI[67]=eJ,eI[68]=eX,eI[69]=eg):eg=eI[69],eI[70]!==es||eI[71]!==ef||eI[72]!==eg?(eb=(0,n.jsxs)(F.Z,{sx:ea,children:[es,ef,eg]}),eI[70]=es,eI[71]=ef,eI[72]=eg,eI[73]=eb):eb=eI[73],eI[74]!==Y||eI[75]!==en||eI[76]!==eb?(ev=(0,n.jsxs)(F.Z,{sx:R,children:[Y,en,eb]}),eI[74]=Y,eI[75]=en,eI[76]=eb,eI[77]=ev):ev=eI[77],eI[78]!==eA?(ey=()=>eA("/add-node"),eI[78]=eA,eI[79]=ey):ey=eI[79],eI[80]===Symbol.for("react.memo_cache_sentinel")?(ej={xs:36,sm:40},eI[80]=ej):ej=eI[80],eI[81]===Symbol.for("react.memo_cache_sentinel")?(e_={minWidth:ej,borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px 8px",sm:"6px 12px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},eI[81]=e_):e_=eI[81],eI[82]!==ey?(eS=(0,n.jsx)(M.Z,{variant:"outlined",onClick:ey,sx:e_,children:"Add new node"}),eI[82]=ey,eI[83]=eS):eS=eI[83],eI[84]!==ev||eI[85]!==eS?(ew=(0,n.jsxs)(F.Z,{sx:P,children:[ev,eS]}),eI[84]=ev,eI[85]=eS,eI[86]=ew):ew=eI[86],eI[87]===Symbol.for("react.memo_cache_sentinel")?(eZ={display:"flex",flexWrap:"wrap",gap:{xs:2,sm:4}},eI[87]=eZ):eZ=eI[87],eI[88]!==eT||eI[89]!==eq||eI[90]!==eH||eI[91]!==eA||eI[92]!==eM||eI[93]!==eP||eI[94]!==eE){let e,t;eI[96]!==eP?(e=e=>eP.includes(e.name),eI[96]=eP,eI[97]=e):e=eI[97],eI[98]!==eT||eI[99]!==eq||eI[100]!==eH||eI[101]!==eA||eI[102]!==eM?(t=(e,t)=>(0,n.jsx)(F.Z,{sx:{width:{xs:"100%",sm:"calc(".concat(100/Math.min(eT,2),"% - 16px)"),md:"calc(".concat(100/eM,"% - 32px)")}},children:(0,n.jsx)(e4,{view:e,onClick:t=>{if(!t.defaultPrevented)if(e.name.endsWith("class_attribute_field")){var l,n;eH.mutate({node:null==(l=e.result)?void 0:l.dialect.split("@")[1]}),eA("/add-node/form/".concat(null==(n=e.result)?void 0:n.dialect.split("@")[1]))}else eA("/information/".concat(e.name.replaceAll(" ","_")))},handleViewToggle:eq})},e.name),eI[98]=eT,eI[99]=eq,eI[100]=eH,eI[101]=eA,eI[102]=eM,eI[103]=t):t=eI[103],eC=eE.filter(e).map(t),eI[88]=eT,eI[89]=eq,eI[90]=eH,eI[91]=eA,eI[92]=eM,eI[93]=eP,eI[94]=eE,eI[95]=eC}else eC=eI[95];return eI[104]!==eC?(ek=(0,n.jsx)(F.Z,{sx:eZ,children:eC}),eI[104]=eC,eI[105]=ek):ek=eI[105],eI[106]!==ew||eI[107]!==ek?(eN=(0,n.jsxs)(F.Z,{sx:L,className:"home-page",children:[ew,ek]}),eI[106]=ew,eI[107]=ek,eI[108]=eN):eN=eI[108],eN},{})},{path:"/information/:viewId",element:(0,n.jsx)(()=>{let e,t,l,r,o,c,d,u,m=(0,s.c)(15),{viewId:f}=(0,i.UO)(),h=(0,i.s0)();return(A("Information for View ".concat(f)),m[0]!==h?(e=()=>{let e=e=>{"Escape"===e.key&&h("/home")};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},t=[h],m[0]=h,m[1]=e,m[2]=t):(e=m[1],t=m[2]),(0,a.useEffect)(e,t),f)?(m[3]!==f?(l=(0,n.jsx)("h1",{children:f}),r=(0,n.jsx)(e2,{viewId:f}),m[3]=f,m[4]=l,m[5]=r):(l=m[4],r=m[5]),m[6]!==h?(o=()=>{h("/home")},m[6]=h,m[7]=o):o=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(ef.Z,{}),m[8]=c):c=m[8],m[9]!==o?(d=(0,n.jsx)(H.Z,{className:"close-button",onClick:o,"aria-label":"close",children:c}),m[9]=o,m[10]=d):d=m[10],m[11]!==l||m[12]!==r||m[13]!==d?(u=(0,n.jsxs)("div",{className:"information-page",children:[l,r,d]}),m[11]=l,m[12]=r,m[13]=d,m[14]=u):u=m[14],u):(h("/home"),null)},{})},{path:"/add-node",element:(0,n.jsx)(()=>{A("Add node");let e=(0,i.s0)(),{data:t,isLoading:l,error:r,refetch:o}=b("bnode_class_distribution"),s=(0,z.NL)(),[c,d]=(0,a.useState)([]),[u,m]=(0,a.useState)([]),[f,h]=(0,a.useState)(new Set),[x,p]=(0,a.useState)(""),[g,y]=(0,a.useState)(!1),[j,_]=(0,a.useState)(()=>{try{let e=localStorage.getItem("favorites");if(null==e)return[];{let t=JSON.parse(e);return Array.isArray(t)?t:[]}}catch(e){return[]}}),S=v("jump",{onSuccess:async()=>{await s.invalidateQueries()}}),w=v("add_node"),Z=v("class_information"),C=async e=>{let t=u.find(t=>t.endsWith(e));if(t)try{var l,n,a,r;let e=await w.mutateAsync({BNodeClass:t}),o=null==e||null==(r=e.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)?void 0:l.data.id;return await S.mutateAsync({node_id:o}),o}catch(e){throw console.error("Error during handleCreateAndJump for ".concat(t,":"),e),e}},k=async t=>{try{let l=await C(t);e("/add-node/form/".concat(l))}catch(e){console.error("Navigation skipped due to error:",e)}},N=e=>{_(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};(0,a.useEffect)(()=>{localStorage.setItem("favorites",JSON.stringify(j))},[j]),(0,a.useEffect)(()=>{if(t)try{var e,l,n,a;let r=((null==t||null==(a=t.data)||null==(n=a.results)||null==(l=n[0])||null==(e=l.result)?void 0:e.data)||[]).filter(e=>Object.keys(e)[0]),o=r.map(e=>Object.keys(e)[0].split(".").pop()),i=r.map(e=>Object.keys(e)[0]);d(o),m(i)}catch(e){console.error("Failed to parse class names:",e)}},[t]);let I=(0,a.useCallback)(async e=>{let t=localStorage.getItem("persisting:".concat(e));if(null!==t)return"true"===t;try{var l,n,a,r;let t=await Z.mutateAsync({classForm:e}),o=null==t||null==(r=t.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)?void 0:l.data;return(null==o?void 0:o.BusinessNode)!==void 0}catch(t){return console.error("Error fetching info for ".concat(e,":"),t),!1}},[Z.mutateAsync]);return(0,a.useEffect)(()=>{u&&0!==u.length&&(async()=>{let e=new Set;await Promise.all(u.map(async t=>{await I(t)&&e.add(t)})),h(e)})()},[u,I]),(0,n.jsx)(tl.Z,{in:!g,timeout:300,children:(0,n.jsxs)(tn.Z,{component:ta.Z,elevation:3,sx:{p:4,position:"relative",bgcolor:"#f8f9fa",maxWidth:"100%",width:"100%",minHeight:"80vh",overflow:"hidden"},children:[(0,n.jsx)(K.Z,{variant:"h3",component:"h1",gutterBottom:!0,sx:{color:"#2c3e50",textAlign:"center",fontWeight:600,pb:2,borderBottom:"3px solid #3498db"},children:"Add a new node"}),(0,n.jsx)(F.Z,{sx:{display:"flex",justifyContent:"center",mb:3,width:"100%"},children:(0,n.jsx)(B.Z,{fullWidth:!0,variant:"outlined",placeholder:"Search class name...",value:x,onChange:e=>p(e.target.value),sx:{maxWidth:400},InputProps:{startAdornment:(0,n.jsx)(tr.Z,{position:"start",children:(0,n.jsx)(td.Z,{})})}})}),j.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K.Z,{variant:"h4",component:"h2",sx:{color:"#34495e",my:3,fontWeight:500},children:"Favorites (Persistent Only)"}),(0,n.jsx)(to.Z,{container:!0,spacing:2,sx:{mt:2,justifyContent:"center"},children:j.map(e=>{let t=u.find(t=>t.endsWith(e));return{short:e,full:t}}).filter(e=>{let{full:t}=e;return t&&f.has(t)}).filter(e=>{let{short:t}=e;return t.toLowerCase().includes(x.toLowerCase())}).map(e=>{let{short:t}=e;return(0,n.jsx)(to.Z,{children:(0,n.jsx)(ec.Z,{onClick:()=>k(t),sx:{minWidth:120,cursor:"pointer",transition:"all 0.2s ease","&:hover":{bgcolor:"#f0f8ff",transform:"translateY(-2px)",boxShadow:3}},children:(0,n.jsxs)(es.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",p:2,"&:last-child":{pb:2}},children:[(0,n.jsx)(F.Z,{onClick:e=>{e.stopPropagation(),N(t)},sx:{mr:1,display:"inline-flex",cursor:"pointer"},children:(0,n.jsx)(ti.Z,{sx:{color:"#f1c40f"}})}),(0,n.jsx)(F.Z,{children:t})]})})},t)})})]}),(0,n.jsx)(K.Z,{variant:"h4",component:"h2",sx:{color:"#34495e",my:3,fontWeight:500},children:"All persisting classes"}),(0,n.jsx)(to.Z,{container:!0,spacing:2,sx:{mt:2,justifyContent:"center"},children:c.map((e,t)=>({short:e,full:u[t]})).filter(e=>{let{full:t}=e;return f.has(t)}).filter(e=>{let{short:t}=e;return t.toLowerCase().includes(x.toLowerCase())}).map(e=>{let{short:t}=e;return(0,n.jsx)(to.Z,{children:(0,n.jsx)(ec.Z,{sx:{minWidth:120,cursor:"pointer",transition:"all 0.2s ease","&:hover":{bgcolor:"#f0f8ff",transform:"translateY(-2px)",boxShadow:3}},children:(0,n.jsxs)(es.Z,{onClick:()=>k(t),sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",p:2,"&:last-child":{pb:2}},children:[(0,n.jsx)(F.Z,{onClick:e=>{e.stopPropagation(),N(t)},sx:{mr:1,display:"inline-flex",cursor:"pointer"},children:j.includes(t)?(0,n.jsx)(ti.Z,{sx:{color:"#f1c40f"}}):(0,n.jsx)(ts.Z,{sx:{color:"#ccc"}})}),(0,n.jsx)(F.Z,{children:t})]})})},t)})}),(0,n.jsxs)(F.Z,{sx:{position:"absolute",top:10,right:10,display:"flex",gap:1,zIndex:1e3},children:[(0,n.jsx)(H.Z,{onClick:()=>{Object.keys(localStorage).filter(e=>e.startsWith("persisting:")).forEach(e=>localStorage.removeItem(e)),h(new Set),o()},"aria-label":"reload",title:"Reload all classes",sx:{"&:hover":{color:"#3498db"}},children:(0,n.jsx)(tc.Z,{})}),(0,n.jsx)(H.Z,{onClick:()=>{y(!0),setTimeout(()=>e("/home"),300)},"aria-label":"close",title:"Close",sx:{"&:hover":{color:"#e74c3c"}},children:(0,n.jsx)(ef.Z,{})})]})]})})},{})},{path:"/add-node/form/:rootId",element:(0,n.jsx)(()=>{var e,t,l,a,r,o,c,d,u,m,f,h,x,p,g,y,j,_,S,w,Z,C,k,N,I,A,D,E,O,T,L;let W,P,R,V,U,B,Q,J,G,Y,$,X,ee,et,el,en,ea,er,eo,ei,es,ec,ed,em=(0,s.c)(57),{rootId:ef}=(0,i.UO)(),eh=ef?parseInt(ef):0,ex=(0,z.NL)(),ep=(0,i.s0)();em[0]!==eh?(W={node_id:eh},em[0]=eh,em[1]=W):W=em[1];let{data:eg,isLoading:eb,error:ev,refetch:ey}=b("class_attribute_field",W),ej=null==eg||null==(o=eg.data)||null==(r=o.results)||null==(a=r[0])||null==(l=a.result)||null==(t=l.data)||null==(e=t.currentNode)?void 0:e.name,e_=v("export_csv"),eS=v("remove_node");em[2]!==ex||em[3]!==(null==eg||null==(f=eg.data)||null==(m=f.results)||null==(u=m[0])||null==(d=u.result)||null==(c=d.data)?void 0:c.attributes)?(P={onSuccess:async()=>{var e,t,l,n,a,r;await ex.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:null==eg||null==(r=eg.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)||null==(t=l.data)||null==(e=t.attributes)?void 0:e.filter(ld)[0].id}]})}},em[2]=ex,em[3]=null==eg||null==(Z=eg.data)||null==(w=Z.results)||null==(S=w[0])||null==(_=S.result)||null==(j=_.data)?void 0:j.attributes,em[4]=P):P=em[4];let ew=v("search_node",P);if(eb){let e;return em[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(F.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:(0,n.jsx)(q.Z,{})}),em[5]=e):e=em[5],e}if(ev){let e,t=ev.message||"Unknown error";return em[6]!==t?(e=(0,n.jsxs)(K.Z,{color:"error",children:["Error loading form fields: ",t]}),em[6]=t,em[7]=e):e=em[7],e}return em[8]===Symbol.for("react.memo_cache_sentinel")?(R={p:3,position:"relative"},em[8]=R):R=em[8],em[9]!==ep?(V=()=>ep(-1),em[9]=ep,em[10]=V):V=em[10],em[11]===Symbol.for("react.memo_cache_sentinel")?(U={position:"absolute",top:16,right:16},B=(0,n.jsx)(th.Z,{}),em[11]=U,em[12]=B):(U=em[11],B=em[12]),em[13]!==V?(Q=(0,n.jsx)(H.Z,{className:"close-button",onClick:V,"aria-label":"close",sx:U,children:B}),em[13]=V,em[14]=Q):Q=em[14],em[15]!==ej?(J=tv(ej),em[15]=ej,em[16]=J):J=em[16],em[17]!==J?(G=(0,n.jsxs)(K.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:["Form for: ",J]}),em[17]=J,em[18]=G):G=em[18],em[19]!==ej||em[20]!==eh?(Y=ty(eh,ej),em[19]=ej,em[20]=eh,em[21]=Y):Y=em[21],em[22]!==eh?($={id:eh},em[22]=eh,em[23]=$):$=em[23],em[24]!==eh||em[25]!==$||em[26]!==Y?(X=(0,n.jsx)(lo,{fieldKey:Y,rootId:eh,isRoot:!0,field:$}),em[24]=eh,em[25]=$,em[26]=Y,em[27]=X):X=em[27],em[28]!==(null==eg||null==(y=eg.data)||null==(g=y.results)||null==(p=g[0])||null==(x=p.result)||null==(h=x.data.currentNode)?void 0:h.type)||em[29]!==eh||em[30]!==ew?(ee=(null==eg||null==(A=eg.data)||null==(I=A.results)||null==(N=I[0])||null==(k=N.result)||null==(C=k.data.currentNode)?void 0:C.type)==="SearchForm"?(0,n.jsx)(M.Z,{variant:"contained",color:"primary",sx:{},onClick:()=>ew.mutate({node_id:eh}),children:"Rechercher"}):"",em[28]=null==eg||null==(L=eg.data)||null==(T=L.results)||null==(O=T[0])||null==(E=O.result)||null==(D=E.data.currentNode)?void 0:D.type,em[29]=eh,em[30]=ew,em[31]=ee):ee=em[31],em[32]!==X||em[33]!==ee||em[34]!==Q||em[35]!==G?(et=(0,n.jsxs)(tn.Z,{className:"form-page",component:ta.Z,elevation:3,sx:R,children:[Q,G,X,ee]}),em[32]=X,em[33]=ee,em[34]=Q,em[35]=G,em[36]=et):et=em[36],em[37]===Symbol.for("react.memo_cache_sentinel")?(el={position:"absolute",bottom:16,right:16},em[37]=el):el=em[37],em[38]===Symbol.for("react.memo_cache_sentinel")?(en=(0,n.jsx)(tu.Z,{}),ea=(0,n.jsx)(li.Z,{}),em[38]=en,em[39]=ea):(en=em[38],ea=em[39]),em[40]!==e_||em[41]!==ej||em[42]!==eh?(er={icon:ea,name:"Exporter",onClick:async()=>{var e,t,l,n;let a=await e_.mutateAsync({node_id:eh,includeAllFields:!0,maxDepth:4}),r=new Blob([null==a||null==(n=a.data)||null==(l=n.results)||null==(t=l[0])||null==(e=t.result)?void 0:e.data],{type:"text/csv"});(0,lc.saveAs)(r,"".concat(ej,".csv"))}},em[40]=e_,em[41]=ej,em[42]=eh,em[43]=er):er=em[43],em[44]===Symbol.for("react.memo_cache_sentinel")?(eo={icon:(0,n.jsx)(eu.Z,{}),name:"Ajouter une nouvelle entr\xe9e"},ei=(0,n.jsx)(ls.Z,{}),em[44]=eo,em[45]=ei):(eo=em[44],ei=em[45]),em[46]!==ep||em[47]!==ey||em[48]!==eS||em[49]!==eh?(es={icon:ei,name:"Supprimer",onClick:async()=>{await eS.mutateAsync({node_id:eh},{onSuccess:async()=>{await ey(),ep(-1)}})}},em[46]=ep,em[47]=ey,em[48]=eS,em[49]=eh,em[50]=es):es=em[50],em[51]!==er||em[52]!==es?(ec=(0,n.jsx)(tm.Z,{ariaLabel:"SpeedDial playground example",sx:el,hidden:!1,icon:en,children:[er,eo,es].map(lu)}),em[51]=er,em[52]=es,em[53]=ec):ec=em[53],em[54]!==et||em[55]!==ec?(ed=(0,n.jsxs)(n.Fragment,{children:[et,ec]}),em[54]=et,em[55]=ec,em[56]=ed):ed=em[56],ed},{})}]}]}]);var lf=l(388),lh=l(7300);let lx=new lf.S,lp=document.getElementById("root");(0,r.createRoot)(lp).render((0,n.jsx)(a.StrictMode,{children:(0,n.jsx)(o.Z,{injectFirst:!0,children:(0,n.jsxs)(z.aH,{client:lx,children:[(0,n.jsx)(i.pG,{router:lm}),(0,n.jsx)(lh.t,{buttonPosition:"bottom-left",initialIsOpen:!1})]})})}))}},t={};function l(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,l),r.loaded=!0,r.exports}l.m=e,l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;l.t=function(n,a){if(1&a&&(n=this(n)),8&a||"object"==typeof n&&n&&(4&a&&n.__esModule||16&a&&"function"==typeof n.then))return n;var r=Object.create(null);l.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var i=2&a&&n;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>{o[e]=()=>n[e]});return o.default=()=>n,l.d(r,o),r}})(),l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e=[];l.O=(t,n,a,r)=>{if(n){r=r||0;for(var o=e.length;o>0&&e[o-1][2]>r;o--)e[o]=e[o-1];e[o]=[n,a,r];return}for(var i=1/0,o=0;o<e.length;o++){for(var n=e[o][0],a=e[o][1],r=e[o][2],s=!0,c=0;c<n.length;c++)(!1&r||i>=r)&&Object.keys(l.O).every(e=>l.O[e](n[c]))?n.splice(c--,1):(s=!1,r<i&&(i=r));if(s){e.splice(o--,1);var d=a();void 0!==d&&(t=d)}}return t}})(),l.p="/",(()=>{l.b=document.baseURI||self.location.href;var e={980:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,o=n[0],i=n[1],s=n[2],c=0;if(o.some(t=>0!==e[t])){for(a in i)l.o(i,a)&&(l.m[a]=i[a]);if(s)var d=s(l)}for(t&&t(n);c<o.length;c++)r=o[c],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(d)},n=self.webpackChunklogin_page=self.webpackChunklogin_page||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=l.O(void 0,["72","361","118","483"],function(){return l(1527)});n=l.O(n)})();