(()=>{"use strict";var e={59157:function(e,r,t){t.d(r,{ZP:()=>x});var n=t(27412),i=t(85893),a=t(22905),o=t(51001),l=t(33991),s=t(39467),c=t(44064),d=t(54757),u=t(77821),h=t(67294);class p extends h.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidUpdate(e){let{resetKeys:r}=this.props,{hasError:t}=this.state;t&&r&&this.prevResetKeys&&(r.length!==this.prevResetKeys.length||r.some((e,r)=>{var t;return e!==(null==(t=this.prevResetKeys)?void 0:t[r])}))&&this.setState({hasError:!1,error:null,errorInfo:null}),this.prevResetKeys=r}componentDidCatch(e,r){this.setState({error:e,errorInfo:r}),this.props.onError&&this.props.onError(e,r)}render(){if(this.state.hasError){var e;return this.props.fallback?this.props.fallback:(0,i.jsx)(l.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"200px",padding:3,bgcolor:"background.paper",borderRadius:2,border:"1px solid",borderColor:"error.light"},children:(0,i.jsxs)(s.Z,{severity:"error",sx:{width:"100%",maxWidth:"600px",mb:2},icon:(0,i.jsx)(a.Z,{}),children:[(0,i.jsx)(c.Z,{children:"Something went wrong"}),(0,i.jsx)(d.Z,{variant:"body2",sx:{mb:2},children:(null==(e=this.state.error)?void 0:e.message)||"An unexpected error occurred"}),!1,(0,i.jsx)(u.Z,{variant:"outlined",startIcon:(0,i.jsx)(o.Z,{}),onClick:this.handleRetry,sx:{mt:2},size:"small",children:"Try Again"})]})})}return this.props.children}constructor(e){super(e),(0,n._)(this,"prevResetKeys",void 0),(0,n._)(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})}),this.state={hasError:!1,error:null,errorInfo:null},this.prevResetKeys=e.resetKeys}}let x=p},62822:function(e,r,t){t.d(r,{vj:()=>x,$C:()=>f});var n=t(85893),i=t(33991),a=t(61215),o=t(54757);let l=e=>{let{text:r="Loading..."}=e;return(0,n.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",gap:1,padding:1},children:[(0,n.jsx)(a.Z,{size:16}),(0,n.jsx)(o.Z,{variant:"body2",color:"text.secondary",children:r})]})};var s=t(7409);let c=e=>{let{size:r=40,color:t="primary",message:l,sx:c={}}=e;return(0,n.jsxs)(i.Z,{sx:(0,s._)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:2,padding:2},c),children:[(0,n.jsx)(a.Z,{size:r,color:t}),l&&(0,n.jsx)(o.Z,{variant:"body2",color:"text.secondary",textAlign:"center",children:l})]})};var d=t(47044);let u=e=>{let{rows:r=5,columns:t=4}=e;return(0,n.jsxs)(i.Z,{sx:{width:"100%"},children:[(0,n.jsx)(i.Z,{sx:{display:"flex",gap:1,marginBottom:1},children:Array.from({length:t}).map((e,r)=>(0,n.jsx)(d.Z,{variant:"text",width:"100%",height:40},r))}),Array.from({length:r}).map((e,r)=>(0,n.jsx)(i.Z,{sx:{display:"flex",gap:1,marginBottom:1},children:Array.from({length:t}).map((e,r)=>(0,n.jsx)(d.Z,{variant:"text",width:"100%",height:30},r))},r))]})},h=()=>(0,n.jsxs)(i.Z,{sx:{aspectRatio:"1",border:"1px solid #e0e0e0",borderRadius:2,display:"flex",flexDirection:"column",bgcolor:"#ffffff"},children:[(0,n.jsx)(i.Z,{sx:{height:"40px",width:"100%",bgcolor:"#f5f5f5",borderBottom:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)(d.Z,{variant:"text",width:"80%",height:20})}),(0,n.jsxs)(i.Z,{sx:{padding:2,height:"calc(100% - 40px)",display:"flex",flexDirection:"column",gap:1},children:[(0,n.jsx)(d.Z,{variant:"text",width:"100%",height:20}),(0,n.jsx)(d.Z,{variant:"text",width:"90%",height:20}),(0,n.jsx)(d.Z,{variant:"text",width:"75%",height:20}),(0,n.jsx)(d.Z,{variant:"rectangular",width:"100%",height:60}),(0,n.jsx)(d.Z,{variant:"text",width:"60%",height:20})]})]}),p=e=>{let{columns:r=2,count:t=4}=e;return(0,n.jsx)(i.Z,{sx:{display:"flex",flexWrap:"wrap",gap:4},children:Array.from({length:t}).map((e,t)=>(0,n.jsx)(i.Z,{sx:{width:{xs:"100%",sm:"calc(".concat(100/Math.min(r,2),"% - 16px)"),md:"calc(".concat(100/r,"% - 32px)")}},children:(0,n.jsx)(h,{})},t))})},x={Page:()=>(0,n.jsx)(i.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"#2e3b55"},children:(0,n.jsx)(c,{size:60,message:"Loading page...",sx:{color:"#90caf9"}})}),Grid:e=>{let{columns:r=2,count:t=4}=e;return(0,n.jsx)(p,{columns:r,count:t})},Table:e=>{let{rows:r=5,columns:t=4}=e;return(0,n.jsx)(u,{rows:r,columns:t})},Inline:e=>{let{text:r}=e;return(0,n.jsx)(l,{text:r})},Component:e=>{let{message:r}=e;return(0,n.jsx)(c,{message:r||"Loading component..."})}};var m=t(67294);let f=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[r,t]=m.useState(e),n=m.useCallback(()=>{m.startTransition(()=>{t(!0)})},[]),i=m.useCallback(()=>{m.startTransition(()=>{t(!1)})},[]),a=m.useCallback(async e=>{n();try{return await e()}finally{i()}},[n,i]);return{isLoading:r,startLoading:n,stopLoading:i,withLoading:a}}},22561:function(e,r,t){t.d(r,{Le:()=>n.startTransition,LL:()=>a,av:()=>i,pQ:()=>n.useDeferredValue,m9:()=>o});var n=t(67294);function i(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{deferUpdates:t=!1,transitionUpdates:i=!0,debounceMs:a=0}=r,[o,l]=(0,n.useState)(e),[s,c]=(0,n.useTransition)(),d=(0,n.useRef)(void 0),u=(0,n.useDeferredValue)(o),h=t?u:o,p=(0,n.useCallback)(e=>{let r=()=>{i?n.startTransition(()=>{l(e)}):l(e)};a>0?(d.current&&clearTimeout(d.current),d.current=window.setTimeout(r,a)):r()},[i,a]);return(0,n.useEffect)(()=>()=>{d.current&&clearTimeout(d.current)},[]),[h,p,s]}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,r)=>r,[t,i]=(0,n.useState)(e),[a,o]=(0,n.useTransition)(),l=(0,n.useDeferredValue)(t),s=(0,n.useCallback)(e=>{n.startTransition(()=>{i(r=>[...r,e])})},[]),c=(0,n.useCallback)(e=>{n.startTransition(()=>{i(t=>t.filter((t,n)=>r(t,n)!==e))})},[r]),d=(0,n.useCallback)((e,t)=>{n.startTransition(()=>{i(n=>n.map((n,i)=>r(n,i)===e?t(n):n))})},[r]),u=(0,n.useCallback)((e,r)=>{n.startTransition(()=>{i(t=>{let n=[...t],[i]=n.splice(e,1);return n.splice(r,0,i),n})})},[]),h=(0,n.useCallback)(e=>{n.startTransition(()=>{i(r=>[...r].sort(e))})},[]),p=(0,n.useCallback)(()=>{n.startTransition(()=>{i([])})},[]),x=(0,n.useMemo)(()=>{let e=new Map;return l.forEach((t,n)=>{e.set(r(t,n),t)}),e},[l,r]),m=l.length;return{items:l,itemsMap:x,itemsCount:m,isEmpty:0===m,isPending:a,addItem:s,removeItem:c,updateItem:d,moveItem:u,sortItems:h,clearItems:p,setItems:(0,n.useCallback)(e=>{n.startTransition(()=>{i(e)})},[])}}function o(e,r){let[t,i]=(0,n.useState)(e),[a,o]=(0,n.useTransition)();return(0,n.useEffect)(()=>{let t=window.setTimeout(()=>{n.startTransition(()=>{i(e)})},r);return()=>{clearTimeout(t)}},[e,r]),[t,a]}},38655:function(e,r,t){t.d(r,{SF:()=>h,m_:()=>u,uC:()=>p});var n=t(7409),i=t(99282),a=t(24333),o=t(49982),l=t(12607),s=t(63760),c=t(80430);let d=new(t(42140)).h({mapsAsObjects:!0}),u=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,l=new URLSearchParams((0,n._)({},r)).toString(),s="".concat("https://localhost:8080/api","/").concat(e).concat(l?"?".concat(l):"");return(0,a.a)((0,n._)({initialData:void 0,queryKey:["apiData",e,r],queryFn:void 0===e?o.CN:()=>c.Z.get(s,{withCredentials:!0,headers:{Accept:"application/cbor"},responseType:"arraybuffer"}).then(e=>(0,i._)((0,n._)({},e),{data:d.decode(new Uint8Array(e.data))})),retry:2,staleTime:6e4},t))},h=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,a=new URLSearchParams((0,n._)({},r)).toString(),s=a?"?".concat(a):"";return(0,l.N)((0,n._)({initialData:void 0,queryKey:["infinite","apiData",e,r],queryFn:void 0===e?o.CN:r=>{let{pageParam:t}=r;return c.Z.get("".concat("https://localhost:8080/api","/").concat(e).concat(s,"&page=").concat(t,"&pageSize=25"),{withCredentials:!0,headers:{Accept:"application/cbor"},responseType:"arraybuffer"}).then(e=>(0,i._)((0,n._)({},e),{data:d.decode(new Uint8Array(e.data))}))},getNextPageParam:(e,r,t,n)=>e.data.results[0].result.data.hasNext?e.data.results[0].result.data.page+1:void 0,initialPageParam:1,retry:2,staleTime:6e4},t))},p=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.D)((0,n._)({mutationFn:void 0===e?o.CN:async r=>c.Z.post("".concat("https://localhost:8080/api","/").concat(e),r,{withCredentials:!0,headers:{Accept:"application/cbor"},responseType:"arraybuffer"}).then(e=>(0,i._)((0,n._)({},e),{data:d.decode(new Uint8Array(e.data))}))},r))}},96837:function(e,r,t){var n=t(85893),i=t(67294),a=t(20745),o=t(59157),l=t(62822),s=t(9673),c=t(38655),d=t(23802),u=t(3058),h=t(3553),p=t(22992),x=t(47839),m=t(3666),f=t(14578);t(96023);var g=t(7942);let b=(0,u.Z)({cssVariables:!0,colorSchemes:{dark:!1},breakpoints:{values:{xs:0,sm:600,md:900,lg:1200,xl:1536}},typography:{fontFamily:"IBM Plex Sans, sans-serif",h1:{fontSize:"clamp(1.75rem, 4vw, 2.125rem)"},h2:{fontSize:"clamp(1.5rem, 3.5vw, 1.875rem)"},h3:{fontSize:"clamp(1.25rem, 3vw, 1.5rem)"},h4:{fontSize:"clamp(1.125rem, 2.5vw, 1.25rem)"},h5:{fontSize:"clamp(1rem, 2vw, 1.125rem)"},h6:{fontSize:"clamp(0.875rem, 1.5vw, 1rem)"},body1:{fontSize:"clamp(0.875rem, 1.5vw, 1rem)"},body2:{fontSize:"clamp(0.75rem, 1.25vw, 0.875rem)"},caption:{fontSize:"clamp(0.625rem, 1vw, 0.75rem)"}},components:{MuiToolbar:{styleOverrides:{root:e=>{let{theme:r}=e;return{[r.breakpoints.down("md")]:{minHeight:"56px !important",padding:"8px 12px !important"},[r.breakpoints.down("sm")]:{minHeight:"48px !important",padding:"6px 8px !important"}}}}},MuiButton:{styleOverrides:{root:e=>{let{theme:r}=e;return{[r.breakpoints.down("sm")]:{fontSize:"0.75rem",padding:"6px 12px",minWidth:"44px",minHeight:"44px"}}}}},MuiIconButton:{styleOverrides:{root:e=>{let{theme:r}=e;return{[r.breakpoints.down("sm")]:{padding:"6px",minWidth:"44px",minHeight:"44px"}}}}},MuiTextField:{styleOverrides:{root:e=>{let{theme:r}=e;return{[r.breakpoints.down("sm")]:{"& .MuiInputBase-root":{fontSize:"0.875rem"},"& .MuiInputLabel-root":{fontSize:"0.875rem"}}}}}},MuiBreadcrumbs:{styleOverrides:{root:e=>{let{theme:r}=e;return{[r.breakpoints.down("md")]:{"& .MuiBreadcrumbs-ol":{flexWrap:"nowrap",overflow:"hidden"},"& .MuiBreadcrumbs-li":{minWidth:0,overflow:"hidden",textOverflow:"ellipsis"}}}}}},MuiDialog:{styleOverrides:{paper:e=>{let{theme:r}=e;return{[r.breakpoints.down("sm")]:{margin:"8px",width:"calc(100% - 16px)",maxWidth:"none"}}}}},MuiDrawer:{styleOverrides:{paper:e=>{let{theme:r}=e;return{[r.breakpoints.down("sm")]:{width:"100%",maxWidth:"100vw"}}}}}},transitions:{duration:{shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195},easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"}}},m.g,h.gQ),y={title:"",logo:(0,n.jsx)("img",{src:"/logo.svg",alt:"I3S",width:"100%",height:"100%",style:{color:"inherit"}}),homeUrl:"/home"},j=(0,i.memo)(e=>{let{children:r,navigation:t}=e;return(0,n.jsx)(o.ZP,{fallback:(0,n.jsx)("div",{style:{padding:"16px",textAlign:"center",color:"#666"},children:"Navigation error occurred. Please refresh the page."}),children:(0,n.jsx)(f.C,{navigation:t,theme:b,branding:y,children:r})})});j.displayName="NavigationProvider";let v=()=>[{kind:"page",title:"Error - Retry",segment:"home",icon:(0,n.jsx)(d.Z,{})}],w=(0,i.memo)(function(){let{data:e,isLoading:r,error:t,refetch:a}=(0,c.m_)("endpoints?only_applicable&type=byransha.web.View",{},{staleTime:6e4,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:(e,r)=>e<3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),u=(0,i.useDeferredValue)(e),h=(0,i.useDeferredValue)(r),f=(0,i.useDeferredValue)(t),b=(0,i.useMemo)(()=>{try{var e;if(h)return[{kind:"page",title:"Loading...",segment:"home",icon:(0,n.jsx)(d.Z,{})}];if(f||!(null==u||null==(e=u.data)?void 0:e.results))return console.error("Navigation data error:",f),v();let r=u.data.results.map(e=>({kind:"page",title:e.endpoint||"Unknown View",segment:"information/".concat((e.endpoint||"unknown").replaceAll(" ","_")),icon:(0,n.jsx)(d.Z,{})}));return r.some(e=>"home"===e.segment)||r.unshift({kind:"page",title:"Home",segment:"home",icon:(0,n.jsx)(d.Z,{})}),r}catch(e){return console.error("Error creating navigation:",e),v()}},[u,h,f]),y=i.useCallback(()=>{(0,i.startTransition)(()=>{a()})},[a]),w=i.useCallback(()=>(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:"24px",textAlign:"center",backgroundColor:"#f5f5f5"},children:[(0,n.jsx)("div",{style:{fontSize:"3rem",marginBottom:"16px"},children:"⚠️"}),(0,n.jsx)("h1",{style:{color:"#d32f2f",marginBottom:"16px"},children:"Application Error"}),(0,n.jsx)("p",{style:{color:"#666",marginBottom:"24px",maxWidth:"500px"},children:"Something went wrong with the application. This could be due to a network issue or a temporary server problem."}),(0,n.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,n.jsx)("button",{type:"button",onClick:y,style:{padding:"12px 24px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"Retry"}),(0,n.jsx)("button",{type:"button",onClick:()=>window.location.reload(),style:{padding:"12px 24px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"1rem"},children:"Reload Page"})]}),!1]}),[y,f]);return(0,n.jsx)(o.ZP,{fallback:(0,n.jsx)(w,{}),onError:(e,r)=>{console.error("App-level error:",e,r)},children:(0,n.jsxs)(x._C,{dateAdapter:p.y,adapterLocale:"fr",localeText:m.g.components.MuiLocalizationProvider.defaultProps.localeText,children:[(0,n.jsx)(g.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#333",color:"#fff"},success:{iconTheme:{primary:"#4caf50",secondary:"#fff"}},error:{iconTheme:{primary:"#f44336",secondary:"#fff"}}}}),(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)(l.vj.Page,{}),children:(0,n.jsx)(j,{navigation:b,children:(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,n.jsx)(l.vj.Component,{message:"Loading page content..."})}),children:(0,n.jsx)(s.j3,{})})})})]})})}),Z=e=>{let{children:r,fallback:t=(0,n.jsx)(l.vj.Page,{}),errorMessage:a="Failed to load component"}=e;return(0,n.jsx)(o.ZP,{fallback:(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",color:"#666"},children:a}),onError:(e,r)=>{},children:(0,n.jsx)(i.Suspense,{fallback:t,children:r})})};var C=t(22561),k=t(49696),S=t(3840),T=t(9332),z=t(19154),I=t(99516),O=t(95634),E=t(19410),A=t(33991),M=t(62983),L=t(11161),R=t(54757),P=t(90271),D=t(39467),_=t(59314),N=t(6896),W=t(30548),F=t(61215),B=t(86001),U=t(89126),V=t(99469),q=t(70107);let K=(0,i.memo)(e=>{let{result:r,isFocused:t,onSelect:i}=e;return(0,n.jsxs)(T.Z,{onClick:i,role:"option","aria-selected":t,tabIndex:t?0:-1,sx:{height:"100%",backgroundColor:t?"action.hover":"transparent","&:hover":{backgroundColor:"action.hover"},"&:focus":{backgroundColor:"action.focus",outline:"2px solid",outlineColor:"primary.main",outlineOffset:"-2px"},transition:"background-color 0.15s ease"},children:[(0,n.jsx)(z.Z,{children:(0,n.jsx)(I.Z,{invisible:r.isValid,badgeContent:(0,n.jsx)(k.Z,{color:"warning",fontSize:"small","aria-label":"\xc9l\xe9ment non valide"}),children:(0,n.jsx)(O.Z,{src:r.img?"data:".concat(r.imgMimeType,";base64,").concat(r.img):"",alt:"Image de ".concat(r.name),sx:{width:32,height:32}})})}),(0,n.jsx)(E.Z,{primary:r.name,secondary:r.type,primaryTypographyProps:{style:{marginRight:8},noWrap:!0},secondaryTypographyProps:{noWrap:!0}})]})});K.displayName="SearchResult";let H=(0,i.memo)(e=>{let{results:r,focusedIndex:t,hasNextPage:i,onSelectOption:a,parentRef:o}=e,s=(0,C.pQ)(r),c=(0,q.MG)({count:i?s.length+1:s.length,estimateSize:()=>60,getScrollElement:()=>o.current,overscan:5});return(0,n.jsx)(A.Z,{ref:o,role:"listbox","aria-label":"R\xe9sultats de recherche",sx:{height:Math.min(400,c.getTotalSize()),overflowY:"auto",position:"relative"},children:(0,n.jsx)(M.Z,{sx:{height:"".concat(c.getTotalSize(),"px"),position:"relative",p:0},role:"presentation",children:c.getVirtualItems().map(e=>{let r=s[e.index],o=!r&&i,c=t===e.index;return(0,n.jsx)(L.ZP,{disablePadding:!0,sx:{height:"".concat(e.size,"px"),left:0,position:"absolute",top:0,transform:"translateY(".concat(e.start,"px)"),width:"100%"},children:o?(0,n.jsx)(A.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",py:1},children:(0,n.jsx)(l.vj.Inline,{text:"Loading more..."})}):r?(0,n.jsx)(K,{result:r,isFocused:c,onSelect:()=>a(r)}):(0,n.jsx)(A.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",py:1},children:(0,n.jsx)(R.Z,{variant:"body2",color:"text.secondary",children:"No results found"})})},(null==r?void 0:r.id)||"loading-".concat(e.index))})})})});H.displayName="VirtualizedList";let Q=(0,i.memo)(()=>{let e=(0,s.s0)(),r=(0,V.NL)(),t=(0,P.Z)(),{isLoading:a,withLoading:d}=(0,l.$C)(),[u,h,p]=(0,C.av)("",{transitionUpdates:!0}),[x,m,f]=(0,C.av)(!1,{transitionUpdates:!0}),[g,b,y]=(0,C.av)(0,{transitionUpdates:!0,debounceMs:100}),[j,v,w]=(0,C.av)(-1,{transitionUpdates:!0}),[Z,k,T]=(0,C.av)(null,{transitionUpdates:!0}),[z]=(0,C.m9)(u,300),I=(0,i.useRef)(null),O=(0,i.useRef)(null),E=(0,c.uC)("jump",{onSuccess:async()=>{(0,C.Le)(()=>{r.invalidateQueries({predicate:e=>!e.queryKey.includes("search_node")}),k(null)})},onError:e=>{k("Navigation failed: ".concat(e.message))}}),{isLoading:M,data:L,isFetchingNextPage:q,fetchNextPage:K,hasNextPage:Q,error:G}=(0,c.SF)("search_node",{query:z},{enabled:z.length>0,gcTime:3e4,staleTime:1e4,refetchOnWindowFocus:!1,retry:2,retryDelay:1e3}),$=(0,i.useMemo)(()=>{try{return(null==L?void 0:L.pages.flatMap(e=>{var r,t,n,i,a;return null==(a=e.data)||null==(i=a.results)||null==(n=i[0])||null==(t=n.result)||null==(r=t.data)?void 0:r.data}))||[]}catch(e){return console.error("Error processing search results:",e),k("Error processing search results"),[]}},[L,k]),J=(0,C.pQ)($);(0,i.useEffect)(()=>{G&&k("Search failed: ".concat(G.message))},[G,k]);let Y=(0,i.useCallback)(()=>{let e=O.current;if(!e)return;let{scrollTop:r,scrollHeight:t,clientHeight:n}=e,i=(r+n)/t;(0,C.Le)(()=>{b(r)}),i>.8&&Q&&!q&&K().catch(e=>{console.error("Failed to fetch next page:",e),k("Failed to load more results")})},[Q,q,K,b,k]);(0,i.useEffect)(()=>{let e=O.current;e&&g>0&&(e.scrollTop=g)},[g]),(0,i.useEffect)(()=>{let e=O.current;if(e)return e.addEventListener("scroll",Y,{passive:!0}),()=>e.removeEventListener("scroll",Y)},[Y]);let X=(0,i.useCallback)(r=>{d(async()=>{try{await E.mutateAsync({node_id:r.id}),(0,C.Le)(()=>{m(!1),v(-1)}),e("/home",{replace:!0})}catch(e){console.error("Failed to select option:",e)}})},[E,m,v,e,d]),ee=(0,i.useCallback)(e=>{if(x&&0!==J.length)switch(e.key){case"ArrowDown":e.preventDefault(),(0,C.Le)(()=>{v(e=>e<J.length-1?e+1:e)});break;case"ArrowUp":e.preventDefault(),(0,C.Le)(()=>{v(e=>e>0?e-1:e)});break;case"Enter":e.preventDefault(),j>=0&&j<J.length&&X(J[j]);break;case"Escape":(0,C.Le)(()=>{m(!1),v(-1)})}},[x,J,j,v,m,X]),er=(0,i.useCallback)(e=>{let r=e.target.value;(0,C.Le)(()=>{h(r),m(!0),v(-1),k(null)})},[h,m,v,k]),et=(0,i.useCallback)(()=>{u.length>0&&(0,C.Le)(()=>{m(!0)})},[u.length,m]),en=(0,i.useCallback)(()=>{(0,C.Le)(()=>{m(!1),v(-1)})},[m,v]);(0,i.useEffect)(()=>{if(Z){let e=setTimeout(()=>{k(null)},5e3);return()=>clearTimeout(e)}},[Z,k]);let ei=a||p||f||y||w||T;return(0,n.jsx)(o.ZP,{fallback:(0,n.jsx)(A.Z,{sx:{width:{xs:"100%",sm:250,md:300}},children:(0,n.jsx)(D.Z,{severity:"error",sx:{fontSize:"0.875rem"},children:"Recherche indisponible"})}),onError:(e,r)=>{console.error("SearchBar error:",e,r),k("Erreur du composant de recherche")},children:(0,n.jsx)(_.d,{onClickAway:en,children:(0,n.jsxs)(A.Z,{sx:{position:"relative",width:{xs:"100%",sm:250,md:300},minWidth:0},role:"combobox","aria-expanded":x&&z.length>0,"aria-haspopup":"listbox","aria-owns":x?"search-results":void 0,children:[Z&&(0,n.jsx)(D.Z,{severity:"error",onClose:()=>k(null),sx:{position:"absolute",top:-50,left:0,right:0,zIndex:1400,fontSize:"0.75rem"},role:"alert","aria-live":"polite",children:Z}),(0,n.jsx)(N.Z,{ref:I,label:"Rechercher",placeholder:"Tapez pour rechercher...",variant:"outlined",size:"small",value:u,onChange:er,onFocus:et,onKeyDown:ee,disabled:ei,fullWidth:!0,autoComplete:"off","aria-label":"Rechercher dans les \xe9l\xe9ments","aria-describedby":Z?"search-error":"search-help","aria-autocomplete":"list","aria-controls":x?"search-results":void 0,InputProps:{startAdornment:(0,n.jsx)(W.Z,{position:"start",children:(0,n.jsx)(S.Z,{color:"action"})}),endAdornment:M||ei?(0,n.jsx)(W.Z,{position:"end",children:(0,n.jsx)(F.Z,{color:"inherit",size:20,"aria-label":"Recherche en cours"})}):null,sx:{pr:.5}},sx:{width:"100%","& .MuiOutlinedInput-root":{borderBottomLeftRadius:x?0:void 0,borderBottomRightRadius:x?0:void 0,opacity:ei?.7:1,transition:"opacity 0.2s ease-in-out","&:hover fieldset":{borderColor:"primary.main"},"&.Mui-focused fieldset":{borderColor:"primary.main"}}}}),(0,n.jsx)(R.Z,{component:"div",sx:{position:"absolute",left:-1e4,top:"auto",clip:"rect(0 0 0 0)",overflow:"hidden"},children:"Utilisez les fl\xe8ches haut et bas pour naviguer dans les r\xe9sultats, Entr\xe9e pour s\xe9lectionner, \xc9chap pour fermer"}),(0,n.jsx)(B.Z,{in:x&&z.length>0,children:(0,n.jsx)(U.Z,{elevation:8,sx:{position:"absolute",top:"100%",left:0,right:0,zIndex:1300,maxHeight:400,borderTopLeftRadius:0,borderTopRightRadius:0,border:"1px solid",borderColor:"divider",borderTop:"none",boxShadow:t.shadows[8]},role:"presentation",children:(0,n.jsx)(o.ZP,{fallback:(0,n.jsx)(A.Z,{sx:{p:2,textAlign:"center"},children:(0,n.jsx)(D.Z,{severity:"error",sx:{fontSize:"0.875rem"},children:"Erreur lors du chargement des r\xe9sultats"})}),children:M&&0===J.length?(0,n.jsx)(A.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:2},"aria-live":"polite",children:(0,n.jsx)(l.vj.Inline,{text:"Recherche en cours..."})}):0===J.length?(0,n.jsx)(A.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:2},"aria-live":"polite",children:(0,n.jsx)(R.Z,{variant:"body2",color:"text.secondary",children:"Aucun r\xe9sultat trouv\xe9"})}):(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)(A.Z,{sx:{p:2,textAlign:"center"},"aria-live":"polite",children:(0,n.jsx)(l.vj.Inline,{text:"Chargement des r\xe9sultats..."})}),children:(0,n.jsx)(H,{results:J,focusedIndex:j,hasNextPage:Q,isFetchingNextPage:q,onSelectOption:X,parentRef:O})})})})})]})})})});Q.displayName="SearchBar";var G=t(89425),$=t(20533),J=t(87938),Y=t(1854),X=t(92334),ee=t(29743),er=t(17047),et=t(16970),en=t(30925),ei=t(81035),ea=t(81839),eo=t(71618),el=t(99782),es=t(94018),ec=t(60488),ed=t(73876),eu=t(91679),eh=t(13400),ep=t(77821),ex=t(8523),em=t(64578),ef=t(81106),eg=t(27484),eb=t.n(eg);let ey=(0,i.memo)(e=>{var r;let{data:t,isLoading:i,error:a}=e;if(i)return(0,n.jsx)(O.Z,{sx:{width:32,height:32,bgcolor:"grey.300"},children:(0,n.jsx)(R.Z,{variant:"caption",children:"..."})});if(a)return(0,n.jsx)(O.Z,{sx:{width:32,height:32,bgcolor:"error.main"},children:(0,n.jsx)(R.Z,{variant:"caption",color:"white",children:"!"})});let o=(null==t||null==(r=t.data)?void 0:r.username)||"User";return(0,n.jsx)(O.Z,{sx:{width:32,height:32,bgcolor:"primary.main",fontSize:"0.875rem"},"aria-label":"Avatar de ".concat(o),children:o.charAt(0).toUpperCase()})});ey.displayName="MobileUserInfo";let ej=(0,i.memo)(e=>{var r,t;let{data:i,isLoading:a,error:o}=e;if((0,P.Z)(),a)return(0,n.jsx)(l.vj.Inline,{text:"Chargement des informations utilisateur..."});if(o)return(0,n.jsx)(D.Z,{severity:"error",sx:{fontSize:"0.75rem"},children:"Erreur de chargement utilisateur"});let s=(null==i||null==(r=i.data)?void 0:r.username)||"Utilisateur inconnu",c=(null==i||null==(t=i.data)?void 0:t.user_id)||"N/A",d=(null==i?void 0:i.data["backend version"])||"N/A";return(0,n.jsxs)(A.Z,{sx:{display:"flex",alignItems:"center",gap:1.5,p:1.5,bgcolor:"background.paper",transition:"all 0.2s ease"},"aria-label":"Informations utilisateur",children:[(0,n.jsx)(O.Z,{sx:{width:32,height:32,bgcolor:"primary.main",fontSize:"0.875rem"},"aria-label":"Avatar de ".concat(s),children:s.charAt(0).toUpperCase()}),(0,n.jsxs)(A.Z,{sx:{display:"flex",flexDirection:"column",minWidth:0},children:[(0,n.jsx)(R.Z,{variant:"body2",sx:{fontWeight:600,color:"text.primary",fontSize:"0.875rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:s,children:s}),(0,n.jsxs)(A.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsxs)(R.Z,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.75rem"},title:"ID utilisateur: ".concat(c),children:["ID: ",c]}),(0,n.jsx)(er.Z,{label:"v".concat(d),size:"small",variant:"outlined",sx:{height:16,fontSize:"0.6rem","& .MuiChip-label":{px:.5}}})]})]})]})});ej.displayName="UserInfo";let ev=(0,i.memo)(e=>{let{open:r,onClose:t}=e;return(0,n.jsxs)(et.Z,{open:r,onClose:t,fullScreen:!0,sx:{"& .MuiDialog-paper":{bgcolor:"background.default"}},children:[(0,n.jsxs)(en.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2},children:[(0,n.jsx)(R.Z,{variant:"h6",children:"Rechercher"}),(0,n.jsx)(ei.Z,{onClick:t,"aria-label":"Fermer",children:(0,n.jsx)(G.Z,{})})]}),(0,n.jsx)(ea.Z,{sx:{p:2},children:(0,n.jsx)(Q,{})})]})});ev.displayName="MobileSearchDialog";let ew=(0,i.memo)(e=>{let{history:r,currentNode:t,onHistoryClick:a,onMoreClick:l,menuAnchor:c,onMenuClose:d}=e,u=(0,P.Z)(),h=(0,eo.Z)(u.breakpoints.down("md")),p=(0,C.pQ)(r),x=(0,i.useMemo)(()=>{let e=h?1:3;return p.length>e?p.slice(-1):p},[p,h]);return(0,n.jsxs)(o.ZP,{fallback:(0,n.jsx)(D.Z,{severity:"error",children:"Erreur de navigation"}),children:[(0,n.jsxs)(el.Z,{separator:(0,n.jsx)($.Z,{sx:{color:"text.disabled",fontSize:{xs:"16px",md:"18px"}}}),"aria-label":"Fil d'Ariane de navigation",sx:{bgcolor:"transparent",p:.5,"& .MuiBreadcrumbs-ol":{alignItems:"center",flexWrap:"nowrap",overflow:"hidden"}},children:[(0,n.jsxs)(es.Z,{component:s.rU,to:"/home",sx:{display:"flex",alignItems:"center",gap:.5,color:"text.secondary",fontSize:{xs:"0.75rem",md:"0.875rem"},textDecoration:"none",p:{xs:.5,md:1},borderRadius:1,transition:"all 0.2s ease",minWidth:0,"&:hover":{color:"primary.main",bgcolor:"action.hover"},"&:focus":{outline:"2px solid ".concat(u.palette.primary.main),outlineOffset:"2px"}},"aria-label":"Retour \xe0 l'accueil",children:[(0,n.jsx)(J.Z,{fontSize:"small"}),!h&&"Accueil"]}),p.length>(h?1:3)&&(0,n.jsx)(ec.Z,{title:"Afficher tout l'historique",children:(0,n.jsx)(ei.Z,{onClick:l,size:"small","aria-label":"Afficher l'historique complet de navigation","aria-expanded":!!c,"aria-haspopup":"true",sx:{color:"text.disabled",p:{xs:.25,md:.5},"&:hover":{color:"primary.main",bgcolor:"action.hover"},"&:focus":{outline:"2px solid ".concat(u.palette.primary.main),outlineOffset:"2px"}},children:(0,n.jsx)(Y.Z,{fontSize:"small"})})}),x.map(e=>{let r=e===t;return(0,n.jsx)(es.Z,{component:"button",onClick:()=>a(e),sx:{color:r?"primary.main":"text.secondary",fontSize:{xs:"0.75rem",md:"0.875rem"},fontWeight:r?600:400,textDecoration:"none",p:{xs:.5,md:1},borderRadius:1,bgcolor:r?"action.selected":"transparent",transition:"all 0.2s ease",border:"none",cursor:"pointer",maxWidth:{xs:100,sm:120,md:150},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minWidth:0,"&:hover":{color:"primary.main",bgcolor:"action.hover"},"&:focus":{outline:"2px solid ".concat(u.palette.primary.main),outlineOffset:"2px"}},"aria-label":"Naviguer vers ".concat(e.pretty_name),"aria-current":r?"page":void 0,title:e.pretty_name,children:e.pretty_name},e.id)})]}),(0,n.jsx)(ex.Z,{anchorEl:c,open:!!c,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},"aria-label":"Menu de l'historique de navigation",PaperProps:{sx:{borderRadius:2,boxShadow:u.shadows[8],mt:1,minWidth:200,maxWidth:{xs:"90vw",sm:300}}},children:p.map(e=>{let r=e===t;return(0,n.jsx)(ed.Z,{onClick:()=>{a(e),d()},sx:{fontSize:"0.875rem",color:r?"primary.main":"text.primary",bgcolor:r?"action.selected":"transparent","&:hover":{bgcolor:"action.hover",color:"primary.main"},"&:focus":{bgcolor:"action.focus"}},role:"menuitem","aria-current":r?"page":void 0,children:(0,n.jsx)(R.Z,{variant:"body2",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.pretty_name})},e.id)})})]})});ew.displayName="BreadcrumbNav";let eZ=(0,i.memo)(e=>{let{open:r,onClose:t,data:i,isLoading:a,error:o,onLogout:l}=e;return(0,n.jsx)(eu.ZP,{anchor:"right",open:r,onClose:t,PaperProps:{sx:{width:{xs:"100%",sm:320},maxWidth:"100vw"}},children:(0,n.jsxs)(A.Z,{sx:{p:2},children:[(0,n.jsxs)(A.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,n.jsx)(R.Z,{variant:"h6",children:"Menu"}),(0,n.jsx)(ei.Z,{onClick:t,"aria-label":"Fermer le menu",children:(0,n.jsx)(G.Z,{})})]}),(0,n.jsx)(A.Z,{sx:{mb:3,p:2,bgcolor:"background.paper",borderRadius:1},children:(0,n.jsx)(ej,{data:i,isLoading:a,error:o})}),(0,n.jsx)(eh.Z,{spacing:2,children:(0,n.jsx)(ep.Z,{variant:"outlined",fullWidth:!0,startIcon:(0,n.jsx)(X.Z,{}),onClick:()=>{l(),t()},"aria-label":"Se d\xe9connecter"})})]})})});eZ.displayName="MobileNavDrawer";let eC=(0,i.memo)(()=>{var e,r,t,a,d;let u=(0,P.Z)(),h=(0,s.s0)(),p=(0,V.NL)(),{isLoading:x,withLoading:m}=(0,l.$C)(),[f,g]=(0,i.useState)(Date.now());new Date("1920-01-01").getTime(),Date.now();let b=(0,eo.Z)(u.breakpoints.down("md"));(0,eo.Z)(u.breakpoints.down("lg"));let[y,j,v]=(0,C.av)(null,{transitionUpdates:!0}),[w,Z,k]=(0,C.av)(null,{transitionUpdates:!0}),[T,z]=(0,i.useState)(!1),[I,O]=(0,i.useState)(!1),[E,M]=(0,C.av)(null,{debounceMs:5e3,transitionUpdates:!0}),[L]=(0,C.m9)(E,5e3),{data:_,isLoading:N,error:W}=(0,c.m_)("endpoints?only_applicable&type=byransha.web.View",{},{staleTime:6e4,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0}),{data:F}=(0,c.m_)("user_history",{},{staleTime:3e4,gcTime:12e4,refetchOnWindowFocus:!1}),{items:B,setItems:U,isPending:q}=(0,C.LL)(null!=(d=null==F||null==(a=F.data)||null==(t=a.results)||null==(r=t[0])||null==(e=r.result)?void 0:e.data)?d:[],e=>e.id),K=(0,C.pQ)(B),H=(0,C.pQ)(_),G=(0,c.uC)("jump",{onSuccess:async()=>{(0,C.Le)(()=>{p.invalidateQueries({queryKey:["apiData"]}),Z(null)})},onError:e=>{Z("Navigation failed: ".concat(e.message)),M("clear")}}),$=(0,c.uC)("logout",{onSuccess:async()=>{(0,C.Le)(()=>{p.clear()})},onError:e=>{Z("Logout failed: ".concat(e.message)),M("clear")}}),J=(0,c.uC)("class_distribution",{onError:e=>{Z("Failed to load classes: ".concat(e.message)),M("clear")}}),Y=(0,c.uC)("add_node",{onError:e=>{Z("Failed to create node: ".concat(e.message)),M("clear")}});i.useEffect(()=>{L&&(Z(null),M(null))},[L,Z,M]),i.useEffect(()=>{var e,r,t,n;(null==F||null==(n=F.data)||null==(t=n.results)||null==(r=t[0])||null==(e=r.result)?void 0:e.data)&&U(F.data.results[0].result.data)},[F,U]);let er=(0,i.useCallback)(e=>{m(async()=>{try{await G.mutateAsync({node_id:e})}catch(e){console.error("Jump to node failed:",e)}})},[G,m]),en=(0,i.useCallback)(e=>{er(e.id)},[er]),el=(0,i.useCallback)(async()=>{await m(async()=>{try{await $.mutateAsync({})}catch(e){console.error("Logout failed:",e)}finally{(0,C.Le)(()=>{h("/")})}})},[$,m,h]),es=(0,i.useCallback)(e=>{j(e.currentTarget)},[j]),ed=(0,i.useCallback)(()=>{j(null)},[j]),eu=(0,i.useCallback)(async e=>{let r=e||"byransha.labmodel.model.v0.SearchForm";if(r)try{var t,n,i,a;let e=await Y.mutateAsync({BNodeClass:r}),o=null==e||null==(a=e.data)||null==(i=a.results)||null==(n=i[0])||null==(t=n.result)?void 0:t.data.id;return await G.mutateAsync({node_id:o}),o}catch(e){throw console.error("Error during handleCreateAndJump for ".concat(r,":"),e),e}},[Y,G]),ex=(0,i.useCallback)(async()=>{await m(async()=>{try{var e,r,t,n;let i=await J.mutateAsync({}),a=((null==i||null==(n=i.data)||null==(t=n.results)||null==(r=t[0])||null==(e=r.result)?void 0:e.data)||[]).find(e=>{let r=Object.keys(e)[0];return null==r?void 0:r.includes("SearchForm")}),o=await eu(Object.keys(a)[0]);h("/add-node/form/".concat(o))}catch(e){console.error("Navigation skipped due to error:",e)}})},[J,eu,h,m]),eg=(0,i.useMemo)(()=>K[K.length-1],[K]),eC=x||v||k||q;return(0,n.jsx)(o.ZP,{fallback:(0,n.jsx)(A.Z,{sx:{p:3,textAlign:"center"},children:(0,n.jsx)(D.Z,{severity:"error",children:"Main layout failed to load. Please refresh the page."})}),onError:(e,r)=>{console.error("MainLayout error:",e,r),Z("Layout error: ".concat(e.message))},children:(0,n.jsxs)(A.Z,{sx:{'& .MuiDrawer-root .MuiDrawer-paper, & [role="navigation"]':{"&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"},opacity:eC?.9:1,transition:"opacity 0.2s ease-in-out"},children:[w&&(0,n.jsx)(D.Z,{severity:"error",onClose:()=>Z(null),sx:{position:"fixed",top:16,left:"50%",transform:"translateX(-50%)",zIndex:1e4,maxWidth:{xs:"90vw",sm:"500px"}},children:w}),(0,n.jsx)(ef.c,{hideNavigation:!0,disableCollapsibleSidebar:!0,slots:{appTitle:()=>(0,n.jsx)(o.ZP,{fallback:(0,n.jsx)(D.Z,{severity:"error",children:"Erreur de navigation"}),children:(0,n.jsxs)(eh.Z,{direction:"row",alignItems:"center",spacing:{xs:1,md:2},sx:{minWidth:0,flex:1,overflow:"hidden"},children:[(0,n.jsx)(A.Z,{sx:{height:{xs:32,md:40},display:"flex",alignItems:"center",flexShrink:0},children:(0,n.jsx)("img",{src:"/logo.svg",alt:"Logo I3S",style:{height:"100%"}})}),(0,n.jsx)(A.Z,{sx:{minWidth:0,flex:1,overflow:"hidden"},children:(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)(l.vj.Inline,{text:"Chargement navigation..."}),children:(0,n.jsx)(ew,{history:K,currentNode:eg,onHistoryClick:en,onMoreClick:es,menuAnchor:y,onMenuClose:ed})})})]})}),toolbarActions:()=>(0,n.jsx)(o.ZP,{fallback:(0,n.jsx)(D.Z,{severity:"error",children:"Erreur de la barre d'outils"}),children:(0,n.jsxs)(eh.Z,{direction:"row",alignItems:"center",spacing:{xs:.5,md:1.5},sx:{flexWrap:"nowrap",minWidth:0},children:[(0,n.jsx)(em.M,{disableFuture:!0,value:eb()(f),onChange:e=>{let r=eb()(e).valueOf();Number.isNaN(r)||g(r)},sx:{mb:1}}),b?(0,n.jsx)(ec.Z,{title:"Rechercher / Options avanc\xe9es",children:(0,n.jsx)(ei.Z,{onClick:()=>O(!0),size:"small","aria-label":"Ouvrir la recherche",sx:{"&:focus":{outline:"2px solid ".concat(u.palette.primary.main),outlineOffset:"2px"}},children:(0,n.jsx)(S.Z,{fontSize:"small"})})}):(0,n.jsxs)(A.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)(l.vj.Inline,{text:"Recherche..."}),children:(0,n.jsx)(Q,{})}),(0,n.jsx)(ec.Z,{title:"Recherche avanc\xe9e",children:(0,n.jsx)(ei.Z,{onClick:ex,size:"medium","aria-label":"Ouvrir la recherche avanc\xe9e",sx:{"&:focus":{outline:"2px solid ".concat(u.palette.primary.main),outlineOffset:"2px"}},children:(0,n.jsx)(ee.Z,{})})})]}),(0,n.jsx)(et.Z,{open:I,onClose:()=>O(!1),fullWidth:!0,children:(0,n.jsx)(ea.Z,{children:(0,n.jsxs)(i.Suspense,{fallback:(0,n.jsx)(l.vj.Inline,{text:"Recherche..."}),children:[(0,n.jsx)(Q,{}),(0,n.jsx)(A.Z,{mt:2,children:(0,n.jsxs)(ei.Z,{onClick:ex,children:[(0,n.jsx)(ee.Z,{})," Options avanc\xe9es"]})})]})})}),b?(0,n.jsx)(ec.Z,{title:"Menu utilisateur",children:(0,n.jsx)(ei.Z,{onClick:()=>z(!0),size:"small","aria-label":"Ouvrir le menu utilisateur",sx:{"&:focus":{outline:"2px solid ".concat(u.palette.primary.main),outlineOffset:"2px"}},children:(0,n.jsx)(ey,{data:H,isLoading:N,error:W})})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.Z,{sx:{display:{xs:"none",sm:"flex",lg:"none"}},children:(0,n.jsxs)(eh.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,n.jsx)(ey,{data:H,isLoading:N,error:W}),(0,n.jsx)(ec.Z,{title:"Se d\xe9connecter de l'application",children:(0,n.jsx)(ei.Z,{onClick:el,disabled:eC,size:"small","aria-label":"Se d\xe9connecter",sx:{"&:disabled":{opacity:.6},"&:focus":{outline:"2px solid ".concat(u.palette.primary.main),outlineOffset:"2px"}},children:(0,n.jsx)(X.Z,{fontSize:"small"})})})]})}),(0,n.jsx)(A.Z,{sx:{display:{xs:"none",lg:"block"}},children:(0,n.jsx)(ej,{data:H,isLoading:N,error:W})})]}),!b&&(0,n.jsx)(ec.Z,{title:"Se d\xe9connecter de l'application",children:(0,n.jsx)(ei.Z,{size:"small",onClick:el,disabled:eC,"aria-label":"Se d\xe9connecter",sx:{"&:disabled":{opacity:.6},fontSize:{xs:"0.75rem",sm:"0.875rem"},display:{xs:"none",sm:"flex"},minWidth:{sm:"auto",md:"auto"},"&:focus":{outline:"2px solid ".concat(u.palette.primary.main),outlineOffset:"2px"}},children:(0,n.jsx)(X.Z,{})})})]})})},children:(0,n.jsx)(A.Z,{component:"main",sx:{mt:2,px:{xs:1,sm:2}},"aria-label":"Contenu principal",children:(0,n.jsx)(o.ZP,{fallback:(0,n.jsx)(A.Z,{sx:{p:3,textAlign:"center"},children:(0,n.jsxs)(D.Z,{severity:"error",action:(0,n.jsx)(ep.Z,{color:"inherit",size:"small",onClick:()=>window.location.reload(),children:"Actualiser"}),children:[(0,n.jsx)(R.Z,{variant:"h6",gutterBottom:!0,children:"Erreur de chargement du contenu"}),(0,n.jsx)(R.Z,{variant:"body2",children:"Le contenu de la page n'a pas pu \xeatre charg\xe9. Veuillez actualiser la page."})]})}),children:(0,n.jsx)(i.Suspense,{fallback:(0,n.jsx)(A.Z,{sx:{p:3,textAlign:"center"},"aria-live":"polite",children:(0,n.jsx)(l.vj.Component,{message:"Chargement du contenu..."})}),children:(0,n.jsx)(s.j3,{})})})})}),(0,n.jsx)(ev,{open:I,onClose:()=>O(!1)}),(0,n.jsx)(eZ,{open:T,onClose:()=>z(!1),data:H,isLoading:N,error:W,onLogout:el}),eC&&(0,n.jsx)(A.Z,{sx:{position:"fixed",bottom:{xs:16,md:24},right:{xs:16,md:24},zIndex:u.zIndex.snackbar},"aria-live":"polite","aria-label":"Op\xe9ration en cours",children:(0,n.jsx)(D.Z,{severity:"info",sx:{alignItems:"center","& .MuiAlert-icon":{mr:1}},children:(0,n.jsx)(l.vj.Inline,{text:"Traitement en cours..."})})})]})})});eC.displayName="MainLayout";let ek=(0,i.lazy)(()=>Promise.all([t.e("510"),t.e("6526")]).then(t.bind(t,81705))),eS=(0,i.lazy)(()=>Promise.all([t.e("2476"),t.e("8156"),t.e("4490"),t.e("2605"),t.e("1318"),t.e("2130"),t.e("7545")]).then(t.bind(t,68596))),eT=(0,i.lazy)(()=>Promise.all([t.e("2476"),t.e("359")]).then(t.bind(t,77318))),ez=(0,i.lazy)(()=>Promise.all([t.e("2476"),t.e("8156"),t.e("1318"),t.e("5511")]).then(t.bind(t,9726))),eI=(0,i.lazy)(()=>Promise.all([t.e("2476"),t.e("8156"),t.e("4490"),t.e("1318"),t.e("2130"),t.e("8604")]).then(t.bind(t,45986))),eO=(0,s.aj)([{Component:w,errorElement:(0,n.jsx)(()=>(0,n.jsx)(o.ZP,{children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",gap:"16px"},children:[(0,n.jsx)("h2",{children:"Application Error"}),(0,n.jsx)("p",{children:"Something went wrong with the application."}),(0,n.jsx)("button",{type:"button",onClick:()=>window.location.reload(),children:"Reload Page"})]})}),{}),children:[{path:"/",element:(0,n.jsx)(Z,{fallback:(0,n.jsx)(l.vj.Component,{message:"Loading login..."}),errorMessage:"Failed to load login form",children:(0,n.jsx)(ek,{})})},{element:(0,n.jsx)(eC,{}),errorElement:(0,n.jsx)(()=>(0,n.jsx)(o.ZP,{children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",flexDirection:"column",gap:"16px"},children:[(0,n.jsx)("h3",{children:"Layout Error"}),(0,n.jsx)("p",{children:"There was a problem loading the main layout."})]})}),{}),children:[{path:"/home",element:(0,n.jsx)(Z,{fallback:(0,n.jsx)(l.vj.Grid,{columns:2,count:4}),errorMessage:"Failed to load home page",children:(0,n.jsx)(eS,{})})},{path:"/home/:typeEndpoint",element:(0,n.jsx)(Z,{fallback:(0,n.jsx)(l.vj.Grid,{columns:2,count:4}),errorMessage:"Failed to load the endpoint page",children:(0,n.jsx)(eI,{})})},{path:"/add-node",element:(0,n.jsx)(Z,{fallback:(0,n.jsx)(l.vj.Component,{message:"Loading add node page..."}),errorMessage:"Failed to load add node page",children:(0,n.jsx)(eT,{})})},{path:"/add-node/form/:rootId",element:(0,n.jsx)(Z,{fallback:(0,n.jsx)(l.vj.Component,{message:"Loading form..."}),errorMessage:"Failed to load form page",children:(0,n.jsx)(ez,{})})}]}]}]);var eE=t(33988);let eA=new(t(12920)).S({defaultOptions:{queries:{staleTime:3e4,gcTime:3e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:(e,r)=>e<3,retryDelay:e=>Math.min(1e3*2**e,3e4)},mutations:{retry:(e,r)=>!!(e<2&&r.message.includes("network")),retryDelay:1e3}}});window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason),e.preventDefault()}),window.addEventListener("error",e=>{console.error("Uncaught error:",e.error)});let eM=document.getElementById("root");if(!eM)throw Error("Root container not found. Make sure there's a div with id='root' in your HTML.");(0,a.createRoot)(eM).render((0,n.jsx)(i.StrictMode,{children:(0,n.jsx)(o.ZP,{fallback:(0,n.jsx)(()=>(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:"24px",textAlign:"center",backgroundColor:"#f5f5f5",fontFamily:"IBM Plex Sans, sans-serif"},children:[(0,n.jsx)("div",{style:{fontSize:"4rem",marginBottom:"24px"},children:"\uD83D\uDCA5"}),(0,n.jsx)("h1",{style:{color:"#d32f2f",marginBottom:"16px",fontSize:"2rem"},children:"Critical Application Error"}),(0,n.jsx)("p",{style:{color:"#666",marginBottom:"32px",maxWidth:"600px",fontSize:"1.1rem",lineHeight:"1.6"},children:"The application encountered a critical error and cannot continue. This might be due to a configuration issue, network problem, or browser compatibility issue."}),(0,n.jsxs)("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap",justifyContent:"center"},children:[(0,n.jsx)(ep.Z,{onClick:()=>window.location.reload(),style:{padding:"12px 24px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#1565c0",onMouseOut:e=>e.currentTarget.style.backgroundColor="#1976d2",children:"Reload Application"}),(0,n.jsx)(ep.Z,{onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},style:{padding:"12px 24px",backgroundColor:"#f57c00",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#ef6c00",onMouseOut:e=>e.currentTarget.style.backgroundColor="#f57c00",children:"Clear Cache & Reload"})]}),(0,n.jsxs)("details",{style:{marginTop:"32px",maxWidth:"800px"},children:[(0,n.jsx)("summary",{style:{cursor:"pointer",color:"#666",fontSize:"0.9rem"},children:"Troubleshooting Information"}),(0,n.jsxs)("div",{style:{marginTop:"16px",textAlign:"left",fontSize:"0.875rem",color:"#555"},children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Browser:"})," ",navigator.userAgent]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Time:"})," ",new Date().toISOString()]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"URL:"})," ",window.location.href]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"React Version:"})," 19.1.0"]})]})]})]}),{}),onError:(e,r)=>{console.error("Critical application error:",e,r)},children:(0,n.jsx)(eE.Z,{injectFirst:!0,children:(0,n.jsxs)(V.aH,{client:eA,children:[(0,n.jsx)(o.ZP,{fallback:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:"24px",textAlign:"center"},children:[(0,n.jsx)("h2",{style:{color:"#d32f2f",marginBottom:"16px"},children:"Router Error"}),(0,n.jsx)("p",{style:{color:"#666",marginBottom:"24px"},children:"There was a problem with the application routing."}),(0,n.jsx)(ep.Z,{onClick:()=>window.location.reload(),style:{padding:"12px 24px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:"Reload Application"})]}),onError:(e,r)=>{console.error("Router error:",e,r)},children:(0,n.jsx)(s.pG,{router:eO})}),!1]})})})}))}},r={};function t(n){var i=r[n];if(void 0!==i)return i.exports;var a=r[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}t.m=e,t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},(()=>{var e,r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;t.t=function(n,i){if(1&i&&(n=this(n)),8&i||"object"==typeof n&&n&&(4&i&&n.__esModule||16&i&&"function"==typeof n.then))return n;var a=Object.create(null);t.r(a);var o={};e=e||[null,r({}),r([]),r(r)];for(var l=2&i&&n;"object"==typeof l&&!~e.indexOf(l);l=r(l))Object.getOwnPropertyNames(l).forEach(e=>{o[e]=()=>n[e]});return o.default=()=>n,t.d(a,o),a}})(),t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce((r,n)=>(t.f[n](e,r),r),[])),t.u=e=>"static/js/async/"+e+"."+({103:"792b9ff3",1192:"9c7981df",1318:"2afdfb40",1475:"acb67cec",1745:"8f4446df",2029:"732da5de",211:"89162e87",2130:"ba0281e9",2174:"068b2f9c",2476:"44e9f723",2605:"f0444216",3241:"e78dc7ef",3297:"3f1c3bfb",359:"90c7405b",3755:"c4d36494",3917:"a1c7bf3d",4490:"de925f68",461:"1deb4237",5086:"b93649f9",510:"da4dc595",5146:"97342bbf",5239:"b08329ca",5511:"78767814",5529:"76870903",5877:"9fa73080",6231:"44538b52",6284:"77684480",6450:"7aac9961",6526:"f03bce50",7349:"f44b2d90",7545:"6bde27aa",7563:"a0b94b2b",7773:"ee6538af",8071:"45502a9f",8156:"f0979515",8199:"2e0f378c",8264:"5bbb1dfb",8604:"fe52e5ad",8662:"04ab4623",87:"ec63e5f1",8907:"83190a24",905:"564a1f70",9127:"64a0fc6a",9378:"aba238fc",938:"bbf21901",940:"ec215ca4",9472:"98c80b1d",9517:"b8c77069",9772:"7ce8f2f0",9781:"17cd8593",982:"55448932",9997:"4adac547"})[e]+".js",t.miniCssF=e=>"static/css/async/"+e+"."+({5511:"41935d0c",7545:"4c163bf0",8604:"4c163bf0"})[e]+".css",t.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={},r="login_page:";t.l=function(n,i,a,o){if(e[n])return void e[n].push(i);if(void 0!==a)for(var l,s,c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==r+a){l=u;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,t.nc&&l.setAttribute("nonce",t.nc),l.setAttribute("data-webpack",r+a),l.src=n),e[n]=[i];var h=function(r,t){l.onerror=l.onload=null,clearTimeout(p);var i=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach(function(e){return e(t)}),r)return r(t)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),s&&document.head.appendChild(l)}})(),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e=[];t.O=(r,n,i,a)=>{if(n){a=a||0;for(var o=e.length;o>0&&e[o-1][2]>a;o--)e[o]=e[o-1];e[o]=[n,i,a];return}for(var l=1/0,o=0;o<e.length;o++){for(var n=e[o][0],i=e[o][1],a=e[o][2],s=!0,c=0;c<n.length;c++)(!1&a||l>=a)&&Object.keys(t.O).every(e=>t.O[e](n[c]))?n.splice(c--,1):(s=!1,a<l&&(l=a));if(s){e.splice(o--,1);var d=i();void 0!==d&&(r=d)}}return r}})(),t.p="/",(()=>{if("undefined"!=typeof document){var e=function(e,r,n,i,a){var o=document.createElement("link");return o.rel="stylesheet",o.type="text/css",t.nc&&(o.nonce=t.nc),o.onerror=o.onload=function(t){if(o.onerror=o.onload=null,"load"===t.type)i();else{var n=t&&("load"===t.type?"missing":t.type),l=t&&t.target&&t.target.href||r,s=Error("Loading CSS chunk "+e+" failed.\\n("+l+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=n,s.request=l,o.parentNode&&o.parentNode.removeChild(o),a(s)}},o.href=r,n?n.parentNode.insertBefore(o,n.nextSibling):document.head.appendChild(o),o},r=function(e,r){for(var t=document.getElementsByTagName("link"),n=0;n<t.length;n++){var i=t[n],a=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(a===e||a===r))return i}for(var o=document.getElementsByTagName("style"),n=0;n<o.length;n++){var i=o[n],a=i.getAttribute("data-href");if(a===e||a===r)return i}},n={2980:0};t.f.miniCss=function(i,a){if(n[i])a.push(n[i]);else 0!==n[i]&&({7545:1,5511:1,8604:1})[i]&&a.push(n[i]=new Promise(function(n,a){var o=t.miniCssF(i),l=t.p+o;if(r(o,l))return n();e(i,l,null,n,a)}).then(function(){n[i]=0},function(e){throw delete n[i],e}))}}})(),(()=>{t.b=document.baseURI||self.location.href;var e={2980:0};t.f.j=function(r,n){var i=t.o(e,r)?e[r]:void 0;if(0!==i)if(i)n.push(i[2]);else{var a=new Promise((t,n)=>i=e[r]=[t,n]);n.push(i[2]=a);var o=t.p+t.u(r),l=Error();t.l(o,function(n){if(t.o(e,r)&&(0!==(i=e[r])&&(e[r]=void 0),i)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;l.message="Loading chunk "+r+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,i[1](l)}},"chunk-"+r,r)}},t.O.j=r=>0===e[r];var r=(r,n)=>{var i,a,o=n[0],l=n[1],s=n[2],c=0;if(o.some(r=>0!==e[r])){for(i in l)t.o(l,i)&&(t.m[i]=l[i]);if(s)var d=s(t)}for(r&&r(n);c<o.length;c++)a=o[c],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(d)},n=self.webpackChunklogin_page=self.webpackChunklogin_page||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))})();var n=t.O(void 0,["2072","3361","2118","9017"],function(){return t(96837)});n=t.O(n)})();
//# sourceMappingURL=index.85cc1539.js.map