(()=>{"use strict";var e={1527:function(e,t,l){var n=l(5893),a=l(7294),r=l(745),o=l(92),i=l(4997),s=l(8827),c=l(5794),d=l(4578),u=l(1078),m=l(9282),h=l(4333),f=l(2607),x=l(3760),p=l(2140),g=l(430);let v=new p.h({mapsAsObjects:!0}),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0,n=new URLSearchParams((0,u._)({},t)).toString(),a="".concat("https://localhost:8080/api","/").concat(e).concat(n?"?".concat(n):"");return(0,h.a)((0,u._)({initialData:void 0,queryKey:["apiData",e,t],queryFn:()=>g.Z.get(a,{withCredentials:!0,headers:{Accept:"application/cbor"},responseType:"arraybuffer"}).then(e=>(0,m._)((0,u._)({},e),{data:v.decode(new Uint8Array(e.data))})),retry:2,staleTime:6e4},l))},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0,n=new URLSearchParams((0,u._)({},t)).toString(),a=n?"?".concat(n):"";return(0,f.N)((0,u._)({initialData:void 0,queryKey:["apiData",e,t],queryFn:t=>{let{pageParam:l}=t;return g.Z.get("".concat("https://localhost:8080/api","/").concat(e).concat(a,"&page=").concat(l,"&pageSize=10"),{withCredentials:!0,headers:{Accept:"application/cbor"},responseType:"arraybuffer"}).then(e=>(0,m._)((0,u._)({},e),{data:v.decode(new Uint8Array(e.data))}))},getNextPageParam:(e,t,l,n)=>e.data.results[0].result.data.hasNext?e.data.results[0].result.data.page+1:void 0,initialPageParam:1,retry:2,staleTime:6e4},l))},j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,x.D)((0,u._)({mutationFn:t=>g.Z.post("".concat("https://localhost:8080/api","/").concat(e),t,{withCredentials:!0,headers:{Accept:"application/cbor"},responseType:"arraybuffer"}).then(e=>(0,m._)((0,u._)({},e),{data:v.decode(new Uint8Array(e.data))}))},t))};var _=l(3802),S=l(2992),w=l(7839),Z=l(3553),C=l(3666);l(6023);var k=l(7942);let N=(0,c.Z)({cssVariables:!0,colorSchemes:{dark:!1},typography:{fontFamily:"IBM Plex Sans, sans-serif"}},C.g,Z.gQ);function I(e){return{kind:"page",title:e.endpoint,segment:"information/".concat(e.endpoint.replaceAll(" ","_")),icon:(0,n.jsx)(_.Z,{})}}var A=l(922);let z=l.p+"static/image/i3S_RVB_Couleur.eaa939af.png",D=e=>{let t,l,n=(0,s.c)(3),r="undefined"!=typeof document,o=(0,a.useRef)(r?document.title:null);n[0]!==e?(t=()=>{if(r)return document.title!==e&&(document.title=e),()=>{document.title=o.current}},l=[r,e],n[0]=e,n[1]=t,n[2]=l):(t=n[1],l=n[2]),(0,a.useEffect)(t,l)};var E=l(9469);function T(e){return!e}var L=l(2597),O=l(4728),F=l(533),W=l(1854),P=l(4786),R=l(7178),V=l(9782),K=l(4018),M=l(3876),U=l(4757),H=l(7230),B=l(1035),q=l(8523),Q=l(1215),J=l(6896),Y=l(9126),G=l(2983),$=l(1161),X=l(9332),ee=l(9154),et=l(9516),el=l(5634),en=l(9410),ea=l(6001),er=l(9314),eo=l(4697),ei=l(9696),es=l(107);let ec=e=>{var t;let l,r,o,c,d,u,m,h,f,x,p,g,v,b,_,S,w,Z,C,k,N,I,A,z,D,T=(0,s.c)(56),[L,O]=(0,a.useState)("");T[0]===Symbol.for("react.memo_cache_sentinel")?(l={maxWait:500},T[0]=l):l=T[0];let[F]=(0,eo.Nr)(L,250,l),[W,R]=(0,a.useState)(!1),[V,K]=(0,a.useState)(0),[M,U]=(0,a.useState)(-1),H=(0,i.s0)(),B=(0,E.NL)(),q=(0,a.useRef)(null),ec=(0,a.useRef)(null);T[1]!==B?(r={onSuccess:async()=>{await B.invalidateQueries({predicate:ed})}},T[1]=B,T[2]=r):r=T[2];let ef=j("jump",r);T[3]!==F?(o={query:F},T[3]=F,T[4]=o):o=T[4];let ex=F.length>0;T[5]!==ex?(c={enabled:ex,gcTime:3e4},T[5]=ex,T[6]=c):c=T[6];let{isLoading:ep,data:eg,isFetchingNextPage:ev,fetchNextPage:eb,hasNextPage:ey}=y("search_node",o,c),ej=(null==eg?void 0:eg.pages.flatMap(eu))||[];ej.length,null==eg||null==(t=eg.pages)||t.length;let e_=ey?ej.length+1:ej.length;T[7]===Symbol.for("react.memo_cache_sentinel")?(d=()=>ec.current,T[7]=d):d=T[7],T[8]!==e_?(u={count:e_,estimateSize:em,getScrollElement:d,overscan:5},T[8]=e_,T[9]=u):u=T[9];let eS=(0,es.MG)(u);T[10]!==eb||T[11]!==ey||T[12]!==ev?(m=()=>{let e=ec.current;if(!e)return;let{scrollTop:t,scrollHeight:l,clientHeight:n}=e,a=(t+n)/l;K(t),a>.8&&ey&&!ev&&eb()},T[10]=eb,T[11]=ey,T[12]=ev,T[13]=m):m=T[13];let ew=m;T[14]!==V?(h=()=>{let e=ec.current;e&&V>0&&(e.scrollTop=V)},T[14]=V,T[15]=h):h=T[15],T[16]!==eg||T[17]!==V?(f=[eg,V],T[16]=eg,T[17]=V,T[18]=f):f=T[18],(0,a.useEffect)(h,f),T[19]!==ew?(x=()=>{let e=ec.current;if(e)return e.addEventListener("scroll",ew),()=>e.removeEventListener("scroll",ew)},p=[ew],T[19]=ew,T[20]=x,T[21]=p):(x=T[20],p=T[21]),(0,a.useEffect)(x,p);let eZ=e=>{if(W&&0!==ej.length)switch(e.key){case"ArrowDown":e.preventDefault(),U(e=>e<ej.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),U(eh);break;case"Enter":e.preventDefault(),M>=0&&M<ej.length&&eC(ej[M]);break;case"Escape":R(!1),U(-1)}},eC=e=>{ef.mutate({node_id:e.id}),R(!1),U(-1),H("/home",{replace:!0})};T[22]===Symbol.for("react.memo_cache_sentinel")?(g=e=>{O(e.target.value),R(!0),U(-1)},T[22]=g):g=T[22];let ek=g;T[23]!==L.length?(v=()=>{L.length>0&&R(!0)},T[23]=L.length,T[24]=v):v=T[24];let eN=v;T[25]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{R(!1),U(-1)},T[25]=b):b=T[25];let eI=b;T[26]===Symbol.for("react.memo_cache_sentinel")?(_={position:"relative",width:300},T[26]=_):_=T[26],T[27]!==ep?(S=ep?(0,n.jsx)(Q.Z,{color:"inherit",size:20}):null,T[27]=ep,T[28]=S):S=T[28],T[29]===Symbol.for("react.memo_cache_sentinel")?(w={pr:.5},T[29]=w):w=T[29],T[30]!==S?(Z={endAdornment:S,sx:w},T[30]=S,T[31]=Z):Z=T[31],T[32]===Symbol.for("react.memo_cache_sentinel")?(C={xs:"none",md:"inline-block"},T[32]=C):C=T[32];let eA=W?0:void 0,ez=W?0:void 0;T[33]!==eA||T[34]!==ez?(k={display:C,"& .MuiOutlinedInput-root":{borderBottomLeftRadius:eA,borderBottomRightRadius:ez}},T[33]=eA,T[34]=ez,T[35]=k):k=T[35],T[36]!==eN||T[37]!==eZ||T[38]!==L||T[39]!==Z||T[40]!==k?(N=(0,n.jsx)(J.Z,{ref:q,label:"Rechercher",variant:"outlined",size:"small",value:L,onChange:ek,onFocus:eN,onKeyDown:eZ,fullWidth:!0,InputProps:Z,sx:k}),T[36]=eN,T[37]=eZ,T[38]=L,T[39]=Z,T[40]=k,T[41]=N):N=T[41];let eD=W&&F.length>0;return T[42]===Symbol.for("react.memo_cache_sentinel")?(I={position:"absolute",top:"100%",left:0,right:0,zIndex:1300,maxHeight:400,borderTopLeftRadius:0,borderTopRightRadius:0,border:"1px solid",borderColor:"divider",borderTop:"none"},T[42]=I):I=T[42],T[43]!==M||T[44]!==eC||T[45]!==ey||T[46]!==ep||T[47]!==ej||T[48]!==eS?(A=(0,n.jsx)(Y.Z,{elevation:8,sx:I,children:ep&&0===ej.length?(0,n.jsx)(P.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:2},children:(0,n.jsx)(Q.Z,{size:20})}):0===ej.length?(0,n.jsx)(P.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:2},children:"No results found"}):(0,n.jsx)(P.Z,{ref:ec,sx:{height:Math.min(400,eS.getTotalSize()),overflowY:"auto",position:"relative"},children:(0,n.jsx)(G.Z,{sx:{height:"".concat(eS.getTotalSize(),"px"),position:"relative",p:0},children:eS.getVirtualItems().map(e=>{let t=ej[e.index],l=!t&&ey,a=M===e.index;return(0,n.jsx)($.ZP,{disablePadding:!0,sx:{height:"".concat(e.size,"px"),left:0,position:"absolute",top:0,transform:"translateY(".concat(e.start,"px)"),width:"100%"},children:(0,n.jsx)(X.Z,{onClick:()=>t&&eC(t),sx:{height:"100%",backgroundColor:a?"action.hover":"transparent","&:hover":{backgroundColor:"action.hover"}},children:l?(0,n.jsx)(P.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",py:1},children:(0,n.jsx)(Q.Z,{size:20})}):t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ee.Z,{children:(0,n.jsx)(et.Z,{invisible:t.isValid,badgeContent:(0,n.jsx)(ei.Z,{color:"warning"}),children:(0,n.jsx)(el.Z,{src:t.img?"data:".concat(t.imgMimeType,";base64,").concat(t.img):"",alt:t.name,sx:{width:32,height:32}})})}),(0,n.jsx)(en.Z,{primary:t.name,secondary:t.type,primaryTypographyProps:{style:{marginRight:8},noWrap:!0},secondaryTypographyProps:{noWrap:!0}})]}):(0,n.jsx)(P.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",py:1},children:"No results found"})})},(null==t?void 0:t.id)||"loading-".concat(e.index))})})})}),T[43]=M,T[44]=eC,T[45]=ey,T[46]=ep,T[47]=ej,T[48]=eS,T[49]=A):A=T[49],T[50]!==eD||T[51]!==A?(z=(0,n.jsx)(ea.Z,{in:eD,children:A}),T[50]=eD,T[51]=A,T[52]=z):z=T[52],T[53]!==N||T[54]!==z?(D=(0,n.jsx)(er.d,{onClickAway:eI,children:(0,n.jsxs)(P.Z,{sx:_,children:[N,z]})}),T[53]=N,T[54]=z,T[55]=D):D=T[55],D};function ed(e){return!e.queryKey.includes("search_node")}function eu(e){var t,l,n,a,r;return null==(r=e.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)||null==(t=l.data)?void 0:t.data}function em(){return 60}function eh(e){return e>0?e-1:e}var ef=l(6649),ex=l(9717),ep=l(2153),eg=l(9276),ev=l(1419),eb=l(372),ey=l(9425),ej=l(7012),e_=l(488),eS=l(6770),ew=l(5327),eZ=l(3852);let eC={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:"800px",maxHeight:"80vh",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,display:"flex",flexDirection:"column",overflow:"hidden"},ek={display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},eN={overflowY:"auto",maxHeight:"calc(80vh - 100px)",width:"100%",scrollbarWidth:"thin",scrollbarColor:"#888 #f1f1f1","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},eI=e=>{let t,l,r,o,i,c,d,u,m,h,f,x,p=(0,s.c)(25),{dataForModal:g,isModalOpen:v,setIsModalOpen:b}=e,[,y]=(0,a.useTransition)();p[0]!==b?(t=e=>{e.stopPropagation(),y(()=>{b(!0)})},p[0]=b,p[1]=t):t=p[1];let j=t;p[2]!==b?(l=e=>{e.stopPropagation(),y(()=>{b(!1)})},p[2]=b,p[3]=l):l=p[3];let _=l;p[4]===Symbol.for("react.memo_cache_sentinel")?(r={position:"absolute",top:5,right:5,zIndex:10,width:30,height:30,color:"primary.main"},p[4]=r):r=p[4];let S=null==g;return p[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,n.jsx)(ew.Z,{}),p[5]=o):o=p[5],p[6]!==j||p[7]!==S?(i=(0,n.jsx)(e_.Z,{title:"Show Raw Backend Response",children:(0,n.jsx)("span",{children:(0,n.jsx)(B.Z,{onClick:j,size:"small",sx:r,"aria-label":"Show raw JSON",disabled:S,children:o})})}),p[6]=j,p[7]=S,p[8]=i):i=p[8],p[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(U.Z,{id:"raw-json-modal-title",variant:"h6",component:"h2",children:"Raw Backend Response"}),p[9]=c):c=p[9],p[10]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(ey.Z,{}),p[10]=d):d=p[10],p[11]!==_?(u=(0,n.jsxs)(P.Z,{sx:ek,children:[c,(0,n.jsx)(B.Z,{onClick:_,"aria-label":"close",children:d})]}),p[11]=_,p[12]=u):u=p[12],p[13]!==g?(m=(0,n.jsx)(P.Z,{sx:eN,children:g?(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)(Q.Z,{}),children:(0,n.jsx)(eZ.gc,{data:g})}):(0,n.jsx)(U.Z,{children:"No raw data available to display."})}),p[13]=g,p[14]=m):m=p[14],p[15]!==m||p[16]!==u?(h=(0,n.jsxs)(P.Z,{sx:eC,children:[u,m]}),p[15]=m,p[16]=u,p[17]=h):h=p[17],p[18]!==_||p[19]!==v||p[20]!==h?(f=(0,n.jsx)(eS.Z,{open:v,onClose:_,"aria-labelledby":"raw-json-modal-title","aria-describedby":"raw-json-modal-description",children:h}),p[18]=_,p[19]=v,p[20]=h,p[21]=f):f=p[21],p[22]!==f||p[23]!==i?(x=(0,n.jsxs)(n.Fragment,{children:[i,f]}),p[22]=f,p[23]=i,p[24]=x):x=p[24],x};var eA=l(2206);let ez=e=>{let t,l,a,r=(0,s.c)(5),{code:o}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t={whiteSpace:"pre-wrap",padding:"10px",borderRadius:"5px"},r[0]=t):t=r[0],r[1]!==o?(l=o.trim(),r[1]=o,r[2]=l):l=r[2],r[3]!==l?(a=(0,n.jsx)("code",{style:t,children:l}),r[3]=l,r[4]=a):a=r[4],a};var eD=l(7563),eE=l(6685),eT=l(5054),eL=l(8446),eO=l(4867),eF=l.n(eO);eL.Z.use(eF());let eW=(0,a.memo)(e=>{let t,l,a,r,o,i,c,d,u,m,h,f,x=(0,s.c)(17),{data:p}=e;return x[0]===Symbol.for("react.memo_cache_sentinel")?(l={trigger:"axis",confine:!0},a=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],x[0]=l,x[1]=a):(l=x[0],a=x[1]),x[2]!==p?(r=p.map(eK),x[2]=p,x[3]=r):r=x[3],x[4]!==r?(o={data:r,orient:"vertical",right:10,top:"center"},x[4]=r,x[5]=o):o=x[5],x[6]===Symbol.for("react.memo_cache_sentinel")?(i={left:"5%",right:"15%",bottom:"10%",top:"10%",containLabel:!0},c={type:"value",name:"X Axis",nameLocation:"middle",nameGap:30},d={type:"value",name:"Y Axis",min:-1,max:1,nameLocation:"middle",nameGap:50},x[6]=i,x[7]=c,x[8]=d):(i=x[6],c=x[7],d=x[8]),x[9]!==p?(u=p.map(eU),x[9]=p,x[10]=u):u=x[10],x[11]!==o||x[12]!==u?(m={tooltip:l,color:a,legend:o,grid:i,xAxis:c,yAxis:d,series:u},x[11]=o,x[12]=u,x[13]=m):m=x[13],t=m,x[14]===Symbol.for("react.memo_cache_sentinel")?(h={height:"100%",minHeight:"300px",width:"100%"},x[14]=h):h=x[14],x[15]!==t?(f=(0,n.jsx)(eE.Z,{lazyUpdate:!0,option:t,style:h}),x[15]=t,x[16]=f):f=x[16],f}),eP=(0,a.memo)(e=>{let t,l,a,r,o,i,c,d,u,m,h,f,x=(0,s.c)(21),{prettyName:p,data:g,keys:v}=e;if(x[0]===Symbol.for("react.memo_cache_sentinel")?(l={confine:!0,trigger:"axis",axisPointer:{type:"shadow"}},a={containLabel:!1},x[0]=l,x[1]=a):(l=x[0],a=x[1]),x[2]===Symbol.for("react.memo_cache_sentinel")?(r={rotate:45,formatter:eH},x[2]=r):r=x[2],x[3]!==v?(o={data:v,axisLabel:r},x[3]=v,x[4]=o):o=x[4],x[5]===Symbol.for("react.memo_cache_sentinel")?(i={type:"value"},x[5]=i):i=x[5],x[6]!==g||x[7]!==v){let e;x[9]!==g?(e=e=>g[e],x[9]=g,x[10]=e):e=x[10],c=v.map(e),x[6]=g,x[7]=v,x[8]=c}else c=x[8];return x[11]===Symbol.for("react.memo_cache_sentinel")?(d={focus:"series",blurScope:"coordinateSystem"},x[11]=d):d=x[11],x[12]!==p||x[13]!==c?(u={name:p,type:"bar",data:c,emphasis:d,animationDuration:300},x[12]=p,x[13]=c,x[14]=u):u=x[14],x[15]!==o||x[16]!==u?(m={tooltip:l,grid:a,xAxis:o,yAxis:i,series:u},x[15]=o,x[16]=u,x[17]=m):m=x[17],t=m,x[18]===Symbol.for("react.memo_cache_sentinel")?(h={height:"100%",minHeight:"300px",width:"100%"},x[18]=h):h=x[18],x[19]!==t?(f=(0,n.jsx)(eE.Z,{lazyUpdate:!0,option:t,style:h}),x[19]=t,x[20]=f):f=x[20],f}),eR=(0,a.memo)(e=>{let t,l,a,r,o,i,c,d,u,m,h=(0,s.c)(15),{data:f,onNodeClick:x}=e;h[0]!==f.links||h[1]!==f.nodes?(l=eT.Z.normalizeElements({nodes:f.nodes.map(eB),edges:f.links.map(eq)}),h[0]=f.links,h[1]=f.nodes,h[2]=l):l=h[2],t=l,h[3]===Symbol.for("react.memo_cache_sentinel")?(r={selector:"node",style:{"background-color":"data(color)",width:"data(size)",height:"data(size)","text-valign":"top","text-halign":"center","text-margin-y":-5,"font-size":"12px",color:"#000000","text-outline-width":2,"text-outline-color":"#ffffff","z-index":1,label:""}},h[3]=r):r=h[3],h[4]===Symbol.for("react.memo_cache_sentinel")?(o=[r,{selector:"edge",style:{width:2,"line-color":"#cccccc","target-arrow-color":"#cccccc","target-arrow-shape":"triangle","curve-style":"bezier"}}],h[4]=o):o=h[4],a=o,h[5]===Symbol.for("react.memo_cache_sentinel")?(i={height:"100%",minHeight:"300px",width:"100%"},h[5]=i):i=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(c={width:"100%",height:"100%"},h[6]=c):c=h[6];let p=f.nodes.length>1e3?"random":"fcose";h[7]!==p?(d={name:p,animate:!1,samplingType:!1,animationDuration:1500,fit:!0,padding:30},h[7]=p,h[8]=d):d=h[8];let g=d;return h[9]!==x?(u=e=>{e.on("tap","node",e=>{let t=e.target;x&&x({id:t.id()},e)}),e.on("mouseover","node",eQ),e.on("mouseout","node",eJ)},h[9]=x,h[10]=u):u=h[10],h[11]!==g||h[12]!==u||h[13]!==t?(m=(0,n.jsx)(P.Z,{sx:i,children:(0,n.jsx)(eT.Z,{elements:t,style:c,stylesheet:a,layout:g,cy:u})}),h[11]=g,h[12]=u,h[13]=t,h[14]=m):m=h[14],m}),eV=e=>{let t,l=(0,s.c)(22),{viewId:r,content:o,onNodeClick:i,prettyName:c}=e;l[0]!==i?(t=(e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),(null==e?void 0:e.id)&&i(e.id.includes("@")?e.id.split("@")[1]:e.id)},l[0]=i,l[1]=t):t=l[1];let d=t;if("char_example_xy"===r){let e,t,r;l[2]!==o?(e=function(e){if(!e)return[];let t=[];for(let l of Object.keys(e)){let n=(null==e?void 0:e[l])||{},a={id:l,data:n.map(eY)};t.push(a)}return t}(o),l[2]=o,l[3]=e):e=l[3];let i=e;return l[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(Q.Z,{}),l[4]=t):t=l[4],l[5]!==i?(r=(0,n.jsx)("div",{className:"graph",onClick:e$,children:(0,n.jsx)(a.Suspense,{fallback:t,children:(0,n.jsx)(eW,{data:i})})}),l[5]=i,l[6]=r):r=l[6],r}if(r.endsWith("_distribution")){let e,t,r,i;l[7]!==o?(e=function(e){if(!e)return{};let t={};for(let l of Object.values(e))for(let e of Object.keys(l))t[e]=(null==l?void 0:l[e])||{};return t}(o),l[7]=o,l[8]=e):e=l[8];let s=e;l[9]!==o?(t=function(e){if(!e||0===Object.values(e).length)return[];let t=new Set;return Object.values(e).forEach(e=>{Object.keys(e).forEach(e=>t.add(e))}),Array.from(t).sort()}(o),l[9]=o,l[10]=t):t=l[10];let d=t;return l[11]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(Q.Z,{}),l[11]=r):r=l[11],l[12]!==s||l[13]!==d||l[14]!==c?(i=(0,n.jsx)("div",{className:"graph",onClick:eX,children:(0,n.jsx)(a.Suspense,{fallback:r,children:(0,n.jsx)(eP,{prettyName:c,data:s,keys:d})})}),l[12]=s,l[13]=d,l[14]=c,l[15]=i):i=l[15],i}if(!r.endsWith("nivo_view"))return null;{let e,t,r;l[16]!==o?(e=function(e){if(!e||!e.nodes)return{nodes:[],links:[]};let t=new Map;e.nodes.forEach(e=>{let l=e.id||e.label,n=(0,m._)((0,u._)({},e),{id:l,label:e.label||l,size:e.size||30,color:e.color||"#1f77b4"});t.has(n.id)||t.set(n.id,n)});let l=e.links.map(eG);return{nodes:Array.from(t.values()),links:l}}(o),l[16]=o,l[17]=e):e=l[17];let i=e;return l[18]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(Q.Z,{}),l[18]=t):t=l[18],l[19]!==d||l[20]!==i?(r=(0,n.jsx)("div",{className:"graph",onClick:e0,children:(0,n.jsx)(a.Suspense,{fallback:t,children:(0,n.jsx)(eR,{data:i,onNodeClick:d})})}),l[19]=d,l[20]=i,l[21]=r):r=l[21],r}};function eK(e){return e.id}function eM(e){return[e.x,e.y]}function eU(e){return{name:e.id,type:"line",data:e.data.map(eM),showSymbol:!1,symbolSize:8,emphasis:{focus:"series"},animationDuration:300}}function eH(e){return e.length>10?"".concat(e.substring(0,10),"..."):e}function eB(e){return{data:{id:e.id,label:e.label,size:e.size||30,color:e.color||"#1f77b4",x:e.x,y:e.y}}}function eq(e){return{data:{source:e.source,target:e.target}}}function eQ(e){let t=e.target;t.style("label",t.data("label"))}function eJ(e){e.target.style("label","")}function eY(e){let t=Object.keys(e)[0];return{x:parseFloat(t),y:parseFloat(e[t])}}function eG(e){let t="object"==typeof e.source?e.source.id||e.source.label:e.source,l="object"==typeof e.target?e.target.id||e.target.label:e.target;return(0,m._)((0,u._)({},e),{source:t,target:l})}function e$(e){e.stopPropagation(),e.preventDefault()}function eX(e){e.stopPropagation(),e.preventDefault()}function e0(e){e.stopPropagation(),e.preventDefault()}var e1=l(5648),e2=l(632);let e4=e=>{let t,l,a,r=(0,s.c)(9),{content:o}=e;if(!Array.isArray(null==o?void 0:o.attributes)){let e,t;r[0]===Symbol.for("react.memo_cache_sentinel")?(e={p:2},r[0]=e):e=r[0];let l=typeof(null==o?void 0:o.attributes);return r[1]!==l?(t=(0,n.jsxs)(U.Z,{sx:e,color:"error",children:["Error: Expected an array for 'class_attribute_field' data, but received type ",l,"."]}),r[1]=l,r[2]=t):t=r[2],t}if((null==o?void 0:o.attributes.length)===0){let e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(U.Z,{sx:{p:2},children:"No output nodes connected."}),r[3]=e):e=r[3],e}if(r[4]===Symbol.for("react.memo_cache_sentinel")?(t={p:1,display:"flex",flexWrap:"wrap",gap:2},r[4]=t):t=r[4],r[5]!==(null==o?void 0:o.attributes)){var i;l=null==o||null==(i=o.attributes)?void 0:i.map(e3),r[5]=null==o?void 0:o.attributes,r[6]=l}else l=r[6];return r[7]!==l?(a=(0,n.jsx)(P.Z,{sx:t,children:l}),r[7]=l,r[8]=a):a=r[8],a};function e3(e){var t;let l=(null==(t=e.mimeType)?void 0:t.startsWith("image/"))&&e.value,a=Object.hasOwn(e,"value")&&null!==e.value&&void 0!==e.value;return"graph"===e.name?null:(0,n.jsxs)(ep.Z,{sx:{minWidth:275,maxWidth:350,display:"flex",flexDirection:"column"},children:[(0,n.jsxs)(ex.Z,{sx:{flexGrow:1},children:[(0,n.jsx)(U.Z,{variant:"h6",component:"div",sx:{wordBreak:"break-word"},children:e.name}),l&&(0,n.jsx)(e1.Z,{component:"img",sx:{maxHeight:200,width:"auto",objectFit:"contain",mt:1,border:"1px solid #eee"},image:"data:".concat(e.mimeType,";base64,").concat(e.value),alt:"Output value for ".concat(e.name)}),!l&&a&&(0,n.jsx)(U.Z,{variant:"body2",component:"pre",sx:{whiteSpace:"pre-wrap",wordBreak:"break-all",mt:1,p:1,backgroundColor:"#f5f5f5",borderRadius:1},children:"object"==typeof e.value?JSON.stringify(e.value,null,2):String(e.value)}),!a&&!l&&(0,n.jsx)(U.Z,{variant:"body2",sx:{fontStyle:"italic",mt:1},children:"(No displayable value)"})]}),"true"===e.editable&&(0,n.jsx)(e2.Z,{children:(0,n.jsx)(H.Z,{size:"small",onClick:t=>{t.stopPropagation(),alert("Edit action for: ".concat(e.name," (ID: ").concat(e.id,") - Not implemented yet."))},children:"Edit"})})]},e.id)}let e5=e=>{let t,l,a,r,o,i,c,d,u=(0,s.c)(19),{content:m,jumpToNode:h}=e;u[0]!==h?(t=(e,t)=>{e.stopPropagation(),e.preventDefault(),h(t)},u[0]=h,u[1]=t):t=u[1];let f=t;return u[2]===Symbol.for("react.memo_cache_sentinel")?(l={mb:2},u[2]=l):l=u[2],u[3]!==m.ins?(a=Object.keys(m.ins),u[3]=m.ins,u[4]=a):a=u[4],u[5]!==m.ins||u[6]!==f||u[7]!==a?(r=(0,n.jsx)(P.Z,{sx:l,children:a.map(e=>(0,n.jsxs)(H.Z,{onClick:t=>f(t,m.ins[e]),variant:"contained",sx:{bgcolor:"#3949ab",color:"#fff",mr:1,mb:1,"&:hover":{bgcolor:"#5c6bc0"}},children:[e," (",m.ins[e],")"]},e))}),u[5]=m.ins,u[6]=f,u[7]=a,u[8]=r):r=u[8],u[9]===Symbol.for("react.memo_cache_sentinel")?(o={paddingY:"10px"},u[9]=o):o=u[9],u[10]!==m.outs?(i=Object.keys(m.outs),u[10]=m.outs,u[11]=i):i=u[11],u[12]!==m.outs||u[13]!==f||u[14]!==i?(c=(0,n.jsx)(P.Z,{sx:o,children:i.map(e=>(0,n.jsxs)(H.Z,{onClick:t=>f(t,m.outs[e]),variant:"contained",sx:{bgcolor:"#00897b",color:"#fff",mr:1,mb:1,"&:hover":{bgcolor:"#26a69a"}},children:[e," (",m.outs[e],")"]},e))}),u[12]=m.outs,u[13]=f,u[14]=i,u[15]=c):c=u[15],u[16]!==r||u[17]!==c?(d=(0,n.jsxs)(n.Fragment,{children:[r,c]}),u[16]=r,u[17]=c,u[18]=d):d=u[18],d},e8=e=>{let t,l,r,o=(0,s.c)(88),{viewId:i,content:c,contentType:d,backgroundColor:u,jumpToNode:m,hexColor:h,onHexColorChange:f,prettyName:x}=e,p=(0,a.useRef)(null);o[0]!==c||o[1]!==d?(t=()=>{"text/dot"===d&&p.current&&(0,eD.f)(p.current,{engine:"dot",fit:!0,zoom:!0}).renderDot(c)},o[0]=c,o[1]=d,o[2]=t):t=o[2];let g=t;if(o[3]!==g?(l=()=>{g()},r=[g],o[3]=g,o[4]=l,o[5]=r):(l=o[4],r=o[5]),(0,a.useEffect)(l,r),!c){let e;return o[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"error-message",children:"No content available."}),o[6]=e):e=o[6],e}if("application/json"===d)if("class_attribute_field"===i){let e;return o[7]!==c?(e=(0,n.jsx)(e4,{content:c}),o[7]=c,o[8]=e):e=o[8],e}else if("char_example_xy"===i||i.endsWith("_distribution")||i.endsWith("nivo_view")){let e,t;return o[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(Q.Z,{}),o[9]=e):e=o[9],o[10]!==c||o[11]!==m||o[12]!==x||o[13]!==i?(t=(0,n.jsx)("div",{className:"graph",onClick:e6,children:(0,n.jsx)(a.Suspense,{fallback:e,children:(0,n.jsx)(eV,{viewId:i,content:c,onNodeClick:m,prettyName:x})})}),o[10]=c,o[11]=m,o[12]=x,o[13]=i,o[14]=t):t=o[14],t}else if("bnode_navigator"===i){let e;return o[15]!==c||o[16]!==m?(e=(0,n.jsx)(e5,{content:c,jumpToNode:m}),o[15]=c,o[16]=m,o[17]=e):e=o[17],e}else{let e,t,l,r;return o[18]!==u?(e={background:u},o[18]=u,o[19]=e):e=o[19],o[20]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(Q.Z,{}),o[20]=t):t=o[20],o[21]!==c?(l=(0,n.jsx)(a.Suspense,{fallback:t,children:(0,n.jsx)(eZ.gc,{data:c,shouldExpandNode:eZ.T})}),o[21]=c,o[22]=l):l=o[22],o[23]!==e||o[24]!==l?(r=(0,n.jsx)("div",{className:"content-container",style:e,children:l}),o[23]=e,o[24]=l,o[25]=r):r=o[25],r}if("text/dot"===d){let e,t,l;return o[26]!==u?(e={background:u},o[26]=u,o[27]=e):e=o[27],o[28]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("div",{ref:p}),o[28]=t):t=o[28],o[29]!==e?(l=(0,n.jsx)("div",{className:"content-container graphviz-container",style:e,children:t}),o[29]=e,o[30]=l):l=o[30],l}if("text/html"===d){let e,t,l;return o[31]!==u?(e={background:u},o[31]=u,o[32]=e):e=o[32],o[33]!==c?(t=(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:c}}),o[33]=c,o[34]=t):t=o[34],o[35]!==e||o[36]!==t?(l=(0,n.jsx)("div",{className:"content-container html-content",style:e,children:t}),o[35]=e,o[36]=t,o[37]=l):l=o[37],l}if("image/svg"===d){let e,t,l,a;return o[38]===Symbol.for("react.memo_cache_sentinel")?(e={background:"transparent"},o[38]=e):e=o[38],o[39]!==c?(t={__html:c},o[39]=c,o[40]=t):t=o[40],o[41]===Symbol.for("react.memo_cache_sentinel")?(l={background:"transparent"},o[41]=l):l=o[41],o[42]!==t?(a=(0,n.jsx)("div",{className:"content-container",style:e,children:(0,n.jsx)("div",{dangerouslySetInnerHTML:t,style:l})}),o[42]=t,o[43]=a):a=o[43],a}if("image/svg+xml"===d){let e,t,l;o[44]===Symbol.for("react.memo_cache_sentinel")?(e={background:"transparent"},o[44]=e):e=o[44];let a="data:image/svg+xml;base64,".concat(c);return o[45]===Symbol.for("react.memo_cache_sentinel")?(t={background:"transparent"},o[45]=t):t=o[45],o[46]!==a?(l=(0,n.jsx)("div",{className:"content-container",style:e,children:(0,n.jsx)("img",{src:a,alt:"Graphviz",style:t})}),o[46]=a,o[47]=l):l=o[47],l}else if("text/plain"===d){let e,t,l;return o[48]!==u?(e={background:u},o[48]=u,o[49]=e):e=o[49],o[50]!==c?(t=(0,n.jsx)("pre",{children:c}),o[50]=c,o[51]=t):t=o[51],o[52]!==e||o[53]!==t?(l=(0,n.jsx)("div",{className:"content-container",style:e,children:t}),o[52]=e,o[53]=t,o[54]=l):l=o[54],l}else if("image/png"===d||"image/jpeg"===d){let e,t,l;o[55]!==u?(e={background:u},o[55]=u,o[56]=e):e=o[56];let a="data:".concat(d,";base64,").concat(c);return o[57]!==a?(t=(0,n.jsx)("img",{src:a,alt:"Content"}),o[57]=a,o[58]=t):t=o[58],o[59]!==e||o[60]!==t?(l=(0,n.jsx)("div",{className:"content-container",style:e,children:t}),o[59]=e,o[60]=t,o[61]=l):l=o[61],l}else if("image/jsondot"===d){let e,t,l,r;return o[62]!==u?(e={background:u},o[62]=u,o[63]=e):e=o[63],o[64]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(Q.Z,{}),o[64]=t):t=o[64],o[65]!==c?(l=(0,n.jsx)(a.Suspense,{fallback:t,children:(0,n.jsx)(eZ.gc,{data:c})}),o[65]=c,o[66]=l):l=o[66],o[67]!==e||o[68]!==l?(r=(0,n.jsx)("div",{className:"content-container",style:e,children:l}),o[67]=e,o[68]=l,o[69]=r):r=o[69],r}else if("text/java"===d){let e,t,l,r;return o[70]!==u?(e={background:u},o[70]=u,o[71]=e):e=o[71],o[72]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(Q.Z,{}),o[72]=t):t=o[72],o[73]!==c?(l=(0,n.jsx)(a.Suspense,{fallback:t,children:(0,n.jsx)(ez,{language:"java",code:c})}),o[73]=c,o[74]=l):l=o[74],o[75]!==e||o[76]!==l?(r=(0,n.jsx)("div",{className:"content-container",style:e,children:l}),o[75]=e,o[76]=l,o[77]=r):r=o[77],r}else if("text/hex"===d){let e,t,l;return o[78]!==u?(e={background:u},o[78]=u,o[79]=e):e=o[79],o[80]!==h||o[81]!==f?(t=(0,n.jsx)(eA.AI,{color:h,disableAlpha:!0,onChangeComplete:f}),o[80]=h,o[81]=f,o[82]=t):t=o[82],o[83]!==e||o[84]!==t?(l=(0,n.jsx)("div",{className:"content-container",style:e,children:t}),o[83]=e,o[84]=t,o[85]=l):l=o[85],l}else{let e;return o[86]!==d?(e=(0,n.jsxs)("div",{className:"error-message",children:["Unsupported content type: ",d]}),o[86]=d,o[87]=e):e=o[87],e}};function e6(e){e.stopPropagation(),e.preventDefault()}let e7=e=>{var t,l,a,r,o,i,c,d,u,m;let h,f,x,p,g,v,b=(0,s.c)(24),{loading:y,error:j,rawApiData:_,dataContent:S,backgroundColor:w,jumpToNode:Z,hexColor:C,onHexColorChange:k,viewId:N}=e;if(h=null==S||null==(a=S.results)||null==(l=a[0])||null==(t=l.result)?void 0:t.data,f=null==S||null==(i=S.results)||null==(o=i[0])||null==(r=o.result)?void 0:r.contentType,x=null==S||null==(d=S.results)||null==(c=d[0])?void 0:c.pretty_name,y){let e;return b[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(P.Z,{className:"view-container",sx:{position:"relative",padding:2,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px"},children:(0,n.jsx)(Q.Z,{})}),b[0]=e):e=b[0],e}if(j){let e,t,l;return b[1]===Symbol.for("react.memo_cache_sentinel")?(e={position:"relative",padding:2},b[1]=e):e=b[1],b[2]===Symbol.for("react.memo_cache_sentinel")?(t={marginTop:"40px"},b[2]=t):t=b[2],b[3]!==j.message?(l=(0,n.jsx)(P.Z,{className:"view-container information-page",sx:e,children:(0,n.jsxs)("div",{className:"error-message",style:t,children:["Error fetching data: ",j.message]})}),b[3]=j.message,b[4]=l):l=b[4],l}if(!_){let e,t;return b[5]===Symbol.for("react.memo_cache_sentinel")?(e={position:"relative",padding:2},b[5]=e):e=b[5],b[6]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(P.Z,{className:"view-container information-page",sx:e,children:(0,n.jsx)("div",{className:"error-message",style:{marginTop:"40px"},children:"No data available."})}),b[6]=t):t=b[6],t}if((null==S||null==(m=S.results)||null==(u=m[0])?void 0:u.error)!==void 0){let e,t,l;return b[7]===Symbol.for("react.memo_cache_sentinel")?(e={position:"relative",padding:2},b[7]=e):e=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(t={marginTop:"40px"},b[8]=t):t=b[8],b[9]!==S.results[0].error?(l=(0,n.jsx)(P.Z,{className:"view-container information-page",sx:e,children:(0,n.jsxs)("div",{className:"error-message",style:t,children:["Backend Error: ",S.results[0].error]})}),b[9]=S.results[0].error,b[10]=l):l=b[10],l}if(!h||!f){let e,t;return b[11]===Symbol.for("react.memo_cache_sentinel")?(e={position:"relative",padding:2},b[11]=e):e=b[11],b[12]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(P.Z,{className:"view-container information-page",sx:e,children:(0,n.jsx)("div",{className:"error-message",style:{marginTop:"40px"},children:"Result data or content type missing in the response."})}),b[12]=t):t=b[12],t}return b[13]===Symbol.for("react.memo_cache_sentinel")?(p={position:"relative",padding:2,flex:1,minHeight:"300px",display:"flex",flexDirection:"column",overflow:"hidden"},b[13]=p):p=b[13],b[14]===Symbol.for("react.memo_cache_sentinel")?(g={mt:4,flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},b[14]=g):g=b[14],b[15]!==w||b[16]!==C||b[17]!==Z||b[18]!==k||b[19]!==x||b[20]!==f||b[21]!==h||b[22]!==N?(v=(0,n.jsx)(P.Z,{sx:p,children:(0,n.jsx)(P.Z,{sx:g,children:(0,n.jsx)(e8,{viewId:N,content:h,contentType:f,backgroundColor:w,jumpToNode:Z,hexColor:C,onHexColorChange:k,prettyName:x})})}),b[15]=w,b[16]=C,b[17]=Z,b[18]=k,b[19]=x,b[20]=f,b[21]=h,b[22]=N,b[23]=v):v=b[23],v},e9=e=>{var t,l,r,o;let i,c,d,u,m,h,f,x,p,g=(0,s.c)(26),{viewId:v,sx:y}=e,{data:_,isLoading:S,error:w}=b(v),Z=(0,E.NL)(),[C,k]=(0,a.useState)(!1),[N,I]=(0,a.useState)("#ffffff"),A=j("update_colour");g[0]!==A||g[1]!==v?(i=e=>{I(e.hex),A.mutate({view_id:v,value:e.hex})},g[0]=A,g[1]=v,g[2]=i):i=g[2];let z=i;g[3]!==Z?(c={onSuccess:async()=>{await Z.invalidateQueries()}},g[3]=Z,g[4]=c):c=g[4];let D=j("jump",c);g[5]!==D?(d=e=>{D.mutate({node_id:e})},g[5]=D,g[6]=d):d=g[6];let T=d;g[7]!==_?(u=null!=_?_:{data:void 0},g[7]=_,g[8]=u):u=g[8];let{data:L}=u;null==y||y.bgcolor,m=(null==y?void 0:y.bgcolor)||"transparent";let O=null==_||null==(o=_.data)||null==(r=o.results)||null==(l=r[0])||null==(t=l.result)?void 0:t.data;return g[9]===Symbol.for("react.memo_cache_sentinel")?(h={height:"100%",display:"flex",flexDirection:"column"},g[9]=h):h=g[9],g[10]!==O||g[11]!==C?(f=(0,n.jsx)(eI,{dataForModal:O,isModalOpen:C,setIsModalOpen:k}),g[10]=O,g[11]=C,g[12]=f):f=g[12],g[13]!==m||g[14]!==L||g[15]!==w||g[16]!==z||g[17]!==N||g[18]!==T||g[19]!==S||g[20]!==_||g[21]!==v?(x=(0,n.jsx)(e7,{loading:S,error:w,rawApiData:_,dataContent:L,backgroundColor:m,jumpToNode:T,hexColor:N,onHexColorChange:z,viewId:v}),g[13]=m,g[14]=L,g[15]=w,g[16]=z,g[17]=N,g[18]=T,g[19]=S,g[20]=_,g[21]=v,g[22]=x):x=g[22],g[23]!==f||g[24]!==x?(p=(0,n.jsxs)(P.Z,{className:"view-container",sx:h,children:[f,x]}),g[23]=f,g[24]=x,g[25]=p):p=g[25],p},te=(0,a.memo)(e=>{let t,l,r,o,i,c,d,u,m,h,f,x,p,g,v,b,y,j,_,S,w=(0,s.c)(41),{view:Z,onClick:C,handleViewToggle:k}=e,N="technical"===Z.type?"#fff9c4":"#ffffff";w[0]!==N?(t={cursor:"pointer",aspectRatio:"1",border:"1px solid #e0e0e0",borderRadius:2,display:"flex",flexDirection:"column",bgcolor:N},w[0]=N,w[1]=t):t=w[1];let I="technical"===Z.type?"#fff8b0":"#f5f5f5";w[2]!==I?(l={height:"40px",width:"100%",bgcolor:I,borderBottom:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",cursor:"grab"},w[2]=I,w[3]=l):l=w[3],w[4]===Symbol.for("react.memo_cache_sentinel")?(r={color:"#757575"},w[4]=r):r=w[4];let A="".concat(Z.pretty_name," - ").concat(Z.description);w[5]!==A?(o=(0,n.jsx)(U.Z,{className:"DragHere",variant:"caption",sx:r,children:A}),w[5]=A,w[6]=o):o=w[6],w[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(ej.Z,{}),w[7]=i):i=w[7],w[8]!==C?(c=(0,n.jsxs)("button",{type:"button",className:"expand-card",onClick:C,"aria-label":"expand",children:[" ",i," "]}),w[8]=C,w[9]=c):c=w[9],w[10]!==k||w[11]!==Z.name?(d=e=>{k(Z.name)},w[10]=k,w[11]=Z.name,w[12]=d):d=w[12],w[13]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsx)(ey.Z,{}),w[13]=u):u=w[13],w[14]!==d?(m=(0,n.jsxs)("button",{type:"button",className:"erased-card",onClick:d,children:[" ",u," "]}),w[14]=d,w[15]=m):m=w[15],w[16]!==m||w[17]!==l||w[18]!==o||w[19]!==c?(h=(0,n.jsxs)(P.Z,{sx:l,children:[o,c,m]}),w[16]=m,w[17]=l,w[18]=o,w[19]=c,w[20]=h):h=w[20],w[21]===Symbol.for("react.memo_cache_sentinel")?(f={xs:"12px",sm:"16px"},w[21]=f):f=w[21];let z="technical"===Z.type?"#fff9c4":"#ffffff";return w[22]!==z?(x={padding:f,height:"calc(100% - 40px)",display:"flex",flexDirection:"column",overflow:"hidden",bgcolor:z},w[22]=z,w[23]=x):x=w[23],w[24]===Symbol.for("react.memo_cache_sentinel")?(p={width:"6px"},g={bgcolor:"#3f51b5",borderRadius:"3px"},v={bgcolor:"#e8eaf6"},w[24]=p,w[25]=g,w[26]=v):(p=w[24],g=w[25],v=w[26]),w[27]===Symbol.for("react.memo_cache_sentinel")?(b={flex:1,overflow:"auto",color:"#424242",msOverflowStyle:"none",scrollbarWidth:"thin",scrollbarColor:"#3f51b5 #e8eaf6","&::-webkit-scrollbar":p,"&::-webkit-scrollbar-thumb":g,"&::-webkit-scrollbar-track":v,wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap",maxWidth:"100%",fontSize:{xs:"0.75rem",sm:"0.875rem"}},w[27]=b):b=w[27],w[28]!==Z.error||w[29]!==Z.name||w[30]!==Z.type?(y=Z.error?Z.error:(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading view..."}),children:(0,n.jsx)(e9,{viewId:Z.name.replaceAll(" ","_"),sx:{bgcolor:"technical"===Z.type?"#fff9c4":"#ffffff",width:"100%"}})}),w[28]=Z.error,w[29]=Z.name,w[30]=Z.type,w[31]=y):y=w[31],w[32]!==y?(j=(0,n.jsx)(P.Z,{sx:b,children:y}),w[32]=y,w[33]=j):j=w[33],w[34]!==x||w[35]!==j?(_=(0,n.jsx)(ex.Z,{sx:x,children:j}),w[34]=x,w[35]=j,w[36]=_):_=w[36],w[37]!==h||w[38]!==t||w[39]!==_?(S=(0,n.jsxs)(ep.Z,{sx:t,children:[h,_]}),w[37]=h,w[38]=t,w[39]=_,w[40]=S):S=w[40],S});function tt(){let e=localStorage.getItem("showTechnicalViews");return!!e&&JSON.parse(e)}function tl(){let e=window.innerWidth;return e<900?1:e<1600?2:e<2100?3:4}function tn(e){return"technical"!==e.type}function ta(e){return e.name}function tr(e){return"technical"===e.type}function to(e){return"technical"===e.type}function ti(e){return e.name}function ts(e){return Math.max(e-1,1)}var tc=l(2903),td=l(548),tu=l(4651),tm=l(4672),th=l(5307),tf=l(1001),tx=l(5661),tp=l(1967),tg=l(7745),tv=l(9e3),tb=l(3627),ty=l(1731);let tj=a.memo(e=>{let{show:t,selectedField:l,existingNodeList:r,loadingExistingNodes:o,onClose:i,onSelectNode:s}=e,[c,d]=(0,a.useState)(""),u=(0,a.useCallback)(e=>{d(e.target.value)},[]),m=(0,a.useCallback)(()=>{i()},[i]),h=(0,a.useMemo)(()=>r.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())),[r,c]),f=(0,a.useCallback)(e=>{s(e,l)},[s,l]);return(0,n.jsx)(eS.Z,{open:t,onClose:m,"aria-labelledby":"existing-node-modal-title","aria-describedby":"existing-node-modal-description",children:(0,n.jsx)(P.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:600,maxHeight:"80vh",bgcolor:"background.paper",boxShadow:24,outline:"none"},children:(0,n.jsxs)(ep.Z,{className:"existing-node-card",sx:{width:"100%",maxHeight:"80vh",overflow:"auto"},children:[(0,n.jsx)(ty.Z,{id:"existing-node-modal-title",title:"Select Existing Node",action:(0,n.jsx)(B.Z,{onClick:m,"aria-label":"close",children:(0,n.jsx)(tb.Z,{})})}),(0,n.jsxs)(ex.Z,{children:[(0,n.jsx)(J.Z,{fullWidth:!0,variant:"outlined",placeholder:"Search nodes...",value:c,onChange:u,sx:{mb:2}}),(0,n.jsx)(P.Z,{className:"node-list",sx:{maxHeight:"50vh",overflow:"auto"},children:o?(0,n.jsxs)(P.Z,{display:"flex",justifyContent:"center",p:2,children:[(0,n.jsx)(Q.Z,{size:24})," ",(0,n.jsx)(U.Z,{sx:{ml:1},children:"Loading nodes..."})]}):(0,n.jsx)(R.Z,{spacing:1,children:h.map(e=>(0,n.jsx)(P.Z,{sx:{p:2,cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>f(e),children:(0,n.jsx)(U.Z,{fontWeight:"bold",children:e.name})},e.id))})})]})]})})})});var t_=l(7484),tS=l.n(t_);let tw=e=>{if(!e)return"";let t=e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").trim();return t.charAt(0).toUpperCase()+t.slice(1)},tZ=(e,t)=>"".concat(e,"@").concat(t),tC=(e,t,l)=>{if((null==l?void 0:l.required)&&(null==t||"string"==typeof t&&""===t.trim()||Array.isArray(t)&&0===t.length))return"Ce champ est requis";if((null==l?void 0:l.min)!==void 0&&"number"==typeof t&&t<l.min)return"La valeur doit \xeatre au moins ".concat(l.min);if((null==l?void 0:l.max)!==void 0&&"number"==typeof t&&t>l.max)return"La valeur doit \xeatre au plus ".concat(l.max);if(null==l?void 0:l.size){let e=Array.isArray(t)||"string"==typeof t?t.length:-1;if(-1!==e){if(void 0!==l.size.min&&e<l.size.min)return"Doit contenir au moins ".concat(l.size.min," caract\xe8res/\xe9l\xe9ments");if(void 0!==l.size.max&&e>l.size.max)return"Doit contenir au plus ".concat(l.size.max," caract\xe8res/\xe9l\xe9ments")}}if((null==l?void 0:l.pattern)&&"string"==typeof t&&!new RegExp(l.pattern).test(t))return"Doit correspondre au mod\xe8le : ".concat(l.pattern);switch(e){case"EmailNode":return"Veuillez entrer une adresse e-mail valide";case"IntNode":return"Veuillez entrer un entier valide";case"PhoneNumberNode":return"Veuillez entrer un num\xe9ro de t\xe9l\xe9phone valide";case"DateNode":return"Veuillez entrer une date valide";default:return"Valeur invalide"}},tk=(e,t,l)=>{let n=!0,a="";if((null==l?void 0:l.required)&&(null==t||"string"==typeof t&&""===t.trim()||Array.isArray(t)&&0===t.length))return{isValid:n=!1,message:a="Ce champ est requis"};if(!(null==l?void 0:l.required)&&(null==t||"string"==typeof t&&""===t.trim()||Array.isArray(t)&&0===t.length))return{isValid:!0,message:""};if((null==l?void 0:l.min)!==void 0&&"number"==typeof t&&t<l.min)return{isValid:n=!1,message:a="La valeur doit \xeatre au moins ".concat(l.min)};if((null==l?void 0:l.max)!==void 0&&"number"==typeof t&&t>l.max)return{isValid:n=!1,message:a="La valeur doit \xeatre au plus ".concat(l.max)};if(null==l?void 0:l.size){let e=Array.isArray(t)||"string"==typeof t?t.length:-1;if(-1!==e){if(void 0!==l.size.min&&e<l.size.min)return{isValid:n=!1,message:a="Doit contenir au moins ".concat(l.size.min," caract\xe8res/\xe9l\xe9ments")};if(void 0!==l.size.max&&e>l.size.max)return{isValid:n=!1,message:a="Doit contenir au plus ".concat(l.size.max," caract\xe8res/\xe9l\xe9ments")}}}if((null==l?void 0:l.pattern)&&"string"==typeof t&&!new RegExp(l.pattern).test(t))return{isValid:n=!1,message:a="Doit correspondre au mod\xe8le : ".concat(l.pattern)};switch(e){case"IntNode":(n=/^-?\d+$/.test(t))||(a="Veuillez entrer un entier valide");break;case"DateNode":(n=tS()(t).isValid())||(a="Veuillez entrer une date valide")}return{isValid:n,message:a}},tN=["StringNode","EmailNode","PhoneNumberNode","IntNode"],tI=["BooleanNode"],tA=["DateNode"],tz=["ImageNode"],tD=["DropdownNode"],tE=["RadioNode"],tT=["ListCheckboxNode"],tL=["FileNode"],tO=["ListNode","SetNode"],tF=["ColorNode"],tW=[...tN,...tL,...tI,...tT,...tA,...tD,...tE,...tF];var tP=l(3892),tR=l(2719),tV=l(9298),tK=l(8848);let tM=e=>{let t,l,a,r,o,i,c,d,m,h,f,x=(0,s.c)(24);x[0]!==e?(c=(0,tK._)(e,["field","fieldKey","value","onFocus","onChange","error","helperText"]),{field:l,fieldKey:a,value:d,onFocus:i,onChange:o,error:t,helperText:r}=e,x[0]=e,x[1]=t,x[2]=l,x[3]=a,x[4]=r,x[5]=o,x[6]=i,x[7]=c,x[8]=d):(t=x[1],l=x[2],a=x[3],r=x[4],o=x[5],i=x[6],c=x[7],d=x[8]),x[9]!==l.type||x[10]!==l.validations?(m={},l.validations&&("IntNode"===l.type&&void 0!==l.validations.min&&(m.min=l.validations.min),"IntNode"===l.type&&void 0!==l.validations.max&&(m.max=l.validations.max),l.validations.size&&(void 0!==l.validations.size.min&&(m.minLength=l.validations.size.min),void 0!==l.validations.size.max&&(m.maxLength=l.validations.size.max))),x[9]=l.type,x[10]=l.validations,x[11]=m):m=x[11];let p=function(e){switch(e){case"EmailNode":return"email";case"PhoneNumberNode":return"tel";case"IntNode":return"number";default:return"text"}}(l.type),g=d||"";return x[12]!==o?(h=e=>o(e.target.value),x[12]=o,x[13]=h):h=x[13],x[14]!==t||x[15]!==a||x[16]!==r||x[17]!==m||x[18]!==i||x[19]!==c||x[20]!==p||x[21]!==g||x[22]!==h?(f=(0,n.jsx)(J.Z,(0,u._)({fullWidth:!0,id:a,variant:"outlined",type:p,value:g,onFocus:i,onChange:h,error:t,helperText:r,inputProps:m},c)),x[14]=t,x[15]=a,x[16]=r,x[17]=m,x[18]=i,x[19]=c,x[20]=p,x[21]=g,x[22]=h,x[23]=f):f=x[23],f};var tU=l(2095),tH=l(5714);let tB=e=>{let t,l,a,r,o,i,c,d,h,f,x,p,g,v,b,y=(0,s.c)(31);if(y[0]!==e){let{fieldKey:n,value:s,onChange:c,error:d,helperText:u,field:m}=e,h=(0,tK._)(e,["fieldKey","value","onChange","error","helperText","field"]);i=s,r=c,t=d,a=u,l=m,o=h,y[0]=e,y[1]=t,y[2]=l,y[3]=a,y[4]=r,y[5]=o,y[6]=i}else t=y[1],l=y[2],a=y[3],r=y[4],o=y[5],i=y[6];if(null==l?void 0:l.validations){if(void 0!==l.validations.min){let e;y[7]!==l.validations.min?(e=tS()(l.validations.min),y[7]=l.validations.min,y[8]=e):e=y[8],c=e}if(void 0!==l.validations.max){let e;y[9]!==l.validations.max?(e=tS()(l.validations.max),y[9]=l.validations.max,y[10]=e):e=y[10],d=e}}return y[11]!==i?(h=i?tS()(i):null,y[11]=i,y[12]=h):h=y[12],y[13]!==r?(f=e=>r(e),y[13]=r,y[14]=f):f=y[14],y[15]===Symbol.for("react.memo_cache_sentinel")?(x={width:"100%"},y[15]=x):x=y[15],y[16]!==t?(p={textField:{size:"small",error:t}},y[16]=t,y[17]=p):p=y[17],y[18]!==d||y[19]!==c||y[20]!==o||y[21]!==h||y[22]!==f||y[23]!==p?(g=(0,n.jsx)(tU.M,(0,m._)((0,u._)({value:h,onChange:f,sx:x,minDate:c,maxDate:d},o),{slotProps:p})),y[18]=d,y[19]=c,y[20]=o,y[21]=h,y[22]=f,y[23]=p,y[24]=g):g=y[24],y[25]!==a?(v=a&&(0,n.jsx)(tH.Z,{children:a}),y[25]=a,y[26]=v):v=y[26],y[27]!==t||y[28]!==g||y[29]!==v?(b=(0,n.jsxs)(tP.Z,{fullWidth:!0,error:t,children:[g,v]}),y[27]=t,y[28]=g,y[29]=v,y[30]=b):b=y[30],b};var tq=l(9380);let tQ=e=>{let t,l,a,r,o,i,c=(0,s.c)(12);if(c[0]!==e){let{fieldKey:n,value:o,onFocus:i,onChange:s}=e,d=(0,tK._)(e,["fieldKey","value","onFocus","onChange"]);t=n,r=o,l=s,a=d,c[0]=e,c[1]=t,c[2]=l,c[3]=a,c[4]=r}else t=c[1],l=c[2],a=c[3],r=c[4];let d=!!r;return c[5]!==l?(o=e=>l(e.target.checked),c[5]=l,c[6]=o):o=c[6],c[7]!==t||c[8]!==a||c[9]!==d||c[10]!==o?(i=(0,n.jsx)(tq.Z,{control:(0,n.jsx)(eg.Z,(0,u._)({id:t,checked:d,onChange:o},a)),label:""}),c[7]=t,c[8]=a,c[9]=d,c[10]=o,c[11]=i):i=c[11],i},tJ=e=>{let t,l,a,r,o,i,c,d,m,h,f,x,p=(0,s.c)(21);if(p[0]!==e){let{field:n,fieldKey:i,value:s,onFocus:c,onChange:d}=e,u=(0,tK._)(e,["field","fieldKey","value","onFocus","onChange"]);t=n,o=s,a=c,l=d,r=u,p[0]=e,p[1]=t,p[2]=l,p[3]=a,p[4]=r,p[5]=o}else t=p[1],l=p[2],a=p[3],r=p[4],o=p[5];return p[6]===Symbol.for("react.memo_cache_sentinel")?(i={display:"flex",flexDirection:"column",alignItems:"center",mt:2},p[6]=i):i=p[6],p[7]!==t||p[8]!==o?(c=o&&(0,n.jsx)(P.Z,{component:"img",className:"image-preview",src:"data:".concat(t.mimeType,";base64,").concat(o),alt:t.name,sx:{maxHeight:"150px",width:"auto",objectFit:"contain",mt:1,border:"1px solid #eee"}}),p[7]=t,p[8]=o,p[9]=c):c=p[9],p[10]===Symbol.for("react.memo_cache_sentinel")?(d={mt:2},p[10]=d):d=p[10],p[11]===Symbol.for("react.memo_cache_sentinel")?(m={display:"none"},p[11]=m):m=p[11],p[12]!==l?(h=async e=>{var t;let n=null==(t=e.target.files)?void 0:t[0];if(!n)return;let a=new FileReader;a.onloadend=async()=>{if("string"==typeof(null==a?void 0:a.result)){var e;let t=null==a||null==(e=a.result)?void 0:e.split(",")[1];l(t)}},a.readAsDataURL(n)},p[12]=l,p[13]=h):h=p[13],p[14]!==a||p[15]!==r||p[16]!==h?(f=(0,n.jsxs)(H.Z,{variant:"contained",component:"label",sx:d,children:["Upload New Image",(0,n.jsx)(J.Z,(0,u._)({type:"file",accept:"image/*",sx:m,onClick:a,onChange:h},r))]}),p[14]=a,p[15]=r,p[16]=h,p[17]=f):f=p[17],p[18]!==c||p[19]!==f?(x=(0,n.jsxs)(P.Z,{className:"image-preview-wrapper",sx:i,children:[c,f]}),p[18]=c,p[19]=f,p[20]=x):x=p[20],x};var tY=l(1786);let tG=e=>{var t,l,r,o,i,c,d,h,f,x,p,g,v,y,j,_,S,w,Z,C,k,N,I,A,z,D,E,T,L;let O,F,W,P,R,V,K,M,U,H,B,q,Q,Y,G,$,X,ee,et,el,en=(0,s.c)(50);if(en[0]!==e){let{field:t,fieldKey:l,value:n,defaultValue:a,onFocus:r,onChange:o,onFirstChange:i,error:s,helperText:c,multiple:d}=e,u=(0,tK._)(e,["field","fieldKey","value","defaultValue","onFocus","onChange","onFirstChange","error","helperText","multiple"]);W=t,P=l,H=n,O=a,V=o,K=i,F=s,R=c,U=d,M=u,en[0]=e,en[1]=O,en[2]=F,en[3]=W,en[4]=P,en[5]=R,en[6]=V,en[7]=K,en[8]=M,en[9]=U,en[10]=H}else O=en[1],F=en[2],W=en[3],P=en[4],R=en[5],V=en[6],K=en[7],M=en[8],U=en[9],H=en[10];let ea=void 0!==U&&U;en[11]!==W.listNodeType?(B=W.listNodeType.split(".").pop(),en[11]=W.listNodeType,en[12]=B):B=en[12];let er=B;en[13]!==er?(q={type:er},en[13]=er,en[14]=q):q=en[14];let{data:eo,isLoading:ei,isError:es}=b("list_existing_node",q);en[15]!==O||en[16]!==es||en[17]!==ei||en[18]!==(null==eo||null==(o=eo.data)||null==(r=o.results)||null==(l=r[0])||null==(t=l.result)?void 0:t.data)||en[19]!==ea||en[20]!==K?(Q=()=>{var e,t,l,n,a,r,o,i,s;if(!ei&&!es&&(null==eo||null==(a=eo.data)||null==(n=a.results)||null==(l=n[0])||null==(t=l.result)||null==(e=t.data)?void 0:e.length)!==0&&!ea)if(O){let e=Number.parseInt(O.split("@")[1]),t=null==eo||null==(s=eo.data)||null==(i=s.results)||null==(o=i[0])||null==(r=o.result)?void 0:r.data.find(t=>t.id===e);t?K({label:t.name,value:t.id}):K(void 0)}else K(void 0)},en[15]=O,en[16]=es,en[17]=ei,en[18]=null==eo||null==(k=eo.data)||null==(C=k.results)||null==(Z=C[0])||null==(w=Z.result)?void 0:w.data,en[19]=ea,en[20]=K,en[21]=Q):Q=en[21];let ec=null==eo||null==(h=eo.data)||null==(d=h.results)||null==(c=d[0])||null==(i=c.result)?void 0:i.data.find,ed=null==eo||null==(v=eo.data)||null==(g=v.results)||null==(p=g[0])||null==(x=p.result)||null==(f=x.data)?void 0:f.length;return en[22]!==O||en[23]!==es||en[24]!==ei||en[25]!==ea||en[26]!==K||en[27]!==ec||en[28]!==ed?(Y=[ei,es,O,ec,ed,ea,K],en[22]=O,en[23]=es,en[24]=ei,en[25]=ea,en[26]=K,en[27]=ec,en[28]=ed,en[29]=Y):Y=en[29],(0,a.useEffect)(Q,Y),en[30]!==F?(G=e=>(0,n.jsx)(J.Z,(0,m._)((0,u._)({},e),{error:F})),en[30]=F,en[31]=G):G=en[31],en[32]!==(null==eo||null==(S=eo.data)||null==(_=S.results)||null==(j=_[0])||null==(y=j.result)?void 0:y.data)?($=(null==eo||null==(z=eo.data)||null==(A=z.results)||null==(I=A[0])||null==(N=I.result)?void 0:N.data.map(t$).sort(tX))||[],en[32]=null==eo||null==(L=eo.data)||null==(T=L.results)||null==(E=T[0])||null==(D=E.result)?void 0:D.data,en[33]=$):$=en[33],en[34]!==V?(X=(e,t)=>{V(t)},en[34]=V,en[35]=X):X=en[35],en[36]!==P||en[37]!==ea||en[38]!==M||en[39]!==X||en[40]!==G||en[41]!==$||en[42]!==H?(ee=(0,n.jsx)(tY.Z,(0,u._)({disablePortal:!0,renderInput:G,options:$,groupBy:t0,getOptionKey:t1,getOptionLabel:t2,isOptionEqualToValue:t4,size:"small",id:P,value:H,onChange:X,multiple:ea},M)),en[36]=P,en[37]=ea,en[38]=M,en[39]=X,en[40]=G,en[41]=$,en[42]=H,en[43]=ee):ee=en[43],en[44]!==R?(et=R&&(0,n.jsx)(tH.Z,{children:R}),en[44]=R,en[45]=et):et=en[45],en[46]!==F||en[47]!==ee||en[48]!==et?(el=(0,n.jsxs)(tP.Z,{fullWidth:!0,error:F,children:[ee,et]}),en[46]=F,en[47]=ee,en[48]=et,en[49]=el):el=en[49],el};function t$(e){let t=e.name[0].toUpperCase();return{label:e.name,value:e.id,firstLetter:"France(FR)"===e.name?" ":/[0-9]/.test(t)?"0-9":t}}function tX(e,t){return e.firstLetter!==t.firstLetter?e.firstLetter.localeCompare(t.firstLetter):e.label.localeCompare(t.label)}function t0(e){return e.firstLetter}function t1(e){var t;return null!=(t=e.value)?t:""}function t2(e){var t;return null!=(t=e.label)?t:""}function t4(e,t){return e.value===t.value}var t3=l(6762),t5=l(4791);let t8=e=>{let t,l,a,r,o,i,c,d,h,f,x,p,g,v,b=(0,s.c)(27);b[0]!==e?(d=(0,tK._)(e,["field","fieldKey","value","defaultValue","onFocus","onChange","error","helperText"]),{field:a,fieldKey:r,value:h,defaultValue:t,onFocus:c,onChange:i,error:l,helperText:o}=e,b[0]=e,b[1]=t,b[2]=l,b[3]=a,b[4]=r,b[5]=o,b[6]=i,b[7]=c,b[8]=d,b[9]=h):(t=b[1],l=b[2],a=b[3],r=b[4],o=b[5],i=b[6],c=b[7],d=b[8],h=b[9]);let y=h||t;return b[10]!==i?(f=e=>i(e.target.value),b[10]=i,b[11]=f):f=b[11],b[12]!==a.options?(x=a.options.map(t6),b[12]=a.options,b[13]=x):x=b[13],b[14]!==r||b[15]!==c||b[16]!==d||b[17]!==y||b[18]!==f||b[19]!==x?(p=(0,n.jsx)(t3.Z,(0,m._)((0,u._)({row:!0,name:r,value:y,onChange:f,onFocus:c},d),{children:x})),b[14]=r,b[15]=c,b[16]=d,b[17]=y,b[18]=f,b[19]=x,b[20]=p):p=b[20],b[21]!==o?(g=o&&(0,n.jsx)(tH.Z,{children:o}),b[21]=o,b[22]=g):g=b[22],b[23]!==l||b[24]!==p||b[25]!==g?(v=(0,n.jsxs)(tP.Z,{fullWidth:!0,error:l,children:[p,g]}),b[23]=l,b[24]=p,b[25]=g,b[26]=v):v=b[26],v};function t6(e,t){return(0,n.jsx)(tq.Z,{value:t,control:(0,n.jsx)(t5.Z,{}),label:e},t)}var t7=l(7884);let t9=e=>{let t,l,r,o,i,c=(0,s.c)(15),{option:d,fieldId:u}=e,[m,h]=(0,a.useState)(d.value),f=j("set_value"),x=(0,E.NL)();c[0]!==u||c[1]!==x||c[2]!==f||c[3]!==m?(t=async e=>{if(!e)return console.warn("No field provided for saving changes");try{await k.ZP.promise(f.mutateAsync({id:e.id,value:m},{onSuccess:async()=>{await x.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(u)}]})}}),{loading:"Enregistrement de ".concat(tw(e.name),"..."),success:"Changements enregistr\xe9s pour ".concat(tw(e.name)),error:"Erreur lors de l'enregistrement des changements pour ".concat(tw(e.name))})}catch(e){console.error("Error saving changes:",e)}},c[0]=u,c[1]=x,c[2]=f,c[3]=m,c[4]=t):t=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(l={maxWait:2e3},c[5]=l):l=c[5];let p=(0,eo.y1)(t,500,l),g=m||!1;return c[6]!==p||c[7]!==d?(r=e=>{h(e.target.checked),p(d)},c[6]=p,c[7]=d,c[8]=r):r=c[8],c[9]!==g||c[10]!==r?(o=(0,n.jsx)(eg.Z,{checked:g,onChange:r}),c[9]=g,c[10]=r,c[11]=o):o=c[11],c[12]!==d.name||c[13]!==o?(i=(0,n.jsx)(tq.Z,{label:d.name,control:o}),c[12]=d.name,c[13]=o,c[14]=i):i=c[14],i},le=e=>{var t,l,a,r,o,i,c,d,u,m,h,f,x,p,g,v;let y,j,_,S,w,Z=(0,s.c)(13),{field:C,error:k,helperText:N}=e;Z[0]!==C.id?(y={node_id:C.id},Z[0]=C.id,Z[1]=y):y=Z[1];let{data:I}=b("class_attribute_field",y);return Z[2]!==(null==I||null==(o=I.data)||null==(r=o.results)||null==(a=r[0])||null==(l=a.result)||null==(t=l.data)?void 0:t.attributes)||Z[3]!==C.id?(j=null==I||null==(h=I.data)||null==(m=h.results)||null==(u=m[0])||null==(d=u.result)||null==(c=d.data)||null==(i=c.attributes)?void 0:i.map((e,t)=>(0,n.jsx)(t9,{option:e,fieldId:C.id},t)),Z[2]=null==I||null==(v=I.data)||null==(g=v.results)||null==(p=g[0])||null==(x=p.result)||null==(f=x.data)?void 0:f.attributes,Z[3]=C.id,Z[4]=j):j=Z[4],Z[5]!==j?(_=(0,n.jsx)(t7.Z,{row:!0,children:j}),Z[5]=j,Z[6]=_):_=Z[6],Z[7]!==N?(S=N&&(0,n.jsx)(tH.Z,{children:N}),Z[7]=N,Z[8]=S):S=Z[8],Z[9]!==k||Z[10]!==_||Z[11]!==S?(w=(0,n.jsxs)(tP.Z,{fullWidth:!0,error:k,children:[_,S]}),Z[9]=k,Z[10]=_,Z[11]=S,Z[12]=w):w=Z[12],w};var lt=l(3180),ll=l(4649),ln=l(5471);l(4493),l(3608);var la=l(1994);lt.Tu.workerSrc=new URL(l(7663),l.b).toString();let lr=e=>{let t,l,r,o,i,c,d,u,m,h,f,x,p,g,v=(0,s.c)(28),{value:b,onChange:y,error:j,helperText:_}=e,[S,w]=(0,a.useState)(b);v[0]!==b?(t=()=>{if(b){let e=atob(b),t=Array(e.length);for(let l=0;l<e.length;l++)t[l]=e.charCodeAt(l);let l=new Blob([new Uint8Array(t)],{type:"application/pdf"});w(URL.createObjectURL(l))}},l=[b],v[0]=b,v[1]=t,v[2]=l):(t=v[1],l=v[2]),(0,a.useEffect)(t,l),v[3]!==y?(r=e=>{let t=e.target.files[0];if(t&&"application/pdf"===t.type){let e=new FileReader;e.onloadend=()=>{if("string"==typeof e.result){var t;y(null==(t=e.result)?void 0:t.split(",")[1])}},e.readAsDataURL(t)}else t&&(alert("Please select a PDF file."),e.target.value=null)},v[3]=y,v[4]=r):r=v[4];let Z=r;v[5]!==S?(o=e=>{e.stopPropagation(),S&&window.open(S,"_blank","noopener,noreferrer")},v[5]=S,v[6]=o):o=v[6];let C=o;v[7]===Symbol.for("react.memo_cache_sentinel")?(i={display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},v[7]=i):i=v[7];let k="2px solid ".concat(j?"error.main":"transparent");return v[8]===Symbol.for("react.memo_cache_sentinel")?(c={borderColor:"primary.main",boxShadow:4,transform:"scale(1.02)"},v[8]=c):c=v[8],v[9]!==k?(d={cursor:"pointer",border:k,borderRadius:"8px",width:"180px",height:"254px",overflow:"hidden",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f8f8f8",mb:2,transition:"all 0.2s ease-in-out","&:hover":c},v[9]=k,v[10]=d):d=v[10],v[11]!==S?(u=S?(0,n.jsx)(ll.Z,{file:S,loading:(0,n.jsxs)(P.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)(Q.Z,{size:40,sx:{mb:1}}),(0,n.jsx)(U.Z,{variant:"caption",color:"text.secondary",children:"Loading PDF..."})]}),error:(0,n.jsxs)(P.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[(0,n.jsx)(la.Z,{color:"error",sx:{fontSize:40,mb:1}}),(0,n.jsx)(U.Z,{variant:"caption",color:"error",children:"Preview not available"})]}),children:(0,n.jsx)(ln.Z,{pageNumber:1,width:180,renderTextLayer:!1,renderAnnotationLayer:!1})}):(0,n.jsxs)(P.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[(0,n.jsx)(la.Z,{color:"disabled",sx:{fontSize:60,mb:1}}),(0,n.jsx)(U.Z,{variant:"caption",color:"text.secondary",align:"center",children:"No PDF selected"})]}),v[11]=S,v[12]=u):u=v[12],v[13]!==C||v[14]!==d||v[15]!==u?(m=(0,n.jsx)(Y.Z,{elevation:2,onClick:C,sx:d,children:u}),v[13]=C,v[14]=d,v[15]=u,v[16]=m):m=v[16],v[17]===Symbol.for("react.memo_cache_sentinel")?(h=(0,n.jsx)(la.Z,{}),f={mt:1},v[17]=h,v[18]=f):(h=v[17],f=v[18]),v[19]!==Z?(x=(0,n.jsxs)(H.Z,{variant:"contained",component:"label",color:"primary",startIcon:h,sx:f,children:["Upload PDF",(0,n.jsx)("input",{type:"file",hidden:!0,accept:"application/pdf",onChange:Z})]}),v[19]=Z,v[20]=x):x=v[20],v[21]!==j||v[22]!==_?(p=_&&(0,n.jsx)(U.Z,{color:j?"error":"textSecondary",variant:"caption",sx:{mt:1},children:_}),v[21]=j,v[22]=_,v[23]=p):p=v[23],v[24]!==m||v[25]!==x||v[26]!==p?(g=(0,n.jsxs)(P.Z,{sx:i,children:[m,x,p]}),v[24]=m,v[25]=x,v[26]=p,v[27]=g):g=v[27],g},lo=e=>{var t,l,r,o,i,c,d,m,h,f,x,p,g,v,y,j,_,S,w,Z,C,k;let N,I,A,z,D,E,T,L,O,F,W,P,R=(0,s.c)(31);if(R[0]!==e){let{field:t,fieldKey:l,value:n,onFocus:a,onChange:r,onFirstChange:o,error:i,helperText:s}=e,c=(0,tK._)(e,["field","fieldKey","value","onFocus","onChange","onFirstChange","error","helperText"]);I=t,A=l,L=n,D=r,E=o,N=i,z=s,T=c,R[0]=e,R[1]=N,R[2]=I,R[3]=A,R[4]=z,R[5]=D,R[6]=E,R[7]=T,R[8]=L}else N=R[1],I=R[2],A=R[3],z=R[4],D=R[5],E=R[6],T=R[7],L=R[8];R[9]!==I.id?(O={node_id:I.id},R[9]=I.id,R[10]=O):O=R[10];let{data:V,isLoading:K,isError:M}=b("class_attribute_field",O);R[11]!==M||R[12]!==K||R[13]!==E||R[14]!==(null==V||null==(i=V.data)||null==(o=i.results)||null==(r=o[0])||null==(l=r.result)||null==(t=l.data)?void 0:t.attributes)?(F=()=>{var e,t,l,n,a,r,o,i,s,c,d,u;K||M||(null==V||null==(r=V.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)||null==(t=l.data)||null==(e=t.attributes)?void 0:e.length)===0||E(null==V||null==(u=V.data)||null==(d=u.results)||null==(c=d[0])||null==(s=c.result)||null==(i=s.data)||null==(o=i.attributes)?void 0:o.map(li))},R[11]=M,R[12]=K,R[13]=E,R[14]=null==V||null==(k=V.data)||null==(C=k.results)||null==(Z=C[0])||null==(w=Z.result)||null==(S=w.data)?void 0:S.attributes,R[15]=F):F=R[15];let U=null==V||null==(x=V.data)||null==(f=x.results)||null==(h=f[0])||null==(m=h.result)||null==(d=m.data)||null==(c=d.attributes)?void 0:c.length,H=null==V||null==(_=V.data)||null==(j=_.results)||null==(y=j[0])||null==(v=y.result)||null==(g=v.data)||null==(p=g.attributes)?void 0:p.map;return R[16]!==M||R[17]!==K||R[18]!==E||R[19]!==U||R[20]!==H?(W=[K,M,E,U,H],R[16]=M,R[17]=K,R[18]=E,R[19]=U,R[20]=H,R[21]=W):W=R[21],(0,a.useEffect)(F,W),R[22]!==N||R[23]!==I||R[24]!==A||R[25]!==z||R[26]!==D||R[27]!==E||R[28]!==T||R[29]!==L?(P=(0,n.jsx)(tG,(0,u._)({field:I,fieldKey:A,value:L,onChange:D,onFirstChange:E,error:N,helperText:z,multiple:!0},T)),R[22]=N,R[23]=I,R[24]=A,R[25]=z,R[26]=D,R[27]=E,R[28]=T,R[29]=L,R[30]=P):P=R[30],P};function li(e){return{firstLetter:e.name.split(". ")[1][0],label:e.name.split(". ")[1],value:e.id}}var ls=l(770);let lc=e=>{let t,l,a,r,o,i,c,d,m,h,f,x=(0,s.c)(21);x[0]!==e?(o=(0,tK._)(e,["value","onFocus","onChange","error","helperText"]),{value:i,onFocus:r,onChange:a,error:t,helperText:l}=e,x[0]=e,x[1]=t,x[2]=l,x[3]=a,x[4]=r,x[5]=o,x[6]=i):(t=x[1],l=x[2],a=x[3],r=x[4],o=x[5],i=x[6]),x[7]===Symbol.for("react.memo_cache_sentinel")?(c={marginLeft:20},x[7]=c):c=x[7];let p=i||"";return x[8]!==a?(d=e=>{a(e.hex)},x[8]=a,x[9]=d):d=x[9],x[10]!==r||x[11]!==o||x[12]!==p||x[13]!==d?(m=(0,n.jsx)(ls.Z,(0,u._)({style:c,color:p,onFocus:r,onChange:d},o)),x[10]=r,x[11]=o,x[12]=p,x[13]=d,x[14]=m):m=x[14],x[15]!==t||x[16]!==l?(h=l&&(0,n.jsx)(U.Z,{color:t?"error":"textSecondary",variant:"caption",sx:{mt:1},children:l}),x[15]=t,x[16]=l,x[17]=h):h=x[17],x[18]!==m||x[19]!==h?(f=(0,n.jsxs)(n.Fragment,{children:[m,h]}),x[18]=m,x[19]=h,x[20]=f):f=x[20],f},ld=a.memo(e=>{let{field:t,fieldKey:l,isExpanded:r,onToggleField:o,onChangingForm:i,parentId:s,defaultValue:c=""}=e,{id:d,name:u,type:m,validations:h,isValid:f}=t,[x,p]=(0,a.useState)(tD.includes(m)?{label:c,value:null==c?void 0:c.split("@")[1]}:tO.includes(m)?[]:c),[g,v]=(0,a.useState)(!1),[b,y]=(0,a.useState)(""),_=(0,E.NL)(),S=j("set_value"),w=j("add_existing_node"),Z=j("remove_from_list"),C=(0,a.useCallback)(e=>{let t=tk(m,e,h);return v(!t.isValid),y(t.message),t.isValid},[m,h]);(0,a.useEffect)(()=>{C(x)},[x,C]);let N=(0,eo.y1)(async e=>{if(!e)return console.warn("No field provided for saving changes");if(!C(x))return void"Invalid value for ".concat(e.name," (").concat(e.type,"): ").concat(x);try{await k.ZP.promise(S.mutateAsync({id:e.id,value:x,parentId:s},{onSuccess:async()=>{await _.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(s)}]})}}),{loading:"Enregistrement de ".concat(tw(e.name),"..."),success:"Changements enregistr\xe9s pour ".concat(tw(e.name)),error:"Erreur lors de l'enregistrement des changements pour ".concat(tw(e.name))})}catch(e){console.error("Error saving changes:",e),v(!0),y("Error saving changes: ".concat(e.message))}},500,{maxWait:2e3}),I=(0,a.useCallback)(async e=>{if(!e)return void p(null);p(e);try{await k.ZP.promise(S.mutateAsync({id:t.id,value:e},{onSuccess:async()=>{await _.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(s)}]})}}),{loading:"Enregistrement de ".concat(tw(t.name),"..."),success:"Changements enregistr\xe9s pour ".concat(tw(t.name)),error:"Erreur lors de l'enregistrement des changements pour ".concat(tw(t.name))})}catch(e){console.error("Error saving changes:",e),v(!0),y("Error saving changes: ".concat(e.message))}},[t.id,t.name,s,_.invalidateQueries,S.mutateAsync]),A=(0,eo.y1)(async function(e,t){let l=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!e)return console.warn("No field provided for saving changes");if(!C(t))return void"Invalid value for ".concat(e.name," (").concat(e.type,"): ").concat(t);try{await k.ZP.promise((l?w:Z).mutateAsync({node_id:e.id,id:t},{onSuccess:async()=>{await _.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(s)}]})}}),{loading:"Enregistrement de ".concat(tw(e.name),"..."),success:"Changements enregistr\xe9s pour ".concat(tw(e.name)),error:"Erreur lors de l'enregistrement des changements pour ".concat(tw(e.name))})}catch(e){console.error("Error saving changes:",e),v(!0),y("Error saving changes: ".concat(e.message))}}),z=(0,a.useCallback)(function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let l=tk(t.type,e,h);v(!l),l?y(""):y(tC(t.type,e,h)),N(t),p(e)},[t,N,h]),D=(0,a.useCallback)(e=>{let l=tk(t.type,null==e?void 0:e.value,h);v(!l),l?y(""):y(tC(t.type,null==e?void 0:e.value,h)),A(t,null==e?void 0:e.value),p(e)},[t,A,h]),T=(0,a.useCallback)(e=>{p(e)},[]),L=(0,a.useCallback)(e=>{if(!C(e))return;let l=x||[],n=e||[],a=n.filter(e=>!l.some(t=>t.value===e.value));a.length>0&&a.forEach(e=>{A(t,e.value)});let r=l.filter(e=>!n.some(t=>t.value===e.value));r.length>0&&r.forEach(e=>{A(t,e.value,!1)}),p(e)},[t,A,x,C]),O=(0,a.useCallback)(e=>p(e),[]),F=(0,a.useCallback)(()=>{i(u,d)},[i,u,d]),W=(0,a.useCallback)(()=>{o(l,d)},[o,l,d]);return(0,a.useEffect)(()=>()=>{N.flush()},[N]),(0,n.jsx)(P.Z,{className:"form-field-wrapper",sx:{p:1},children:(0,n.jsxs)(tu.Z,{container:!0,className:"form-field",spacing:2,alignItems:"center",children:[(0,n.jsx)(tu.Z,{size:{xs:12,sm:4},children:(0,n.jsxs)(tP.Z,{component:"fieldset",sx:{display:"flex",flexDirection:"row"},children:[(0,n.jsx)(H.Z,{tabIndex:-1,variant:"text",color:"primary",onClick:F,title:l,sx:{textAlign:"left",justifyContent:"flex-start"},children:(0,n.jsx)(U.Z,{fontWeight:"medium",color:!1===f?"error":"primary",sx:{fontWeight:!1===f?"bold":"regular"},children:tw(u)})}),!(tW.includes(m)||tO.includes(m)&&t.isDropdown)&&(0,n.jsx)(P.Z,{className:"toggle-wrapper",textAlign:"right",children:(0,n.jsx)(B.Z,{onClick:W,size:"small",children:r?(0,n.jsx)(tV.Z,{}):(0,n.jsx)(tR.Z,{})})})]})}),(0,n.jsxs)(tu.Z,{size:{xs:12,sm:6},children:[tT.includes(m)&&(0,n.jsx)(le,{field:t,error:g,helperText:g?b:""}),tN.includes(m)&&(0,n.jsx)(tM,{field:t,fieldKey:l,value:x,onChange:z,size:"small",error:g,helperText:g?b:""}),tA.includes(m)&&(0,n.jsx)(tB,{fieldKey:l,field:t,value:x,onChange:z,error:g,helperText:g?b:""}),tI.includes(m)&&(0,n.jsx)(tQ,{fieldKey:l,value:x,onChange:z}),tz.includes(m)&&r&&(0,n.jsx)(tJ,{field:t,fieldKey:l,value:x,onChange:z,size:"small"}),tD.includes(m)&&(0,n.jsx)(tG,{field:t,fieldKey:l,value:null!=x?x:null,onChange:D,onFirstChange:T,defaultValue:c,error:g,helperText:g?b:""}),tO.includes(m)&&t.isDropdown&&(0,n.jsx)(lo,{field:t,fieldKey:l,value:null!=x?x:[],onChange:L,onFirstChange:O,error:g,helperText:g?b:""}),tE.includes(m)&&(0,n.jsx)(t8,{field:t,fieldKey:l,value:x,onChange:z,defaultValue:c,error:g,helperText:g?b:""}),tL.includes(m)&&(0,n.jsx)(lr,{value:x,onChange:I,error:g,helperText:b}),tF.includes(m)&&(0,n.jsx)(lc,{value:x,onChange:z,error:g,helperText:b})]})]})},l)},(e,t)=>e.fieldKey===t.fieldKey&&e.isExpanded===t.isExpanded&&e.onToggleField===t.onToggleField&&e.defaultValue===t.defaultValue),lu=e=>{let{parentId:t,fields:l,visited:r=new Set,expandedFields:o,toggleField:i,handleChangingForm:s,rootId:c}=e;return l&&Array.isArray(l)?l.map(e=>{let{id:l,name:d,type:u}=e;if(!d||"graph"===d)return null;let m=tZ(e.id,e.name);if(r.has(l))return(0,n.jsxs)(U.Z,{color:"error",children:["Circular reference detected for ",d]},"cycle-".concat(l));let h=o[m]||!1;return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(ld,{field:e,fieldKey:m,isExpanded:h,onToggleField:i,onChangingForm:s,defaultValue:e.value,parentId:t}),!(tW.includes(u)||tO.includes(u)&&e.isDropdown)&&(0,n.jsx)(lm,{fieldKey:m,field:e,rootId:c,isToggle:h})]},m)}):null},lm=a.memo(e=>{var t,l,r,o,s,c;let{fieldKey:d,field:h,rootId:f,isRoot:x=!1,isToggle:p=!1}=e,{data:g,isLoading:v,error:y,refetch:_}=b("class_attribute_field",{node_id:"string"==typeof h.id?Number.parseInt(h.id):h.id},{enabled:p||x}),S=(0,i.s0)(),w=(0,E.NL)(),Z=j("jump"),C=j("add_node"),k=j("list_existing_node"),N=j("add_existing_node"),[I,A]=(0,a.useState)({}),[z,D]=(0,a.useState)(!1),[T,L]=(0,a.useState)([]),[O,F]=(0,a.useState)(null),[W,V]=(0,a.useState)(!1);(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e?JSON.stringify(e,null,"tab"===t?"	":t):""},[]);let K=(0,a.useCallback)(async(e,t)=>{try{await Z.mutateAsync({node_id:t}),await S("/add-node/form/".concat(t)),window.location.reload()}catch(e){console.error("Error changing form:",e)}},[Z,S]),{id:M,type:B,name:q}=h,Q=(0,a.useRef)(I);(0,a.useEffect)(()=>{Q.current=I},[I]);let J=(0,a.useCallback)(async(e,t)=>{let l=Q.current[e];A(t=>(0,m._)((0,u._)({},t),{[e]:!l}))},[]),Y=(0,a.useCallback)(async e=>{let t=null==e?void 0:e.id,l=null==e?void 0:e.listNodeType;try{await C.mutateAsync({BNodeClass:l,node_id:t},{onSuccess:async()=>{await w.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:t}]})}})}catch(e){console.error("Error adding new node:",e)}},[C,w.invalidateQueries]),G=(0,a.useCallback)(async e=>{F(e),D(!0),V(!0);let t=e.listNodeType.split(".").pop();try{var l,n,a,r;let e=await k.mutateAsync({type:t}),o=(null==e||null==(r=e.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)?void 0:l.data)||[];L(o)}catch(e){console.error("Error fetching class attribute field:",e)}finally{V(!1)}},[k]),$=(0,a.useCallback)(async e=>{try{await N.mutateAsync({id:e.id,node_id:h.id},{onSuccess:async()=>{await w.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:h.id}]}),Z.mutate({node_id:f})}})}catch(e){console.error("Error adding existing node:",e)}},[N,Z,f,h.id,w.invalidateQueries]),X=(0,a.useCallback)((e,t)=>{$(e),D(!1)},[$]);(0,a.useEffect)(()=>{if(!v&&g){var e,t,l,n,a;let r={},o={};((null==g||null==(a=g.data)||null==(n=a.results)||null==(l=n[0])||null==(t=l.result)||null==(e=t.data)?void 0:e.attributes)||[]).forEach(e=>{if(e.name&&"null"!==e.value&&void 0!==e.value){let t=tZ(e.id,e.name);r[t]=e.value,o[t]=e}})}},[v,g]);let ee=(null==g||null==(s=g.data)||null==(o=s.results)||null==(r=o[0])||null==(l=r.result)||null==(t=l.data)?void 0:t.attributes)||[];return(0,n.jsxs)(a.Fragment,{children:[x?(0,n.jsx)(P.Z,{component:"form",className:"form-fields",onSubmit:e=>e.preventDefault(),sx:{mt:3},children:ee.length>0?(0,n.jsx)(lu,{parentId:h.id,fields:ee,expandedFields:I,toggleField:J,handleChangingForm:K,rootId:f}):(0,n.jsx)(U.Z,{children:"No fields available."})}):(0,n.jsxs)(P.Z,{className:"nested-fields",sx:{mt:2,pl:2,borderLeft:"1px solid #e0e0e0"},children:[p&&(ee.length>0?(0,n.jsx)(lu,{parentId:h.id,fields:ee,expandedFields:I,toggleField:J,handleChangingForm:K,rootId:f}):(0,n.jsx)(U.Z,{variant:"body2",color:"text.secondary",children:"No subfields available for this."})),tO.includes(B)&&p&&!h.isDropdown&&(0,n.jsxs)(R.Z,{direction:"row",spacing:2,className:"add-new-node",sx:{mt:2},children:[null!=(c=h.canAddNewNode)?c:(0,n.jsxs)(H.Z,{variant:"outlined",startIcon:(0,n.jsx)(ev.Z,{}),onClick:()=>Y(h),children:["Add new ",q]}),(0,n.jsxs)(H.Z,{variant:"outlined",startIcon:(0,n.jsx)(ev.Z,{}),onClick:()=>G(h),children:["Add ",q," from Existing Node"]})]})]}),(0,n.jsx)(tj,{show:z,selectedField:O,existingNodeList:T,loadingExistingNodes:W,onClose:()=>{D(!1),Z.mutate({node_id:f})},onSelectNode:X})]})},(e,t)=>e.fieldKey===t.fieldKey&&e.rootId===t.rootId&&e.isToggle===t.isToggle);var lh=l(9599),lf=l(7454),lx=l(3162);function lp(e){return"results"===e.name}function lg(e){return(0,n.jsx)(tv.Z,{icon:e.icon,tooltipTitle:e.name,onClick:e.onClick},e.name)}let lv=(0,i.aj)([{Component:function(){let e,t,l,a,r,o=(0,s.c)(9),{data:c,isLoading:u,error:m}=b("endpoints?only_applicable&type=byransha.web.View");if(o[0]!==c||o[1]!==m||o[2]!==u){var h;e=!u&&!m&&(null==c||null==(h=c.data)?void 0:h.results)?c.data.results.map(I):[{kind:"page",title:"Loading...",segment:"home",icon:(0,n.jsx)(_.Z,{})}],o[0]=c,o[1]=m,o[2]=u,o[3]=e}else e=o[3];let f=e;return o[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(k.x7,{}),o[4]=t):t=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(l={title:"",logo:(0,n.jsx)("img",{src:"/logo.svg",alt:"I3S",width:"100%",height:"100%",color:"inherit"}),homeUrl:"/home"},a=(0,n.jsx)(i.j3,{}),o[5]=l,o[6]=a):(l=o[5],a=o[6]),o[7]!==f?(r=(0,n.jsxs)(w._C,{dateAdapter:S.y,adapterLocale:"fr",children:[t,(0,n.jsx)(d.C,{navigation:f,theme:N,branding:l,children:a})]}),o[7]=f,o[8]=r):r=o[8],r},children:[{path:"/",element:(0,n.jsx)(()=>{let e,t,l,r,o,c,d,u,m,h,f,x,p,g,v,b=(0,s.c)(34),[y,_]=(0,a.useState)(""),[S,w]=(0,a.useState)(""),[Z,C]=(0,a.useState)(!1),[k,N]=(0,a.useState)(""),I=(0,i.s0)(),L=(0,E.NL)();b[0]!==L?(e={onSuccess:async()=>{await L.invalidateQueries()}},b[0]=L,b[1]=e):e=b[1];let O=j("authenticate",e);D("Login"),b[2]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{C(T)},b[2]=t):t=b[2];let F=t;b[3]!==O||b[4]!==I||b[5]!==S||b[6]!==y?(l=async e=>{e.preventDefault();try{O.mutate({username:y,password:S},{onSuccess:e=>{I("/home")},onError:e=>{console.error(e),N("Failed to connect to the server")}})}catch(e){console.error(e),N("Failed to connect to the server")}},b[3]=O,b[4]=I,b[5]=S,b[6]=y,b[7]=l):l=b[7];let W=l;b[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("div",{className:"image-container",children:(0,n.jsx)("img",{src:z,alt:"Logo"})}),b[8]=r):r=b[8];let P="input-box ".concat(y?"not-empty":"");b[9]===Symbol.for("react.memo_cache_sentinel")?(o=e=>_(e.target.value),b[9]=o):o=b[9],b[10]!==y?(c=(0,n.jsx)("input",{type:"text",className:"input-field",placeholder:"Identifiant",value:y,onChange:o,required:!0}),b[10]=y,b[11]=c):c=b[11],b[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,n.jsx)(A.Xws,{className:"icon"}),b[12]=d):d=b[12],b[13]!==P||b[14]!==c?(u=(0,n.jsxs)("div",{className:P,children:[c,d]}),b[13]=P,b[14]=c,b[15]=u):u=b[15];let R="input-box ".concat(S?"not-empty":""),V=Z?"text":"password";return b[16]===Symbol.for("react.memo_cache_sentinel")?(m=e=>w(e.target.value),b[16]=m):m=b[16],b[17]!==S||b[18]!==V?(h=(0,n.jsx)("input",{type:V,className:"input-field",placeholder:"Mot de passe",value:S,onChange:m,required:!0}),b[17]=S,b[18]=V,b[19]=h):h=b[19],b[20]!==Z?(f=Z?(0,n.jsx)(A.tgn,{className:"toggle-icon icon",onClick:F}):(0,n.jsx)(A.dSq,{className:"toggle-icon icon",onClick:F}),b[20]=Z,b[21]=f):f=b[21],b[22]!==h||b[23]!==f||b[24]!==R?(x=(0,n.jsxs)("div",{className:R,children:[h,f]}),b[22]=h,b[23]=f,b[24]=R,b[25]=x):x=b[25],b[26]!==k?(p=k&&(0,n.jsx)("p",{className:"error-message",children:k}),b[26]=k,b[27]=p):p=b[27],b[28]===Symbol.for("react.memo_cache_sentinel")?(g=(0,n.jsx)("button",{type:"submit",children:(0,n.jsx)("span",{children:"Se connecter"})}),b[28]=g):g=b[28],b[29]!==W||b[30]!==x||b[31]!==p||b[32]!==u?(v=(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("div",{className:"wrapper",children:(0,n.jsxs)("form",{onSubmit:W,children:[r,u,x,p,g]})})}),b[29]=W,b[30]=x,b[31]=p,b[32]=u,b[33]=v):v=b[33],v},{})},{element:(0,n.jsx)(()=>{var e,t,l;let r=(0,i.s0)(),{pathname:o}=(0,i.TH)(),[s,c]=(0,a.useState)(null),{data:d,isLoading:u,error:m}=b("endpoints?only_applicable&type=byransha.web.View"),{data:h,isLoading:f}=b("user_history"),x=(0,E.NL)(),p=j("jump",{onSuccess:async()=>{await x.invalidateQueries()}}),g=j("logout",{onSuccess:async()=>{await x.invalidateQueries(),r("/")}}),v=(0,a.useCallback)(e=>{p.mutate({node_id:e})},[p.mutate]),y=e=>{v(e.id)},_=async()=>{g.mutate({})},S=e=>c(e.currentTarget),w=()=>c(null),Z=null!=(l=null==h||null==(t=h.data)||null==(e=t.results)?void 0:e[0].result.data)?l:[],C=Z.length>3?Z.slice(-2):Z,k=Z[Z.length-1],N=j("bnode_class_distribution"),I=j("add_node"),A=async e=>{let t=e||"byransha.labmodel.model.v0.SearchForm";if(t)try{var l,n,a,r;let e=await I.mutateAsync({BNodeClass:t}),o=null==e||null==(r=e.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)?void 0:l.data.id;return await p.mutateAsync({node_id:o}),o}catch(e){throw console.error("Error during handleCreateAndJump for ".concat(t,":"),e),e}},z=async()=>{try{var e,t,l,n;let a=await N.mutateAsync({}),o=((null==a||null==(n=a.data)||null==(l=n.results)||null==(t=l[0])||null==(e=t.result)?void 0:e.data)||[]).find(e=>{let t=Object.keys(e)[0];return null==t?void 0:t.includes("SearchForm")}),i=await A(Object.keys(o)[0]);r("/add-node/form/".concat(i))}catch(e){console.error("Navigation skipped due to error:",e)}};return(0,n.jsx)(P.Z,{sx:{'& .MuiDrawer-root .MuiDrawer-paper, & [role="navigation"]':{"&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"}},children:(0,n.jsx)(L.c,{hideNavigation:!0,disableCollapsibleSidebar:!0,slots:{appTitle:()=>(0,n.jsxs)(R.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,n.jsx)(P.Z,{sx:{height:"40px",display:"flex",alignItems:"center"},children:(0,n.jsx)("img",{src:"/logo.svg",alt:"I3S",style:{height:"100%"}})}),(0,n.jsxs)(V.Z,{separator:(0,n.jsx)(F.Z,{sx:{color:"#b0bec5",fontSize:"18px"}}),"aria-label":"navigation history",sx:{bgcolor:"transparent",p:"4px 0","& .MuiBreadcrumbs-ol":{alignItems:"center"}},children:[(0,n.jsx)(K.Z,{component:i.rU,sx:{color:"#546e7a",fontSize:"14px",textDecoration:"none",p:"4px 8px",borderRadius:"2px","&:hover":{color:"#306DAD",bgcolor:"#f5f7ff"}},to:"/home",children:"Home"}),Z.length>3&&(0,n.jsx)(B.Z,{onClick:S,size:"small",sx:{color:"#90a4ae",p:"2px","&:hover":{color:"#306DAD",bgcolor:"#f5f7ff"}},children:(0,n.jsx)(W.Z,{fontSize:"small"})}),C.map(e=>(0,n.jsx)(K.Z,{component:"button",onClick:()=>y(e),sx:{color:e===k?"#306DAD":"#546e7a",fontSize:"14px",fontWeight:e===k?"500":"400",textDecoration:"none",p:"4px 8px",borderRadius:"2px",bgcolor:e===k?"#e8eaf6":"transparent",transition:"all 0.2s ease","&:hover":{color:"#306DAD",bgcolor:"#f5f7ff"}},children:e.pretty_name},e.id))]}),(0,n.jsx)(q.Z,{anchorEl:s,open:!!s,onClose:w,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{sx:{borderRadius:"4px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",mt:"5vh",ml:"18vw"}},children:Z.map(e=>(0,n.jsx)(M.Z,{onClick:()=>{y(e),w()},sx:{fontSize:"14px",color:e===k?"#306DAD":"#546e7a",bgcolor:e===k?"#f5f7ff":"transparent","&:hover":{bgcolor:"#e8eaf6",color:"#306DAD"}},children:e.pretty_name},e.id))})]}),toolbarActions:()=>{var e,t;return(0,n.jsxs)(R.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,n.jsxs)(B.Z,{onClick:z,children:[" ",(0,n.jsx)(ef.Z,{})," "]}),(0,n.jsx)(ec,{}),u?(0,n.jsx)(U.Z,{sx:{color:"#90a4ae",fontSize:"14px"},children:"Loading..."}):m?(0,n.jsx)(U.Z,{sx:{color:"#780906",fontSize:"14px"},children:"Error"}):(0,n.jsxs)(P.Z,{sx:{display:"flex",alignItems:"center",gap:1,p:"6px 12px",bgcolor:"#f5f7ff",borderRadius:"4px",transition:"background-color 0.2s ease","&:hover":{bgcolor:"#e8eaf6"}},children:[(0,n.jsx)(U.Z,{sx:{color:"#306DAD",fontSize:"14px",fontWeight:"500"},children:(null==d||null==(e=d.data)?void 0:e.username)||"Unknown User"}),(0,n.jsxs)(U.Z,{sx:{color:"#546e7a",fontSize:"14px"},children:["(",(null==d||null==(t=d.data)?void 0:t.user_id)||"N/A",")"]}),(0,n.jsxs)(U.Z,{sx:{color:"#90a4ae",fontSize:"12px"},children:["v",(null==d?void 0:d.data["backend version"])||"N/A"]})]}),(0,n.jsx)(H.Z,{variant:"outlined",size:"small",onClick:_,sx:{ml:2},children:"Se deconnecter"})]})}},children:(0,n.jsx)(O._,{style:{maxWidth:"100%"},children:(0,n.jsx)(i.j3,{})})})})},{}),children:[{path:"/home",element:(0,n.jsx)(()=>{var e,t,l,r,o,c,d,u,m,h,f,x,p,g,v,y,_,S,w,Z;let C,k,N,I,A,z,E,T,L,O,F,W,R,V,K,B,J,Y,G,$,X,ee,et,el,ea,er,eo,ei,es,ec,ed,eu,em,eh,ef,ex,ep,ey,ej,e_,eS,ew,eZ,eC,ek,eN,eI,eA,ez,eD,eE=(0,s.c)(111),eT=(0,i.s0)(),{data:eL,isLoading:eO}=b("endpoints?only_applicable&type=byransha.web.View");D("Home"),eE[0]===Symbol.for("react.memo_cache_sentinel")?(C=[],eE[0]=C):C=eE[0];let[eF,eW]=(0,a.useState)(C),[eP,eR]=(0,a.useState)(2),[eV,eK]=(0,a.useState)(null);eE[1]===Symbol.for("react.memo_cache_sentinel")?(k=[],eE[1]=k):k=eE[1];let[eM,eU]=(0,a.useState)(k),[eH,eB]=(0,a.useState)(tt);if((0,a.useState)(!1),(0,a.useState)("#ffffff"),eE[2]!==eM||eE[3]!==eF){let e;eE[5]!==eM?(e=e=>eM.includes(e.name),eE[5]=eM,eE[6]=e):e=eE[6],N=eF.filter(e),eE[2]=eM,eE[3]=eF,eE[4]=N}else N=eE[4];let eq=Math.min(eP,N.length),eQ=j("jump");if(eE[7]!==(null==eL||null==(r=eL.data)||null==(l=r.results)||null==(t=l[0])||null==(e=t.result)?void 0:e.data)||eE[8]!==eH?(I=()=>{var e,t,l,n,a,r,o,i,s,c,d,u;if(null==eL||null==(n=eL.data)||null==(l=n.results)||null==(t=l[0])||null==(e=t.result)?void 0:e.data){let e=eH?null==eL||null==(i=eL.data)||null==(o=i.results)||null==(r=o[0])||null==(a=r.result)?void 0:a.data:null==eL||null==(u=eL.data)||null==(d=u.results)||null==(c=d[0])||null==(s=c.result)?void 0:s.data.filter(tn);eW(e),eU(()=>{let t,l=JSON.parse(localStorage.getItem("selectedViewsSaved"));return t=l&&0!==l.length?l.filter(t=>e.some(e=>e.name===t)):e.map(ta),localStorage.setItem("selectedViewsSaved",JSON.stringify(t)),t});let t=JSON.parse(localStorage.getItem("viewOrder"))||[],l=e;t.length>0&&(l=[...e].sort((e,l)=>{let n=t.indexOf(e.endpoint),a=t.indexOf(l.endpoint);return(-1===n?1/0:n)-(-1===a?1/0:a)})),eW(l)}},eE[7]=null==eL||null==(p=eL.data)||null==(x=p.results)||null==(f=x[0])||null==(h=f.result)?void 0:h.data,eE[8]=eH,eE[9]=I):I=eE[9],eE[10]!==eL||eE[11]!==eH?(A=[eL,eH],eE[10]=eL,eE[11]=eH,eE[12]=A):A=eE[12],a.useEffect(I,A),eE[13]===Symbol.for("react.memo_cache_sentinel")?(z=()=>{let e=()=>eR(tl());return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},E=[tl],eE[13]=z,eE[14]=E):(z=eE[13],E=eE[14]),a.useEffect(z,E),eO){let e,t;return eE[15]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"#2e3b55"},eE[15]=e):e=eE[15],eE[16]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(P.Z,{sx:e,children:(0,n.jsx)(Q.Z,{sx:{color:"#1e88e5"}})}),eE[16]=t):t=eE[16],t}if(!eL||!eL.data||!eL.data.results){let e;return eE[17]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(P.Z,{sx:{bgcolor:"#fff3e0",p:2,borderRadius:2,color:"#ef6c00",textAlign:"center"},children:"Error: Data is null."}),eE[17]=e):e=eE[17],e}eE[18]===Symbol.for("react.memo_cache_sentinel")?(T=e=>eK(e.currentTarget),eE[18]=T):T=eE[18];let eJ=T;eE[19]===Symbol.for("react.memo_cache_sentinel")?(L=()=>eK(null),eE[19]=L):L=eE[19];let eY=L;eE[20]!==eH||eE[21]!==eF?(O=e=>{eU(t=>{let l=t.includes(e)?t.filter(t=>t!==e):[...t,e];return localStorage.setItem("selectedViewsSaved",JSON.stringify(l)),0===eF.filter(tr).filter(e=>l.includes(e.name)).length&&eH&&(eB(!1),localStorage.setItem("showTechnicalViews",JSON.stringify(!1))),l})},eE[20]=eH,eE[21]=eF,eE[22]=O):O=eE[22];let eG=O;eE[23]!==(null==eL||null==(u=eL.data)||null==(d=u.results)||null==(c=d[0])||null==(o=c.result)?void 0:o.data)?(F=()=>{eB(e=>{var t,l,n,a,r;let o=!e;localStorage.setItem("showTechnicalViews",JSON.stringify(o));let i=((null==eL||null==(r=eL.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)||null==(t=l.data)?void 0:t.filter(to))||[]).map(ti);return eU(e=>{let t;return t=o?[...new Set([...e,...i])]:e.filter(e=>!i.includes(e)),localStorage.setItem("selectedViewsSaved",JSON.stringify(t)),t}),o})},eE[23]=null==eL||null==(_=eL.data)||null==(y=_.results)||null==(v=y[0])||null==(g=v.result)?void 0:g.data,eE[24]=F):F=eE[24];let e$=F;eE[25]!==eF.length?(W=()=>eR(e=>Math.min(e+1,eF.length)),eE[25]=eF.length,eE[26]=W):W=eE[26];let eX=W;eE[27]===Symbol.for("react.memo_cache_sentinel")?(R=()=>eR(ts),eE[27]=R):R=eE[27];let e0=R;eE[28]===Symbol.for("react.memo_cache_sentinel")?(V={padding:{xs:"8px",sm:"16px",md:"40px"},maxWidth:"100%",margin:"0 auto",bgcolor:"#2e3b55",minHeight:"100vh",zIndex:1},eE[28]=V):V=eE[28],eE[29]===Symbol.for("react.memo_cache_sentinel")?(K={xs:"column",sm:"row"},eE[29]=K):K=eE[29],eE[30]===Symbol.for("react.memo_cache_sentinel")?(B={display:"flex",flexDirection:K,justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},mb:{xs:2,sm:4},gap:{xs:2,sm:0}},eE[30]=B):B=eE[30],eE[31]===Symbol.for("react.memo_cache_sentinel")?(J={display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2},alignItems:{xs:"flex-start",sm:"center"},width:{xs:"100%",sm:"auto"}},eE[31]=J):J=eE[31],eE[32]===Symbol.for("react.memo_cache_sentinel")?(Y={display:"flex",alignItems:"center",gap:1},eE[32]=Y):Y=eE[32],eE[33]===Symbol.for("react.memo_cache_sentinel")?(G={xs:36,sm:40},eE[33]=G):G=eE[33],eE[34]===Symbol.for("react.memo_cache_sentinel")?($=(0,n.jsx)(H.Z,{variant:"outlined",onClick:eJ,sx:{minWidth:G,borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px 8px",sm:"6px 12px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},children:"Views"}),eE[34]=$):$=eE[34];let e1=!!eV;if(eE[35]===Symbol.for("react.memo_cache_sentinel")?(X={sx:{maxHeight:500,maxWidth:400,overflowY:"auto",width:"auto",padding:1,borderRadius:"8px"}},eE[35]=X):X=eE[35],eE[36]!==eG||eE[37]!==eM||eE[38]!==eF){let e;eE[40]!==eG||eE[41]!==eM?(e=(e,t)=>(0,n.jsx)(M.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingRight:1,fontSize:"14px",color:"technical"===e.type?"#283593":"#424242",backgroundColor:"technical"===e.type?"#fff9c4":"transparent",borderRadius:"8px","&:hover":{backgroundColor:"technical"===e.type?"#fff8b0":"#e8eaf6"}},children:(0,n.jsxs)(P.Z,{sx:{display:"flex",alignItems:"center",flexGrow:1,borderRadius:"18px"},onClick:()=>eG(e.name),children:[(0,n.jsx)(eg.Z,{checked:eM.includes(e.name),sx:{color:"#90caf9","&.Mui-checked":{color:"#90caf9"}}}),(0,n.jsx)(en.Z,{primary:e.pretty_name})]})},e.name),eE[40]=eG,eE[41]=eM,eE[42]=e):e=eE[42],ee=eF.map(e),eE[36]=eG,eE[37]=eM,eE[38]=eF,eE[39]=ee}else ee=eE[39];eE[43]!==eV||eE[44]!==e1||eE[45]!==ee?(et=(0,n.jsxs)(P.Z,{sx:Y,children:[$,(0,n.jsx)(q.Z,{anchorEl:eV,open:e1,onClose:eY,PaperProps:X,children:ee})]}),eE[43]=eV,eE[44]=e1,eE[45]=ee,eE[46]=et):et=eE[46],eE[47]===Symbol.for("react.memo_cache_sentinel")?(el={display:"flex",alignItems:"center",gap:1},eE[47]=el):el=eE[47],eE[48]===Symbol.for("react.memo_cache_sentinel")?(ea={color:"#90caf9","&.Mui-checked":{color:"#90caf9"},padding:{xs:"4px",sm:"6px"}},eE[48]=ea):ea=eE[48],eE[49]!==e$||eE[50]!==eH?(er=(0,n.jsx)(eg.Z,{checked:eH,onChange:e$,sx:ea}),eE[49]=e$,eE[50]=eH,eE[51]=er):er=eE[51],eE[52]===Symbol.for("react.memo_cache_sentinel")?(eo=(0,n.jsx)(U.Z,{sx:{color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Show Technical Views"}),eE[52]=eo):eo=eE[52],eE[53]!==er?(ei=(0,n.jsxs)(P.Z,{sx:el,children:[er,eo]}),eE[53]=er,eE[54]=ei):ei=eE[54],eE[55]===Symbol.for("react.memo_cache_sentinel")?(es={display:"flex",alignItems:"center",gap:1},eE[55]=es):es=eE[55];let e2=1===eP;eE[56]===Symbol.for("react.memo_cache_sentinel")?(ec={xs:36,sm:40},eE[56]=ec):ec=eE[56],eE[57]===Symbol.for("react.memo_cache_sentinel")?(ed={minWidth:ec,borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px",sm:"6px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},eu=(0,n.jsx)(eb.Z,{fontSize:"small"}),eE[57]=ed,eE[58]=eu):(ed=eE[57],eu=eE[58]),eE[59]!==e2?(em=(0,n.jsx)(H.Z,{variant:"outlined",onClick:e0,disabled:e2,sx:ed,children:eu}),eE[59]=e2,eE[60]=em):em=eE[60],eE[61]===Symbol.for("react.memo_cache_sentinel")?(eh={color:"#ffffff",fontWeight:"bold",fontSize:{xs:"0.875rem",sm:"1rem"}},eE[61]=eh):eh=eE[61],eE[62]!==eP?(ef=(0,n.jsx)(U.Z,{sx:eh,children:eP}),eE[62]=eP,eE[63]=ef):ef=eE[63];let e4=eP===eF.length;if(eE[64]===Symbol.for("react.memo_cache_sentinel")?(ex={xs:36,sm:40},eE[64]=ex):ex=eE[64],eE[65]===Symbol.for("react.memo_cache_sentinel")?(ep={minWidth:ex,borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px",sm:"6px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},ey=(0,n.jsx)(ev.Z,{fontSize:"small"}),eE[65]=ep,eE[66]=ey):(ep=eE[65],ey=eE[66]),eE[67]!==eX||eE[68]!==e4?(ej=(0,n.jsx)(H.Z,{variant:"outlined",onClick:eX,disabled:e4,sx:ep,children:ey}),eE[67]=eX,eE[68]=e4,eE[69]=ej):ej=eE[69],eE[70]!==em||eE[71]!==ef||eE[72]!==ej?(e_=(0,n.jsxs)(P.Z,{sx:es,children:[em,ef,ej]}),eE[70]=em,eE[71]=ef,eE[72]=ej,eE[73]=e_):e_=eE[73],eE[74]!==et||eE[75]!==ei||eE[76]!==e_?(eS=(0,n.jsxs)(P.Z,{sx:J,children:[et,ei,e_]}),eE[74]=et,eE[75]=ei,eE[76]=e_,eE[77]=eS):eS=eE[77],eE[78]!==eT?(ew=()=>eT("/add-node"),eE[78]=eT,eE[79]=ew):ew=eE[79],eE[80]===Symbol.for("react.memo_cache_sentinel")?(eZ={xs:36,sm:40},eE[80]=eZ):eZ=eE[80],eE[81]===Symbol.for("react.memo_cache_sentinel")?(eC={minWidth:eZ,borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px 8px",sm:"6px 12px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},eE[81]=eC):eC=eE[81],eE[82]!==ew?(ek=(0,n.jsx)(H.Z,{variant:"outlined",onClick:ew,sx:eC,children:"Add new node"}),eE[82]=ew,eE[83]=ek):ek=eE[83],eE[84]!==eS||eE[85]!==ek?(eN=(0,n.jsxs)(P.Z,{sx:B,children:[eS,ek]}),eE[84]=eS,eE[85]=ek,eE[86]=eN):eN=eE[86],eE[87]===Symbol.for("react.memo_cache_sentinel")?(eI={display:"flex",flexWrap:"wrap",gap:{xs:2,sm:4}},eE[87]=eI):eI=eE[87],eE[88]!==eP||eE[89]!==(null==eL||null==(m=eL.data)?void 0:m.node_id)||eE[90]!==eG||eE[91]!==eQ||eE[92]!==eT||eE[93]!==eq||eE[94]!==eM||eE[95]!==eF){let e,t;eE[97]!==eM?(e=e=>eM.includes(e.name),eE[97]=eM,eE[98]=e):e=eE[98],eE[99]!==eP||eE[100]!==(null==eL||null==(S=eL.data)?void 0:S.node_id)||eE[101]!==eG||eE[102]!==eQ||eE[103]!==eT||eE[104]!==eq?(t=(e,t)=>(0,n.jsx)(P.Z,{sx:{width:{xs:"100%",sm:"calc(".concat(100/Math.min(eP,2),"% - 16px)"),md:"calc(".concat(100/eq,"% - 32px)")}},children:(0,n.jsx)(te,{view:e,onClick:t=>{if(!t.defaultPrevented)if(e.name.endsWith("class_attribute_field")){var l,n;eQ.mutate({node:null==eL||null==(l=eL.data)?void 0:l.node_id}),eT("/add-node/form/".concat(null==eL||null==(n=eL.data)?void 0:n.node_id))}else eT("/information/".concat(e.name.replaceAll(" ","_")))},handleViewToggle:eG})},e.name),eE[99]=eP,eE[100]=null==eL||null==(Z=eL.data)?void 0:Z.node_id,eE[101]=eG,eE[102]=eQ,eE[103]=eT,eE[104]=eq,eE[105]=t):t=eE[105],eA=eF.filter(e).map(t),eE[88]=eP,eE[89]=null==eL||null==(w=eL.data)?void 0:w.node_id,eE[90]=eG,eE[91]=eQ,eE[92]=eT,eE[93]=eq,eE[94]=eM,eE[95]=eF,eE[96]=eA}else eA=eE[96];return eE[106]!==eA?(ez=(0,n.jsx)(P.Z,{sx:eI,children:eA}),eE[106]=eA,eE[107]=ez):ez=eE[107],eE[108]!==eN||eE[109]!==ez?(eD=(0,n.jsxs)(P.Z,{sx:V,className:"home-page",children:[eN,ez]}),eE[108]=eN,eE[109]=ez,eE[110]=eD):eD=eE[110],eD},{})},{path:"/information/:viewId",element:(0,n.jsx)(()=>{let e,t,l,r,o,c,d,u,m=(0,s.c)(15),{viewId:h}=(0,i.UO)(),f=(0,i.s0)();return(D("Information for View ".concat(h)),m[0]!==f?(e=()=>{let e=e=>{"Escape"===e.key&&f("/home")};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},t=[f],m[0]=f,m[1]=e,m[2]=t):(e=m[1],t=m[2]),(0,a.useEffect)(e,t),h)?(m[3]!==h?(l=(0,n.jsx)("h1",{children:h}),r=(0,n.jsx)(e9,{viewId:h}),m[3]=h,m[4]=l,m[5]=r):(l=m[4],r=m[5]),m[6]!==f?(o=()=>{f("/home")},m[6]=f,m[7]=o):o=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(c=(0,n.jsx)(ey.Z,{}),m[8]=c):c=m[8],m[9]!==o?(d=(0,n.jsx)(B.Z,{className:"close-button",onClick:o,"aria-label":"close",children:c}),m[9]=o,m[10]=d):d=m[10],m[11]!==l||m[12]!==r||m[13]!==d?(u=(0,n.jsxs)("div",{className:"information-page",children:[l,r,d]}),m[11]=l,m[12]=r,m[13]=d,m[14]=u):u=m[14],u):(f("/home"),null)},{})},{path:"/add-node",element:(0,n.jsx)(()=>{D("Add node");let e=(0,i.s0)(),{data:t,isLoading:l,error:r,refetch:o}=b("bnode_class_distribution"),s=(0,E.NL)(),[c,d]=(0,a.useState)([]),[u,m]=(0,a.useState)([]),[h,f]=(0,a.useState)(new Set),[x,p]=(0,a.useState)(""),[g,v]=(0,a.useState)(!1),[y,_]=(0,a.useState)(()=>{try{let e=localStorage.getItem("favorites");if(null==e)return[];{let t=JSON.parse(e);return Array.isArray(t)?t:[]}}catch(e){return[]}}),S=j("jump",{onSuccess:async()=>{await s.invalidateQueries()}}),w=j("add_node"),Z=j("class_information"),C=async e=>{let t=u.find(t=>t.endsWith(e));if(t)try{var l,n,a,r;let e=await w.mutateAsync({BNodeClass:t}),o=null==e||null==(r=e.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)?void 0:l.data.id;return await S.mutateAsync({node_id:o}),o}catch(e){throw console.error("Error during handleCreateAndJump for ".concat(t,":"),e),e}},k=async t=>{try{let l=await C(t);e("/add-node/form/".concat(l))}catch(e){console.error("Navigation skipped due to error:",e)}},N=e=>{_(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};(0,a.useEffect)(()=>{localStorage.setItem("favorites",JSON.stringify(y))},[y]),(0,a.useEffect)(()=>{if(t)try{var e,l,n,a;let r=((null==t||null==(a=t.data)||null==(n=a.results)||null==(l=n[0])||null==(e=l.result)?void 0:e.data)||[]).filter(e=>Object.keys(e)[0]),o=r.map(e=>Object.keys(e)[0].split(".").pop()),i=r.map(e=>Object.keys(e)[0]);d(o),m(i)}catch(e){console.error("Failed to parse class names:",e)}},[t]);let I=(0,a.useCallback)(async e=>{let t=localStorage.getItem("persisting:".concat(e));if(null!==t)return"true"===t;try{var l,n,a,r;let t=await Z.mutateAsync({classForm:e}),o=null==t||null==(r=t.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)?void 0:l.data;return(null==o?void 0:o.BusinessNode)!==void 0}catch(t){return console.error("Error fetching info for ".concat(e,":"),t),!1}},[Z.mutateAsync]);return(0,a.useEffect)(()=>{u&&0!==u.length&&(async()=>{let e=new Set;await Promise.all(u.map(async t=>{await I(t)&&e.add(t)})),f(e)})()},[u,I]),(0,n.jsx)(ea.Z,{in:!g,timeout:300,children:(0,n.jsxs)(tc.Z,{component:Y.Z,elevation:3,sx:{p:4,position:"relative",bgcolor:"#f8f9fa",maxWidth:"100%",width:"100%",minHeight:"80vh",overflow:"hidden"},children:[(0,n.jsx)(U.Z,{variant:"h3",component:"h1",gutterBottom:!0,sx:{color:"#2c3e50",textAlign:"center",fontWeight:600,pb:2,borderBottom:"3px solid #3498db"},children:"Add a new node"}),(0,n.jsx)(P.Z,{sx:{display:"flex",justifyContent:"center",mb:3,width:"100%"},children:(0,n.jsx)(J.Z,{fullWidth:!0,variant:"outlined",placeholder:"Search class name...",value:x,onChange:e=>p(e.target.value),sx:{maxWidth:400},InputProps:{startAdornment:(0,n.jsx)(td.Z,{position:"start",children:(0,n.jsx)(tx.Z,{})})}})}),y.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.Z,{variant:"h4",component:"h2",sx:{color:"#34495e",my:3,fontWeight:500},children:"Favorites (Persistent Only)"}),(0,n.jsx)(tu.Z,{container:!0,spacing:2,sx:{mt:2,justifyContent:"center"},children:y.map(e=>{let t=u.find(t=>t.endsWith(e));return{short:e,full:t}}).filter(e=>{let{full:t}=e;return t&&h.has(t)}).filter(e=>{let{short:t}=e;return t.toLowerCase().includes(x.toLowerCase())}).map(e=>{let{short:t}=e;return(0,n.jsx)(tu.Z,{children:(0,n.jsx)(ep.Z,{onClick:()=>k(t),sx:{minWidth:120,cursor:"pointer",transition:"all 0.2s ease","&:hover":{bgcolor:"#f0f8ff",transform:"translateY(-2px)",boxShadow:3}},children:(0,n.jsxs)(ex.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",p:2,"&:last-child":{pb:2}},children:[(0,n.jsx)(P.Z,{onClick:e=>{e.stopPropagation(),N(t)},sx:{mr:1,display:"inline-flex",cursor:"pointer"},children:(0,n.jsx)(tm.Z,{sx:{color:"#f1c40f"}})}),(0,n.jsx)(P.Z,{children:t})]})})},t)})})]}),(0,n.jsx)(U.Z,{variant:"h4",component:"h2",sx:{color:"#34495e",my:3,fontWeight:500},children:"All persisting classes"}),(0,n.jsx)(tu.Z,{container:!0,spacing:2,sx:{mt:2,justifyContent:"center"},children:c.map((e,t)=>({short:e,full:u[t]})).filter(e=>{let{full:t}=e;return h.has(t)}).filter(e=>{let{short:t}=e;return t.toLowerCase().includes(x.toLowerCase())}).map(e=>{let{short:t}=e;return(0,n.jsx)(tu.Z,{children:(0,n.jsx)(ep.Z,{sx:{minWidth:120,cursor:"pointer",transition:"all 0.2s ease","&:hover":{bgcolor:"#f0f8ff",transform:"translateY(-2px)",boxShadow:3}},children:(0,n.jsxs)(ex.Z,{onClick:()=>k(t),sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",p:2,"&:last-child":{pb:2}},children:[(0,n.jsx)(P.Z,{onClick:e=>{e.stopPropagation(),N(t)},sx:{mr:1,display:"inline-flex",cursor:"pointer"},children:y.includes(t)?(0,n.jsx)(tm.Z,{sx:{color:"#f1c40f"}}):(0,n.jsx)(th.Z,{sx:{color:"#ccc"}})}),(0,n.jsx)(P.Z,{children:t})]})})},t)})}),(0,n.jsxs)(P.Z,{sx:{position:"absolute",top:10,right:10,display:"flex",gap:1,zIndex:1e3},children:[(0,n.jsx)(B.Z,{onClick:()=>{Object.keys(localStorage).filter(e=>e.startsWith("persisting:")).forEach(e=>localStorage.removeItem(e)),f(new Set),o()},"aria-label":"reload",title:"Reload all classes",sx:{"&:hover":{color:"#3498db"}},children:(0,n.jsx)(tf.Z,{})}),(0,n.jsx)(B.Z,{onClick:()=>{v(!0),setTimeout(()=>e("/home"),300)},"aria-label":"close",title:"Close",sx:{"&:hover":{color:"#e74c3c"}},children:(0,n.jsx)(ey.Z,{})})]})]})})},{})},{path:"/add-node/form/:rootId",element:(0,n.jsx)(()=>{var e,t,l,a,r,o,c,d,u,m,h,f,x,p,g,v,y,_,S,w,Z,C,k,N,I,A,z,D,T,L,O;let F,W,R,V,K,M,q,J,G,$,X,ee,et,el,en,ea,er,eo,ei,es,ec,ed,eu,em=(0,s.c)(57),{rootId:eh}=(0,i.UO)(),ef=eh?parseInt(eh):0,ex=(0,E.NL)(),ep=(0,i.s0)();em[0]!==ef?(F={node_id:ef},em[0]=ef,em[1]=F):F=em[1];let{data:eg,isLoading:eb,error:ey,refetch:ej}=b("class_attribute_field",F),e_=null==eg||null==(o=eg.data)||null==(r=o.results)||null==(a=r[0])||null==(l=a.result)||null==(t=l.data)||null==(e=t.currentNode)?void 0:e.name,eS=j("export_csv"),ew=j("remove_node");em[2]!==ex||em[3]!==(null==eg||null==(h=eg.data)||null==(m=h.results)||null==(u=m[0])||null==(d=u.result)||null==(c=d.data)?void 0:c.attributes)?(W={onSuccess:async()=>{var e,t,l,n,a,r;await ex.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:null==eg||null==(r=eg.data)||null==(a=r.results)||null==(n=a[0])||null==(l=n.result)||null==(t=l.data)||null==(e=t.attributes)?void 0:e.filter(lp)[0].id}]})}},em[2]=ex,em[3]=null==eg||null==(Z=eg.data)||null==(w=Z.results)||null==(S=w[0])||null==(_=S.result)||null==(y=_.data)?void 0:y.attributes,em[4]=W):W=em[4];let eZ=j("search_node",W);if(eb){let e;return em[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(P.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:(0,n.jsx)(Q.Z,{})}),em[5]=e):e=em[5],e}if(ey){let e,t=ey.message||"Unknown error";return em[6]!==t?(e=(0,n.jsxs)(U.Z,{color:"error",children:["Error loading form fields: ",t]}),em[6]=t,em[7]=e):e=em[7],e}return em[8]===Symbol.for("react.memo_cache_sentinel")?(R={p:3,position:"relative"},em[8]=R):R=em[8],em[9]!==ep?(V=()=>ep(-1),em[9]=ep,em[10]=V):V=em[10],em[11]===Symbol.for("react.memo_cache_sentinel")?(K={position:"absolute",top:16,right:16},M=(0,n.jsx)(tb.Z,{}),em[11]=K,em[12]=M):(K=em[11],M=em[12]),em[13]!==V?(q=(0,n.jsx)(B.Z,{className:"close-button",onClick:V,"aria-label":"close",sx:K,children:M}),em[13]=V,em[14]=q):q=em[14],em[15]!==e_?(J=tw(e_),em[15]=e_,em[16]=J):J=em[16],em[17]!==J?(G=(0,n.jsxs)(U.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:["Form for: ",J]}),em[17]=J,em[18]=G):G=em[18],em[19]!==e_||em[20]!==ef?($=tZ(ef,e_),em[19]=e_,em[20]=ef,em[21]=$):$=em[21],em[22]!==ef?(X={id:ef},em[22]=ef,em[23]=X):X=em[23],em[24]!==ef||em[25]!==X||em[26]!==$?(ee=(0,n.jsx)(lm,{fieldKey:$,rootId:ef,isRoot:!0,field:X}),em[24]=ef,em[25]=X,em[26]=$,em[27]=ee):ee=em[27],em[28]!==(null==eg||null==(v=eg.data)||null==(g=v.results)||null==(p=g[0])||null==(x=p.result)||null==(f=x.data.currentNode)?void 0:f.type)||em[29]!==ef||em[30]!==eZ?(et=(null==eg||null==(A=eg.data)||null==(I=A.results)||null==(N=I[0])||null==(k=N.result)||null==(C=k.data.currentNode)?void 0:C.type)==="SearchForm"?(0,n.jsx)(H.Z,{variant:"contained",color:"primary",sx:{},onClick:()=>eZ.mutate({node_id:ef}),children:"Rechercher"}):"",em[28]=null==eg||null==(O=eg.data)||null==(L=O.results)||null==(T=L[0])||null==(D=T.result)||null==(z=D.data.currentNode)?void 0:z.type,em[29]=ef,em[30]=eZ,em[31]=et):et=em[31],em[32]!==ee||em[33]!==et||em[34]!==q||em[35]!==G?(el=(0,n.jsxs)(tc.Z,{className:"form-page",component:Y.Z,elevation:3,sx:R,children:[q,G,ee,et]}),em[32]=ee,em[33]=et,em[34]=q,em[35]=G,em[36]=el):el=em[36],em[37]===Symbol.for("react.memo_cache_sentinel")?(en={position:"absolute",bottom:16,right:16},em[37]=en):en=em[37],em[38]===Symbol.for("react.memo_cache_sentinel")?(ea=(0,n.jsx)(tp.Z,{}),er=(0,n.jsx)(lh.Z,{}),em[38]=ea,em[39]=er):(ea=em[38],er=em[39]),em[40]!==eS||em[41]!==e_||em[42]!==ef?(eo={icon:er,name:"Exporter",onClick:async()=>{var e,t,l,n;let a=await eS.mutateAsync({node_id:ef,includeAllFields:!0,maxDepth:4}),r=new Blob([null==a||null==(n=a.data)||null==(l=n.results)||null==(t=l[0])||null==(e=t.result)?void 0:e.data],{type:"text/csv"});(0,lx.saveAs)(r,"".concat(e_,".csv"))}},em[40]=eS,em[41]=e_,em[42]=ef,em[43]=eo):eo=em[43],em[44]===Symbol.for("react.memo_cache_sentinel")?(ei={icon:(0,n.jsx)(ev.Z,{}),name:"Ajouter une nouvelle entr\xe9e"},es=(0,n.jsx)(lf.Z,{}),em[44]=ei,em[45]=es):(ei=em[44],es=em[45]),em[46]!==ep||em[47]!==ej||em[48]!==ew||em[49]!==ef?(ec={icon:es,name:"Supprimer",onClick:async()=>{await ew.mutateAsync({node_id:ef},{onSuccess:async()=>{await ej(),ep(-1)}})}},em[46]=ep,em[47]=ej,em[48]=ew,em[49]=ef,em[50]=ec):ec=em[50],em[51]!==eo||em[52]!==ec?(ed=(0,n.jsx)(tg.Z,{ariaLabel:"SpeedDial playground example",sx:en,hidden:!1,icon:ea,children:[eo,ei,ec].map(lg)}),em[51]=eo,em[52]=ec,em[53]=ed):ed=em[53],em[54]!==el||em[55]!==ed?(eu=(0,n.jsxs)(n.Fragment,{children:[el,ed]}),em[54]=el,em[55]=ed,em[56]=eu):eu=em[56],eu},{})}]}]}]);var lb=l(2920),ly=l(7300);let lj=new lb.S,l_=document.getElementById("root");(0,r.createRoot)(l_).render((0,n.jsx)(a.StrictMode,{children:(0,n.jsx)(o.Z,{injectFirst:!0,children:(0,n.jsxs)(E.aH,{client:lj,children:[(0,n.jsx)(i.pG,{router:lv}),(0,n.jsx)(ly.t,{buttonPosition:"bottom-left",initialIsOpen:!1})]})})}))}},t={};function l(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,l),r.loaded=!0,r.exports}l.m=e,l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;l.t=function(n,a){if(1&a&&(n=this(n)),8&a||"object"==typeof n&&n&&(4&a&&n.__esModule||16&a&&"function"==typeof n.then))return n;var r=Object.create(null);l.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var i=2&a&&n;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>{o[e]=()=>n[e]});return o.default=()=>n,l.d(r,o),r}})(),l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e=[];l.O=(t,n,a,r)=>{if(n){r=r||0;for(var o=e.length;o>0&&e[o-1][2]>r;o--)e[o]=e[o-1];e[o]=[n,a,r];return}for(var i=1/0,o=0;o<e.length;o++){for(var n=e[o][0],a=e[o][1],r=e[o][2],s=!0,c=0;c<n.length;c++)(!1&r||i>=r)&&Object.keys(l.O).every(e=>l.O[e](n[c]))?n.splice(c--,1):(s=!1,r<i&&(i=r));if(s){e.splice(o--,1);var d=a();void 0!==d&&(t=d)}}return t}})(),l.p="/",(()=>{l.b=document.baseURI||self.location.href;var e={980:0};l.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,o=n[0],i=n[1],s=n[2],c=0;if(o.some(t=>0!==e[t])){for(a in i)l.o(i,a)&&(l.m[a]=i[a]);if(s)var d=s(l)}for(t&&t(n);c<o.length;c++)r=o[c],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(d)},n=self.webpackChunklogin_page=self.webpackChunklogin_page||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=l.O(void 0,["72","361","118","20"],function(){return l(1527)});n=l.O(n)})();