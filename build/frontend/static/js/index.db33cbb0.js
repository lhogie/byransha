(()=>{"use strict";var e={88156:function(e,t,a){var r=a(85893),n=a(67294),l=a(20745),s=a(33988),o=a(74856),i=a(68827),c=a(3058),d=a(14578),u=a(62643),f=a(63760),m=a(80430);let p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new URLSearchParams({...t}).toString(),n=r?`?${r}`:"",l=`https://localhost:8080/api/${e}${n}`;return(0,u.a)({queryKey:["apiData",e,t],queryFn:()=>m.Z.get(l,{withCredentials:!0}),retry:2,staleTime:6e4,onError:t=>{console.error(`API request failed for ${e}:`,t)},...a})},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,f.D)({mutationFn:t=>m.Z.post(`https://localhost:8080/api/${e}`,t,{withCredentials:!0}),...t})};var x=a(23802),b=a(22992),g=a(47839),y=a(3553),j=a(3666);a(96023);var v=a(7942);let _=(0,c.Z)({cssVariables:!0,colorSchemes:{dark:!1},typography:{fontFamily:"IBM Plex Sans, sans-serif"}},j.g,y.gQ);function w(e){return{kind:"page",title:e.endpoint,segment:`information/${e.endpoint.replaceAll(" ","_")}`,icon:(0,r.jsx)(x.Z,{})}}var S=a(922);let Z=a.p+"static/image/i3S_RVB_Couleur.eaa939af.png",k=e=>{let t,a,r=(0,i.c)(3),l="undefined"!=typeof document,s=n.useRef(l?document.title:null);r[0]!==e?(t=()=>{if(l)return document.title!==e&&(document.title=e),()=>{document.title=s.current}},a=[l,e],r[0]=e,r[1]=t,r[2]=a):(t=r[1],a=r[2]),n.useEffect(t,a)};var C=a(99469);function N(e){return!e}var I=a(48249),E=a(44728),A=a(20533),O=a(33991),D=a(13400),z=a(99782),L=a(94018),P=a(73876),$=a(54757),T=a(7230),W=a(1854),F=a(81035),R=a(8523),U=a(56099),M=a(61215),K=a(11786),B=a(24697);let H=()=>{let e,t,a,l,s,c,d,u,f,m=(0,i.c)(21),[x,b]=(0,n.useState)("");m[0]===Symbol.for("react.memo_cache_sentinel")?(e={maxWait:500},m[0]=e):e=m[0];let[g]=(0,B.Nr)(x,250,e),y=(0,o.s0)(),j=(0,C.NL)();m[1]!==j?(t={onSuccess:async()=>{await j.invalidateQueries()}},m[1]=j,m[2]=t):t=m[2];let v=h("jump",t);m[3]!==g?(a={query:g},m[3]=g,m[4]=a):a=m[4];let _=x.length>0;m[5]!==_?(l={enabled:_},m[5]=_,m[6]=l):l=m[6];let{isLoading:w,data:S}=p("search_node",a,l);m[7]!==S?.data?.results?.[0]?.result?.data?(s=S?.data?.results?.[0]?.result?.data||[],m[7]=S?.data?.results?.[0]?.result?.data,m[8]=s):s=m[8];let Z=s;return m[9]===Symbol.for("react.memo_cache_sentinel")?(c={width:300},m[9]=c):c=m[9],m[10]!==v||m[11]!==y?(d=(e,t)=>{t&&(v.mutate({node_id:t.id}),y("/home"))},m[10]=v,m[11]=y,m[12]=d):d=m[12],m[13]!==w||m[14]!==x?(u=e=>(0,r.jsx)(U.Z,{...e,label:"Rechercher",variant:"outlined",size:"small",value:x,onChange:e=>b(e.target.value),slotProps:{input:{...e.InputProps,endAdornment:(0,r.jsxs)(r.Fragment,{children:[w?(0,r.jsx)(M.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]}),sx:{pr:.5}}},sx:{display:{xs:"none",md:"inline-block"},mr:1}}),m[13]=w,m[14]=x,m[15]=u):u=m[15],m[16]!==w||m[17]!==Z||m[18]!==d||m[19]!==u?(f=(0,r.jsx)(K.Z,{sx:c,isOptionEqualToValue:V,getOptionLabel:q,options:Z,loading:w,onChange:d,renderInput:u}),m[16]=w,m[17]=Z,m[18]=d,m[19]=u,m[20]=f):f=m[20],f};function V(e,t){return e.title===t.title}function q(e){return e.name}var J=a(89717),Q=a(32153),G=a(89276),Y=a(19410),X=a(11419),ee=a(80372),et=a(89425),ea=a(77012),er=a(58446),en=a(17563),el=a(66520);let es=e=>{let t=(0,i.c)(10),{code:a,language:n}=e;if(a.length>5e4){let e,n,l;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={whiteSpace:"pre-wrap",padding:"10px",borderRadius:"5px"},t[0]=e):e=t[0],t[1]!==a?(n=a.trim(),t[1]=a,t[2]=n):n=t[2],t[3]!==n?(l=(0,r.jsx)("code",{style:e,children:n}),t[3]=n,t[4]=l):l=t[4],l}{let e,l;return t[5]!==a?(e=a.trim(),t[5]=a,t[6]=e):e=t[6],t[7]!==n||t[8]!==e?(l=(0,r.jsx)(el.ZP,{language:n,theme:"material-theme-lighter",children:e}),t[7]=n,t[8]=e,t[9]=l):l=t[9],l}};var eo=a(15648),ei=a(80632),ec=a(60488),ed=a(15858),eu=a(55327),ef=a(92566),em=a(73892),ep=a(48346),eh=a(68569);a(50110);let ex=e=>{let t,a,l,s,o,c,d,u,f,m,p,h=(0,i.c)(17),{data:x}=e,[b,g]=(0,n.useState)("csv");h[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{g(e.target.value)},h[0]=t):t=h[0];let y=t;if(h[1]!==x||h[2]!==b){a=()=>{"csv"===b?e(x):"json"===b?t(x):"pdf"===b&&r(x)};let e=eg,t=ey,r=ev;h[1]=x,h[2]=b,h[3]=a}else a=h[3];return h[4]===Symbol.for("react.memo_cache_sentinel")?(l={minWidth:100,marginRight:2},s=(0,r.jsx)(ef.Z,{id:"format-select-label",children:"Format"}),h[4]=l,h[5]=s):(l=h[4],s=h[5]),h[6]===Symbol.for("react.memo_cache_sentinel")?(o={"& .MuiSelect-icon":{paddingLeft:"5rem"}},c=(0,r.jsx)(P.Z,{value:"csv",children:"CSV"}),d=(0,r.jsx)(P.Z,{value:"json",children:"JSON"}),u=(0,r.jsx)(P.Z,{value:"pdf",children:"PDF"}),h[6]=o,h[7]=c,h[8]=d,h[9]=u):(o=h[6],c=h[7],d=h[8],u=h[9]),h[10]!==b?(f=(0,r.jsxs)(em.Z,{variant:"outlined",sx:l,children:[s,(0,r.jsxs)(ep.Z,{labelId:"format-select-label",value:b,onChange:y,label:"Format",sx:o,children:[c,d,u]})]}),h[10]=b,h[11]=f):f=h[11],h[12]!==a?(m=(0,r.jsx)(T.Z,{className:"custom-export-button",variant:"contained",color:"primary",onClick:a,children:"Exporter"}),h[12]=a,h[13]=m):m=h[13],h[14]!==f||h[15]!==m?(p=(0,r.jsxs)("div",{className:"export-button-container",children:[f,m]}),h[14]=f,h[15]=m,h[16]=p):p=h[16],p};function eb(e){return Object.values(e).join(",")}function eg(e){let t=new Blob([[Object.keys(e[0]).join(","),...e.map(eb)].join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.setAttribute("download","export.csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}function ey(e){let t=new Blob([JSON.stringify(e,null,2)],{type:"application/json;charset=utf-8;"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.setAttribute("download","export.json"),document.body.appendChild(r),r.click(),document.body.removeChild(r)}function ej(e){return Object.values(e)}function ev(e){let t=new eh.kH;if(!e||0===e.length)return void console.error("Aucune donn\xe9e \xe0 exporter");let a=[Object.keys(e[0])],r=e.map(ej);t.autoTable({head:a,body:r,startY:20,styles:{fontSize:10},headStyles:{fillColor:[48,109,173]}}),t.save("export.pdf")}var e_=a(96685);a(25217);var ew=a(63852),eS=a(32206),eZ=a(65054),ek=a(44867),eC=a.n(ek);er.Z.use(eC());let eN={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:"800px",maxHeight:"80vh",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,display:"flex",flexDirection:"column",overflow:"hidden"},eI={display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},eE={overflowY:"auto",maxHeight:"calc(80vh - 100px)",width:"100%",scrollbarWidth:"thin",scrollbarColor:"#888 #f1f1f1","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},eA=(0,n.memo)(e=>{let t,a,n,l,s,o,c,d,u,f,m,p,h=(0,i.c)(17),{data:x}=e;return h[0]===Symbol.for("react.memo_cache_sentinel")?(a={trigger:"axis",confine:!0},n=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],h[0]=a,h[1]=n):(a=h[0],n=h[1]),h[2]!==x?(l=x.map(eL),h[2]=x,h[3]=l):l=h[3],h[4]!==l?(s={data:l,orient:"vertical",right:10,top:"center"},h[4]=l,h[5]=s):s=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(o={left:"5%",right:"15%",bottom:"10%",top:"10%",containLabel:!0},c={type:"value",name:"X Axis",nameLocation:"middle",nameGap:30},d={type:"value",name:"Y Axis",min:-1,max:1,nameLocation:"middle",nameGap:50},h[6]=o,h[7]=c,h[8]=d):(o=h[6],c=h[7],d=h[8]),h[9]!==x?(u=x.map(e$),h[9]=x,h[10]=u):u=h[10],h[11]!==s||h[12]!==u?(f={tooltip:a,color:n,legend:s,grid:o,xAxis:c,yAxis:d,series:u},h[11]=s,h[12]=u,h[13]=f):f=h[13],t=f,h[14]===Symbol.for("react.memo_cache_sentinel")?(m={height:"100%",minHeight:"300px",width:"100%"},h[14]=m):m=h[14],h[15]!==t?(p=(0,r.jsx)(e_.Z,{lazyUpdate:!0,option:t,style:m}),h[15]=t,h[16]=p):p=h[16],p}),eO=(0,n.memo)(e=>{let{prettyName:t,data:a,keys:l}=e,s=(0,n.useMemo)(()=>({tooltip:{confine:!0,trigger:"axis",axisPointer:{type:"shadow"}},grid:{containLabel:!1},xAxis:{data:l,axisLabel:{rotate:45,formatter:function(e){return e.length>10?e.substring(0,10)+"...":e}}},yAxis:{type:"value"},series:{name:t,type:"bar",data:l.map(e=>a[e]),emphasis:{focus:"series",blurScope:"coordinateSystem"},animationDuration:300}}),[a,l]);return(0,r.jsx)(e_.Z,{lazyUpdate:!0,option:s,style:{height:"100%",minHeight:"300px",width:"100%"}})}),eD=(0,n.memo)(e=>{let t,a,n,l,s,o,c,d,u,f,m=(0,i.c)(15),{data:p,onNodeClick:h}=e;m[0]!==p.links||m[1]!==p.nodes?(a=eZ.Z.normalizeElements({nodes:p.nodes.map(eT),edges:p.links.map(eW)}),m[0]=p.links,m[1]=p.nodes,m[2]=a):a=m[2],t=a,m[3]===Symbol.for("react.memo_cache_sentinel")?(l={selector:"node",style:{"background-color":"data(color)",width:"data(size)",height:"data(size)","text-valign":"top","text-halign":"center","text-margin-y":-5,"font-size":"12px",color:"#000000","text-outline-width":2,"text-outline-color":"#ffffff","z-index":1,label:""}},m[3]=l):l=m[3],m[4]===Symbol.for("react.memo_cache_sentinel")?(s=[l,{selector:"edge",style:{width:2,"line-color":"#cccccc","target-arrow-color":"#cccccc","target-arrow-shape":"triangle","curve-style":"bezier"}}],m[4]=s):s=m[4],n=s,m[5]===Symbol.for("react.memo_cache_sentinel")?(o={height:"100%",minHeight:"300px",width:"100%"},m[5]=o):o=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(c={width:"100%",height:"100%"},m[6]=c):c=m[6];let x=p.nodes.length>1e3?"random":"fcose";return m[7]!==x?(d={name:x,animate:!1,samplingType:!1,animationDuration:1500,fit:!0,padding:30},m[7]=x,m[8]=d):d=m[8],m[9]!==h?(u=e=>{e.on("tap","node",e=>{let t=e.target;h&&h({id:t.id()},e)}),e.on("mouseover","node",eF),e.on("mouseout","node",eR)},m[9]=h,m[10]=u):u=m[10],m[11]!==t||m[12]!==d||m[13]!==u?(f=(0,r.jsx)(O.Z,{sx:o,children:(0,r.jsx)(eZ.Z,{elements:t,style:c,stylesheet:n,layout:d,cy:u})}),m[11]=t,m[12]=d,m[13]=u,m[14]=f):f=m[14],f}),ez=e=>{let{viewId:t,sx:a}=e,{data:l,isLoading:s,error:o,refetch:i}=p(t),c=(0,n.useRef)(null),d=(0,C.NL)(),[u,f]=(0,n.useState)(!1),[m,x]=(0,n.useTransition)(),[b,g]=(0,n.useState)("#ffffff"),y=h("update_colour"),j=(0,n.useCallback)(e=>{g(e.hex),y.mutate({view_id:t,value:e.hex})},[y,t]),v=e=>{e.stopPropagation(),x(()=>{f(!0)})},_=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e?JSON.stringify(e,null,"tab"===t?"	":t):""},[]),w=e=>{e.stopPropagation(),x(()=>{f(!1)})},S=h("jump",{onSuccess:async()=>{await d.invalidateQueries()}}),Z=(0,n.useCallback)(e=>{S.mutate({node_id:e})},[S]);(0,n.useEffect)(()=>{if(!l)return;let{data:e}=l;e?.results?.[0]?.result&&"text/dot"===e.results[0].result.contentType&&c.current&&(0,en.f)(c.current,{engine:"dot",fit:!0,zoom:!0}).tweenPaths(!1).tweenShapes(!1).renderDot(e.results[0].result.data)},[l]);let k=(0,n.useMemo)(()=>a?.bgcolor||"transparent",[a?.bgcolor]),N=(0,n.useCallback)(e=>{if(!e)return[];let t=[];for(let a of Object.keys(e)){let r=e?.[a]||{},n={id:a,data:r.map(e=>{let t=Object.keys(e)[0];return{x:parseFloat(t),y:parseFloat(e[t])}})};t.push(n)}return t},[]),I=(0,n.useCallback)(e=>{if(!e)return{};let t={};for(let a of Object.values(e))for(let e of Object.keys(a))t[e]=a?.[e]||{};return t},[]),E=(0,n.useCallback)(e=>{if(!e||0===Object.values(e).length)return[];let t=new Set;return Object.values(e).forEach(e=>{Object.keys(e).forEach(e=>t.add(e))}),Array.from(t).sort()},[]),A=(0,n.useCallback)(e=>{if(!e||!e.nodes)return{nodes:[],links:[]};let t=new Map;e.nodes.forEach(e=>{let a=e.id||e.label,r={...e,id:a,label:e.label||a,size:e.size||30,color:e.color||"#1f77b4"};t.has(r.id)||t.set(r.id,r)});let a=e.links.map(e=>{let t="object"==typeof e.source?e.source.id||e.source.label:e.source,a="object"==typeof e.target?e.target.id||e.target.label:e.target;return{...e,source:t,target:a}});return{nodes:Array.from(t.values()),links:a}},[]),D=(0,n.useCallback)((e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),e&&e.id&&Z(e.id.includes("@")?e.id.split("@")[1]:e.id)},[Z]),z=(0,n.useCallback)((e,a)=>{if(!e)return(0,r.jsx)("div",{className:"error-message",children:"No content available."});if("text/json"===a)if("class_attribute_field"===t)return Array.isArray(e)?0===e.length?(0,r.jsx)($.Z,{sx:{p:2},children:"No output nodes connected."}):(0,r.jsx)(O.Z,{sx:{p:1,display:"flex",flexWrap:"wrap",gap:2},children:e.map(e=>{let t=e.mimeType?.startsWith("image/")&&e.value,a=e.hasOwnProperty("value")&&null!==e.value&&void 0!==e.value;return"graph"==e.name?null:(0,r.jsxs)(Q.Z,{sx:{minWidth:275,maxWidth:350,display:"flex",flexDirection:"column"},children:[(0,r.jsxs)(J.Z,{sx:{flexGrow:1},children:[(0,r.jsx)($.Z,{variant:"h6",component:"div",sx:{wordBreak:"break-word"},children:e.name}),t&&(0,r.jsx)(eo.Z,{component:"img",sx:{maxHeight:200,width:"auto",objectFit:"contain",mt:1,border:"1px solid #eee"},image:`data:${e.mimeType};base64,${e.value}`,alt:`Output value for ${e.name}`}),!t&&a&&(0,r.jsx)($.Z,{variant:"body2",component:"pre",sx:{whiteSpace:"pre-wrap",wordBreak:"break-all",mt:1,p:1,backgroundColor:"#f5f5f5",borderRadius:1},children:"object"==typeof e.value?JSON.stringify(e.value,null,2):String(e.value)}),!a&&!t&&(0,r.jsx)($.Z,{variant:"body2",sx:{fontStyle:"italic",mt:1},children:"(No displayable value)"})]}),"true"===e.editable&&(0,r.jsx)(ei.Z,{children:(0,r.jsx)(T.Z,{size:"small",onClick:t=>{t.stopPropagation(),alert(`Edit action for: ${e.name} (ID: ${e.id}) - Not implemented yet.`)},children:"Edit"})})]},e.id)})}):(0,r.jsxs)($.Z,{sx:{p:2},color:"error",children:["Error: Expected an array for 'class_attribute_field' data, but received type ",typeof e,"."]});else if("char_example_xy"===t){let t=N(e);return(0,r.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)(M.Z,{}),children:(0,r.jsx)(eA,{data:t})})})}else if(t.endsWith("_distribution")){let t=I(e),a=E(e),l=P?.results?.[0]?.pretty_name;return(0,r.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)(M.Z,{}),children:(0,r.jsx)(eO,{prettyName:l,data:t,keys:a})})})}else if(t.endsWith("nivo_view")){let t=A(e);return(0,r.jsx)("div",{className:"graph",onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)(M.Z,{}),children:(0,r.jsx)(eD,{data:t,onNodeClick:D})})})}else if("bnode_navigator"===t)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.Z,{sx:{mb:2},children:Object.keys(e.ins).map(t=>(0,r.jsxs)(T.Z,{onClick:a=>{a.stopPropagation(),a.preventDefault(),Z(e.ins[t])},variant:"contained",sx:{bgcolor:"#3949ab",color:"#fff",mr:1,mb:1,"&:hover":{bgcolor:"#5c6bc0"}},children:[t," (",e.ins[t],")"]},t))}),(0,r.jsx)(O.Z,{sx:{paddingY:"10px"},children:Object.keys(e.outs).map(t=>(0,r.jsxs)(T.Z,{onClick:a=>{a.stopPropagation(),a.preventDefault(),Z(e.outs[t])},variant:"contained",sx:{bgcolor:"#00897b",color:"#fff",mr:1,mb:1,"&:hover":{bgcolor:"#26a69a"}},children:[t," (",e.outs[t],")"]},t))})]});else return(0,r.jsx)("div",{className:"content-container",style:{background:k},children:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)(M.Z,{}),children:(0,r.jsx)(ew.gc,{data:e,shouldExpandNode:ew.T})})});if("text/dot"===a)return(0,r.jsx)("div",{className:"content-container graphviz-container",style:{background:k},children:(0,r.jsx)("div",{ref:c})});if("text/html"===a)return(0,r.jsx)("div",{className:"content-container html-content",style:{background:k},children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})});if("image/svg"===a)return(0,r.jsx)("div",{className:"content-container",style:{background:"transparent"},children:(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:e},style:{background:"transparent"}})});if("image/svg+xml"===a)return(0,r.jsx)("div",{className:"content-container",style:{background:"transparent"},children:(0,r.jsx)("img",{src:`data:image/svg+xml;base64,${e}`,alt:"Graphviz",style:{background:"transparent"}})});else if("text/plain"===a)return(0,r.jsx)("div",{className:"content-container",style:{background:k},children:(0,r.jsx)("pre",{children:e})});else if("image/png"===a||"image/jpeg"===a)return(0,r.jsx)("div",{className:"content-container",style:{background:k},children:(0,r.jsx)("img",{src:`data:${a};base64,${e}`,alt:"Content"})});else if("image/jsondot"===a)return(0,r.jsx)("div",{className:"content-container",style:{background:k},children:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)(M.Z,{}),children:(0,r.jsx)(ew.gc,{data:e})})});else if("text/java"===a)return(0,r.jsx)("div",{className:"content-container",style:{background:k},children:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)(M.Z,{}),children:(0,r.jsx)(es,{language:"java",code:e,style:{background:k}})})});else if("text/hex"===a)return(0,r.jsx)("div",{className:"content-container",style:{background:k},children:(0,r.jsx)(eS.AI,{color:b,disableAlpha:!0,onChangeComplete:j})});else return(0,r.jsxs)("div",{className:"error-message",children:["Unsupported content type: ",a]})},[t,Z,c,k,_]),L=(0,n.useMemo)(()=>e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ec.Z,{title:"Show Raw Backend Response",children:(0,r.jsx)(F.Z,{onClick:v,size:"small",sx:{position:"absolute",top:5,right:5,zIndex:10,width:30,height:30,color:"primary.main"},"aria-label":"Show raw JSON",disabled:null==e,children:(0,r.jsx)(eu.Z,{})})}),(0,r.jsx)(ed.Z,{open:u,onClose:w,"aria-labelledby":"raw-json-modal-title","aria-describedby":"raw-json-modal-description",children:(0,r.jsxs)(O.Z,{sx:eN,children:[(0,r.jsxs)(O.Z,{sx:eI,children:[(0,r.jsx)($.Z,{id:"raw-json-modal-title",variant:"h6",component:"h2",children:"Raw Backend Response"}),(0,r.jsx)(F.Z,{onClick:w,"aria-label":"close",children:(0,r.jsx)(et.Z,{})})]}),(0,r.jsx)(O.Z,{sx:eE,children:e?(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)(M.Z,{}),children:(0,r.jsx)(ew.gc,{data:e})}):(0,r.jsx)($.Z,{children:"No raw data available to display."})})]})})]}),[u,v,w,_]);if(s)return(0,r.jsxs)(O.Z,{className:"view-container",sx:{position:"relative",padding:2,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px"},children:[L(l),(0,r.jsx)(M.Z,{})]});if(o)return(0,r.jsxs)(O.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:[L(l),(0,r.jsxs)("div",{className:"error-message",style:{marginTop:"40px"},children:["Error fetching data: ",o.message]})]});if(!l)return(0,r.jsxs)(O.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:[L(null),(0,r.jsx)("div",{className:"error-message",style:{marginTop:"40px"},children:"No data available."})]});let{data:P}=l;if(P?.results?.[0]?.error!==void 0)return(0,r.jsxs)(O.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:[L(l),(0,r.jsxs)("div",{className:"error-message",style:{marginTop:"40px"},children:["Backend Error: ",P.results[0].error]})]});let W=P?.results?.[0]?.result?.data,R=P?.results?.[0]?.result?.contentType;if(!W||!R)return(0,r.jsxs)(O.Z,{className:"view-container information-page",sx:{position:"relative",padding:2},children:[L(W)||L(R),(0,r.jsx)("div",{className:"error-message",style:{marginTop:"40px"},children:"Result data or content type missing in the response."})]});let U=l.data.results[0].result.data;return(0,r.jsxs)(O.Z,{className:"view-container",sx:{height:"100%",display:"flex",flexDirection:"column"},children:[L(U),(0,r.jsx)(O.Z,{sx:{position:"relative",padding:2,flex:1,minHeight:"300px",display:"flex",flexDirection:"column",overflow:"hidden"},children:(0,r.jsx)(O.Z,{sx:{mt:4,flex:1,overflow:"auto","&::-webkit-scrollbar":{width:"8px",height:"8px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"#888",borderRadius:"4px"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"}},children:z(W,R)})}),["text/csv","image/png","image/jpeg","application/pdf"].includes(R)&&(0,r.jsx)(O.Z,{sx:{mt:2},children:(0,r.jsx)(ex,{data:U,fileName:`view_${t}_data.csv`})})]})};function eL(e){return e.id}function eP(e){return[e.x,e.y]}function e$(e){return{name:e.id,type:"line",data:e.data.map(eP),showSymbol:!1,symbolSize:8,emphasis:{focus:"series"},animationDuration:300}}function eT(e){return{data:{id:e.id,label:e.label,size:e.size||30,color:e.color||"#1f77b4",x:e.x,y:e.y}}}function eW(e){return{data:{source:e.source,target:e.target}}}function eF(e){let t=e.target;t.style("label",t.data("label"))}function eR(e){e.target.style("label","")}let eU=(0,n.memo)(e=>{let t,a,l,s,o,c,d,u,f,m,p,h,x,b,g,y,j,v,_,w,S=(0,i.c)(42),{view:Z,onClick:k,dragHandleProps:C,handleViewToggle:N}=e,I="technical"===Z.response_type?"#fff9c4":"#ffffff";S[0]!==I?(t={cursor:"pointer",aspectRatio:"1",border:"1px solid #e0e0e0",borderRadius:2,display:"flex",flexDirection:"column",bgcolor:I},S[0]=I,S[1]=t):t=S[1];let E="technical"===Z.response_type?"#fff8b0":"#f5f5f5";S[2]!==E?(a={height:"40px",width:"100%",bgcolor:E,borderBottom:"1px solid #e0e0e0",display:"flex",alignItems:"center",justifyContent:"center",cursor:"grab"},S[2]=E,S[3]=a):a=S[3],S[4]===Symbol.for("react.memo_cache_sentinel")?(l={color:"#757575"},S[4]=l):l=S[4];let A=`${Z.endpoint.replace(/_/g," ").replace(/(?:^|\s)\S/g,eM)} - ${Z.what_is_this}`;S[5]!==A?(s=(0,r.jsx)($.Z,{className:"DragHere",variant:"caption",sx:l,children:A}),S[5]=A,S[6]=s):s=S[6],S[7]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(ea.Z,{}),S[7]=o):o=S[7],S[8]!==k?(c=(0,r.jsxs)("button",{className:"expand-card",onClick:k,"aria-label":"expand",children:[" ",o," "]}),S[8]=k,S[9]=c):c=S[9],S[10]!==N||S[11]!==Z.endpoint?(d=e=>{N(Z.endpoint)},S[10]=N,S[11]=Z.endpoint,S[12]=d):d=S[12],S[13]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)(et.Z,{}),S[13]=u):u=S[13],S[14]!==d?(f=(0,r.jsxs)("button",{className:"erased-card",onClick:d,children:[" ",u," "]}),S[14]=d,S[15]=f):f=S[15],S[16]!==C||S[17]!==f||S[18]!==a||S[19]!==s||S[20]!==c?(m=(0,r.jsxs)(O.Z,{...C,sx:a,children:[s,c,f]}),S[16]=C,S[17]=f,S[18]=a,S[19]=s,S[20]=c,S[21]=m):m=S[21],S[22]===Symbol.for("react.memo_cache_sentinel")?(p={xs:"12px",sm:"16px"},S[22]=p):p=S[22];let D="technical"===Z.response_type?"#fff9c4":"#ffffff";return S[23]!==D?(h={padding:p,height:"calc(100% - 40px)",display:"flex",flexDirection:"column",overflow:"hidden",bgcolor:D},S[23]=D,S[24]=h):h=S[24],S[25]===Symbol.for("react.memo_cache_sentinel")?(x={width:"6px"},b={bgcolor:"#3f51b5",borderRadius:"3px"},g={bgcolor:"#e8eaf6"},S[25]=x,S[26]=b,S[27]=g):(x=S[25],b=S[26],g=S[27]),S[28]===Symbol.for("react.memo_cache_sentinel")?(y={flex:1,overflow:"auto",color:"#424242",msOverflowStyle:"none",scrollbarWidth:"thin",scrollbarColor:"#3f51b5 #e8eaf6","&::-webkit-scrollbar":x,"&::-webkit-scrollbar-thumb":b,"&::-webkit-scrollbar-track":g,wordBreak:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap",maxWidth:"100%",fontSize:{xs:"0.75rem",sm:"0.875rem"}},S[28]=y):y=S[28],S[29]!==Z.endpoint||S[30]!==Z.error||S[31]!==Z.response_type?(j=Z.error?Z.error:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading view..."}),children:(0,r.jsx)(ez,{viewId:Z.endpoint.replaceAll(" ","_"),sx:{bgcolor:"technical"===Z.response_type?"#fff9c4":"#ffffff",width:"100%"}})}),S[29]=Z.endpoint,S[30]=Z.error,S[31]=Z.response_type,S[32]=j):j=S[32],S[33]!==j?(v=(0,r.jsx)(O.Z,{sx:y,children:j}),S[33]=j,S[34]=v):v=S[34],S[35]!==h||S[36]!==v?(_=(0,r.jsx)(J.Z,{sx:h,children:v}),S[35]=h,S[36]=v,S[37]=_):_=S[37],S[38]!==m||S[39]!==t||S[40]!==_?(w=(0,r.jsxs)(Q.Z,{sx:t,children:[m,_]}),S[38]=m,S[39]=t,S[40]=_,S[41]=w):w=S[41],w});function eM(e){return e.toUpperCase()}function eK(){let e=localStorage.getItem("showTechnicalViews");return!!e&&JSON.parse(e)}function eB(e){return"technical"!==e.response_type}function eH(e){return e.endpoint}function eV(e){return"technical"===e.response_type}function eq(e){return"technical"===e.response_type}function eJ(e){return e.endpoint}function eQ(e){return Math.max(e-1,1)}var eG=a(86001),eY=a(98106),eX=a(89126),e0=a(30548),e1=a(12550),e2=a(84672),e4=a(95307),e3=a(51001),e5=a(3840),e8=a(21967),e6=a(37745),e9=a(9e3),e7=a(93627),te=a(92719),tt=a(19298);let ta=e=>{let t,a,n,l,s,o,c,d,u,f,m=(0,i.c)(20);m[0]!==e?({field:a,fieldKey:n,value:d,onFocus:o,onChange:s,error:t,helperText:l,...c}=e,m[0]=e,m[1]=t,m[2]=a,m[3]=n,m[4]=l,m[5]=s,m[6]=o,m[7]=c,m[8]=d):(t=m[1],a=m[2],n=m[3],l=m[4],s=m[5],o=m[6],c=m[7],d=m[8]);let p=function(e){switch(e){case"EmailNode":return"email";case"PhoneNumberNode":return"tel";case"IntNode":return"number";default:return"text"}}(a.type),h=d||"";return m[9]!==s?(u=e=>s(e.target.value),m[9]=s,m[10]=u):u=m[10],m[11]!==t||m[12]!==n||m[13]!==l||m[14]!==o||m[15]!==c||m[16]!==p||m[17]!==h||m[18]!==u?(f=(0,r.jsx)(U.Z,{fullWidth:!0,id:n,variant:"outlined",type:p,value:h,onFocus:o,onChange:u,error:t,helperText:l,...c}),m[11]=t,m[12]=n,m[13]=l,m[14]=o,m[15]=c,m[16]=p,m[17]=h,m[18]=u,m[19]=f):f=m[19],f};var tr=a(14937),tn=a(27484),tl=a.n(tn),ts=a(85714);let to=e=>{let t,a,n,l,s,o,c,d,u,f,m,p,h,x,b=(0,i.c)(28);return b[0]!==e?({fieldKey:a,value:c,onFocus:s,onChange:l,error:t,helperText:n,...o}=e,b[0]=e,b[1]=t,b[2]=a,b[3]=n,b[4]=l,b[5]=s,b[6]=o,b[7]=c):(t=b[1],a=b[2],n=b[3],l=b[4],s=b[5],o=b[6],c=b[7]),b[8]!==c?(d=c?tl()(c):null,b[8]=c,b[9]=d):d=b[9],b[10]!==l?(u=e=>l(e),b[10]=l,b[11]=u):u=b[11],b[12]===Symbol.for("react.memo_cache_sentinel")?(f={width:"100%"},b[12]=f):f=b[12],b[13]!==t?(m={textField:{size:"small",error:t}},b[13]=t,b[14]=m):m=b[14],b[15]!==a||b[16]!==s||b[17]!==o||b[18]!==d||b[19]!==u||b[20]!==m?(p=(0,r.jsx)(tr.M,{id:a,value:d,onChange:u,onFocus:s,sx:f,...o,slotProps:m}),b[15]=a,b[16]=s,b[17]=o,b[18]=d,b[19]=u,b[20]=m,b[21]=p):p=b[21],b[22]!==n?(h=n&&(0,r.jsx)(ts.Z,{children:n}),b[22]=n,b[23]=h):h=b[23],b[24]!==t||b[25]!==p||b[26]!==h?(x=(0,r.jsxs)(em.Z,{fullWidth:!0,error:t,children:[p,h]}),b[24]=t,b[25]=p,b[26]=h,b[27]=x):x=b[27],x};var ti=a(39380);let tc=e=>{let t,a,n,l,s,o,c,d=(0,i.c)(14);d[0]!==e?({fieldKey:t,value:s,onFocus:n,onChange:a,...l}=e,d[0]=e,d[1]=t,d[2]=a,d[3]=n,d[4]=l,d[5]=s):(t=d[1],a=d[2],n=d[3],l=d[4],s=d[5]);let u=!!s;return d[6]!==a?(o=e=>a(e.target.checked),d[6]=a,d[7]=o):o=d[7],d[8]!==t||d[9]!==n||d[10]!==l||d[11]!==u||d[12]!==o?(c=(0,r.jsx)(ti.Z,{control:(0,r.jsx)(G.Z,{id:t,checked:u,onFocus:n,onChange:o,...l}),label:""}),d[8]=t,d[9]=n,d[10]=l,d[11]=u,d[12]=o,d[13]=c):c=d[13],c},td=e=>{let t,a,n,l,s,o,c,d,u,f,m,p,h=(0,i.c)(21);if(h[0]!==e){let{field:r,fieldKey:o,value:i,onFocus:c,onChange:d,...u}=e;t=r,s=i,n=c,a=d,l=u,h[0]=e,h[1]=t,h[2]=a,h[3]=n,h[4]=l,h[5]=s}else t=h[1],a=h[2],n=h[3],l=h[4],s=h[5];return h[6]===Symbol.for("react.memo_cache_sentinel")?(o={display:"flex",flexDirection:"column",alignItems:"center",mt:2},h[6]=o):o=h[6],h[7]!==t||h[8]!==s?(c=s&&(0,r.jsx)(O.Z,{component:"img",className:"image-preview",src:`data:${t.mimeType};base64,${s}`,alt:t.name,sx:{maxHeight:"150px",width:"auto",objectFit:"contain",mt:1,border:"1px solid #eee"}}),h[7]=t,h[8]=s,h[9]=c):c=h[9],h[10]===Symbol.for("react.memo_cache_sentinel")?(d={mt:2},h[10]=d):d=h[10],h[11]===Symbol.for("react.memo_cache_sentinel")?(u={display:"none"},h[11]=u):u=h[11],h[12]!==a?(f=async e=>{let t=e.target.files[0];if(!t)return;let r=new FileReader;r.onloadend=async()=>{let e=r.result.split(",")[1];a(e)},r.readAsDataURL(t)},h[12]=a,h[13]=f):f=h[13],h[14]!==n||h[15]!==l||h[16]!==f?(m=(0,r.jsxs)(T.Z,{variant:"contained",component:"label",sx:d,children:["Upload New Image",(0,r.jsx)(U.Z,{type:"file",accept:"image/*",sx:u,onClick:n,onChange:f,...l})]}),h[14]=n,h[15]=l,h[16]=f,h[17]=m):m=h[17],h[18]!==c||h[19]!==m?(p=(0,r.jsxs)(O.Z,{className:"image-preview-wrapper",sx:o,children:[c,m]}),h[18]=c,h[19]=m,h[20]=p):p=h[20],p},tu=e=>{if(!e)return"";let t=e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").trim();return t.charAt(0).toUpperCase()+t.slice(1)},tf=(e,t)=>`${e}@${t}`,tm=(e,t)=>{switch(e){case"EmailNode":return"Please enter a valid email address";case"IntNode":return"Please enter a valid integer";case"PhoneNumberNode":return"Please enter a valid phone number (digits only)";case"DateNode":return"Please enter a valid date";default:return"Invalid value"}},tp=(e,t)=>{if(null==t||"string"==typeof t&&""===t.trim())return!0;let a=!0;switch(e){case"EmailNode":a=/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/.test(t);break;case"IntNode":a=/^-?\d+$/.test(t);break;case"PhoneNumberNode":a=/^\d+$/.test(t);break;case"DateNode":a=tl()(t).isValid();break;default:a=!0}return a},th=["StringNode","EmailNode","PhoneNumberNode","IntNode"],tx=["BooleanNode"],tb=["DateNode"],tg=["ImageNode"],ty=["DropdownNode"],tj=["RadioNode"],tv=["ListCheckboxNode"],t_=["FileNode"],tw=[...th,...t_,...tx,...tv,...tb,...ty,...tj],tS=e=>{let t,a,l,s,o,c,d,u,f,m,h,x=(0,i.c)(33),{field:b,fieldKey:g,value:y,defaultValue:j,onChange:v,error:_,helperText:w}=e;x[0]!==b.listNodeType?(t=b.listNodeType.split(".").pop(),x[0]=b.listNodeType,x[1]=t):t=x[1];let S=t;x[2]!==S?(a={type:S},x[2]=S,x[3]=a):a=x[3];let{data:Z,isLoading:k,isError:C}=p("list_existing_node",a);x[4]!==Z?(l=void 0===Z?[]:Z,x[4]=Z,x[5]=l):l=x[5];let N=l;return console.log(j),x[6]!==j||x[7]!==C||x[8]!==k||x[9]!==N?.data?.results?.[0]?.result?.data||x[10]!==v?(s=()=>{if(!k&&!C&&N?.data?.results?.[0]?.result?.data?.length!==0)if(j){let e=Number.parseInt(j.split("@")[1]),t=N?.data?.results?.[0]?.result?.data.find(t=>t.id===e);t?v({label:t.name,value:t.id}):v(void 0)}else v(void 0)},x[6]=j,x[7]=C,x[8]=k,x[9]=N?.data?.results?.[0]?.result?.data,x[10]=v,x[11]=s):s=x[11],x[12]!==C||x[13]!==k?(o=[k,C],x[12]=C,x[13]=k,x[14]=o):o=x[14],(0,n.useEffect)(s,o),x[15]!==_?(c=e=>(0,r.jsx)(U.Z,{...e,error:_}),x[15]=_,x[16]=c):c=x[16],x[17]!==N?.data?.results?.[0]?.result?.data?(d=N?.data?.results?.[0]?.result?.data.map(tZ).sort(tk)||[],x[17]=N?.data?.results?.[0]?.result?.data,x[18]=d):d=x[18],x[19]!==v?(u=(e,t)=>{v(t)},x[19]=v,x[20]=u):u=x[20],x[21]!==g||x[22]!==c||x[23]!==d||x[24]!==u||x[25]!==y?(f=(0,r.jsx)(K.Z,{disablePortal:!0,renderInput:c,options:d,groupBy:tC,size:"small",id:g,value:y,onChange:u}),x[21]=g,x[22]=c,x[23]=d,x[24]=u,x[25]=y,x[26]=f):f=x[26],x[27]!==w?(m=w&&(0,r.jsx)(ts.Z,{children:w}),x[27]=w,x[28]=m):m=x[28],x[29]!==_||x[30]!==f||x[31]!==m?(h=(0,r.jsxs)(em.Z,{fullWidth:!0,error:_,children:[f,m]}),x[29]=_,x[30]=f,x[31]=m,x[32]=h):h=x[32],h};function tZ(e){let t=e.name[0].toUpperCase();return{label:e.name,value:e.id,firstLetter:/[0-9]/.test(t)?"0-9":t}}function tk(e,t){return"France(FR)"===e.label?-1:"France(FR)"===t.label?1:e.firstLetter!==t.firstLetter?e.firstLetter.localeCompare(t.firstLetter):e.label.localeCompare(t.label)}function tC(e){return e.firstLetter}var tN=a(36762),tI=a(54791);let tE=e=>{let t,a,n,l,s,o,c,d,u,f,m,p,h,x,b=(0,i.c)(27);b[0]!==e?({field:n,fieldKey:l,value:u,defaultValue:t,onFocus:c,onChange:o,error:a,helperText:s,...d}=e,b[0]=e,b[1]=t,b[2]=a,b[3]=n,b[4]=l,b[5]=s,b[6]=o,b[7]=c,b[8]=d,b[9]=u):(t=b[1],a=b[2],n=b[3],l=b[4],s=b[5],o=b[6],c=b[7],d=b[8],u=b[9]),console.log(u,t);let g=u||t;return b[10]!==o?(f=e=>o(e.target.value),b[10]=o,b[11]=f):f=b[11],b[12]!==n.options?(m=n.options.map(tA),b[12]=n.options,b[13]=m):m=b[13],b[14]!==l||b[15]!==c||b[16]!==d||b[17]!==g||b[18]!==f||b[19]!==m?(p=(0,r.jsx)(tN.Z,{row:!0,name:l,value:g,onChange:f,onFocus:c,...d,children:m}),b[14]=l,b[15]=c,b[16]=d,b[17]=g,b[18]=f,b[19]=m,b[20]=p):p=b[20],b[21]!==s?(h=s&&(0,r.jsx)(ts.Z,{children:s}),b[21]=s,b[22]=h):h=b[22],b[23]!==a||b[24]!==p||b[25]!==h?(x=(0,r.jsxs)(em.Z,{fullWidth:!0,error:a,children:[p,h]}),b[23]=a,b[24]=p,b[25]=h,b[26]=x):x=b[26],x};function tA(e,t){return(0,r.jsx)(ti.Z,{value:t,control:(0,r.jsx)(tI.Z,{}),label:e},t)}var tO=a(87884);let tD=e=>{let t,a,l,s,o,c=(0,i.c)(15),{option:d,fieldId:u}=e,[f,m]=(0,n.useState)(d.value),p=h("set_value"),x=(0,C.NL)();c[0]!==u||c[1]!==x||c[2]!==p||c[3]!==f?(t=async e=>{if(!e)return console.warn("No field provided for saving changes");try{await v.ZP.promise(p.mutateAsync({id:e.id,value:f},{onSuccess:async()=>{await x.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(u)}]})}}),{loading:`Enregistrement de ${tu(e.name)}...`,success:`Changements enregistr\xe9s pour ${tu(e.name)}`,error:`Erreur lors de l'enregistrement des changements pour ${tu(e.name)}`})}catch(e){console.error("Error saving changes:",e)}},c[0]=u,c[1]=x,c[2]=p,c[3]=f,c[4]=t):t=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(a={maxWait:2e3},c[5]=a):a=c[5];let b=(0,B.y1)(t,500,a),g=f||!1;return c[6]!==b||c[7]!==d?(l=e=>{m(e.target.checked),b(d)},c[6]=b,c[7]=d,c[8]=l):l=c[8],c[9]!==g||c[10]!==l?(s=(0,r.jsx)(G.Z,{checked:g,onChange:l}),c[9]=g,c[10]=l,c[11]=s):s=c[11],c[12]!==d.name||c[13]!==s?(o=(0,r.jsx)(ti.Z,{label:d.name,control:s}),c[12]=d.name,c[13]=s,c[14]=o):o=c[14],o},tz=e=>{let t,a,n,l,s,o=(0,i.c)(13),{field:c,error:d,helperText:u}=e;o[0]!==c.id?(t={node_id:c.id},o[0]=c.id,o[1]=t):t=o[1];let{data:f}=p("class_attribute_field",t);return o[2]!==f?.data?.results?.[0]?.result?.data||o[3]!==c.id?(a=f?.data?.results?.[0]?.result?.data?.map((e,t)=>(0,r.jsx)(tD,{option:e,fieldId:c.id},t)),o[2]=f?.data?.results?.[0]?.result?.data,o[3]=c.id,o[4]=a):a=o[4],o[5]!==a?(n=(0,r.jsx)(tO.Z,{row:!0,children:a}),o[5]=a,o[6]=n):n=o[6],o[7]!==u?(l=u&&(0,r.jsx)(ts.Z,{children:u}),o[7]=u,o[8]=l):l=o[8],o[9]!==d||o[10]!==n||o[11]!==l?(s=(0,r.jsxs)(em.Z,{fullWidth:!0,error:d,children:[n,l]}),o[9]=d,o[10]=n,o[11]=l,o[12]=s):s=o[12],s};var tL=a(43180),tP=a(31694),t$=a(64519);a(3751),a(17084);var tT=a(41994);tL.Tu.workerSrc=new URL(a(87663),a.b).toString();let tW=e=>{let t,a,l,s,o,c,d,u,f,m,p,h,x,b,g=(0,i.c)(28),{value:y,onChange:j,error:v,helperText:_}=e,[w,S]=(0,n.useState)(y);g[0]!==y?(t=()=>{if(y){let e=atob(y),t=Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);let a=new Blob([new Uint8Array(t)],{type:"application/pdf"});S(URL.createObjectURL(a))}},a=[y],g[0]=y,g[1]=t,g[2]=a):(t=g[1],a=g[2]),(0,n.useEffect)(t,a),g[3]!==j?(l=e=>{let t=e.target.files[0];if(t&&"application/pdf"===t.type){let e=new FileReader;e.onloadend=()=>{j(e.result.split(",")[1])},e.readAsDataURL(t)}else t&&(alert("Please select a PDF file."),e.target.value=null)},g[3]=j,g[4]=l):l=g[4];let Z=l;g[5]!==w?(s=e=>{e.stopPropagation(),w&&window.open(w,"_blank","noopener,noreferrer")},g[5]=w,g[6]=s):s=g[6];let k=s;g[7]===Symbol.for("react.memo_cache_sentinel")?(o={display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},g[7]=o):o=g[7];let C=`2px solid ${v?"error.main":"transparent"}`;return g[8]===Symbol.for("react.memo_cache_sentinel")?(c={borderColor:"primary.main",boxShadow:4,transform:"scale(1.02)"},g[8]=c):c=g[8],g[9]!==C?(d={cursor:"pointer",border:C,borderRadius:"8px",width:"180px",height:"254px",overflow:"hidden",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#f8f8f8",mb:2,transition:"all 0.2s ease-in-out","&:hover":c},g[9]=C,g[10]=d):d=g[10],g[11]!==w?(u=w?(0,r.jsx)(tP.Z,{file:w,loading:(0,r.jsxs)(O.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)(M.Z,{size:40,sx:{mb:1}}),(0,r.jsx)($.Z,{variant:"caption",color:"text.secondary",children:"Loading PDF..."})]}),error:(0,r.jsxs)(O.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[(0,r.jsx)(tT.Z,{color:"error",sx:{fontSize:40,mb:1}}),(0,r.jsx)($.Z,{variant:"caption",color:"error",children:"Preview not available"})]}),children:(0,r.jsx)(t$.Z,{pageNumber:1,width:180,renderTextLayer:!1,renderAnnotationLayer:!1})}):(0,r.jsxs)(O.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:2},children:[(0,r.jsx)(tT.Z,{color:"disabled",sx:{fontSize:60,mb:1}}),(0,r.jsx)($.Z,{variant:"caption",color:"text.secondary",align:"center",children:"No PDF selected"})]}),g[11]=w,g[12]=u):u=g[12],g[13]!==k||g[14]!==d||g[15]!==u?(f=(0,r.jsx)(eX.Z,{elevation:2,onClick:k,sx:d,children:u}),g[13]=k,g[14]=d,g[15]=u,g[16]=f):f=g[16],g[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(tT.Z,{}),p={mt:1},g[17]=m,g[18]=p):(m=g[17],p=g[18]),g[19]!==Z?(h=(0,r.jsxs)(T.Z,{variant:"contained",component:"label",color:"primary",startIcon:m,sx:p,children:["Upload PDF",(0,r.jsx)("input",{type:"file",hidden:!0,accept:"application/pdf",onChange:Z})]}),g[19]=Z,g[20]=h):h=g[20],g[21]!==v||g[22]!==_?(x=_&&(0,r.jsx)($.Z,{color:v?"error":"textSecondary",variant:"caption",sx:{mt:1},children:_}),g[21]=v,g[22]=_,g[23]=x):x=g[23],g[24]!==f||g[25]!==h||g[26]!==x?(b=(0,r.jsxs)(O.Z,{sx:o,children:[f,h,x]}),g[24]=f,g[25]=h,g[26]=x,g[27]=b):b=g[27],b},tF=n.memo(e=>{let{field:t,fieldKey:a,isExpanded:l,onToggleField:s,onChangingForm:o,parentId:i,defaultValue:c=""}=e,{id:d,name:u,type:f}=t,[m,p]=(0,n.useState)(ty.includes(f)?{label:c,value:c?.split("@")[1]}:c),[x,b]=(0,n.useState)(!1),[g,y]=(0,n.useState)(""),j=(0,C.NL)(),_=h("set_value"),w=h("add_existing_node"),S=(0,B.y1)(async e=>{if(!e)return console.warn("No field provided for saving changes");let t=tp(e.type,m);if(b(!t),t)y("");else{y(tm(e.type,m)),console.warn(`Invalid value for ${e.name} (${e.type}): ${m}`);return}try{await v.ZP.promise(_.mutateAsync({id:e.id,value:m},{onSuccess:async()=>{await j.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(i)}]}),await j.invalidateQueries({queryKey:["apiData","class_attribute_field",{}]})}}),{loading:`Enregistrement de ${tu(e.name)}...`,success:`Changements enregistr\xe9s pour ${tu(e.name)}`,error:`Erreur lors de l'enregistrement des changements pour ${tu(e.name)}`})}catch(e){console.error("Error saving changes:",e),b(!0),y("Error saving changes: "+e.message)}},500,{maxWait:2e3}),Z=(0,n.useCallback)(async e=>{if(!e)return void p(null);p(e);try{await v.ZP.promise(_.mutateAsync({id:t.id,value:e},{onSuccess:async()=>{await j.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(i)}]}),await j.invalidateQueries({queryKey:["apiData","class_attribute_field",{}]})}}),{loading:`Enregistrement de ${tu(t.name)}...`,success:`Changements enregistr\xe9s pour ${tu(t.name)}`,error:`Erreur lors de l'enregistrement des changements pour ${tu(t.name)}`})}catch(e){console.error("Error saving changes:",e),b(!0),y("Error saving changes: "+e.message)}}),k=(0,B.y1)(async(e,t)=>{if(!e)return console.warn("No field provided for saving changes");let a=tp(e.type,t);if(b(!a),a)y("");else{y(tm(e.type,t)),console.warn(`Invalid value for ${e.name} (${e.type}): ${t}`);return}try{await v.ZP.promise(w.mutateAsync({node_id:e.id,id:t},{onSuccess:async()=>{await j.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:Number.parseInt(i)}]}),await j.invalidateQueries({queryKey:["apiData","class_attribute_field",{}]})}}),{loading:`Enregistrement de ${tu(e.name)}...`,success:`Changements enregistr\xe9s pour ${tu(e.name)}`,error:`Erreur lors de l'enregistrement des changements pour ${tu(e.name)}`})}catch(e){console.error("Error saving changes:",e),b(!0),y("Error saving changes: "+e.message)}}),N=(0,n.useCallback)(function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let a=tp(t.type,e);b(!a),a?y(""):y(tm(t.type,e)),S(t),p(e)},[a,t]),I=(0,n.useCallback)(e=>{let a=tp(t.type,e?.value);b(!a),a?y(""):y(tm(t.type,e?.value)),k(t,e?.value),p(e)}),E=(0,n.useCallback)(()=>{o(u,d)},[o,u,d]),A=(0,n.useCallback)(()=>{s(a,d)},[s,a,d]);return(0,n.useEffect)(()=>()=>{S.flush()},[S]),(0,r.jsx)(O.Z,{className:"form-field-wrapper",sx:{p:1},children:(0,r.jsxs)(e1.Z,{container:!0,className:"form-field",spacing:2,alignItems:"center",children:[(0,r.jsx)(e1.Z,{size:{xs:12,sm:4},children:(0,r.jsxs)(em.Z,{component:"fieldset",sx:{display:"flex",flexDirection:"row"},children:[(0,r.jsx)(T.Z,{tabIndex:"-1",variant:"text",color:"primary",onClick:E,title:a,sx:{textAlign:"left",justifyContent:"flex-start"},children:(0,r.jsx)($.Z,{fontWeight:"medium",children:tu(u)})}),!tw.includes(f)&&(0,r.jsx)(O.Z,{className:"toggle-wrapper",textAlign:"right",children:(0,r.jsx)(F.Z,{onClick:A,size:"small",children:l?(0,r.jsx)(tt.Z,{}):(0,r.jsx)(te.Z,{})})})]})}),(0,r.jsxs)(e1.Z,{size:{xs:12,sm:6},children:[tv.includes(f)&&(0,r.jsx)(tz,{field:t,fieldKey:a,size:"small",error:x,helperText:x?g:""}),th.includes(f)&&(0,r.jsx)(ta,{field:t,fieldKey:a,value:m,onChange:N,size:"small",error:x,helperText:x?g:""}),tb.includes(f)&&(0,r.jsx)(to,{fieldKey:a,value:m,onChange:N,size:"small",error:x,helperText:x?g:""}),tx.includes(f)&&(0,r.jsx)(tc,{fieldKey:a,value:m,onChange:N,size:"small"}),tg.includes(f)&&l&&(0,r.jsx)(td,{field:t,fieldKey:a,value:m,onChange:N,size:"small"}),ty.includes(f)&&(0,r.jsx)(tS,{field:t,fieldKey:a,value:m,onChange:I,size:"small",defaultValue:c,error:x,helperText:x?g:""}),tj.includes(f)&&(0,r.jsx)(tE,{field:t,fieldKey:a,value:m,onChange:N,size:"small",defaultValue:c,error:x,helperText:x?g:""}),t_.includes(f)&&(0,r.jsx)(tW,{value:m,onChange:Z,error:x,helperText:g})]})]})},a)},(e,t)=>e.fieldKey===t.fieldKey&&e.isExpanded===t.isExpanded&&e.onToggleField===t.onToggleField&&e.defaultValue===t.defaultValue);var tR=a(11731);let tU=n.memo(e=>{let{show:t,selectedField:a,existingNodeList:l,loadingExistingNodes:s,onClose:o,onSelectNode:i}=e,[c,d]=(0,n.useState)(""),u=(0,n.useCallback)(e=>{d(e.target.value)},[]),f=(0,n.useCallback)(()=>{o()},[o]),m=(0,n.useMemo)(()=>l.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())),[l,c]),p=(0,n.useCallback)(e=>{i(e,a)},[i,a]);return(0,r.jsx)(ed.Z,{open:t,onClose:f,"aria-labelledby":"existing-node-modal-title","aria-describedby":"existing-node-modal-description",children:(0,r.jsx)(O.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:600,maxHeight:"80vh",bgcolor:"background.paper",boxShadow:24,outline:"none"},children:(0,r.jsxs)(Q.Z,{className:"existing-node-card",sx:{width:"100%",maxHeight:"80vh",overflow:"auto"},children:[(0,r.jsx)(tR.Z,{id:"existing-node-modal-title",title:"Select Existing Node",action:(0,r.jsx)(F.Z,{onClick:f,"aria-label":"close",children:(0,r.jsx)(e7.Z,{})})}),(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(U.Z,{fullWidth:!0,variant:"outlined",placeholder:"Search nodes...",value:c,onChange:u,sx:{mb:2}}),(0,r.jsx)(O.Z,{className:"node-list",sx:{maxHeight:"50vh",overflow:"auto"},children:s?(0,r.jsxs)(O.Z,{display:"flex",justifyContent:"center",p:2,children:[(0,r.jsx)(M.Z,{size:24})," ",(0,r.jsx)($.Z,{sx:{ml:1},children:"Loading nodes..."})]}):(0,r.jsx)(D.Z,{spacing:1,children:m.map(e=>(0,r.jsx)(O.Z,{sx:{p:2,cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},onClick:()=>p(e),children:(0,r.jsx)($.Z,{fontWeight:"bold",children:e.name})},e.id))})})]})]})})})}),tM=e=>{let{fieldKey:t,field:a,rootId:l,isRoot:s=!1,isToggle:i=!1}=e,{data:c,isLoading:d,error:u,refetch:f}=p("class_attribute_field",{node_id:"string"==typeof a.id?Number.parseInt(a.id):a.id},{enabled:i||s}),m=(0,o.s0)(),x=(0,C.NL)(),b=h("jump"),g=h("add_node"),y=h("list_existing_node"),j=h("add_existing_node"),[v,_]=(0,n.useState)({}),[w,S]=(0,n.useState)(null),[Z,k]=(0,n.useState)(!1),[N,I]=(0,n.useState)([]),[E,A]=(0,n.useState)(null),[z,L]=(0,n.useState)(!1),P=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e?JSON.stringify(e,null,"tab"===t?"	":t):""},[]),W=(0,n.useCallback)(async(e,t)=>{if(t===l)return console.log("return from handleChangingForm");try{await b.mutateAsync({node_id:t}),await m(`/add-node/form/${e}`),window.location.reload()}catch(e){console.error("Error changing form:",e)}},[b,m,l]),{id:F,type:R,name:U}=a,M=(0,n.useRef)(v);(0,n.useEffect)(()=>{M.current=v},[v]);let K=(0,n.useCallback)(async(e,t)=>{let a=M.current[e];_(t=>({...t,[e]:!a}))},[]),B=(0,n.useCallback)(async e=>{let t=e?.id,a=e?.listNodeType;S(t);try{await g.mutateAsync({BNodeClass:a,node_id:t},{onMutate:async e=>{await x.cancelQueries({queryKey:["apiData","class_attribute_field",{node_id:t}]})},onSuccess:async()=>{await x.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:t}]})}})}catch(e){console.error("Error adding new node:",e)}},[b,g,l,tf,P]),H=(0,n.useCallback)(async e=>{A(e),k(!0),L(!0);let t=e.listNodeType.split(".").pop();try{let e=await y.mutateAsync({type:t}),a=e?.data?.results?.[0]?.result?.data||[];I(a)}catch(e){console.error("Error fetching class attribute field:",e)}finally{L(!1)}},[b,y]),V=(0,n.useCallback)(async e=>{try{await j.mutateAsync({id:e.id,node_id:a.id},{onMutate:async e=>{await x.cancelQueries({queryKey:["apiData","class_attribute_field",{node_id:a.id}]})},onSuccess:async()=>{await x.invalidateQueries({queryKey:["apiData","class_attribute_field",{node_id:a.id}]}),b.mutate({node_id:l})}})}catch(e){console.error("Error adding existing node:",e)}},[j,b,l]),q=(0,n.useCallback)((e,t)=>{V(e),k(!1)},[tf,V]);(0,n.useEffect)(()=>{if(!d&&c){let e={},t={};(c?.data?.results?.[0]?.result?.data||c?.results?.[0]?.result?.data||[]).forEach(a=>{if(a.name&&"null"!==a.value&&void 0!==a.value){let r=tf(a.id,a.name);e[r]=a.value,t[r]=a}})}},[d,c]);let J=(0,n.useCallback)(function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return t&&Array.isArray(t)?t.map(t=>{let{id:s,name:o,type:i}=t;if(!o||"graph"==o)return null;let c=tf(t.id,t.name);if(a.has(s))return(0,r.jsxs)($.Z,{color:"error",children:["Circular reference detected for ",o]},`cycle-${s}`);let d=v[c]||!1;return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(tF,{field:t,fieldKey:c,isExpanded:d,onToggleField:K,onChangingForm:W,defaultValue:t.value,parentId:e}),!tw.includes(i)&&(0,r.jsx)(tM,{fieldKey:c,field:t,rootId:l,isToggle:d})]},c)}):null},[tf,v,K,W,tu]),Q=c?.data?.results?.[0]?.result?.data||[];return(0,r.jsxs)(n.Fragment,{children:[s?(0,r.jsx)(O.Z,{component:"form",className:"form-fields",onSubmit:e=>e.preventDefault(),sx:{mt:3},children:Q.length>0?J(a.id,Q):(0,r.jsx)($.Z,{children:"No fields available."})}):(0,r.jsxs)(O.Z,{className:"nested-fields",sx:{mt:2,pl:2,borderLeft:"1px solid #e0e0e0"},children:[i&&(Q.length>0?J(a.id,Q):(0,r.jsx)($.Z,{variant:"body2",color:"text.secondary",children:"No subfields available for this."})),["ListNode","SetNode"].includes(R)&&i&&(0,r.jsxs)(D.Z,{direction:"row",spacing:2,className:"add-new-node",sx:{mt:2},children:[(0,r.jsxs)(T.Z,{variant:"outlined",startIcon:(0,r.jsx)(X.Z,{}),onClick:()=>B(a),children:["Add new ",U]}),(0,r.jsxs)(T.Z,{variant:"outlined",startIcon:(0,r.jsx)(X.Z,{}),onClick:()=>H(a),children:["Add ",U," from Existing Node"]})]})]}),(0,r.jsx)(tU,{show:Z,selectedField:E,existingNodeList:N,loadingExistingNodes:z,onClose:()=>{k(!1),b.mutate({node_id:l})},onSelectNode:q})]})},tK=n.memo(tM,(e,t)=>e.fieldKey===t.fieldKey&&e.rootId===t.rootId&&e.isToggle===t.isToggle);var tB=a(9599),tH=a(97454),tV=a(93162);function tq(e){return(0,r.jsx)(e9.Z,{icon:e.icon,tooltipTitle:e.name,onClick:e.onClick},e.name)}let tJ=(0,o.aj)([{Component:function(){let e,t,a,n,l,s=(0,i.c)(9),{data:c,isLoading:u,error:f}=p("");s[0]!==c||s[1]!==f||s[2]!==u?(e=u||f||!c?.data?.results?[{kind:"page",title:"Loading...",segment:"home",icon:(0,r.jsx)(x.Z,{})}]:c.data.results.map(w),s[0]=c,s[1]=f,s[2]=u,s[3]=e):e=s[3];let m=e;return s[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(v.x7,{}),s[4]=t):t=s[4],s[5]===Symbol.for("react.memo_cache_sentinel")?(a={title:"",logo:(0,r.jsx)("img",{src:"/logo.svg",alt:"I3S",width:"100%",height:"100%",color:"inherit"}),homeUrl:"/home"},n=(0,r.jsx)(o.j3,{}),s[5]=a,s[6]=n):(a=s[5],n=s[6]),s[7]!==m?(l=(0,r.jsxs)(g._,{dateAdapter:b.y,adapterLocale:"fr",children:[t,(0,r.jsx)(d.C,{navigation:m,theme:_,branding:a,children:n})]}),s[7]=m,s[8]=l):l=s[8],l},children:[{path:"/",element:(0,r.jsx)(()=>{let e,t,a,l,s,c,d,u,f,m,p,x,b,g,y,j=(0,i.c)(34),[v,_]=(0,n.useState)(""),[w,I]=(0,n.useState)(""),[E,A]=(0,n.useState)(!1),[O,D]=(0,n.useState)(""),z=(0,o.s0)(),L=(0,C.NL)();j[0]!==L?(e={onSuccess:async()=>{await L.invalidateQueries()}},j[0]=L,j[1]=e):e=j[1];let P=h("authenticate",e);k("Login"),j[2]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{A(N)},j[2]=t):t=j[2];let $=t;j[3]!==P||j[4]!==z||j[5]!==w||j[6]!==v?(a=async e=>{e.preventDefault();try{P.mutate({username:v,password:w},{onSuccess:e=>{z("/home")},onError:e=>{console.error(e),D("Failed to connect to the server")}})}catch(e){console.error(e),D("Failed to connect to the server")}},j[3]=P,j[4]=z,j[5]=w,j[6]=v,j[7]=a):a=j[7];let T=a;j[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)("div",{className:"image-container",children:(0,r.jsx)("img",{src:Z,alt:"Logo"})}),j[8]=l):l=j[8];let W=`input-box ${v?"not-empty":""}`;j[9]===Symbol.for("react.memo_cache_sentinel")?(s=e=>_(e.target.value),j[9]=s):s=j[9],j[10]!==v?(c=(0,r.jsx)("input",{type:"text",className:"input-field",placeholder:"Identifiant",value:v,onChange:s,required:!0}),j[10]=v,j[11]=c):c=j[11],j[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,r.jsx)(S.Xws,{className:"icon"}),j[12]=d):d=j[12],j[13]!==W||j[14]!==c?(u=(0,r.jsxs)("div",{className:W,children:[c,d]}),j[13]=W,j[14]=c,j[15]=u):u=j[15];let F=`input-box ${w?"not-empty":""}`,R=E?"text":"password";return j[16]===Symbol.for("react.memo_cache_sentinel")?(f=e=>I(e.target.value),j[16]=f):f=j[16],j[17]!==w||j[18]!==R?(m=(0,r.jsx)("input",{type:R,className:"input-field",placeholder:"Mot de passe",value:w,onChange:f,required:!0}),j[17]=w,j[18]=R,j[19]=m):m=j[19],j[20]!==E?(p=E?(0,r.jsx)(S.tgn,{className:"toggle-icon icon",onClick:$}):(0,r.jsx)(S.dSq,{className:"toggle-icon icon",onClick:$}),j[20]=E,j[21]=p):p=j[21],j[22]!==m||j[23]!==p||j[24]!==F?(x=(0,r.jsxs)("div",{className:F,children:[m,p]}),j[22]=m,j[23]=p,j[24]=F,j[25]=x):x=j[25],j[26]!==O?(b=O&&(0,r.jsx)("p",{className:"error-message",children:O}),j[26]=O,j[27]=b):b=j[27],j[28]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)("button",{type:"submit",children:(0,r.jsx)("span",{children:"Se connecter"})}),j[28]=g):g=j[28],j[29]!==T||j[30]!==x||j[31]!==b||j[32]!==u?(y=(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"wrapper",children:(0,r.jsxs)("form",{onSubmit:T,children:[l,u,x,b,g]})})}),j[29]=T,j[30]=x,j[31]=b,j[32]=u,j[33]=y):y=j[33],y},{})},{element:(0,r.jsx)(()=>{let e=(0,o.s0)(),{pathname:t}=(0,o.TH)(),[a,l]=(0,n.useState)(t.startsWith("/grid")?"grid":"default"),[s,i]=(0,n.useState)(null),{data:c,isLoading:d,error:u}=p(""),{data:f,isLoading:m}=p("user_history"),x=(0,C.NL)(),b=h("jump",{onSuccess:async()=>{await x.invalidateQueries()}}),g=h("logout",{onSuccess:async()=>{await x.invalidateQueries(),e("/")}}),y=(0,n.useCallback)(e=>{b.mutate({node_id:e})},[]),j=e=>{y(e.id.toString())},v=async()=>{y("0"),g.mutate()},_=e=>i(e.currentTarget),w=()=>i(null),S=f?.data?.results?.[0].result.data??[],Z=S.length>3?S.slice(-2):S,k=S[S.length-1];return(0,r.jsx)(O.Z,{sx:{'& .MuiDrawer-root .MuiDrawer-paper, & [role="navigation"]':{"&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"}},children:(0,r.jsx)(I.c,{hideNavigation:!0,disableCollapsibleSidebar:!0,slots:{appTitle:()=>(0,r.jsxs)(D.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,r.jsx)(O.Z,{sx:{height:"40px",display:"flex",alignItems:"center"},children:(0,r.jsx)("img",{src:"/logo.svg",alt:"I3S",style:{height:"100%"}})}),(0,r.jsxs)(z.Z,{separator:(0,r.jsx)(A.Z,{sx:{color:"#b0bec5",fontSize:"18px"}}),"aria-label":"navigation history",sx:{bgcolor:"transparent",p:"4px 0","& .MuiBreadcrumbs-ol":{alignItems:"center"}},children:[(0,r.jsx)(L.Z,{component:o.rU,to:"grid"===a?"/grid":"/home",sx:{color:"#546e7a",fontSize:"14px",textDecoration:"none",p:"4px 8px",borderRadius:"2px","&:hover":{color:"#306DAD",bgcolor:"#f5f7ff"}},children:"grid"===a?"Grid":"Home"}),S.length>3&&(0,r.jsx)(F.Z,{onClick:_,size:"small",sx:{color:"#90a4ae",p:"2px","&:hover":{color:"#306DAD",bgcolor:"#f5f7ff"}},children:(0,r.jsx)(W.Z,{fontSize:"small"})}),Z.map(e=>(0,r.jsx)(L.Z,{component:"button",onClick:()=>j(e),sx:{color:e===k?"#306DAD":"#546e7a",fontSize:"14px",fontWeight:e===k?"500":"400",textDecoration:"none",p:"4px 8px",borderRadius:"2px",bgcolor:e===k?"#e8eaf6":"transparent",transition:"all 0.2s ease","&:hover":{color:"#306DAD",bgcolor:"#f5f7ff"}},children:e.pretty_name},e.id))]}),(0,r.jsx)(R.Z,{anchorEl:s,open:!!s,onClose:w,anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{sx:{borderRadius:"4px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",mt:"5vh",ml:"18vw"}},children:S.map(e=>(0,r.jsx)(P.Z,{onClick:()=>{j(e),w()},sx:{fontSize:"14px",color:e===k?"#306DAD":"#546e7a",bgcolor:e===k?"#f5f7ff":"transparent","&:hover":{bgcolor:"#e8eaf6",color:"#306DAD"}},children:e.pretty_name},e.id))})]}),toolbarActions:()=>(0,r.jsxs)(D.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,r.jsx)(H,{}),d?(0,r.jsx)($.Z,{sx:{color:"#90a4ae",fontSize:"14px"},children:"Loading..."}):u?(0,r.jsx)($.Z,{sx:{color:"#780906",fontSize:"14px"},children:"Error"}):(0,r.jsxs)(O.Z,{sx:{display:"flex",alignItems:"center",gap:1,p:"6px 12px",bgcolor:"#f5f7ff",borderRadius:"4px",transition:"background-color 0.2s ease","&:hover":{bgcolor:"#e8eaf6"}},children:[(0,r.jsx)($.Z,{sx:{color:"#306DAD",fontSize:"14px",fontWeight:"500"},children:c?.data?.username||"Unknown User"}),(0,r.jsxs)($.Z,{sx:{color:"#546e7a",fontSize:"14px"},children:["(",c?.data?.user_id||"N/A",")"]}),(0,r.jsxs)($.Z,{sx:{color:"#90a4ae",fontSize:"12px"},children:["v",c?.data["backend version"]||"N/A"]})]}),(0,r.jsx)(T.Z,{variant:"outlined",size:"small",onClick:v,sx:{ml:2},children:"Se deconnecter"})]})},children:(0,r.jsx)(E._,{style:{maxWidth:"100%"},children:(0,r.jsx)(o.j3,{})})})})},{}),children:[{path:"/home",element:(0,r.jsx)(()=>{let e,t,a,l,s,c,d,u,f,m,x,b,g,y,j,v,_,w,S,Z,C,N,I,E,A,D,z,L,W,F,U,K,B,H,V,q,J,Q,et,ea,er,en,el,es,eo,ei,ec,ed,eu,ef,em=(0,i.c)(107),ep=(0,o.s0)(),{data:eh,isLoading:ex}=p("");k("Home"),em[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],em[0]=e):e=em[0];let[eb,eg]=(0,n.useState)(e),[ey,ej]=(0,n.useState)(2),[ev,e_]=(0,n.useState)(null);em[1]===Symbol.for("react.memo_cache_sentinel")?(t=[],em[1]=t):t=em[1];let[ew,eS]=(0,n.useState)(t),[eZ,ek]=(0,n.useState)(eK);if((0,n.useState)(!1),(0,n.useState)("#ffffff"),em[2]!==ew||em[3]!==eb){let e;em[5]!==ew?(e=e=>ew.includes(e.endpoint),em[5]=ew,em[6]=e):e=em[6],a=eb.filter(e),em[2]=ew,em[3]=eb,em[4]=a}else a=em[4];let eC=Math.min(ey,a.length),eN=h("jump");if(em[7]!==eh||em[8]!==eZ?(l=()=>{if(eh?.data?.results){let e=eZ?eh.data.results:eh.data.results.filter(eB);eg(e),eS(()=>{let t,a=JSON.parse(localStorage.getItem("selectedViewsSaved"));return t=a&&0!==a.length?a.filter(t=>e.some(e=>e.endpoint===t)):e.map(eH),localStorage.setItem("selectedViewsSaved",JSON.stringify(t)),t});let t=JSON.parse(localStorage.getItem("viewOrder"))||[],a=e;t.length>0&&(a=[...e].sort((e,a)=>{let r=t.indexOf(e.endpoint),n=t.indexOf(a.endpoint);return(-1===r?1/0:r)-(-1===n?1/0:n)})),eg(a)}},s=[eh,eZ],em[7]=eh,em[8]=eZ,em[9]=l,em[10]=s):(l=em[9],s=em[10]),n.useEffect(l,s),em[11]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{let e=()=>ej(function(){let e=window.innerWidth;return e<900?1:e<1600?2:e<2100?3:4}());return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},d=[],em[11]=c,em[12]=d):(c=em[11],d=em[12]),n.useEffect(c,d),ex){let e,t;return em[13]===Symbol.for("react.memo_cache_sentinel")?(e={display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"#2e3b55"},em[13]=e):e=em[13],em[14]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(O.Z,{sx:e,children:(0,r.jsx)(M.Z,{sx:{color:"#1e88e5"}})}),em[14]=t):t=em[14],t}if(!eh||!eh.data||!eh.data.results){let e;return em[15]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(O.Z,{sx:{bgcolor:"#fff3e0",p:2,borderRadius:2,color:"#ef6c00",textAlign:"center"},children:"Error: Data is null."}),em[15]=e):e=em[15],e}em[16]===Symbol.for("react.memo_cache_sentinel")?(u=e=>e_(e.currentTarget),em[16]=u):u=em[16];let eI=u;em[17]===Symbol.for("react.memo_cache_sentinel")?(f=()=>e_(null),em[17]=f):f=em[17];let eE=f;em[18]!==eZ||em[19]!==eb?(m=e=>{eS(t=>{let a=t.includes(e)?t.filter(t=>t!==e):[...t,e];return localStorage.setItem("selectedViewsSaved",JSON.stringify(a)),0===eb.filter(eV).filter(e=>a.includes(e.endpoint)).length&&eZ&&(ek(!1),localStorage.setItem("showTechnicalViews",JSON.stringify(!1))),a})},em[18]=eZ,em[19]=eb,em[20]=m):m=em[20];let eA=m;em[21]!==eh?.data?.results?(x=()=>{ek(e=>{let t=!e;localStorage.setItem("showTechnicalViews",JSON.stringify(t));let a=(eh?.data?.results?.filter(eq)||[]).map(eJ);return eS(e=>{let r;return r=t?[...new Set([...e,...a])]:e.filter(e=>!a.includes(e)),localStorage.setItem("selectedViewsSaved",JSON.stringify(r)),r}),t})},em[21]=eh?.data?.results,em[22]=x):x=em[22];let eO=x;em[23]!==eb.length?(b=()=>ej(e=>Math.min(e+1,eb.length)),em[23]=eb.length,em[24]=b):b=em[24];let eD=b;em[25]===Symbol.for("react.memo_cache_sentinel")?(g=()=>ej(eQ),em[25]=g):g=em[25];let ez=g;em[26]===Symbol.for("react.memo_cache_sentinel")?(y={padding:{xs:"8px",sm:"16px",md:"40px"},maxWidth:"100%",margin:"0 auto",bgcolor:"#2e3b55",minHeight:"100vh",zIndex:1},em[26]=y):y=em[26],em[27]===Symbol.for("react.memo_cache_sentinel")?(j={xs:"column",sm:"row"},em[27]=j):j=em[27],em[28]===Symbol.for("react.memo_cache_sentinel")?(v={display:"flex",flexDirection:j,justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},mb:{xs:2,sm:4},gap:{xs:2,sm:0}},em[28]=v):v=em[28],em[29]===Symbol.for("react.memo_cache_sentinel")?(_={display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2},alignItems:{xs:"flex-start",sm:"center"},width:{xs:"100%",sm:"auto"}},em[29]=_):_=em[29],em[30]===Symbol.for("react.memo_cache_sentinel")?(w={display:"flex",alignItems:"center",gap:1},em[30]=w):w=em[30],em[31]===Symbol.for("react.memo_cache_sentinel")?(S={xs:36,sm:40},em[31]=S):S=em[31],em[32]===Symbol.for("react.memo_cache_sentinel")?(Z=(0,r.jsx)(T.Z,{variant:"outlined",onClick:eI,sx:{minWidth:S,borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px 8px",sm:"6px 12px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},children:"Views"}),em[32]=Z):Z=em[32];let eL=!!ev;if(em[33]===Symbol.for("react.memo_cache_sentinel")?(C={sx:{maxHeight:500,maxWidth:400,overflowY:"auto",width:"auto",padding:1,borderRadius:"8px"}},em[33]=C):C=em[33],em[34]!==eA||em[35]!==ew||em[36]!==eb){let e;em[38]!==eA||em[39]!==ew?(e=(e,t)=>(0,r.jsx)(P.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingRight:1,fontSize:"14px",color:"technical"===e.response_type?"#283593":"#424242",backgroundColor:"technical"===e.response_type?"#fff9c4":"transparent",borderRadius:"8px","&:hover":{backgroundColor:"technical"===e.response_type?"#fff8b0":"#e8eaf6"}},children:(0,r.jsxs)(O.Z,{sx:{display:"flex",alignItems:"center",flexGrow:1,borderRadius:"18px"},onClick:()=>eA(e.endpoint),children:[(0,r.jsx)(G.Z,{checked:ew.includes(e.endpoint),sx:{color:"#90caf9","&.Mui-checked":{color:"#90caf9"}}}),(0,r.jsx)(Y.Z,{primary:e.pretty_name})]})}),em[38]=eA,em[39]=ew,em[40]=e):e=em[40],N=eb.map(e),em[34]=eA,em[35]=ew,em[36]=eb,em[37]=N}else N=em[37];em[41]!==ev||em[42]!==eL||em[43]!==N?(I=(0,r.jsxs)(O.Z,{sx:w,children:[Z,(0,r.jsx)(R.Z,{anchorEl:ev,open:eL,onClose:eE,PaperProps:C,children:N})]}),em[41]=ev,em[42]=eL,em[43]=N,em[44]=I):I=em[44],em[45]===Symbol.for("react.memo_cache_sentinel")?(E={display:"flex",alignItems:"center",gap:1},em[45]=E):E=em[45],em[46]===Symbol.for("react.memo_cache_sentinel")?(A={color:"#90caf9","&.Mui-checked":{color:"#90caf9"},padding:{xs:"4px",sm:"6px"}},em[46]=A):A=em[46],em[47]!==eO||em[48]!==eZ?(D=(0,r.jsx)(G.Z,{checked:eZ,onChange:eO,sx:A}),em[47]=eO,em[48]=eZ,em[49]=D):D=em[49],em[50]===Symbol.for("react.memo_cache_sentinel")?(z=(0,r.jsx)($.Z,{sx:{color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:"Show Technical Views"}),em[50]=z):z=em[50],em[51]!==D?(L=(0,r.jsxs)(O.Z,{sx:E,children:[D,z]}),em[51]=D,em[52]=L):L=em[52],em[53]===Symbol.for("react.memo_cache_sentinel")?(W={display:"flex",alignItems:"center",gap:1},em[53]=W):W=em[53];let eP=1===ey;em[54]===Symbol.for("react.memo_cache_sentinel")?(F={xs:36,sm:40},em[54]=F):F=em[54],em[55]===Symbol.for("react.memo_cache_sentinel")?(U={minWidth:F,borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px",sm:"6px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},K=(0,r.jsx)(ee.Z,{fontSize:"small"}),em[55]=U,em[56]=K):(U=em[55],K=em[56]),em[57]!==eP?(B=(0,r.jsx)(T.Z,{variant:"outlined",onClick:ez,disabled:eP,sx:U,children:K}),em[57]=eP,em[58]=B):B=em[58],em[59]===Symbol.for("react.memo_cache_sentinel")?(H={color:"#ffffff",fontWeight:"bold",fontSize:{xs:"0.875rem",sm:"1rem"}},em[59]=H):H=em[59],em[60]!==ey?(V=(0,r.jsx)($.Z,{sx:H,children:ey}),em[60]=ey,em[61]=V):V=em[61];let e$=ey===eb.length;if(em[62]===Symbol.for("react.memo_cache_sentinel")?(q={xs:36,sm:40},em[62]=q):q=em[62],em[63]===Symbol.for("react.memo_cache_sentinel")?(J={minWidth:q,borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px",sm:"6px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},Q=(0,r.jsx)(X.Z,{fontSize:"small"}),em[63]=J,em[64]=Q):(J=em[63],Q=em[64]),em[65]!==eD||em[66]!==e$?(et=(0,r.jsx)(T.Z,{variant:"outlined",onClick:eD,disabled:e$,sx:J,children:Q}),em[65]=eD,em[66]=e$,em[67]=et):et=em[67],em[68]!==B||em[69]!==V||em[70]!==et?(ea=(0,r.jsxs)(O.Z,{sx:W,children:[B,V,et]}),em[68]=B,em[69]=V,em[70]=et,em[71]=ea):ea=em[71],em[72]!==I||em[73]!==L||em[74]!==ea?(er=(0,r.jsxs)(O.Z,{sx:_,children:[I,L,ea]}),em[72]=I,em[73]=L,em[74]=ea,em[75]=er):er=em[75],em[76]!==ep?(en=()=>ep("/add-node"),em[76]=ep,em[77]=en):en=em[77],em[78]===Symbol.for("react.memo_cache_sentinel")?(el={xs:36,sm:40},em[78]=el):el=em[78],em[79]===Symbol.for("react.memo_cache_sentinel")?(es={minWidth:el,borderWidth:"2px",borderColor:"#90caf9",color:"#90caf9",fontSize:{xs:"0.75rem",sm:"0.875rem"},padding:{xs:"4px 8px",sm:"6px 12px"},"&:hover":{borderColor:"#42a5f5",bgcolor:"#37474f"}},em[79]=es):es=em[79],em[80]!==en?(eo=(0,r.jsx)(T.Z,{variant:"outlined",onClick:en,sx:es,children:"Add new node"}),em[80]=en,em[81]=eo):eo=em[81],em[82]!==er||em[83]!==eo?(ei=(0,r.jsxs)(O.Z,{sx:v,children:[er,eo]}),em[82]=er,em[83]=eo,em[84]=ei):ei=em[84],em[85]===Symbol.for("react.memo_cache_sentinel")?(ec={display:"flex",flexWrap:"wrap",gap:{xs:2,sm:4}},em[85]=ec):ec=em[85],em[86]!==ey||em[87]!==eA||em[88]!==eN||em[89]!==ep||em[90]!==eC||em[91]!==ew||em[92]!==eb){let e,t;em[94]!==ew?(e=e=>ew.includes(e.endpoint),em[94]=ew,em[95]=e):e=em[95],em[96]!==ey||em[97]!==eA||em[98]!==eN||em[99]!==ep||em[100]!==eC?(t=(e,t)=>(0,r.jsx)(O.Z,{sx:{width:{xs:"100%",sm:`calc(${100/Math.min(ey,2)}% - 16px)`,md:`calc(${100/eC}% - 32px)`}},children:(0,r.jsx)(eU,{view:e,onClick:t=>{t.defaultPrevented||(e.endpoint.endsWith("class_attribute_field")?(eN.mutate({node:e.result?.dialect.split("@")[1]}),ep(`/add-node/form/${e.result?.dialect.split("@")[0]}`)):ep(`/information/${e.endpoint.replaceAll(" ","_")}`))},handleViewToggle:eA})}),em[96]=ey,em[97]=eA,em[98]=eN,em[99]=ep,em[100]=eC,em[101]=t):t=em[101],ed=eb.filter(e).map(t),em[86]=ey,em[87]=eA,em[88]=eN,em[89]=ep,em[90]=eC,em[91]=ew,em[92]=eb,em[93]=ed}else ed=em[93];return em[102]!==ed?(eu=(0,r.jsx)(O.Z,{sx:ec,children:ed}),em[102]=ed,em[103]=eu):eu=em[103],em[104]!==ei||em[105]!==eu?(ef=(0,r.jsxs)(O.Z,{sx:y,className:"home-page",children:[ei,eu]}),em[104]=ei,em[105]=eu,em[106]=ef):ef=em[106],ef},{})},{path:"/information/:viewId",element:(0,r.jsx)(()=>{let e,t,a,n,l,s,c=(0,i.c)(11),{viewId:d}=(0,o.UO)(),u=(0,o.s0)();return k(`Information for View ${d}`),c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("h1",{children:"Content:"}),c[0]=e):e=c[0],c[1]!==d?(t=(0,r.jsx)(ez,{viewId:d}),c[1]=d,c[2]=t):t=c[2],c[3]!==u?(a=()=>{u("/home")},c[3]=u,c[4]=a):a=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(et.Z,{}),c[5]=n):n=c[5],c[6]!==a?(l=(0,r.jsx)(F.Z,{className:"close-button",onClick:a,"aria-label":"close",children:n}),c[6]=a,c[7]=l):l=c[7],c[8]!==t||c[9]!==l?(s=(0,r.jsxs)("div",{className:"information-page",children:[e,t,l]}),c[8]=t,c[9]=l,c[10]=s):s=c[10],s},{})},{path:"/add-node",element:(0,r.jsx)(()=>{k("Add node");let e=(0,o.s0)(),{data:t,isLoading:a,error:l,refetch:s}=p("bnode_class_distribution"),i=(0,C.NL)(),[c,d]=(0,n.useState)([]),[u,f]=(0,n.useState)([]),[m,x]=(0,n.useState)(new Set),[b,g]=(0,n.useState)(""),[y,j]=(0,n.useState)(!1),[v,_]=(0,n.useState)(()=>{try{let e=localStorage.getItem("favorites"),t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}}),w=h("jump",{onSuccess:async()=>{await i.invalidateQueries()}}),S=async e=>{let t=u.find(t=>t.endsWith(e));try{let e=await fetch(`https://localhost:8080/api/add_node?BNodeClass=${encodeURIComponent(t)}`,{credentials:"include",headers:{Accept:"application/json, text/plain, */*"}}),a=await e.json(),r=a.results?.[0]?.result?.data.id;await w.mutateAsync({node_id:r})}catch(e){throw console.error(`Error during handleCreateAndJump for ${t}:`,e),e}},Z=async t=>{try{await S(t);let a=u.find(e=>e.endsWith(t));e(`/add-node/form/${a}`)}catch(e){console.error("Navigation skipped due to error:",e)}},N=e=>{_(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};(0,n.useEffect)(()=>{localStorage.setItem("favorites",JSON.stringify(v))},[v]),(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e?JSON.stringify(e,null,"tab"===t?"	":t):""},[]),(0,n.useEffect)(()=>{if(t)try{let e=(t?.data?.results?.[0]?.result?.data||[]).filter(e=>Object.keys(e)[0]),a=e.map(e=>Object.keys(e)[0].split(".").pop()),r=e.map(e=>Object.keys(e)[0]);d(a),f(r)}catch(e){console.error("Failed to parse class names:",e)}},[t]);let I=async e=>{let t=`persisting:${e}`,a=localStorage.getItem(t);if(null!==a)return"true"===a;try{let t=await fetch(`https://localhost:8080/api/class_information?classForm=${encodeURIComponent(e)}`,{credentials:"include",headers:{Accept:"application/json, text/plain, */*"}}),a=await t.json(),r=a?.results?.[0]?.result?.data;return r?.BusinessNode!==void 0&&r.BusinessNode}catch(t){return console.error(`Error fetching info for ${e}:`,t),!1}};return(0,n.useEffect)(()=>{u&&0!==u.length&&(async()=>{let e=new Set;await Promise.all(u.map(async t=>{await I(t)&&e.add(t)})),x(e)})()},[u]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(eG.Z,{in:!y,timeout:300,children:(0,r.jsxs)(eY.Z,{component:eX.Z,elevation:3,sx:{p:4,position:"relative",bgcolor:"#f8f9fa",maxWidth:"100%",width:"100%",minHeight:"80vh",overflow:"hidden"},children:[(0,r.jsx)($.Z,{variant:"h3",component:"h1",gutterBottom:!0,sx:{color:"#2c3e50",textAlign:"center",fontWeight:600,pb:2,borderBottom:"3px solid #3498db"},children:"Add a new node"}),(0,r.jsx)(O.Z,{sx:{display:"flex",justifyContent:"center",mb:3,width:"100%"},children:(0,r.jsx)(U.Z,{fullWidth:!0,variant:"outlined",placeholder:"Search class name...",value:b,onChange:e=>g(e.target.value),sx:{maxWidth:400},InputProps:{startAdornment:(0,r.jsx)(e0.Z,{position:"start",children:(0,r.jsx)(e5.Z,{})})}})}),v.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($.Z,{variant:"h4",component:"h2",sx:{color:"#34495e",my:3,fontWeight:500},children:"Favorites (Persistent Only)"}),(0,r.jsx)(e1.Z,{container:!0,spacing:2,sx:{mt:2,justifyContent:"center"},children:v.map(e=>{let t=u.find(t=>t.endsWith(e));return{short:e,full:t}}).filter(e=>{let{full:t}=e;return t&&m.has(t)}).filter(e=>{let{short:t}=e;return t.toLowerCase().includes(b.toLowerCase())}).map(e=>{let{short:t}=e;return(0,r.jsx)(e1.Z,{item:!0,children:(0,r.jsx)(Q.Z,{onClick:()=>Z(t),sx:{minWidth:120,cursor:"pointer",transition:"all 0.2s ease","&:hover":{bgcolor:"#f0f8ff",transform:"translateY(-2px)",boxShadow:3}},children:(0,r.jsxs)(J.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",p:2,"&:last-child":{pb:2}},children:[(0,r.jsx)(O.Z,{onClick:e=>{e.stopPropagation(),N(t)},sx:{mr:1,display:"inline-flex",cursor:"pointer"},children:(0,r.jsx)(e2.Z,{sx:{color:"#f1c40f"}})}),(0,r.jsx)(O.Z,{children:t})]})})},t)})})]}),(0,r.jsx)($.Z,{variant:"h4",component:"h2",sx:{color:"#34495e",my:3,fontWeight:500},children:"All persisting classes"}),(0,r.jsx)(e1.Z,{container:!0,spacing:2,sx:{mt:2,justifyContent:"center"},children:c.map((e,t)=>({short:e,full:u[t]})).filter(e=>{let{full:t}=e;return m.has(t)}).filter(e=>{let{short:t}=e;return t.toLowerCase().includes(b.toLowerCase())}).map(e=>{let{short:t}=e;return(0,r.jsx)(e1.Z,{item:!0,children:(0,r.jsx)(Q.Z,{sx:{minWidth:120,cursor:"pointer",transition:"all 0.2s ease","&:hover":{bgcolor:"#f0f8ff",transform:"translateY(-2px)",boxShadow:3}},children:(0,r.jsxs)(J.Z,{onClick:()=>Z(t),sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",p:2,"&:last-child":{pb:2}},children:[(0,r.jsx)(O.Z,{onClick:e=>{e.stopPropagation(),N(t)},sx:{mr:1,display:"inline-flex",cursor:"pointer"},children:v.includes(t)?(0,r.jsx)(e2.Z,{sx:{color:"#f1c40f"}}):(0,r.jsx)(e4.Z,{sx:{color:"#ccc"}})}),(0,r.jsx)(O.Z,{children:t})]})})},t)})}),(0,r.jsxs)(O.Z,{sx:{position:"absolute",top:10,right:10,display:"flex",gap:1,zIndex:1e3},children:[(0,r.jsx)(F.Z,{onClick:()=>{Object.keys(localStorage).filter(e=>e.startsWith("persisting:")).forEach(e=>localStorage.removeItem(e)),x(new Set),s()},"aria-label":"reload",title:"Reload all classes",sx:{"&:hover":{color:"#3498db"}},children:(0,r.jsx)(e3.Z,{})}),(0,r.jsx)(F.Z,{onClick:()=>{j(!0),setTimeout(()=>e("/home"),300)},"aria-label":"close",title:"Close",sx:{"&:hover":{color:"#e74c3c"}},children:(0,r.jsx)(et.Z,{})})]})]})})})},{})},{path:"/add-node/form/:classForm",element:(0,r.jsx)(()=>{let e,t,a,l,s,c,d,u,f,m,x,b,g,y,j=(0,i.c)(28),{classForm:v}=(0,o.UO)(),_=(0,o.s0)(),{data:w,isLoading:S,error:Z}=p("class_attribute_field"),k=w?.data?.node_id||null,C=v.split(".").pop(),N=h("export_csv"),I=(0,n.useRef)();if(S){let e;return j[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(O.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:(0,r.jsx)(M.Z,{})}),j[0]=e):e=j[0],e}if(Z){let e,t=Z.message||"Unknown error";return j[1]!==t?(e=(0,r.jsxs)($.Z,{color:"error",children:["Error loading form fields: ",t]}),j[1]=t,j[2]=e):e=j[2],e}j[3]===Symbol.for("react.memo_cache_sentinel")?(e={p:3,position:"relative"},j[3]=e):e=j[3],j[4]!==_?(t=()=>_(-1),j[4]=_,j[5]=t):t=j[5],j[6]===Symbol.for("react.memo_cache_sentinel")?(a={position:"absolute",top:16,right:16},l=(0,r.jsx)(e7.Z,{}),j[6]=a,j[7]=l):(a=j[6],l=j[7]),j[8]!==t?(s=(0,r.jsx)(F.Z,{className:"close-button",onClick:t,"aria-label":"close",sx:a,children:l}),j[8]=t,j[9]=s):s=j[9];let E=tf(k,C);return j[10]!==k?(c={id:k},j[10]=k,j[11]=c):c=j[11],j[12]!==tK||j[13]!==k||j[14]!==E||j[15]!==c?(d=(0,r.jsx)(tK,{ref:I,fieldKey:E,rootId:k,isRoot:!0,field:c}),j[12]=tK,j[13]=k,j[14]=E,j[15]=c,j[16]=d):d=j[16],j[17]===Symbol.for("react.memo_cache_sentinel")?(u={position:"absolute",bottom:16,right:16},j[17]=u):u=j[17],j[18]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(e8.Z,{}),f=(0,r.jsx)(tB.Z,{}),j[18]=f,j[19]=m):(f=j[18],m=j[19]),j[20]!==N||j[21]!==C||j[22]!==k?(x={icon:f,name:"Exporter",onClick:async()=>{let e=await N.mutateAsync({node_id:k,includeAllFields:!0,maxDepth:4}),t=new Blob([e?.data?.results?.[0]?.result?.data],{type:"text/csv"});(0,tV.saveAs)(t,`${C}.csv`)}},j[20]=N,j[21]=C,j[22]=k,j[23]=x):x=j[23],j[24]===Symbol.for("react.memo_cache_sentinel")?(b={icon:(0,r.jsx)(X.Z,{}),name:"Ajouter une nouvelle entr\xe9e"},g={icon:(0,r.jsx)(tH.Z,{}),name:"Supprimer"},j[24]=b,j[25]=g):(b=j[24],g=j[25]),j[26]!==x?(y=(0,r.jsx)(e6.Z,{ariaLabel:"SpeedDial playground example",sx:u,hidden:!1,icon:m,children:[x,b,g].map(tq)}),j[26]=x,j[27]=y):y=j[27],(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(eY.Z,{className:"form-page",component:eX.Z,elevation:3,sx:e,children:[s,(0,r.jsxs)($.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:["Form for: ",tu(C)]}),d]}),y]})},{})}]}]}],{future:{v7_fetcherPersist:!0,v7_normalizeFormMethod:!0,v7_partialHydration:!0,v7_relativeSplatPath:!0,v7_skipActionErrorRevalidation:!0}});var tQ=a(20388),tG=a(77300);let tY=new tQ.S;l.createRoot(document.getElementById("root")).render((0,r.jsx)(n.StrictMode,{children:(0,r.jsx)(s.Z,{injectFirst:!0,children:(0,r.jsxs)(C.aH,{client:tY,children:[(0,r.jsx)(o.pG,{router:tJ}),(0,r.jsx)(tG.t,{buttonPosition:"bottom-left",initialIsOpen:!1})]})})}))}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var l=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(l.exports,l,l.exports,a),l.loaded=!0,l.exports}a.m=e,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;a.t=function(r,n){if(1&n&&(r=this(r)),8&n||"object"==typeof r&&r&&(4&n&&r.__esModule||16&n&&"function"==typeof r.then))return r;var l=Object.create(null);a.r(l);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>{s[e]=()=>r[e]});return s.default=()=>r,a.d(l,s),l}})(),a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,r)=>(a.f[r](e,t),t),[])),a.u=e=>"static/js/async/"+e+"."+({1033:"17f6111d",109:"18832088",115:"0a332a65",1215:"82e721f0",1228:"6c2b16a2",1238:"7b9e0d98",1264:"172e531a",1284:"e6526ff9",1324:"f5066d94",1341:"50bd9b07",137:"b6bd5f18",1385:"50a3be13",1450:"0203df49",1498:"675c1e0d",1527:"8f7d189d",1581:"31c2e037",1595:"2c0b888b",1661:"98fedb5f",1736:"3ab49497",175:"94f042b9",1782:"077992d8",1843:"d7f813bf",1971:"c1c48260",1991:"7dc6f2ac",2012:"fadb1ac3",2014:"5a4fe407",2017:"fc9e679f",202:"642761ec",2020:"48baef7e",2039:"4a3f4043",2050:"25eeedd6",21:"19cc5208",212:"1a88be6e",2155:"cc533dc2",2167:"53b3a372",2168:"162ad6cd",2229:"081c19f0",2237:"be7bce0e",2280:"51f186c1",2334:"06952213",2357:"ea194e41",2385:"41b5032d",2408:"372d80a9",2422:"c66288b1",2440:"08f76bee",2469:"001c98e2",2499:"a6ac0a4e",2571:"1a76d47f",2584:"6b9653c6",2610:"650ab345",2613:"9c8be591",2616:"a4c33fe2",2622:"be9a50ac",2660:"ca101a3a",2708:"4dd8ecd6",2733:"16d45216",2787:"2b8afb23",2812:"a6fa7bfe",2835:"ecf44374",2855:"ef7378af",2860:"c28dec26",2953:"35c0cf75",2957:"7b675c65",2970:"dcf7d9c2",2976:"8a2e6e65",2980:"d25476fa",3013:"1a72b362",3033:"a7410b77",3054:"50d469d1",3063:"ea25ade3",3072:"8dac993c",308:"d7b500f6",3144:"9761ad39",3206:"6f5ac6a9",3245:"3ed7d9bd",3269:"e2d5e929",3336:"fd37ebcd",3346:"2996d696",3409:"df9c4d5c",3417:"b158ea82",3445:"01b0eee1",3447:"ac01d96b",3561:"ce24be3b",3566:"c0220ea3",3581:"6265d624",3594:"914736d8",3598:"70950ca3",3685:"bdb04950",3686:"d70966ae",3717:"589e021b",3764:"58987926",3866:"399f2583",3898:"15a143ea",3936:"00d9571f",3976:"dbca30cb",399:"f71aa3e7",4137:"4e29fff0",4143:"39faedfd",4161:"f92abc5f",4181:"6cb7d27c",4198:"e6567842",4236:"4d0777d8",424:"abb25f5e",4246:"b45faada",4324:"b2b121de",4348:"0c97b272",4378:"2f5e523d",4394:"866e0dcd",4434:"a1c62a07",4437:"4f00e7d6",4565:"37e12ecb",4583:"9dee8b9a",4654:"5331823b",4663:"847fadd3",4682:"6c4db126",4759:"a487fd84",479:"f26f6b45",4793:"c88a55bf",4846:"942b1f8a",4876:"879f412d",488:"c7da8f74",4883:"9842d895",4896:"9e62a43f",493:"65e3fb8a",4947:"7f1a1d42",504:"98ab29eb",5041:"4cc98800",5117:"5499db7f",5183:"a63b90ad",5208:"0c2fa6b5",5243:"793c2351",5253:"b0804947",5265:"349dcd95",528:"7f1e8bdf",5286:"ad285f17",5306:"42e6b653",535:"93bc457c",5379:"17170744",5401:"16a403fc",5468:"607dced2",5498:"562f33c2",5502:"73fb14d8",5556:"1b5eaefa",5557:"57624981",5575:"7bc10500",5610:"0492760a",562:"0b950923",5621:"5a889a50",5697:"2585150f",5764:"fbf272f7",5768:"1d21a87e",5830:"4d5e1352",5892:"bb3b49f8",5902:"4e20bb03",5928:"83613abb",5942:"4dd8a5be",5987:"e6fbd9a1",601:"f0b0c677",6023:"6111a6f7",6029:"648ae64e",6067:"88326a20",6126:"e4a0e87d",6225:"234d94eb",6263:"ebda8212",6265:"5fa9cffe",627:"7ab95313",6272:"947e1439",6290:"1b41690e",6295:"e921d8ca",6358:"83481e93",637:"1301966b",638:"421cc010",6396:"546d781d",6428:"1c5bd5c2",6442:"aa33b13a",6455:"9e714990",6485:"5a7e4ab8",6554:"e9bbe581",6558:"c7ffd25c",6606:"4b6acd55",6692:"a1b93ee9",6722:"dac4eb53",6732:"8ba5debc",6739:"2eafe7cc",6751:"da426d3b",6801:"0dbe1a34",6818:"a05553ec",6861:"d1342653",6890:"36016087",6912:"e4126988",6940:"7e01b805",7028:"29270ff4",7098:"0394a3b8",7129:"46e5a880",7167:"eec2add3",7202:"efcae193",7225:"ce340aac",7234:"9ca926e8",725:"61a51fc7",7279:"0dd2eb29",7336:"a1525357",7388:"98969cb1",7398:"cf0b0d64",7440:"29665836",7503:"ce6d1372",7566:"fa2ae713",7584:"617dcb1f",7666:"ff54bbce",7680:"aa6e4ce6",7706:"ee861630",7742:"69927333",78:"5b8e4c05",7829:"174a5a9c",7830:"f9f25511",7833:"827cc1a4",7838:"0a5b7cb7",7883:"e2eb032f",7886:"9c03e319",7893:"ef8a2281",7911:"1e067a60",7955:"03d4f38f",8033:"a8da6ec0",807:"18610cdb",8085:"417a35e2",8106:"348c4e05",8125:"6fd302d9",8126:"6791bf5b",8177:"7287e8a0",8235:"ece8289d",8244:"7ae6c967",8281:"77d35550",8289:"71f97a4e",8319:"28e98353",8325:"26eff9e4",8329:"6e9cfc28",8453:"c5ab1e7c",8479:"e222cd71",8483:"e447ade8",8486:"e59274b5",8532:"2cdce6e4",8587:"9c07571b",8615:"0f704e94",8652:"fae82fca",8674:"4dc7a38a",8675:"a52c9010",8679:"2e565919",8681:"0c1b1796",8682:"9f54b55b",8687:"082746b0",8721:"46d0a01e",8824:"a9959219",8830:"768aafde",8863:"b963ad3c",899:"1f008547",8994:"524f7932",9014:"16cc3052",9042:"67556784",9059:"9d355e13",9139:"43f6fcd9",9175:"874b4bbe",9214:"f0050e8d",9226:"af62836b",9230:"3c63ddda",925:"083c6659",9260:"88f16f77",928:"a5be9560",9301:"ea78ec8f",9354:"b53c8118",9366:"83e9fd9b",9394:"a3386079",940:"d90ad1fc",9428:"405c1d6f",9484:"168ca12c",9549:"184b3493",9555:"f2088478",9582:"de81b9bc",9586:"8a68bcb5",9590:"86c0ea9a",9594:"effdc72a",970:"650dd1bb",9760:"b56661f2",9790:"49b3f870",9854:"da9e39b6",9942:"758d285a",9973:"d65b0cec"})[e]+".js",a.miniCssF=e=>""+e+".css",a.h=()=>"016d7b558b7759b3",a.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="login_page:";a.l=function(r,n,l,s){if(e[r])return void e[r].push(n);if(void 0!==l)for(var o,i,c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+l){o=u;break}}o||(i=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+l),o.src=r),e[r]=[n];var f=function(t,a){o.onerror=o.onload=null,clearTimeout(m);var n=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach(function(e){return e(a)}),t)return t(a)},m=setTimeout(f.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=f.bind(null,o.onerror),o.onload=f.bind(null,o.onload),i&&document.head.appendChild(o)}})(),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e=[];a.O=(t,r,n,l)=>{if(r){l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[r,n,l];return}for(var o=1/0,s=0;s<e.length;s++){for(var r=e[s][0],n=e[s][1],l=e[s][2],i=!0,c=0;c<r.length;c++)(!1&l||o>=l)&&Object.keys(a.O).every(e=>a.O[e](r[c]))?r.splice(c--,1):(i=!1,l<o&&(o=l));if(i){e.splice(s--,1);var d=n();void 0!==d&&(t=d)}}return t}})(),a.p="/",(()=>{a.b=document.baseURI||self.location.href;var e={2487:0};a.f.j=function(t,r){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var l=new Promise((a,r)=>n=e[t]=[a,r]);r.push(n[2]=l);var s=a.p+a.u(t),o=Error();a.l(s,function(r){if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var l=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+l+": "+s+")",o.name="ChunkLoadError",o.type=l,o.request=s,n[1](o)}},"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,r)=>{var n,l,s=r[0],o=r[1],i=r[2],c=0;if(s.some(t=>0!==e[t])){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(i)var d=i(a)}for(t&&t(r);c<s.length;c++)l=s[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(d)},r=self.webpackChunklogin_page=self.webpackChunklogin_page||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=a.O(void 0,["2072","3361","2118","798"],function(){return a(88156)});r=a.O(r)})();